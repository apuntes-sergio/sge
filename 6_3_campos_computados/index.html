<!DOCTYPE html><html lang="es" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Creaci贸n y uso de campos computados en modelos de Odoo">
      
      
        <meta name="author" content="Sergio Rey Mart铆nez">
      
      
        <link rel="canonical" href="https://sergio-apuntes.github.io/sge/6_3_campos_computados/">
      
      
        <link rel="prev" href="../6_2_campos_basico_relacionales/">
      
      
        <link rel="next" href="../6_4_excepciones_logs/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Campos computados - Apuntes Sistemas de Gesti贸n Empresarial</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CDejaVu+Sans+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"DejaVu Sans Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#campos-computados" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="Apuntes Sistemas de Gesti贸n Empresarial" class="md-header__button md-logo" aria-label="Apuntes Sistemas de Gesti贸n Empresarial" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apuntes Sistemas de Gesti贸n Empresarial
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Campos computados
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange" aria-label="Cambiar a modo oscuro" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange" aria-label="Cambiar a modo claro" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B煤squeda" placeholder="B煤squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b煤squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci贸n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Apuntes Sistemas de Gesti贸n Empresarial" class="md-nav__button md-logo" aria-label="Apuntes Sistemas de Gesti贸n Empresarial" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    Apuntes Sistemas de Gesti贸n Empresarial
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href=".." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Presentaci贸n
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Presentaci贸n
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    1 ERP
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    1 ERP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_1_IntroduccionERP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.1. Introducci贸n a la Gesti贸n Empresarial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_2_Sistemas_Informacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.2. Inform谩tica en la Gesti贸n Empresarial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_3_Sistemas_Clave/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.3. Sistemas Clave en la Empresa
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_4_ERP_CRM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.4. ERP-CRM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_5_ERP_actuales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.5. Historia y caracter铆sticas de los ERP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_6_ERP_Libres_Privativos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.6. Elecci贸n de ERP. Aspectos a tener en cuenta.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_7_CRM_Actuales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.7. CRM Actual
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_8_Modelos_Servicio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.8. Modelos de Servicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_9_Terminolog%C3%ADa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.8. Terminolog铆a ERP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    2 Python
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    2 Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_1_IntroduccionPython/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci贸n a Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_2_ControlFlujo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Estructuras condicionales y control de flujo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_3_EstructurasDatos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Estructuras de datos o colecciones en Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_4_FuncionesExcepciones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funciones y manejo de excepciones
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_5_ModulosPaquetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gesti贸n de m贸dulos, paquetes y entornos virtuales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_6_ProgramacionOrientadaObjetos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Programaci贸n Orientada a Objetos (POO)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3 Git
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3 Git
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_1_introduccion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci贸n a Git
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_2_ramas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ramas en Git
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_3_remotos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Repositorios remotos. Github.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    4 Docker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    4 Docker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_1_introduccion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci贸n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_2_docker_basico/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker b谩sico
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_3_imagenes_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Im谩genes Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_4_redes_volumenes_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redes y Vol煤menes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_5_docker_compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orquestaci贸n de contenedores con Docker Compose
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    5 Introducci贸n a Odoo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    5 Introducci贸n a Odoo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_1_introduccion_odoo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci贸n a Odoo.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_2_instalacion_odoo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instalaci贸n de Odoo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_3_arquitectura_odoo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arquitectura de Odoo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_4_primer_modulo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Primer M贸dulo en Odoo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6 Desarrollo m贸dulo ejemplo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    6 Desarrollo m贸dulo ejemplo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_1_creacion_modelo_basico/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creaci贸n de un modelo b谩sico, vistas, men煤s y actions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_2_campos_basico_relacionales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Campos b谩sicos y relacionales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Campos computados
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Campos computados
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-es-un-campo-computado" class="md-nav__link">
    <span class="md-ellipsis">
      
        驴Qu茅 es un Campo Computado?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#campo-computado-sin-almacenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        Campo Computado Sin Almacenamiento
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Campo Computado Sin Almacenamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definicion-del-campo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definici贸n del Campo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementacion-del-metodo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementaci贸n del M茅todo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caracteristicas-de-este-campo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Caracter铆sticas de este Campo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verificaci贸n
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#campo-computado-con-almacenamiento-y-dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      
        Campo Computado con Almacenamiento y Dependencias
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Campo Computado con Almacenamiento y Dependencias">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#caso-de-uso-fecha-fin-de-sprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Caso de Uso: Fecha Fin de Sprint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacion-en-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verificaci贸n en Base de Datos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comportamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comportamiento
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparativa-con-y-sin-almacenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparativa: Con y Sin Almacenamiento
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solucion-de-problemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Soluci贸n de Problemas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tu-turno-gestor-de-restaurante" class="md-nav__link">
    <span class="md-ellipsis">
      
        З Tu Turno: Gestor de Restaurante
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="З Tu Turno: Gestor de Restaurante">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objetivos-y-contexto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objetivos y Contexto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pasos-a-realizar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pasos a Realizar
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificaciones-y-resultado-esperado" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verificaciones y Resultado Esperado
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_4_excepciones_logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Excepciones y mensajes de log
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_5_campos_computados_relacionales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Campos computados relacionales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_6_campos_valores_defecto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Campos con valores por defecto
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_7_herencias_modelos_vistas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Herencias
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_8_mejorando_vistas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mejorando vistas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_9_datos_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datos de demostraci贸n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8">
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    7 Desarrollo con Odoo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    7 Desarrollo con Odoo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_1_introduccion_odoo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci贸n a Odoo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_2_desarrollo_de_modelos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Desarrollo de Modelos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_3_desarrollo_de_vistas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Desarrollo de Vistas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_4_navegacion_e_interaccion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Navegaci贸n e Interacci贸n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_5_logica_negocio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L贸gica de Negocio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_6_herencia_extensibilidad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Herencia y Extensibilidad
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_7_seguridad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Seguridad
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../8_2026_proyecto_odoo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Proyecto final Odoo. 'Dronify'
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-es-un-campo-computado" class="md-nav__link">
    <span class="md-ellipsis">
      
        驴Qu茅 es un Campo Computado?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#campo-computado-sin-almacenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        Campo Computado Sin Almacenamiento
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Campo Computado Sin Almacenamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definicion-del-campo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definici贸n del Campo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementacion-del-metodo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementaci贸n del M茅todo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caracteristicas-de-este-campo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Caracter铆sticas de este Campo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verificaci贸n
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#campo-computado-con-almacenamiento-y-dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      
        Campo Computado con Almacenamiento y Dependencias
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Campo Computado con Almacenamiento y Dependencias">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#caso-de-uso-fecha-fin-de-sprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Caso de Uso: Fecha Fin de Sprint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacion-en-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verificaci贸n en Base de Datos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comportamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comportamiento
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparativa-con-y-sin-almacenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparativa: Con y Sin Almacenamiento
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solucion-de-problemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Soluci贸n de Problemas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tu-turno-gestor-de-restaurante" class="md-nav__link">
    <span class="md-ellipsis">
      
        З Tu Turno: Gestor de Restaurante
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="З Tu Turno: Gestor de Restaurante">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objetivos-y-contexto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objetivos y Contexto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pasos-a-realizar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pasos a Realizar
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificaciones-y-resultado-esperado" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verificaciones y Resultado Esperado
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="campos-computados">Campos Computados</h1>
<p>En esta secci贸n abordaremos la creaci贸n de <strong>campos computados</strong> en Odoo, es decir, aquellos campos cuyo valor <strong>no</strong> es introducido manualmente por el usuario, sino que se determina autom谩ticamente en funci贸n de otros atributos del modelo. Este tipo de campos resulta fundamental para mantener la integridad y coherencia de los datos, as铆 como para automatizar procesos dentro del sistema.</p>
<h2 id="que-es-un-campo-computado">驴Qu茅 es un Campo Computado?</h2>
<p>Un campo computado es un campo cuyo valor se calcula mediante una funci贸n Python en lugar de ser ingresado directamente por el usuario.</p>
<p><strong>Caracter铆sticas</strong>:</p>
<ul>
<li>El valor se genera autom谩ticamente</li>
<li>Se calcula mediante un m茅todo del modelo</li>
<li>Puede almacenarse en la base de datos o calcularse din谩micamente</li>
<li>Puede depender de otros campos del modelo</li>
</ul>
<p><strong>Casos de uso comunes</strong>:</p>
<ul>
<li>C贸digos autom谩ticos (referencias, SKU)</li>
<li>Totales y subtotales</li>
<li>Fechas calculadas</li>
<li>Estados derivados de otras condiciones</li>
<li>Contadores y estad铆sticas</li>
</ul>
<h2 id="campo-computado-sin-almacenamiento">Campo Computado Sin Almacenamiento</h2>
<p>Como primer ejemplo, crearemos un campo computado llamado <code>codigo</code> que generar谩 autom谩ticamente un c贸digo 煤nico para cada tarea.</p>
<h3 id="definicion-del-campo">Definici贸n del Campo</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># En el modelo tareas_sergio</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">codigo</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s2">"_get_codigo"</span><span class="p">)</span>
</span></code></pre></div>
<p>El par谩metro <code>compute</code> indica el nombre del m茅todo que calcular谩 el valor del campo.</p>
<h3 id="implementacion-del-metodo">Implementaci贸n del M茅todo</h3>
<div class="admonition example">
<p class="admonition-title">ejemplo de implementaci贸n de m茅todo</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_codigo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="k">for</span> <span class="n">tarea</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        <span class="c1"># Si la tarea no tiene un sprint asignado</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">tarea</span><span class="o">.</span><span class="n">sprint</span><span class="p">:</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            <span class="n">tarea</span><span class="o">.</span><span class="n">codigo</span> <span class="o">=</span> <span class="s2">"TSK_"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">tarea</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="c1"># Si tiene sprint, usamos su nombre</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">tarea</span><span class="o">.</span><span class="n">codigo</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tarea</span><span class="o">.</span><span class="n">sprint</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s2">"_"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">tarea</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p><strong>Explicaci贸n del c贸digo</strong>:</p>
<ul>
<li><code>for tarea in self</code>: Itera sobre todos los registros de la colecci贸n</li>
<li><code>tarea.id</code>: Es la clave primaria generada autom谩ticamente por Odoo</li>
<li>Si no hay sprint asignado: <code>TSK_&lt;id&gt;</code> (ejemplo: <code>TSK_42</code>)</li>
<li>Si hay sprint: <code>&lt;NOMBRE_SPRINT&gt;_&lt;id&gt;</code> (ejemplo: <code>SPRINT1_42</code>)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Campo id autom谩tico</p>
<p>El campo <code>id</code> es la clave primaria generada autom谩ticamente en todos los modelos de Odoo. Puedes comprobarlo revisando las tablas en PostgreSQL.</p>
</div>
<h3 id="caracteristicas-de-este-campo">Caracter铆sticas de este Campo</h3>
<p><strong>Sin almacenamiento en base de datos</strong>:</p>
<ul>
<li>El valor se recalcula din谩micamente cada vez que se visualiza</li>
<li>No ocupa espacio en la base de datos</li>
<li>Se actualiza autom谩ticamente si cambian los valores de los que depende</li>
</ul>
<p><strong>Para visualizarlo</strong>:</p>
<ul>
<li>Debe a帽adirse expl铆citamente en la vista XML</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">&lt;field</span><span class="w"> </span><span class="na">name=</span><span class="s">"codigo"</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<h3 id="verificacion">Verificaci贸n</h3>
<p>Para comprobar que el campo no se almacena:</p>
<ol>
<li>Revisa la tabla en PostgreSQL</li>
<li>No encontrar谩s una columna <code>codigo</code></li>
<li>El valor se genera al mostrar el registro</li>
</ol>
<p><strong>Comportamiento</strong>:</p>
<ul>
<li>Al crear una tarea sin sprint: c贸digo <code>TSK_&lt;id&gt;</code></li>
<li>Al asignar un sprint y guardar: c贸digo se actualiza a <code>&lt;SPRINT&gt;_&lt;id&gt;</code></li>
</ul>
<h2 id="campo-computado-con-almacenamiento-y-dependencias">Campo Computado con Almacenamiento y Dependencias</h2>
<p>En situaciones m谩s complejas, necesitamos campos computados que:</p>
<ul>
<li>Se almacenen en la base de datos</li>
<li>Solo se recalculen cuando cambien sus dependencias</li>
<li>Est茅n disponibles para b煤squedas y filtros</li>
</ul>
<p>Este enfoque es 煤til cuando el c谩lculo es costoso o cuando el valor debe ser indexable.</p>
<h3 id="caso-de-uso-fecha-fin-de-sprint">Caso de Uso: Fecha Fin de Sprint</h3>
<p>Supongamos que en el modelo <code>Sprint</code> tenemos:</p>
<ul>
<li><code>fecha_ini</code>: Fecha de inicio (tipo Datetime)</li>
<li><code>duracion</code>: Duraci贸n en d铆as (tipo Integer)</li>
<li><code>fecha_fin</code>: <strong>Campo computado</strong> que se calcula autom谩ticamente</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Implementaci贸n</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">odoo</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">api</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">sprints_sergio</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="n">_name</span> <span class="o">=</span> <span class="s1">'gestion_tareas_sergio.sprints_sergio'</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    <span class="n">_description</span> <span class="o">=</span> <span class="s1">'Modelo de Sprints para Gesti贸n de Proyectos'</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="n">nombre</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">"Nombre"</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="n">fecha_ini</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Datetime</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">"Fecha Inicio"</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="n">duracion</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>        <span class="n">string</span><span class="o">=</span><span class="s2">"Duraci贸n"</span><span class="p">,</span> 
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>        <span class="n">help</span><span class="o">=</span><span class="s2">"Cantidad de d铆as que tiene asignado el sprint"</span><span class="p">)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    <span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Datetime</span><span class="p">(</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>        <span class="n">compute</span><span class="o">=</span><span class="s1">'_compute_fecha_fin'</span><span class="p">,</span> 
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>        <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>        <span class="n">string</span><span class="o">=</span><span class="s2">"Fecha Fin"</span><span class="p">)</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    <span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">'fecha_ini'</span><span class="p">,</span> <span class="s1">'duracion'</span><span class="p">)</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_compute_fecha_fin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>        <span class="k">for</span> <span class="n">sprint</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>            <span class="k">if</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span> <span class="ow">and</span> <span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span> <span class="ow">and</span> <span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>                <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span><span class="p">)</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>                <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span>
</span></code></pre></div>
</div>
<p>Aspectos Clave de la Implementaci贸n</p>
<p><strong>1. Decorador <code>@api.depends</code></strong>:
</p><div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">'fecha_ini'</span><span class="p">,</span> <span class="s1">'duracion'</span><span class="p">)</span>
</span></code></pre></div><p></p>
<ul>
<li>Indica qu茅 campos disparan el rec谩lculo</li>
<li>El campo solo se recalcula cuando cambian <code>fecha_ini</code> o <code>duracion</code></li>
<li>Optimiza el rendimiento evitando c谩lculos innecesarios</li>
</ul>
<p><strong>2. Par谩metro <code>store=True</code></strong>:
</p><div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Datetime</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">'_compute_fecha_fin'</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div><p></p>
<ul>
<li>El valor calculado se almacena en la base de datos</li>
<li>Permite usar el campo en b煤squedas y filtros</li>
<li>El valor persiste y no se recalcula en cada lectura</li>
</ul>
<p><strong>3. L贸gica del M茅todo</strong>:
</p><div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">for</span> <span class="n">sprint</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="k">if</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span> <span class="ow">and</span> <span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span> <span class="ow">and</span> <span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>        <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span><span class="p">)</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>        <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span>
</span></code></pre></div><p></p>
<ul>
<li>Verifica que existan los valores necesarios</li>
<li>Suma la duraci贸n en d铆as a la fecha de inicio</li>
<li>Si falta alg煤n dato, usa la fecha de inicio como valor por defecto</li>
</ul>
<p><strong>4. Importaci贸n de <code>timedelta</code></strong>:
</p><div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
</span></code></pre></div><p></p>
<ul>
<li>Necesaria para sumar d铆as a una fecha</li>
<li><code>timedelta(days=10)</code> representa 10 d铆as</li>
</ul>
<h3 id="verificacion-en-base-de-datos">Verificaci贸n en Base de Datos</h3>
<p>Tras actualizar el m贸dulo:</p>
<ol>
<li>Revisa la tabla en PostgreSQL</li>
<li><strong>Ahora s铆</strong> encontrar谩s una columna <code>fecha_fin</code></li>
<li>El valor est谩 almacenado y persiste</li>
</ol>
<h3 id="comportamiento">Comportamiento</h3>
<p>Al crear o editar un sprint:</p>
<ol>
<li>Usuario introduce <code>fecha_ini</code>: 2024-01-01</li>
<li>Usuario introduce <code>duracion</code>: 14 (d铆as)</li>
<li>Odoo calcula autom谩ticamente <code>fecha_fin</code>: 2024-01-15</li>
<li>El valor se guarda en la base de datos</li>
</ol>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ejemploT/14_EjemploCampoCalculado.png" data-desc-position="bottom"><img alt="Image title" src="../imgs/ejemploT/14_EjemploCampoCalculado.png" width="75%"></a>
<br>
<figcaption>Ejemplo de funcionamiento de campo calculado con almacenamiento</figcaption>
</figure>
<h2 id="comparativa-con-y-sin-almacenamiento">Comparativa: Con y Sin Almacenamiento</h2>
<table>
<thead>
<tr>
<th>Caracter铆stica</th>
<th>Sin <code>store</code></th>
<th>Con <code>store=True</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Almacenamiento</strong></td>
<td>No se guarda en BD</td>
<td>Se guarda en BD</td>
</tr>
<tr>
<td><strong>C谩lculo</strong></td>
<td>Cada vez que se lee</td>
<td>Solo cuando cambian dependencias</td>
</tr>
<tr>
<td><strong>B煤squedas</strong></td>
<td>No disponible</td>
<td>Disponible</td>
</tr>
<tr>
<td><strong>Filtros</strong></td>
<td>No disponible</td>
<td>Disponible</td>
</tr>
<tr>
<td><strong>Rendimiento</strong></td>
<td>M谩s lento en lectura</td>
<td>M谩s r谩pido en lectura</td>
</tr>
<tr>
<td><strong>Uso de disco</strong></td>
<td>Ninguno</td>
<td>Ocupa espacio</td>
</tr>
<tr>
<td><strong>Uso t铆pico</strong></td>
<td>C谩lculos simples y r谩pidos</td>
<td>C谩lculos costosos o indexables</td>
</tr>
</tbody>
</table>
<p><strong>Cu谩ndo Usar Cada Tipo:</strong> </p>
<ul>
<li>
<p>Campos <strong>computados sin almacenamiento</strong> (sin <code>store</code>):</p>
<ul>
<li>C谩lculos muy simples y r谩pidos</li>
<li>Valores que cambian constantemente</li>
<li>No necesitas buscar o filtrar por ese campo</li>
<li>Ejemplo: Formateo de texto, concatenaciones simples</li>
</ul>
</li>
<li>
<p>Campos <strong>computados con almacenamiento</strong> (<code>store=True</code>):</p>
<ul>
<li>C谩lculos complejos o costosos</li>
<li>Necesitas buscar o filtrar por ese campo</li>
<li>El valor no cambia frecuentemente</li>
<li>Quieres usar el campo en vistas pivot o gr谩ficas</li>
<li>Ejemplo: Totales, fechas calculadas, contadores</li>
</ul>
</li>
</ul>
<h2 id="solucion-de-problemas">Soluci贸n de Problemas</h2>
<div class="admonition warning">
<p class="admonition-title">Errores al actualizar modelos</p>
<p>En ocasiones, los cambios en campos computados pueden generar inconsistencias en la base de datos. Si el ORM no se refresca correctamente tras reiniciar el servicio, la soluci贸n es eliminar toda la base de datos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>down<span class="w"> </span>-v
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div>
<p><strong>Advertencia</strong>: Esto eliminar谩 todos los datos. Haz una copia de seguridad si los necesitas.</p>
</div>
<p>Errores Comunes</p>
<p><strong>1. Campo no se actualiza</strong>:</p>
<ul>
<li>Verifica que el decorador <code>@api.depends</code> incluya todos los campos necesarios</li>
<li>Aseg煤rate de que la sintaxis del m茅todo es correcta</li>
</ul>
<p><strong>2. Error "field 'X' does not exist"</strong>:</p>
<ul>
<li>El campo debe estar definido en el modelo antes del m茅todo compute</li>
<li>Reinicia el servidor despu茅s de a帽adir el campo</li>
</ul>
<p><strong>3. El campo aparece vac铆o</strong>:</p>
<ul>
<li>Verifica que la l贸gica del m茅todo asigna un valor en todos los casos</li>
<li>Comprueba que los campos dependientes tienen valores</li>
</ul>
<p><strong>4. Error de recursi贸n</strong>:</p>
<ul>
<li>No uses el propio campo computado dentro de <code>@api.depends</code></li>
<li>No modifiques campos que disparan el mismo m茅todo compute</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Buenas Pr谩cticas</p>
<ol>
<li>
<p><strong>Nombra los m茅todos con prefijo <code>_compute_</code></strong>:
   </p><div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">_compute_codigo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>Usa <code>@api.depends</code> siempre que sea posible</strong>:</p>
<ul>
<li>Mejora el rendimiento</li>
<li>Hace el c贸digo m谩s mantenible</li>
<li>Evita c谩lculos innecesarios</li>
</ul>
</li>
<li>
<p><strong>Maneja casos nulos o vac铆os</strong>:
   </p><div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">if</span> <span class="n">sprint</span><span class="o">.</span><span class="n">fecha_ini</span> <span class="ow">and</span> <span class="n">sprint</span><span class="o">.</span><span class="n">duracion</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="c1"># c谩lculo</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="c1"># valor por defecto</span>
</span></code></pre></div><p></p>
</li>
<li>
<p><strong>Almacena solo cuando sea necesario</strong>:</p>
<ul>
<li>Solo usa <code>store=True</code> si necesitas b煤squedas/filtros</li>
<li>Considera el espacio en disco</li>
</ul>
</li>
<li>
<p><strong>Documenta la l贸gica compleja</strong>:
   </p><div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="sd">"""Calcula el total sumando precio * cantidad para cada l铆nea"""</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>        <span class="c1"># ...</span>
</span></code></pre></div><p></p>
</li>
</ol>
</div>
<hr>
<h2 id="tu-turno-gestor-de-restaurante">З Tu Turno: Gestor de Restaurante</h2>
<p>Ahora se aplicar谩n campos computados en el proyecto del restaurante.</p>
<h3 id="objetivos-y-contexto">Objetivos y Contexto</h3>
<p>A帽adir tres campos computados al modelo Plato y uno al modelo Men煤:</p>
<ol>
<li><strong>C贸digo de plato</strong> (sin almacenar)</li>
<li><strong>Precio con IVA</strong> (sin almacenar)</li>
<li><strong>Precio final</strong> (almacenado, con descuento opcional)</li>
<li><strong>Precio total del men煤</strong> (almacenado)</li>
</ol>
<h3 id="pasos-a-realizar">Pasos a Realizar</h3>
<ol>
<li>
<p><strong>Campo computado sin almacenamiento: C贸digo del plato</strong></p>
<p>En el modelo Plato, crea un campo <code>codigo</code> de tipo <code>Char</code> con <code>compute="_get_codigo"</code>.</p>
<p>El m茅todo debe generar un c贸digo basado en:  </p>
<ul>
<li>Si no tiene categor铆a: <code>PLT_&lt;id&gt;</code></li>
<li>Si tiene categor铆a: <code>&lt;CATEGORA&gt;_&lt;id&gt;</code> (primeras 3 letras en may煤sculas)</li>
</ul>
<p>Pistas:</p>
<ul>
<li>Itera sobre <code>self</code> en el m茅todo</li>
<li>Usa <code>plato.categoria[:3].upper()</code> para obtener las primeras 3 letras en may煤sculas</li>
<li>Usa <code>plato.id</code> como identificador 煤nico</li>
</ul>
</li>
<li>
<p><strong>Campo computado sin almacenamiento: Precio con IVA</strong></p>
<p>En el modelo Plato, crea un campo <code>precio_con_iva</code> de tipo <code>Float</code> con <code>compute="_compute_precio_con_iva"</code>.</p>
<p>El m茅todo debe calcular el precio con un IVA del 10% (multiplica por 1.10).</p>
<p>Pistas:</p>
<ul>
<li>Verifica que <code>plato.precio</code> existe antes de operar</li>
<li>Si no existe precio, asigna 0.0</li>
</ul>
</li>
<li>
<p><strong>A帽adir campo descuento al modelo Plato</strong></p>
<p>A帽ade un campo <code>descuento</code> de tipo <code>Float</code> con <code>string="Descuento (%)"</code>.</p>
<p>Este campo ser谩 editable manualmente por el usuario (no computado).</p>
</li>
<li>
<p><strong>Campo computado con almacenamiento: Precio final</strong></p>
<p>En el modelo Plato, crea un campo <code>precio_final</code> de tipo <code>Float</code> que:</p>
<ul>
<li>Sea computado (<code>compute=...</code>)</li>
<li>Se almacene en BD (<code>store=True</code>)</li>
<li>Dependa de <code>precio</code> y <code>descuento</code> (usa <code>@api.depends</code>)</li>
</ul>
<p>El m茅todo debe:</p>
<ul>
<li>Si hay descuento: aplicarlo al precio (restando el porcentaje)</li>
<li>Si no hay descuento: usar el precio original</li>
</ul>
<p>Pistas:</p>
<ul>
<li>Convierte el porcentaje a decimal: <code>descuento / 100.0</code></li>
<li>F贸rmula: <code>precio * (1 - descuento_decimal)</code></li>
<li>Maneja el caso donde no hay precio definido</li>
</ul>
</li>
<li>
<p><strong>Campo computado en Men煤: Precio total</strong></p>
<p>En el modelo Men煤, crea un campo <code>precio_total</code> de tipo <code>Float</code> que:</p>
<ul>
<li>Sea computado</li>
<li>Se almacene en BD</li>
<li>Dependa de los platos del men煤 y su precio_final</li>
</ul>
<p>El m茅todo debe sumar el <code>precio_final</code> de todos los platos del men煤.</p>
<p>Pistas:</p>
<ul>
<li>Usa <code>@api.depends('platos', 'platos.precio_final')</code></li>
<li>Usa la funci贸n <code>sum()</code> de Python</li>
<li>Itera sobre <code>self</code> para cada men煤</li>
<li>Recuerda que <code>platos</code> es una relaci贸n One2many</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">C谩lculos de la suma</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Suma el precio_final de todos los platos relacionados</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1"># La funci贸n map() extrae los valores y sum() los agrega.</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">precios</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">platos_ids</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">'precio_final'</span><span class="p">)</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">menu</span><span class="o">.</span><span class="n">precio_total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">precios</span><span class="p">)</span>
</span></code></pre></div>
</div>
</li>
<li>
<p><strong>Actualizar vistas para mostrar los campos computados</strong></p>
<p>Modifica las vistas XML para incluir los nuevos campos:</p>
<p>Vista de Plato (list): A帽ade <code>codigo</code>, <code>precio_con_iva</code> y <code>precio_final</code></p>
<p>Vista de Plato (form): Organiza todos los campos de precio en el formulario</p>
<p>Vista de Men煤 (form): A帽ade el campo <code>precio_total</code></p>
<p>Pistas:</p>
<ul>
<li>Los campos computados se a帽aden como cualquier otro campo</li>
<li>Decide qu茅 campos mostrar en lista vs formulario</li>
</ul>
</li>
</ol>
<h3 id="verificaciones-y-resultado-esperado">Verificaciones y Resultado Esperado</h3>
<p>Comprueba que:</p>
<ul>
<li>El c贸digo del plato se genera autom谩ticamente seg煤n su categor铆a</li>
<li>El precio con IVA se calcula correctamente (sin almacenarse en BD)</li>
<li>El precio final aplica el descuento correctamente (y s铆 se almacena en BD)</li>
<li>El precio total del men煤 suma todos sus platos</li>
<li>Al cambiar el descuento de un plato, se recalcula el precio final</li>
<li>Al a帽adir/quitar platos de un men煤, se actualiza su precio total</li>
</ul>
<div class="admonition example">
<p class="admonition-title">Sugerencia Datos de prueba</p>
<p><strong>Plato 1</strong>: Pizza Margarita</p>
<ul>
<li>Precio: 10</li>
<li>Descuento: 10%</li>
<li>C贸digo esperado: <code>PRI_&lt;id&gt;</code> (si categor铆a es "principal")</li>
<li>Precio con IVA: 11</li>
<li>Precio final: 9</li>
</ul>
<p><strong>Plato 2</strong>: Ensalada C茅sar</p>
<ul>
<li>Precio: 8</li>
<li>Descuento: 0%</li>
<li>C贸digo esperado: <code>ENT_&lt;id&gt;</code> (si categor铆a es "entrante")</li>
<li>Precio con IVA: 8.8</li>
<li>Precio final: 8</li>
</ul>
<p><strong>Men煤 del D铆a</strong>:</p>
<ul>
<li>Contiene: Pizza Margarita + Ensalada C茅sar</li>
<li>Precio total esperado: 17 (9 + 8)</li>
</ul>
</div>
<p>Luego verifica:</p>
<ul>
<li>驴Se generan los c贸digos correctamente seg煤n categor铆a?</li>
<li>驴El precio con IVA es el 110% del precio original?</li>
<li>驴El precio final aplica correctamente el descuento?</li>
<li>驴El precio total del men煤 es la suma de sus platos?</li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie">
        
          
          <a href="../6_2_campos_basico_relacionales/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Campos b谩sicos y relacionales">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                Campos b谩sicos y relacionales
              </div>
            </div>
          </a>
        
        
          
          <a href="../6_4_excepciones_logs/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Excepciones y mensajes de log">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Siguiente
              </span>
              <div class="md-ellipsis">
                Excepciones y mensajes de log
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Sergio Rey Mart铆nez - DAM - SGE - 2025/26
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.indexes", "navigation.footer", "navigation.instant", "navigation.instant.progress", "toc.follow", "navigation.top", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>