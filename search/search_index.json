{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Introducci\u00f3n al curso","text":"<p>Apuntes del m\u00f3dulo de SGE (Sistemas de Gesti\u00f3n Empresarial) para el ciclo formativo de grado superior de DAM (Desarrollo de Aplicaciones Multimedia)</p> <p>En este espacio encontrar\u00e1s los apuntes b\u00e1sicos sobre el m\u00f3dulo pasando por la descripci\u00f3n y caracterizaci\u00f3n de ERPs (Enterprise Resource Planning o Planificaci\u00f3n de Recursos Empresariales), as\u00ed como la posterior preparaci\u00f3n del entorno de trabajo para instalar, configurar y desarrollar en Odoo. </p> <p>Muchas instrucciones est\u00e1n adaptadas para el funcionamiento de Odoo en un entorno de aprendizaje. El objetivo es desarrollar m\u00f3dulos para ampliar las funcionalidades del ERP seg\u00fan las necesidades de la empresa.</p> <p>Esta documentaci\u00f3n, esencialmente la parte de ODOO, se ha realizado teniendo como base el siguiente material:</p> <ul> <li>Odoo: Technical Training - Introducing to development</li> <li>Odoo: Tutorial Server framework 101</li> <li>Odoo: Referencia</li> <li>Apuntes de SGE de los siguientes profesores/as<ul> <li>Jose Castillo</li> <li>Alberto Aparicio</li> <li>Inma Gij\u00f3n</li> <li>Alfredo Oltra</li> </ul> </li> </ul> <p>Apuntes desarrollados por Sergio Rey Martinez</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_1_IntroduccionERP/","title":"1.1. Introducci\u00f3n a la Gesti\u00f3n Empresarial","text":"<p>La gesti\u00f3n empresarial es aquella actividad que, a trav\u00e9s de diferentes individuos especializados (directores institucionales, consultores, productores, gerentes, entre otros) y acciones, busca mejorar la productividad y competitividad de una empresa o negocio.</p>"},{"location":"1_1_IntroduccionERP/#principales-caracteristicas-de-la-gestion-empresarial","title":"Principales caracter\u00edsticas de la gesti\u00f3n empresarial","text":"<ul> <li>Una empresa existe mientras genere beneficios.  </li> <li>Una empresa debe gestionar bien sus recursos para ser competitiva.  </li> <li>El principal objetivo de la empresa es el cliente.</li> </ul> <p>No todas las personas tienen la capacidad de llevar a cabo una buena administraci\u00f3n en su empresa. Por eso, de alguna manera, la gesti\u00f3n empresarial se considera un arte o una virtud particular, ya que se requiere organizaci\u00f3n, control y liderazgo efectivo para alcanzar los resultados deseados de la forma m\u00e1s eficiente posible.</p> <p>Siempre se busca mejorar la productividad y las finanzas de una organizaci\u00f3n para ser competitivos en el mercado, y en este \u00e1mbito el tiempo es un factor importante para lograr los objetivos propuestos. Una empresa que realiza una gesti\u00f3n \u00f3ptima siempre tendr\u00e1 mejores resultados tanto en su producci\u00f3n y log\u00edstica como en el mercado, logrando buenas ventas y obteniendo un margen de beneficio adecuado (esto tambi\u00e9n aplica a las empresas de servicios).</p> Gesti\u00f3n Empresarial. <p>La persona que asume la direcci\u00f3n de una empresa lleva la responsabilidad de optimizar recursos como el tiempo, los productos y el personal para dirigir esa organizaci\u00f3n hacia una econom\u00eda deseable. En este \u00e1mbito siempre existen normas y est\u00e1ndares que cumplir, aunque por otro lado, un emprendedor debe ser innovador y creativo para destacar frente a otros que trabajan en el mismo sector.</p>"},{"location":"1_1_IntroduccionERP/#gestion-empresarial-y-sistemas-de-informacion","title":"Gesti\u00f3n empresarial y sistemas de informaci\u00f3n","text":"<p>La gesti\u00f3n empresarial moderna se apoya en los Sistemas de Informaci\u00f3n (SI) para mejorar la productividad, competitividad y toma de decisiones. Estos sistemas automatizan procesos, organizan datos y permiten una explotaci\u00f3n eficiente de la documentaci\u00f3n administrativa.</p> <p>La inform\u00e1tica aplicada a la gesti\u00f3n empresarial permite:</p> <ul> <li>Automatizar tareas repetitivas</li> <li>Organizar y analizar grandes vol\u00famenes de informaci\u00f3n</li> <li>Mejorar la comunicaci\u00f3n interna y externa</li> <li>Optimizar procesos administrativos y productivos</li> </ul>"},{"location":"1_2_Sistemas_Informacion/","title":"1.2. Inform\u00e1tica en la Gesti\u00f3n Empresarial","text":"<p>La inform\u00e1tica consiste b\u00e1sicamente en el procesamiento autom\u00e1tico de la informaci\u00f3n. Si una empresa tiene como una de sus principales actividades la generaci\u00f3n, gesti\u00f3n y an\u00e1lisis de cierta informaci\u00f3n, parece l\u00f3gico pensar que la tecnolog\u00eda de la informaci\u00f3n va a desempe\u00f1ar un papel importante en la gesti\u00f3n empresarial.</p> <p>La inform\u00e1tica hace mucho m\u00e1s que ayudar a las empresas a crear presentaciones profesionales y reportes de ventas impresionantes. Los ordenadores pueden automatizar tareas que consumen mucho tiempo, dando ideas a los desarrolladores para crear programas que resuelvan una gran variedad de problemas. Ya seas due\u00f1o de una joyer\u00eda o de una multinacional como Sony, la inform\u00e1tica te ayudar\u00e1 a mejorar la gesti\u00f3n de tu negocio.</p> Inform\u00e1tica en la Empresa. <p>Veamos algunas de las formas en que la inform\u00e1tica puede ayudarte a gestionar tu empresa.</p>"},{"location":"1_2_Sistemas_Informacion/#gestion-de-datos","title":"Gesti\u00f3n de Datos","text":"<p>Las tareas de gesti\u00f3n de datos son la base de muchas de las actividades que realizan las empresas. La inform\u00e1tica permite organizar y manipular grandes cantidades de informaci\u00f3n de forma productiva. Las empresas pueden usar bases de datos para monitorizar sus operaciones.</p> <p>Independientemente del tama\u00f1o de tu empresa, es probable que trabajes con informaci\u00f3n y necesites almacenarla. Los sitios web de comercio electr\u00f3nico tambi\u00e9n utilizan software de bases de datos para vender productos e incluso permitir que las personas se registren en sus plataformas. Si tu empresa tiene un sitio web, puedes configurar el software de gesti\u00f3n de datos t\u00fa mismo o contratar a una empresa para que lo haga por ti.</p>"},{"location":"1_2_Sistemas_Informacion/#gestion-de-oficina-y-almacen","title":"Gesti\u00f3n de Oficina y Almac\u00e9n","text":"<p>Muchas empresas obtienen ingresos mediante la compra y venta de productos con un margen de beneficio, y la inform\u00e1tica ayuda a gestionar todo ese inventario y materiales de manera eficiente. Los grandes almacenes, por ejemplo, utilizan software de gesti\u00f3n de inventario sofisticado que puede ser desarrollado por sus propios departamentos de IT o adaptaciones de productos est\u00e1ndar. Estas aplicaciones permiten a las compa\u00f1\u00edas asegurarse de que los productos est\u00e9n disponibles en las tiendas cuando los clientes los necesitan. Los ordenadores tambi\u00e9n son \u00fatiles para rastrear y administrar suministros b\u00e1sicos como papel de impresora, l\u00e1pices y otros materiales de oficina.</p>"},{"location":"1_2_Sistemas_Informacion/#gestion-de-personal","title":"Gesti\u00f3n de Personal","text":"<p>Comunicarse con un compa\u00f1ero que est\u00e1 en la oficina de al lado no suele ser un problema, pero coordinar reuniones cuando las personas est\u00e1n en distintas ubicaciones puede ser un desaf\u00edo. El software inform\u00e1tico permite realizar reuniones virtuales a trav\u00e9s de Internet y facilita que todos en la empresa compartan un calendario com\u00fan. Algunas empresas buscan aumentar la productividad controlando los ordenadores que usan sus empleados. Monitorearlos permite hacer seguimiento de las horas facturables e identificar actividades rentables. Si haces seguimiento del tiempo o planificaci\u00f3n de reuniones, una herramienta de software puede ayudarte.</p>"},{"location":"1_2_Sistemas_Informacion/#gestion-de-contabilidad-y-facturacion","title":"Gesti\u00f3n de Contabilidad y Facturaci\u00f3n","text":"<p>Cuando llega la temporada de impuestos, estos pueden prepararse accediendo a los registros financieros mantenidos durante el a\u00f1o en un ordenador. El software de contabilidad ayuda a gestionar el dinero, crear presupuestos, seguir ventas y controlar el uso de recursos. Estas aplicaciones ofrecen soluciones para empresas de todos los tama\u00f1os. Incluso puedes encontrar programas de contabilidad y facturaci\u00f3n accesibles desde la web, algunos gratuitos hasta cierto l\u00edmite. Si los miembros de tu organizaci\u00f3n necesitan acceder y compartir informaci\u00f3n contable desde m\u00faltiples ubicaciones, esta puede ser una soluci\u00f3n ideal. Tambi\u00e9n encontrar\u00e1s programas de hojas de c\u00e1lculo \u00fatiles para tareas como listas de asistencia o gesti\u00f3n de n\u00f3minas.</p>"},{"location":"1_2_Sistemas_Informacion/#ventajas-de-aplicar-la-informatica-a-la-gestion-empresarial","title":"Ventajas de aplicar la inform\u00e1tica a la gesti\u00f3n empresarial","text":"<ul> <li>Reducci\u00f3n de errores humanos</li> <li>Ahorro de tiempo y costes</li> <li>Mejora en la toma de decisiones</li> <li>Acceso remoto a la informaci\u00f3n</li> <li>Mayor seguridad y trazabilidad</li> <li>Automatizaci\u00f3n de procesos repetitivos</li> </ul> <p>La inform\u00e1tica no solo mejora la eficiencia operativa, sino que tambi\u00e9n permite a las empresas adaptarse a entornos cambiantes, responder con agilidad a las demandas del mercado y ofrecer un mejor servicio al cliente.</p>"},{"location":"1_2_Sistemas_Informacion/#sistemas-de-informacion-empresarial","title":"Sistemas de Informaci\u00f3n Empresarial","text":"<p>Los sistemas de informaci\u00f3n (SI) son herramientas que permiten la automatizaci\u00f3n de tareas, la organizaci\u00f3n de la informaci\u00f3n y la mejora de procesos en la empresa. Se estructuran en niveles jer\u00e1rquicos que responden a diferentes necesidades operativas, t\u00e1cticas y estrat\u00e9gicas.</p>"},{"location":"1_2_Sistemas_Informacion/#niveles-de-los-sistemas-de-informacion","title":"Niveles de los Sistemas de Informaci\u00f3n","text":"Pir\u00e1mide de los Sistemas de Informaci\u00f3n. Nivel Tipo de Sistema Ejemplos Estrat\u00e9gico ESS (Executive Support Systems), BI (Business Intelligence) SAP BI, Power BI T\u00e1ctico DSS (Decision Support Systems) Sistemas de an\u00e1lisis predictivo Operativo MIS (Management Information Systems) Informes peri\u00f3dicos, KPIs Transaccional TPS (Transaction Processing Systems), OAS (Office Automation Systems) ERP, CRM, DMS"},{"location":"1_2_Sistemas_Informacion/#-nivel-estrategico","title":"- Nivel Estrat\u00e9gico","text":"Pir\u00e1mide de los Sistemas de Informaci\u00f3n. Nivel Estrat\u00e9gico <ul> <li>Nivel T\u00e1ctico</li> </ul> Pir\u00e1mide de los Sistemas de Informaci\u00f3n. Nivel T\u00e1ctico <ul> <li>Nivel Operativo</li> </ul> Pir\u00e1mide de los Sistemas de Informaci\u00f3n. Nivel Operativo <ul> <li>Nivel Transanccional </li> </ul> Pir\u00e1mide de los Sistemas de Informaci\u00f3n. Nivel Transaccional"},{"location":"1_2_Sistemas_Informacion/#tipos-de-sistemas-de-informacion","title":"Tipos de Sistemas de Informaci\u00f3n","text":""},{"location":"1_2_Sistemas_Informacion/#tps-transaction-processing-system","title":"TPS \u2013 Transaction Processing System","text":"<p>Los sistemas de procesamiento de transacciones son los sistemas empresariales b\u00e1sicos que sirven al nivel de operaciones y de transacciones de la organizaci\u00f3n. Efect\u00faan y registran las transacciones diarias rutinarias. Ejemplos t\u00edpicos son las entradas y salidas de pedidos, o los sistemas de reserva de l\u00edneas a\u00e9reas. Algunas de las propiedades o caracter\u00edsticas de estos sistemas son que automatizan tareas operativas en una organizaci\u00f3n, y se basan en c\u00e1lculos y procesos sencillos.</p> <p>Adem\u00e1s, deben ser de respuesta r\u00e1pida, fiables e inflexible, puesto que no pueden aceptar informaci\u00f3n distinta a la establecida.</p>"},{"location":"1_2_Sistemas_Informacion/#oas-office-automation-system","title":"OAS \u2013 Office Automation System","text":"<p>Los sistemas de automatizaci\u00f3n de oficinas consisten en aplicaciones destinadas a ayudar al trabajo diario del administrativo de una organizaci\u00f3n, como los procesadores de textos, las hojas de c\u00e1lculo, los editores de presentaciones, etc., que agrupados forman las suites ofim\u00e1ticas, utilizadas para aumentar la productividad de la empresa.</p> <p>Algunos OAS conocidos son Microsoft Office, iWork (propiedad de Apple), y LibreOffice, con licencia libre. Adem\u00e1s, las \u00faltimas tendencias utilizan la operatividad en la nube, mediante paquetes como Google Docs en Google Drive, o el propio Microsoft Office 365. En sistemas m\u00f3viles Android tambi\u00e9n existen suites ofim\u00e1ticas como las propias de Microsoft, Apple y Google.</p> <p>Tanto los TPS como los OAS son sistemas que operan a nivel de transacciones, es decir, en el nivel m\u00e1s bajo de la pir\u00e1mide de funcionamiento vista anteriormente.</p>"},{"location":"1_2_Sistemas_Informacion/#mis-management-information-system","title":"MIS \u2013 Management Information System","text":"<p>Los sistemas de gesti\u00f3n de informaci\u00f3n son un tipo de sistemas de informaci\u00f3n que recopilan y procesan informaci\u00f3n de diferentes fuentes tales como los TPS para ayudar en la toma de decisiones en lo referente a la gesti\u00f3n de la organizaci\u00f3n.</p> <p>Sirven a los administradores interesados en resultados semanales, mensuales y anuales y suelen contestar a preguntas estructuradas que se conocen con mucha antelaci\u00f3n. Funcionar\u00edan en el nivel operativo, para tomar decisiones a corto plazo. </p>"},{"location":"1_2_Sistemas_Informacion/#dss-decision-support-system","title":"DSS \u2013 Decision Support System","text":"<p>Los sistemas de apoyo a la toma de decisiones combinan datos y modelos anal\u00edticos avanzados o herramientas de an\u00e1lisis de datos, para apoyar la toma de decisiones semiestructurada y no estructurada y que cambian r\u00e1pidamente.</p> <p>Se basa en el an\u00e1lisis multidimensional que permite profundizar en la informaci\u00f3n hasta llegar a un alto nivel de detalle para pronosticar lo que puede ocurrir en el futuro, an\u00e1lisis de tendencias, an\u00e1lisis prospectivo, etc. Se emplear\u00edan en el tercer nivel piramidal visto antes, el t\u00e1ctico.</p>"},{"location":"1_2_Sistemas_Informacion/#ess-executive-support-system","title":"ESS \u2013 Executive Support System","text":"<p>Los sistemas de apoyo a ejecutivos est\u00e1n dise\u00f1ados para apoyar la toma de decisiones no estructuradas, mediante gr\u00e1ficos y comunicaciones avanzados. Estos sistemas filtran, comprimen y rastrean datos cruciales.</p> <p>Permiten hacer estimaciones de ventas a 5 a\u00f1os, dise\u00f1ar el plan operativo, hacer previsiones de presupuestos y estimaciones de beneficios de los pr\u00f3ximos a\u00f1os. Son, por tanto, sistemas para toma de decisiones a largo plazo, y operar\u00edan en el nivel estrat\u00e9gico de la pir\u00e1mide anterior, en la cima de la pir\u00e1mide. </p>"},{"location":"1_2_Sistemas_Informacion/#bi-business-intelligence","title":"BI \u2013 Business Intelligence","text":"<p>El BI o Inteligencia Empresarial o Inteligencia de Negocios, es el conjunto de procesos requeridos para ofrecer una soluci\u00f3n inform\u00e1tica que nos permita analizar c\u00f3mo est\u00e1 funcionando una empresa de forma que se optimice su funcionamiento mediante la toma de decisiones pertinentes. Se apoya en gran medida en el Big Data con el an\u00e1lisis de datos y el desarrollo de los mismos. Podemos distribuir las soluciones de inteligencia de negocio en tres categor\u00edas:</p> <ul> <li>Herramientas para la gesti\u00f3n de datos (del ingl\u00e9s, data management tools).    Permiten desde la depuraci\u00f3n y estandarizaci\u00f3n de datos de procedencia diversa hasta su extracci\u00f3n, transformaci\u00f3n y traslado a un determinado sistema.</li> <li>Las aplicaciones para descubrir nuevos datos (del ingl\u00e9s, data discovery applications). Permiten recopilar y evaluar nueva informaci\u00f3n (datamining o miner\u00eda de datos), y aplicar sobre esa informaci\u00f3n nueva o sobre la ya disponible t\u00e9cnica de an\u00e1lisis predictivo para realizar proyecciones de futuro.</li> <li>Herramientas de reporting. Una vez recopilada y tratada toda esa informaci\u00f3n preexistente o nueva, ayudan a las empresas a visualizarla de manera gr\u00e1fica e intuitiva. Tambi\u00e9n sirven para integrarla en cuadros de mando que midan si se cumplen o no determinados KPIs (Key Performance Indicator), o pueden incluso generar todo tipo de informes de reporting. Todos los ERPs actuales ofrecen herramientas BI, adem\u00e1s como ejemplo tenemos QLinkView, Microsoft Power BI, Oracle BI, SAP BI, IBM BI\u2026 </li> </ul>"},{"location":"1_2_Sistemas_Informacion/#elementos-de-un-sistema-de-informacion","title":"Elementos de un Sistema de Informaci\u00f3n","text":"<ul> <li>Procedimientos: Conjunto de reglas y m\u00e9todos que definen c\u00f3mo se debe operar el sistema.</li> <li>Informaci\u00f3n: Datos estructurados que se convierten en conocimiento \u00fatil para la empresa.</li> <li> <p>Usuarios:</p> <ul> <li>Directos: Empleados que interact\u00faan con el sistema.</li> <li>Indirectos: Clientes, proveedores, socios.</li> <li>Administradores: Responsables del mantenimiento y configuraci\u00f3n.</li> <li>Directivos: Toman decisiones basadas en la informaci\u00f3n proporcionada.</li> </ul> </li> <li> <p>Equipos: Hardware y software que soportan el funcionamiento del sistema.</p> </li> </ul>"},{"location":"1_2_Sistemas_Informacion/#importancia-de-los-si-en-la-empresa","title":"Importancia de los SI en la empresa","text":"<p>Los sistemas de informaci\u00f3n permiten:</p> <ul> <li>Automatizar procesos</li> <li>Mejorar la eficiencia operativa</li> <li>Facilitar la toma de decisiones</li> <li>Reducir costes</li> <li>Aumentar la competitividad</li> <li>Cumplir con normativas y est\u00e1ndares</li> </ul> <p>Su correcta implementaci\u00f3n y uso son fundamentales para el \u00e9xito de cualquier organizaci\u00f3n moderna.</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_3_Sistemas_Clave/","title":"1.3. Sistemas Clave en la Empresa","text":"<p>Los sistemas clave dentro de un sistema empresarial son los siguientes: </p>"},{"location":"1_3_Sistemas_Clave/#dms-document-management-system","title":"DMS \u2013 Document Management System","text":"<p>Un sistema de gesti\u00f3n documental (DMS) es un software que permite almacenar, gestionar y controlar documentos electr\u00f3nicos. Su objetivo es facilitar el acceso, la seguridad, la trazabilidad y la colaboraci\u00f3n en torno a la documentaci\u00f3n de la empresa.</p>"},{"location":"1_3_Sistemas_Clave/#caracteristicas-principales","title":"Caracter\u00edsticas principales","text":"<ul> <li>Almacenamiento centralizado: Todos los documentos se guardan en un repositorio \u00fanico.</li> <li>Control de versiones: Se mantiene un historial de cambios y versiones anteriores.</li> <li>Seguridad: Gesti\u00f3n de permisos, cifrado y auditor\u00eda de accesos.</li> <li>B\u00fasqueda avanzada: Indexaci\u00f3n por metadatos, contenido y etiquetas.</li> <li>Integraci\u00f3n: Compatible con ERP, CRM y otros sistemas empresariales.</li> </ul> <p>Ejemplos de DMS</p> <ul> <li>Alfresco</li> <li>OpenKm</li> <li>SharePoint</li> <li>DocuWare</li> <li>M-Files</li> <li>\u00bfAdministrador de Archivos?</li> </ul> Sistema de Gesti\u00f3n Documental (DMS)."},{"location":"1_3_Sistemas_Clave/#erp-enterprise-resource-planning","title":"ERP \u2013 Enterprise Resource Planning","text":"<p>Un ERP es un sistema de planificaci\u00f3n de recursos empresariales que integra todos los procesos de negocio en una \u00fanica plataforma. Est\u00e1 compuesto por m\u00f3dulos que gestionan \u00e1reas como finanzas, producci\u00f3n, log\u00edstica, recursos humanos, ventas, compras, etc.</p>"},{"location":"1_3_Sistemas_Clave/#caracteristicas-del-erp","title":"Caracter\u00edsticas del ERP","text":"<ul> <li>Integral: Cubre todas las \u00e1reas funcionales de la empresa.</li> <li>Modular: Cada m\u00f3dulo puede activarse seg\u00fan las necesidades.</li> <li>Adaptable: Se configura seg\u00fan el tama\u00f1o y sector de la empresa.</li> <li>Interconectado: Los datos fluyen entre m\u00f3dulos sin duplicidad.</li> </ul>"},{"location":"1_3_Sistemas_Clave/#tipos-de-erp","title":"Tipos de ERP","text":"<ul> <li>A medida: Desarrollado espec\u00edficamente para una empresa.</li> <li>Est\u00e1ndar: Soluci\u00f3n gen\u00e9rica adaptada a m\u00faltiples sectores.</li> <li>Local: Instalado en servidores propios.</li> <li>En la nube: Acceso remoto, mantenimiento externo.</li> <li>Vertical: Especializado en un sector (salud, educaci\u00f3n, etc.).</li> <li>Horizontal: Aplicable a cualquier tipo de empresa.</li> <li>C\u00f3digo abierto: Libre acceso al c\u00f3digo fuente.</li> <li>Propietario: Licencia cerrada, soporte del fabricante.</li> </ul>"},{"location":"1_3_Sistemas_Clave/#modulos-comunes","title":"M\u00f3dulos comunes","text":"<ul> <li>Finanzas y contabilidad</li> <li>Gesti\u00f3n de inventario</li> <li>Producci\u00f3n y planificaci\u00f3n</li> <li>Recursos humanos</li> <li>Ventas y marketing</li> <li>Compras y proveedores</li> <li>Atenci\u00f3n al cliente</li> </ul> <p>Ejemplos de ERP</p> <ul> <li>SAP</li> <li>Microsoft Dynamics 365</li> <li>Oracle E-Business Suite</li> <li>Odoo</li> <li>Sage X3</li> </ul> Planificaci\u00f3n de Recursos Empresariales (ERP)."},{"location":"1_3_Sistemas_Clave/#crm-customer-relationship-management","title":"CRM \u2013 Customer Relationship Management","text":"<p>El CRM es un sistema que permite gestionar las relaciones con los clientes, desde el primer contacto hasta el servicio postventa. Su objetivo es mejorar la experiencia del cliente, aumentar la fidelizaci\u00f3n y optimizar las estrategias de marketing y ventas.</p>"},{"location":"1_3_Sistemas_Clave/#tipos-de-crm","title":"Tipos de CRM","text":"<ul> <li>Operativo: Automatiza procesos comerciales como ventas, atenci\u00f3n al cliente y marketing.</li> <li>Anal\u00edtico: Analiza datos de clientes para identificar patrones, segmentar mercados y predecir comportamientos.</li> <li>Colaborativo: Facilita la comunicaci\u00f3n entre departamentos y canales (tel\u00e9fono, email, redes sociales).</li> </ul>"},{"location":"1_3_Sistemas_Clave/#funcionalidades-clave","title":"Funcionalidades clave","text":"<ul> <li>Gesti\u00f3n de contactos y cuentas</li> <li>Seguimiento de oportunidades de venta</li> <li>Automatizaci\u00f3n de campa\u00f1as de marketing</li> <li>Servicio de atenci\u00f3n al cliente</li> <li>Informes y an\u00e1lisis de rendimiento</li> </ul> <p>Ejemplos de CRM</p> <ul> <li>Salesforce</li> <li>SugarCRM</li> <li>VTiger</li> <li>Microsoft Dynamics 365</li> <li>Zoho CRM</li> <li>HubSpot</li> </ul> Gesti\u00f3n de Relaciones con Clientes (CRM)."},{"location":"1_3_Sistemas_Clave/#otros-sistemas-empresariales","title":"Otros Sistemas Empresariales","text":"<p>Adem\u00e1s de los sistemas ERP, CRM y DMS, existen otras soluciones tecnol\u00f3gicas que permiten gestionar \u00e1reas espec\u00edficas de la empresa con gran eficacia.</p>"},{"location":"1_3_Sistemas_Clave/#mes-manufacturing-execution-system","title":"MES \u2013 Manufacturing Execution System","text":"<p>El MES es un sistema de ejecuci\u00f3n de fabricaci\u00f3n que permite controlar y monitorizar la producci\u00f3n en tiempo real. Su objetivo es mejorar la eficiencia, la trazabilidad y la calidad en los procesos industriales.</p>"},{"location":"1_3_Sistemas_Clave/#funcionalidades-del-mes","title":"Funcionalidades del MES","text":"<ul> <li>Control de \u00f3rdenes de producci\u00f3n</li> <li>Registro de tiempos y consumos</li> <li>Supervisi\u00f3n de maquinaria y operarios</li> <li>Gesti\u00f3n de calidad y trazabilidad</li> <li>Integraci\u00f3n con ERP y sistemas SCADA</li> </ul> <p>Ejemplo destacado</p> <p>MesBook, una soluci\u00f3n espa\u00f1ola que ofrece control total de la planta de producci\u00f3n con enfoque en eficiencia y rentabilidad. Valenciana fruto de Lanzadera</p> Manufacturing Execution System."},{"location":"1_3_Sistemas_Clave/#bi-business-intelligence","title":"BI \u2013 Business Intelligence","text":"<p>La inteligencia de negocio (BI) es el conjunto de herramientas y metodolog\u00edas que permiten transformar datos en informaci\u00f3n \u00fatil para la toma de decisiones estrat\u00e9gicas.</p>"},{"location":"1_3_Sistemas_Clave/#componentes-de-bi","title":"Componentes de BI","text":"<ul> <li>ETL (Extract, Transform, Load): Procesos para extraer datos de m\u00faltiples fuentes, transformarlos y cargarlos en almacenes de datos.</li> <li>Data Warehouse: Almac\u00e9n centralizado de datos estructurados.</li> <li>Dashboards: Paneles visuales con indicadores clave (KPIs).</li> <li>Miner\u00eda de datos: T\u00e9cnicas estad\u00edsticas para descubrir patrones ocultos.</li> </ul> <p>Ejemplos de herramientas BI</p> <ul> <li>Power BI</li> <li>Tableau</li> <li>QlikView</li> <li>SAP BusinessObjects</li> <li>Elastic stack</li> </ul>  Business Intelligence."},{"location":"1_3_Sistemas_Clave/#webs-corporativas-y-ecommerce","title":"Webs Corporativas y eCommerce","text":"<p>Las plataformas web permiten a las empresas tener presencia online, ofrecer informaci\u00f3n institucional y vender productos o servicios a trav\u00e9s de tiendas virtuales.</p>"},{"location":"1_3_Sistemas_Clave/#funcionalidades-comunes","title":"Funcionalidades comunes","text":"<ul> <li>Cat\u00e1logo de productos</li> <li>Carrito de compra</li> <li>Pasarela de pago</li> <li>Gesti\u00f3n de pedidos y env\u00edos</li> <li>Integraci\u00f3n con ERP y CRM</li> </ul> <p>Ejemplos de plataformas eCommerce</p> <ul> <li>Magento</li> <li>PrestaShop</li> <li>WooCommerce</li> <li>Shopify</li> </ul>  Web Corporativa."},{"location":"1_3_Sistemas_Clave/#sistemas-especificos-por-area","title":"Sistemas Espec\u00edficos por \u00c1rea","text":""},{"location":"1_3_Sistemas_Clave/#recursos-humanos-rrhh","title":"Recursos Humanos (RRHH)","text":"<ul> <li>Gesti\u00f3n de n\u00f3minas</li> <li>Control de asistencia</li> <li>Evaluaci\u00f3n de desempe\u00f1o</li> <li>Formaci\u00f3n y desarrollo</li> <li>Reclutamiento y selecci\u00f3n</li> </ul>"},{"location":"1_3_Sistemas_Clave/#contabilidad-y-finanzas","title":"Contabilidad y Finanzas","text":"<ul> <li>Presupuestos</li> <li>Balances</li> <li>Cuentas por cobrar y pagar</li> <li>Declaraciones fiscales</li> <li>Auditor\u00edas</li> </ul>"},{"location":"1_3_Sistemas_Clave/#calidad","title":"Calidad","text":"<ul> <li>Gesti\u00f3n de normas ISO</li> <li>Control de calidad en procesos</li> <li>Auditor\u00edas internas</li> <li>No conformidades</li> </ul>"},{"location":"1_3_Sistemas_Clave/#mantenimiento","title":"Mantenimiento","text":"<ul> <li>Mantenimiento preventivo y correctivo</li> <li>Gesti\u00f3n de activos</li> <li>Planificaci\u00f3n de intervenciones</li> <li>Registro de incidencias</li> </ul>"},{"location":"1_3_Sistemas_Clave/#gestion-de-proyectos","title":"Gesti\u00f3n de Proyectos","text":"<ul> <li>Planificaci\u00f3n de tareas</li> <li>Asignaci\u00f3n de recursos</li> <li>Control de tiempos y costes</li> <li>Seguimiento de hitos</li> <li>Informes de avance</li> </ul>"},{"location":"1_3_Sistemas_Clave/#bpms-business-process-management-system","title":"BPMS \u2013 Business Process Management System","text":"<p>Sistema para modelar, automatizar y optimizar procesos de negocio. Permite definir flujos de trabajo, asignar responsabilidades y medir resultados.</p> <p>Ejemplos: Bizagi, BonitaSoft, Appian</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_4_ERP_CRM/","title":"1.4. ERP-CRM","text":""},{"location":"1_4_ERP_CRM/#que-es-un-erp","title":"\u00bfQu\u00e9 es un ERP?","text":"Youtube: \u00bfQu\u00e9 es un ERP y para qu\u00e9 sirve? <p>Un ERP (Enterprise Resource Planning o Planificaci\u00f3n de Recursos Empresariales) es un sistema dise\u00f1ado para planificar, modelar y automatizar la mayor\u00eda de los procesos de una empresa, tales como: finanzas, \u00e1rea comercial, log\u00edstica, producci\u00f3n, contabilidad, inventario, etc.</p> <p>Organiza y unifica toda la informaci\u00f3n de la empresa en un solo lugar, facilitando as\u00ed las tareas empresariales. El ERP utiliza una arquitectura modular, y cada m\u00f3dulo se encarga de gestionar un \u00e1rea diferente: finanzas, comercial, log\u00edstica, producci\u00f3n, contabilidad, inventario\u2026</p> Modulos ERP."},{"location":"1_4_ERP_CRM/#ventajas-de-un-sistema-erp","title":"Ventajas de un sistema ERP","text":"<p>Las principales ventajas de estos sistemas son:</p> <ul> <li>Automatizaci\u00f3n de los procesos empresariales.  </li> <li>Disponibilidad de la informaci\u00f3n de la empresa en una misma plataforma.  </li> <li>Integraci\u00f3n de las distintas bases de datos en un \u00fanico programa.  </li> <li>Ahorro de tiempo y costes.</li> </ul> <p>Adem\u00e1s, el ERP ofrece integraci\u00f3n con soluciones de BI (Business Intelligence), lo que permite generar informes sobre el estado de la empresa directamente a partir de los datos del sistema ERP. Esto proporciona un conocimiento detallado y actualizado que resulta esencial para analizar y mejorar procesos internos como marketing, ventas, organizaci\u00f3n y otros aspectos clave.</p>"},{"location":"1_4_ERP_CRM/#que-empresas-necesitan-un-sistema-erp","title":"\u00bfQu\u00e9 empresas necesitan un sistema ERP?","text":"<p>Un sistema ERP es adecuado para todo tipo de empresas, tanto multinacionales como pymes. Gracias a los diferentes m\u00f3dulos personalizables, cualquier empresa \u2014independientemente de sus procesos o del sector al que pertenezca\u2014 puede adaptar su propio ERP.</p> <p>Existen proveedores especializados en la implementaci\u00f3n de determinados ERPs, ya sea por tipo de producto o sector, lo que permite obtener mejores resultados tras su adquisici\u00f3n.</p>"},{"location":"1_4_ERP_CRM/#que-es-un-crm","title":"\u00bfQu\u00e9 es un CRM?","text":"<p>Un CRM (Customer Relationship Management o Gesti\u00f3n de Relaciones con Clientes) es una soluci\u00f3n orientada a gestionar tres \u00e1reas b\u00e1sicas: gesti\u00f3n comercial, marketing y atenci\u00f3n al cliente o postventa.</p> <p>El uso de un CRM forma parte de una estrategia centrada en el cliente, en la que todas las acciones tienen como objetivo final mejorar el servicio y la relaci\u00f3n con los clientes actuales y potenciales.</p> <p>La herramienta CRM y la orientaci\u00f3n al cliente ofrecen resultados demostrables, tanto por una gesti\u00f3n comercial estructurada que mejora la productividad en ventas, como por el conocimiento profundo del cliente que permite campa\u00f1as de marketing m\u00e1s efectivas.</p> <p>Las funciones de atenci\u00f3n al cliente de un CRM tambi\u00e9n fomentan la fidelizaci\u00f3n y satisfacci\u00f3n del cliente, lo que tiene un impacto muy positivo en t\u00e9rminos de ventas recurrentes y cruzadas.</p> CRM."},{"location":"1_4_ERP_CRM/#propuesta-debate","title":"Propuesta debate","text":"<p>\ud83d\udd0d Investiga algunos ERPs actuales disponibles en el mercado.</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_5_ERP_actuales/","title":"1.5. Historia y caracter\u00edsticas de los ERP","text":""},{"location":"1_5_ERP_actuales/#historia-del-erp","title":"Historia del ERP","text":"<p>Los sistemas ERP han evolucionado con el tiempo de la siguiente manera:</p> <p>Los antecedentes del ERP fueron los sistemas MRP (Material Requirements Planning \u2013 Planificaci\u00f3n de Requerimientos de Materiales).</p> <ul> <li>En los a\u00f1os 50, los sistemas MRP permit\u00edan realizar operaciones como: facturaci\u00f3n, administraci\u00f3n de n\u00f3minas, control de inventario...</li> <li>En los a\u00f1os 60 y 70, los MRP evolucionaron ayudando a reducir costes.</li> <li>En los a\u00f1os 80, los MRP pasaron a llamarse MRP II (Manufacturing Resource Planning \u2013 Planificaci\u00f3n de Recursos de Manufactura).</li> <li>En los a\u00f1os 90, el MRP II se expandi\u00f3 a \u00e1reas como Recursos Humanos, Finanzas, Gesti\u00f3n de Proyectos... dando lugar al ERP.</li> </ul> Historia del ERP."},{"location":"1_5_ERP_actuales/#clasificacion-de-los-erp","title":"Clasificaci\u00f3n de los ERP","text":""},{"location":"1_5_ERP_actuales/#segun-el-diseno","title":"Seg\u00fan el dise\u00f1o","text":"<ul> <li>ERP a medida: Es la soluci\u00f3n m\u00e1s costosa, ya que se desarrolla espec\u00edficamente para una empresa concreta. Se adapta al 100% al negocio, pero su principal inconveniente es el alto coste.</li> <li>ERP est\u00e1ndar: Tiene la ventaja de estar probado y ser m\u00e1s f\u00e1cil de implementar. Gracias a sus m\u00f3dulos adicionales, es altamente personalizable y m\u00e1s econ\u00f3mico que uno a medida. Muy utilizado por peque\u00f1as empresas.</li> </ul>"},{"location":"1_5_ERP_actuales/#segun-la-instalacion","title":"Seg\u00fan la instalaci\u00f3n","text":"<ul> <li>ERP local: Los servidores y dispositivos est\u00e1n instalados en la propia empresa. Su uso se limita a los equipos donde est\u00e1 instalado.</li> <li>ERP en la nube: Los servidores est\u00e1n alojados en la nube, lo que permite acceder desde cualquier dispositivo con conexi\u00f3n a Internet. La informaci\u00f3n se guarda en los servidores del proveedor, que suelen realizar copias de seguridad para evitar p\u00e9rdidas.</li> </ul>"},{"location":"1_5_ERP_actuales/#segun-solucion-vertical-u-horizontal","title":"Seg\u00fan soluci\u00f3n vertical u horizontal","text":"<ul> <li>ERP vertical: Dise\u00f1ado espec\u00edficamente para un sector concreto. Por ejemplo, bodegas y hospitales suelen usar este tipo de ERP.</li> <li>ERP horizontal: Puede servir para cualquier empresa, aunque requiere m\u00e1s adaptaci\u00f3n que uno vertical.</li> </ul>"},{"location":"1_5_ERP_actuales/#segun-el-tipo-de-software","title":"Seg\u00fan el tipo de software","text":"<ul> <li>ERP de c\u00f3digo abierto: Permite acceder libremente al c\u00f3digo fuente, lo que facilita su modificaci\u00f3n sin pagar al desarrollador. Requiere personal inform\u00e1tico capacitado. Su principal inconveniente es el tiempo necesario para desarrollar los m\u00f3dulos personalizados.</li> </ul> ERP de C\u00f3digo Abierto. <ul> <li>ERP de c\u00f3digo privado: No permite acceso al c\u00f3digo fuente. Solo puede ser modificado por los desarrolladores. Las pymes suelen optar por este tipo de ERP, ya que no requieren funcionalidades muy espec\u00edficas.</li> </ul> Ranking ERPs."},{"location":"1_5_ERP_actuales/#caracteristicas-de-los-erp","title":"Caracter\u00edsticas de los ERP","text":"<p>Las principales caracter\u00edsticas de un sistema ERP son:</p> <ul> <li>Integral: Todas las \u00e1reas de la empresa se comunican e intercambian informaci\u00f3n durante la ejecuci\u00f3n de los procesos. La gesti\u00f3n y control deben estar integrados para evitar duplicidades y asegurar eficiencia y trazabilidad.</li> <li>Modular: Cada empresa tiene procesos y departamentos distintos. El ERP debe permitir elegir los componentes necesarios: compras, ventas, materiales, finanzas, almac\u00e9n, recursos humanos, etc.</li> <li>Adaptable: Debe poder configurarse seg\u00fan los procesos, est\u00e1ndares y par\u00e1metros espec\u00edficos de cada empresa.</li> </ul>"},{"location":"1_5_ERP_actuales/#propuesta-debate-continuacion","title":"Propuesta debate continuaci\u00f3n","text":"<p>\ud83d\udccc Clasifica los ERPs que has investigado en la actividad del punto anterior seg\u00fan sus caracter\u00edsticas.</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_6_ERP_Libres_Privativos/","title":"1.6. Elecci\u00f3n de ERP. Aspectos a tener en cuenta.","text":""},{"location":"1_6_ERP_Libres_Privativos/#comparativa-entre-erps","title":"Comparativa entre ERPs","text":"<p>Los ERPs propietarios son elegidos por muchas empresas por la seguridad que ofrece trabajar con grandes compa\u00f1\u00edas especializadas en desarrollo de software. Adem\u00e1s, estos ERPs suelen ser m\u00e1s intuitivos en su uso gracias a interfaces m\u00e1s refinadas.</p> <p>Sin embargo, las peque\u00f1as y medianas empresas no tienen necesidades tan complejas; buscan m\u00f3dulos flexibles y personalizables. Esto hace que los ERPs de software libre sean m\u00e1s atractivos para este tipo de empresas.</p> <p>Para resolver problemas de soporte y facilidad de uso, las organizaciones que desarrollan ERPs de software libre ofrecen tutoriales que ayudan al usuario a entender el entorno de aplicaci\u00f3n. Adem\u00e1s, gracias al crecimiento de este tipo de soluciones, los desarrolladores est\u00e1n creando software cada vez m\u00e1s est\u00e9tico y manejable. Al tener acceso al c\u00f3digo fuente, los errores pueden compartirse y corregirse por otros usuarios.</p>"},{"location":"1_6_ERP_Libres_Privativos/#costes-e-implementacion","title":"Costes e implementaci\u00f3n","text":"<p>Software como SAP u Oracle requiere una gran inversi\u00f3n inicial, no solo por la compra de la licencia, sino tambi\u00e9n por los costes derivados del proceso de implementaci\u00f3n. Muchas empresas, tanto grandes como peque\u00f1as, no pueden asumir estos gastos, por lo que optan por ERPs como Odoo o Dolibarr.</p> <p>El proceso de implementaci\u00f3n con software propietario es m\u00e1s sencillo en cuanto a complejidad, pero suele ser m\u00e1s lento que con software de c\u00f3digo abierto. La mayor\u00eda de estos ERPs son modulares, lo que permite a las empresas instalar solo los m\u00f3dulos necesarios, reduciendo as\u00ed el tiempo de instalaci\u00f3n.</p>"},{"location":"1_6_ERP_Libres_Privativos/#tendencias-del-mercado","title":"Tendencias del mercado","text":"<p>En cuanto a la situaci\u00f3n del mercado, los ERPs de c\u00f3digo abierto est\u00e1n ganando terreno frente a las soluciones propietarias. Aunque llegaron m\u00e1s tarde, han conseguido ponerse al d\u00eda.</p> <p>Adem\u00e1s de los factores mencionados y las posibilidades que ofrecen, otro punto clave que ha contribuido a su \u00e9xito ha sido el desarrollo de aplicaciones compatibles con ERPs existentes. Es decir, estos sistemas de gesti\u00f3n de software libre han logrado trabajar conjuntamente con m\u00f3dulos ofrecidos por ERPs propietarios.</p> <p>Incluso en un escenario donde todos los consumidores optaran por software propietario, la presencia del software libre como alternativa reduce los precios, aumentando su valor. Esta compatibilidad se deriva de los efectos de red: las relaciones entre empresas, como clientes y proveedores en log\u00edstica y compras, hacen que estas interconexiones sean un factor competitivo clave.</p>"},{"location":"1_6_ERP_Libres_Privativos/#eleccion-del-erp","title":"Elecci\u00f3n del ERP","text":"<p>Al elegir entre un software u otro, es importante tener en cuenta diversos factores y definir claramente las necesidades que queremos cubrir en nuestra empresa tras la instalaci\u00f3n de un ERP.</p> Matriz de decisi\u00f3n de ERPs."},{"location":"1_6_ERP_Libres_Privativos/#principales-sistemas-erp-crm-del-mercado","title":"Principales Sistemas ERP-CRM del Mercado","text":"Logos de principales ERPs. <p>A continuaci\u00f3n se presentan algunos de los principales sistemas ERP y CRM disponibles actualmente. Esta tabla resume sus tipos y una breve descripci\u00f3n que permite identificar sus principales caracter\u00edsticas y enfoques empresariales.</p> Sistema Tipo Descripci\u00f3n breve SAP ERP ERP Soluci\u00f3n robusta para grandes empresas, altamente personalizable. Oracle NetSuite ERP ERP en la nube, ideal para medianas empresas. Microsoft Dynamics 365 ERP/CRM Plataforma integrada que combina ERP y CRM. Salesforce CRM L\u00edder en gesti\u00f3n de relaciones con clientes, basado en la nube. Zoho CRM CRM Soluci\u00f3n asequible para pymes, con buena integraci\u00f3n. Odoo ERP/CRM Software libre modular, adaptable a m\u00faltiples necesidades. Sage X3 ERP ERP orientado a la gesti\u00f3n financiera y producci\u00f3n. <p>La tabla muestra una clara diferenciaci\u00f3n entre sistemas orientados a la planificaci\u00f3n de recursos empresariales (ERP) y aquellos centrados en la gesti\u00f3n de relaciones con clientes (CRM). Algunos productos, como Microsoft Dynamics 365 y Odoo, ofrecen una soluci\u00f3n h\u00edbrida que permite integrar ambos mundos, lo cual es especialmente \u00fatil para empresas que buscan una plataforma unificada.</p> <p>Escalabilidad y tama\u00f1o empresarial</p> <ul> <li>SAP ERP y Oracle NetSuite est\u00e1n dise\u00f1ados para empresas medianas y grandes, con necesidades complejas de gesti\u00f3n financiera, log\u00edstica y producci\u00f3n.</li> <li>Zoho CRM y Odoo, por su flexibilidad y coste reducido, son opciones atractivas para pymes y startups que requieren una soluci\u00f3n funcional sin grandes inversiones iniciales.</li> </ul> <p>Modelo de despliegue</p> <ul> <li>Salesforce, NetSuite y Zoho CRM operan bajo modelos SaaS (Software as a Service), lo que facilita su implementaci\u00f3n y mantenimiento, al tiempo que reduce la necesidad de infraestructura local.</li> <li>SAP ERP y Sage X3 suelen requerir instalaciones locales o h\u00edbridas, lo que implica mayor control pero tambi\u00e9n mayor complejidad t\u00e9cnica.</li> </ul> <p>Licenciamiento y comunidad - Odoo destaca por su modelo de c\u00f3digo abierto, lo que permite personalizaciones profundas y una comunidad activa que contribuye a su evoluci\u00f3n. - En contraste, SAP, Salesforce y Microsoft Dynamics operan bajo licencias propietarias, con soporte profesional y garant\u00edas de servicio, aunque a un coste m\u00e1s elevado.</p> <p>Integraci\u00f3n y compatibilidad - Microsoft Dynamics 365 se integra de forma nativa con el ecosistema de Microsoft (Office, Azure, Power BI), lo que lo convierte en una opci\u00f3n estrat\u00e9gica para empresas que ya utilizan estas tecnolog\u00edas. - Salesforce ofrece una amplia gama de integraciones con herramientas de marketing, atenci\u00f3n al cliente y an\u00e1lisis de datos, siendo especialmente fuerte en entornos comerciales.</p> <p>Reflexi\u00f3n T\u00e9cnica</p> <p>La elecci\u00f3n de un sistema ERP-CRM no debe basarse \u00fanicamente en su popularidad o coste, sino en una evaluaci\u00f3n profunda de los procesos internos de la empresa, su proyecci\u00f3n de crecimiento, y la capacidad t\u00e9cnica del equipo para implementar y mantener la soluci\u00f3n. Adem\u00e1s, es fundamental considerar aspectos como:</p> <ul> <li>Requisitos de hardware y software</li> <li>Capacidad de personalizaci\u00f3n</li> <li>Soporte t\u00e9cnico y formaci\u00f3n</li> <li>Seguridad y cumplimiento normativo (GDPR, ISO, etc.)</li> </ul>"},{"location":"1_6_ERP_Libres_Privativos/#tipos-de-licencia-de-los-sistemas-erp-crm","title":"Tipos de Licencia de los Sistemas ERP-CRM","text":"<p>Los sistemas ERP-CRM pueden distribuirse bajo diferentes modelos de licencia:</p> <ul> <li>Propietaria: Requiere pago por uso o suscripci\u00f3n. Ejemplo: SAP, Salesforce.</li> <li>Software Libre / Open Source: C\u00f3digo abierto, permite modificaci\u00f3n y distribuci\u00f3n. Ejemplo: Odoo, ERPNext.</li> <li>Freemium: Versi\u00f3n gratuita con funcionalidades limitadas, ampliables mediante pago. Ejemplo: Zoho CRM.</li> <li>SaaS (Software as a Service): Acceso mediante suscripci\u00f3n en la nube. Ejemplo: NetSuite, Dynamics 365.</li> </ul> <p>Tabla Comparativa de tipo de licencia de Sistemas ERP-CRM</p> Caracter\u00edstica SAP ERP Odoo Salesforce Dynamics 365 Oracle NetSuite Tipo ERP ERP/CRM CRM ERP/CRM ERP Licencia Propietaria Libre SaaS SaaS SaaS Escalabilidad Alta Media-Alta Alta Alta Alta Personalizaci\u00f3n Completa Modular Alta Alta Alta Integraci\u00f3n Compleja Sencilla Excelente Excelente Excelente Coste Elevado Bajo-Medio Medio-Alto Medio-Alto Medio-Alto Comunidad/Soporte Amplio Activa Profesional Profesional Profesional"},{"location":"1_6_ERP_Libres_Privativos/#sistemas-operativos-recomendados","title":"Sistemas Operativos Recomendados","text":"<p>Cada sistema ERP-CRM tiene requisitos espec\u00edficos de sistema operativo, que dependen de su arquitectura, modelo de despliegue (local o en la nube), y compatibilidad con otros componentes del sistema.</p> Sistema ERP-CRM SO Recomendado SAP ERP Windows Server, Linux Odoo Linux (Ubuntu, Debian) Salesforce Web-based (independiente del SO) Dynamics 365 Windows Server, Web-based Zoho CRM Web-based Oracle NetSuite Web-based (independiente del SO) <p>La tabla presentada ofrece una visi\u00f3n clara y comparativa de los sistemas operativos recomendados para distintos ERP-CRM, destacando c\u00f3mo el modelo de despliegue influye directamente en los requisitos t\u00e9cnicos. Se observa que las soluciones tradicionales como SAP ERP y Odoo requieren entornos espec\u00edficos (Windows Server o distribuciones Linux), mientras que las plataformas modernas basadas en la nube \u2014como Salesforce, Zoho CRM y Oracle NetSuite\u2014 eliminan esa dependencia, permitiendo acceso multiplataforma desde cualquier sistema operativo con navegador web.</p> <p>Este enfoque refleja la evoluci\u00f3n del software empresarial hacia modelos SaaS, donde la infraestructura local pierde protagonismo frente a la flexibilidad, escalabilidad y accesibilidad que ofrece la nube. Adem\u00e1s, facilita la adopci\u00f3n en organizaciones con entornos heterog\u00e9neos, reduciendo barreras t\u00e9cnicas y mejorando la experiencia del usuario final.</p> <p>En conjunto, la tabla sirve como herramienta \u00fatil para orientar decisiones de implementaci\u00f3n seg\u00fan las capacidades del entorno inform\u00e1tico disponible.</p>"},{"location":"1_6_ERP_Libres_Privativos/#sistemas-gestores-de-bases-de-datos-asociados-a-los-principales-erp-crm","title":"Sistemas Gestores de Bases de Datos asociados a los principales ERP-CRM","text":"<p>Los sistemas ERP-CRM requieren una base de datos robusta, escalable y segura para almacenar y gestionar grandes vol\u00famenes de informaci\u00f3n empresarial. La elecci\u00f3n del SGBD influye directamente en el rendimiento, la capacidad de integraci\u00f3n y la escalabilidad del sistema.</p> Sistema ERP-CRM SGBD Compatible/Recomendado SAP ERP SAP HANA, Oracle, SQL Server Oracle NetSuite Oracle Cloud Infrastructure (OCI) Odoo PostgreSQL Salesforce Propietario (multi-tenant) Microsoft Dynamics 365 SQL Server Zoho CRM Propietario <ul> <li> <p>SAP ERP</p> <ul> <li>SAP HANA es el SGBD nativo y recomendado por SAP. Se trata de una base de datos en memoria que permite procesamiento en tiempo real, ideal para entornos de alta demanda.</li> <li>Oracle y SQL Server son compatibles en versiones anteriores o en instalaciones h\u00edbridas, aunque SAP est\u00e1 migrando progresivamente hacia HANA como est\u00e1ndar.</li> <li>Ventajas: rendimiento extremo, an\u00e1lisis predictivo, integraci\u00f3n con SAP BW y SAP Fiori.</li> <li>Consideraciones: requiere hardware certificado y conocimientos avanzados en administraci\u00f3n de bases en memoria.</li> </ul> </li> <li> <p>Oracle NetSuite</p> <ul> <li>Utiliza la infraestructura de Oracle Cloud Infrastructure (OCI), con bases de datos Oracle altamente optimizadas para SaaS.</li> <li>Arquitectura multitenant, escalable y segura, con replicaci\u00f3n autom\u00e1tica y recuperaci\u00f3n ante desastres.</li> <li>Ventajas: rendimiento empresarial, integraci\u00f3n nativa con otros servicios Oracle (Analytics, Autonomous DB).</li> <li>Consideraciones: acceso limitado al backend, pero con potentes herramientas de personalizaci\u00f3n mediante SuiteScript y SuiteAnalytics.</li> </ul> </li> <li> <p>Odoo</p> <ul> <li>Utiliza PostgreSQL como \u00fanico motor de base de datos soportado oficialmente.</li> <li>PostgreSQL ofrece una excelente relaci\u00f3n rendimiento/estabilidad, con soporte para transacciones ACID, extensiones como PostGIS y una comunidad activa.</li> <li>Ventajas: c\u00f3digo abierto, alta fiabilidad, f\u00e1cil de escalar horizontalmente.</li> <li>Consideraciones: se recomienda ajustar par\u00e1metros como <code>work_mem</code>, <code>shared_buffers</code> y <code>effective_cache_size</code> para entornos productivos.</li> </ul> </li> <li> <p>Salesforce</p> <ul> <li>Opera sobre una arquitectura multi-tenant con un sistema de base de datos propietario altamente optimizado para entornos SaaS.</li> <li>No se tiene acceso directo al SGBD, pero se interact\u00faa mediante APIs (REST, SOAP) y herramientas como SOQL (Salesforce Object Query Language).</li> <li>Ventajas: alta disponibilidad, replicaci\u00f3n autom\u00e1tica, escalabilidad global.</li> <li>Consideraciones: las limitaciones de consulta y almacenamiento deben ser gestionadas cuidadosamente en grandes vol\u00famenes de datos.</li> </ul> </li> <li> <p>Microsoft Dynamics 365</p> <ul> <li>Utiliza SQL Server como base de datos principal, tanto en instalaciones locales como en entornos cloud (Azure SQL).</li> <li>SQL Server permite integraci\u00f3n con Power BI, Azure Synapse y otras herramientas del ecosistema Microsoft.</li> <li>Ventajas: seguridad avanzada, replicaci\u00f3n, an\u00e1lisis OLAP, compatibilidad con T-SQL.</li> <li>Consideraciones: se recomienda configurar \u00edndices, particiones y planes de mantenimiento para optimizar el rendimiento.</li> </ul> </li> <li> <p>Zoho CRM</p> <ul> <li>Utiliza un sistema de base de datos propietario, dise\u00f1ado para operar en la nube bajo arquitectura SaaS.</li> <li>Al igual que Salesforce, el acceso se realiza mediante APIs y herramientas de integraci\u00f3n como Zoho Creator o Zoho Analytics.</li> <li>Ventajas: simplicidad de uso, integraci\u00f3n nativa con otros productos Zoho.</li> <li>Consideraciones: limitado acceso a la estructura interna de la base de datos, lo que puede dificultar auditor\u00edas o migraciones complejas.</li> </ul> </li> </ul> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_7_CRM_Actuales/","title":"1.7. CRM Actual","text":"<p>Una soluci\u00f3n o herramienta CRM (Customer Relationship Management o Gesti\u00f3n de Relaciones con Clientes) puede incorporar distintos tipos de funciones con prop\u00f3sitos complementarios.</p>"},{"location":"1_7_CRM_Actuales/#crm-operativo","title":"CRM Operativo","text":"<p>El CRM operativo permite organizar los procesos empresariales. Por un lado, facilita la coordinaci\u00f3n y estandariza los procedimientos de trabajo de cada departamento. Por otro, permite gestionar las actividades directamente relacionadas con el cliente, como el centro de llamadas, el servicio de asistencia o las campa\u00f1as de marketing.</p> <p>En resumen, optimiza la gesti\u00f3n operativa de la empresa.</p>"},{"location":"1_7_CRM_Actuales/#crm-analitico","title":"CRM Anal\u00edtico","text":"<p>El CRM anal\u00edtico facilita el an\u00e1lisis de la informaci\u00f3n disponible sobre clientes y ventas. El t\u00e9rmino \u201canal\u00edtico\u201d se refiere al procesamiento y tratamiento de datos.</p> <p>Estas herramientas permiten conocer el impacto de la actividad en los resultados de la empresa y la rentabilidad de las distintas unidades de negocio. Esta informaci\u00f3n es muy valiosa, ya que facilita la toma de decisiones e identifica las estrategias comerciales y de marketing m\u00e1s rentables.</p>"},{"location":"1_7_CRM_Actuales/#crm-colaborativo","title":"CRM Colaborativo","text":"<p>El CRM colaborativo centraliza todos los canales de comunicaci\u00f3n utilizados por las partes interesadas (personal, proveedores, clientes\u2026). El objetivo es compartir y centralizar toda la informaci\u00f3n para ofrecer un trato individual y personalizado.</p> <p>Conocer de antemano todas las caracter\u00edsticas de un cliente \u2014como si fuera \u00fanico\u2014 (nombre, apellidos, lugar de residencia, h\u00e1bitos y preferencias de compra) permite segmentar mejor y proponer el producto o servicio ideal en el momento adecuado.</p>"},{"location":"1_7_CRM_Actuales/#modelos-de-crm-mas-utilizados-por-las-empresas","title":"Modelos de CRM m\u00e1s utilizados por las empresas","text":"<p>Un software CRM es un sistema para:</p> <ul> <li>Gestionar autom\u00e1ticamente y de forma centralizada la relaci\u00f3n con el cliente.  </li> <li>Mejorar los intercambios con clientes y contactos en general.  </li> <li>Fidelizar, transmitir una imagen positiva y coherente de la empresa.  </li> <li>Generar leads (clientes potenciales) y aumentar las ventas.  </li> <li>Optimizar procesos comerciales como la prospecci\u00f3n, las ventas y el marketing.</li> </ul>"},{"location":"1_7_CRM_Actuales/#las-soluciones-crm-mas-completas-del-mercado","title":"Las soluciones CRM m\u00e1s completas del mercado","text":"<p>Las soluciones m\u00e1s completas integran los tres tipos de CRM: operativo, anal\u00edtico y colaborativo.</p>"},{"location":"1_7_CRM_Actuales/#sugarcrm","title":"SugarCRM","text":"<p>Herramienta con arquitectura abierta que facilita la sincronizaci\u00f3n con otros programas internos y aplicaciones de terceros. Prioriza la flexibilidad, el intercambio de informaci\u00f3n y la facilidad de uso.</p>"},{"location":"1_7_CRM_Actuales/#vtiger","title":"VTiger","text":"<p>Adem\u00e1s de las funciones b\u00e1sicas, incluye gesti\u00f3n de facturaci\u00f3n y pedidos:</p> <ul> <li>Proveedores  </li> <li>Listas de precios  </li> <li>Cat\u00e1logo de productos  </li> <li>Presupuestos  </li> <li>Emisi\u00f3n de facturas</li> </ul> <p>Permite gestionar por contactos, cuentas, proyectos o l\u00edneas de negocio. Ambas herramientas se caracterizan por una presentaci\u00f3n sobria pero intuitiva y eficiente.</p>"},{"location":"1_7_CRM_Actuales/#salesforce","title":"Salesforce","text":"<p>Con m\u00e1s de 17 a\u00f1os de experiencia, Salesforce es una de las soluciones m\u00e1s completas y populares del mercado.</p> <p>La nueva plataforma Lightning Design ofrece un servicio en la nube adaptado a la era digital. No solo mejora las ventas y atrae nuevos clientes, sino que tambi\u00e9n analiza inteligentemente los datos disponibles para anticiparse a sus necesidades.</p>"},{"location":"1_7_CRM_Actuales/#microsoft-dynamics-365","title":"Microsoft Dynamics 365","text":"<p>Gracias a la transformaci\u00f3n digital y al desarrollo de aplicaciones inteligentes en la nube, Microsoft ofrece su propia soluci\u00f3n.</p> <p>Facilita la integraci\u00f3n de un CRM y un ERP, adem\u00e1s de otros dispositivos y herramientas de Microsoft que las empresas utilizan a diario, como Outlook.</p>"},{"location":"1_7_CRM_Actuales/#que-tipo-de-aplicacion-crm-necesita-mi-empresa","title":"\u00bfQu\u00e9 tipo de aplicaci\u00f3n CRM necesita mi empresa?","text":"<p>Depende del uso que vayas a darle, de las necesidades de tu negocio y del tama\u00f1o de tu empresa.</p> <p>Compara funciones, precios y caracter\u00edsticas de los distintos softwares disponibles y elige el que cumpla con todos tus requisitos.</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_8_Modelos_Servicio/","title":"1.8. Modelos de Servicio","text":""},{"location":"1_8_Modelos_Servicio/#tipos-de-despliegue-de-sistemas-empresariales","title":"Tipos de Despliegue de Sistemas Empresariales","text":"<p>Adem\u00e1s de los modelos de servicio, es fundamental entender c\u00f3mo se despliegan los sistemas empresariales en funci\u00f3n de la infraestructura disponible y las necesidades de la organizaci\u00f3n.</p>"},{"location":"1_8_Modelos_Servicio/#on-premise-local","title":"On-Premise (Local)","text":"<p>El software se instala y ejecuta en servidores propios de la empresa, dentro de sus instalaciones f\u00edsicas.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Control total sobre los datos y la infraestructura  </li> <li>Requiere inversi\u00f3n en hardware, licencias y personal t\u00e9cnico  </li> <li>Mayor personalizaci\u00f3n y adaptaci\u00f3n a procesos internos  </li> <li>Ideal para empresas con pol\u00edticas estrictas de seguridad o sin acceso fiable a internet  </li> </ul> <p>Ventajas:</p> <ul> <li>M\u00e1ximo control y privacidad  </li> <li>Integraci\u00f3n profunda con sistemas internos  </li> <li>Sin dependencia de terceros  </li> </ul> <p>Inconvenientes:</p> <ul> <li>Costes elevados de instalaci\u00f3n y mantenimiento  </li> <li>Escalabilidad limitada  </li> <li>Actualizaciones m\u00e1s lentas  </li> </ul>"},{"location":"1_8_Modelos_Servicio/#cloud-en-la-nube","title":"Cloud (En la nube)","text":"<p>El software se aloja en servidores externos gestionados por un proveedor. Se accede a trav\u00e9s de internet.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Modelo de pago por uso o suscripci\u00f3n  </li> <li>Escalabilidad inmediata  </li> <li>Mantenimiento delegado al proveedor  </li> <li>Acceso desde cualquier lugar  </li> </ul> <p>Ventajas:</p> <ul> <li>Reducci\u00f3n de costes iniciales  </li> <li>Flexibilidad y movilidad  </li> <li>Actualizaciones autom\u00e1ticas  </li> </ul> <p>Inconvenientes:</p> <ul> <li>Dependencia de conexi\u00f3n  </li> <li>Menor control sobre los datos  </li> <li>Riesgos de seguridad si no se gestiona adecuadamente  </li> </ul>"},{"location":"1_8_Modelos_Servicio/#hibrido","title":"H\u00edbrido","text":"<p>Combina elementos de los modelos on-premise y cloud. Algunas aplicaciones o datos se alojan localmente, mientras que otros se gestionan en la nube.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Permite mantener datos sensibles en local y aprovechar la nube para otras funciones  </li> <li>Ideal para empresas en transici\u00f3n hacia la nube  </li> <li>Requiere una arquitectura bien dise\u00f1ada para evitar duplicidades y problemas de integraci\u00f3n  </li> </ul> <p>Ventajas:</p> <ul> <li>Equilibrio entre control y flexibilidad  </li> <li>Optimizaci\u00f3n de costes  </li> <li>Adaptaci\u00f3n progresiva a la nube  </li> </ul> <p>Inconvenientes:</p> <ul> <li>Mayor complejidad t\u00e9cnica  </li> <li>Necesidad de sincronizaci\u00f3n entre entornos  </li> <li>Posibles problemas de compatibilidad  </li> </ul> Modelos de despliegue: On-Premise, Cloud y H\u00edbrido."},{"location":"1_8_Modelos_Servicio/#modelos-de-servicio-en-la-nube","title":"Modelos de Servicio en la Nube","text":"<p>La computaci\u00f3n en la nube ha revolucionado la forma en que las empresas acceden, gestionan y explotan sus sistemas de informaci\u00f3n. Permite utilizar recursos inform\u00e1ticos a trav\u00e9s de internet sin necesidad de infraestructura propia, lo que facilita la escalabilidad, el mantenimiento y el acceso remoto.</p>"},{"location":"1_8_Modelos_Servicio/#saas-software-as-a-service","title":"SaaS \u2013 Software as a Service","text":"<p>El software se ofrece como un servicio accesible desde cualquier navegador. El proveedor se encarga del mantenimiento, actualizaciones y seguridad.</p> <p>Ejemplos: ERP en la nube como Odoo Online, CRM como Salesforce, herramientas ofim\u00e1ticas como Microsoft 365 o Google Workspace.</p> <p>Ventajas:</p> <ul> <li>No requiere instalaci\u00f3n local  </li> <li>Acceso desde cualquier dispositivo  </li> <li>Coste por suscripci\u00f3n  </li> <li>Actualizaciones autom\u00e1ticas  </li> </ul> <p>Inconvenientes:</p> <ul> <li>Menor personalizaci\u00f3n  </li> <li>Dependencia de conexi\u00f3n a internet  </li> <li>Posibles restricciones de integraci\u00f3n  </li> </ul>"},{"location":"1_8_Modelos_Servicio/#paas-platform-as-a-service","title":"PaaS \u2013 Platform as a Service","text":"<p>Se ofrece una plataforma completa para desarrollar, probar y desplegar aplicaciones. Incluye sistema operativo, servidor web, base de datos y herramientas de desarrollo.</p> <p>Ejemplos: Google App Engine, Microsoft Azure App Services, Heroku</p> <p>Ventajas:</p> <ul> <li>Entorno listo para desarrollo  </li> <li>Escalabilidad autom\u00e1tica  </li> <li>Reducci\u00f3n de costes de infraestructura  </li> </ul> <p>Inconvenientes:</p> <ul> <li>Dependencia del proveedor  </li> <li>Limitaciones en tecnolog\u00edas soportadas  </li> </ul>"},{"location":"1_8_Modelos_Servicio/#iaas-infrastructure-as-a-service","title":"IaaS \u2013 Infrastructure as a Service","text":"<p>Proporciona infraestructura virtual: servidores, almacenamiento, redes, etc. El cliente gestiona el sistema operativo y las aplicaciones.</p> <p>Ejemplos: Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform</p> <p>Ventajas:</p> <ul> <li>Control total sobre la configuraci\u00f3n  </li> <li>Escalabilidad bajo demanda  </li> <li>Pago por uso  </li> </ul> <p>Inconvenientes:</p> <ul> <li>Mayor complejidad t\u00e9cnica  </li> <li>Requiere personal especializado  </li> </ul> Modelos de servicio en la nube: SaaS, PaaS, IaaS. <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"1_9_Terminolog%C3%ADa/","title":"1.8. Terminolog\u00eda ERP","text":"<p>Este glosario recoge los t\u00e9rminos m\u00e1s utilizados en el \u00e1mbito de los sistemas ERP (Enterprise Resource Planning), traducidos al castellano para facilitar su comprensi\u00f3n.</p>"},{"location":"1_9_Terminolog%C3%ADa/#glosario-de-terminos","title":"Glosario de t\u00e9rminos","text":"<ul> <li>Aplicaci\u00f3n de terceros: Software que no ha sido desarrollado por el proveedor del ERP.  </li> <li>An\u00e1lisis ABC: Clasificaci\u00f3n de art\u00edculos seg\u00fan su valor y frecuencia de uso.  </li> <li>Periodo contable: Intervalo de tiempo que incluye todas las transacciones financieras (normalmente 12 meses).  </li> <li>Cuentas por pagar: Saldos pendientes que la empresa debe a sus proveedores.  </li> <li>Cuentas por cobrar: Saldos pendientes que los clientes deben a la empresa.  </li> <li>Costo real: Valor de una transacci\u00f3n seg\u00fan el coste pagado al proveedor o empleado.  </li> <li>Planificaci\u00f3n avanzada (APS): M\u00e9todo que equilibra capacidad y materiales para optimizar la producci\u00f3n.  </li> <li>Antig\u00fcedad (Aging): D\u00edas transcurridos desde la emisi\u00f3n de una factura.  </li> <li>Asignaci\u00f3n: Reserva de materiales para una orden espec\u00edfica.  </li> <li>API (Interfaz de programaci\u00f3n de aplicaciones): Funciones del ERP accesibles para desarrolladores.  </li> <li>Montaje bajo pedido (ATO): Estrategia de producci\u00f3n r\u00e1pida de productos personalizados.  </li> <li>Disponible para prometer (ATP): Fecha estimada de disponibilidad de producto para env\u00edo.  </li> <li>B2B / B2C: Venta entre empresas / Venta a consumidores.  </li> <li>Backflush: Emisi\u00f3n autom\u00e1tica de materiales desde inventario a una orden de trabajo.  </li> <li>Pedido pendiente (Backorder): Pedido que no puede completarse por falta de stock.  </li> <li>C\u00f3digo de barras: Representaci\u00f3n gr\u00e1fica de datos legibles por esc\u00e1ner.  </li> <li>Inteligencia empresarial (BI): Herramientas para visualizar indicadores clave (KPIs).  </li> <li>Carta de porte (BOL): Detalle de lo que se env\u00eda, entregado al transportista.  </li> <li>Lista de materiales (BOM): Materias primas necesarias para fabricar un producto.  </li> <li>Cuello de botella: Recurso cuya capacidad limita el rendimiento global.  </li> <li>Fabricar para stock: Producci\u00f3n basada en previsiones de demanda.  </li> <li>Carga indirecta (Burden): Costes no relacionados directamente con materiales o mano de obra.  </li> <li>Capacidad: Tiempo disponible en un recurso.  </li> <li>Planificaci\u00f3n de necesidades de capacidad (CRP): C\u00e1lculo de capacidad necesaria para la demanda.  </li> <li>Nube (Cloud): M\u00e9todo de despliegue que usa servidores remotos.  </li> <li>CPQ (Configurar, Precio, Cotizar): Software para configurar productos y generar presupuestos.  </li> <li>Consumibles: Art\u00edculos que se gastan al recibirlos, sin pasar por inventario.  </li> <li>CRM (Gesti\u00f3n de relaciones con clientes): Software para gestionar interacciones con clientes.  </li> <li>Contaje c\u00edclico: Auditor\u00eda regular de inventario por muestreo.  </li> <li>Demanda: Art\u00edculos necesarios para cumplir pedidos.  </li> <li>Desglose (Drill Down): Acceso al detalle de los datos visualizados.  </li> <li>Env\u00edo directo (Drop Ship): Art\u00edculos enviados directamente al cliente desde el proveedor.  </li> <li>Comercio electr\u00f3nico: Transacciones de compra/venta por Internet.  </li> <li>EDI (Intercambio electr\u00f3nico de datos): Transferencia autom\u00e1tica de datos entre sistemas.  </li> <li>EFT (Transferencia electr\u00f3nica de fondos): Transferencia autom\u00e1tica de dinero entre bancos.  </li> <li>Ingenier\u00eda bajo pedido (ETO): Producci\u00f3n personalizada tras recibir el pedido.  </li> <li>ERP (Planificaci\u00f3n de recursos empresariales): Software que integra todas las \u00e1reas de la empresa.  </li> <li>Estimaci\u00f3n: C\u00e1lculo de coste y precio de venta de un art\u00edculo.  </li> <li>FIFO / LIFO: M\u00e9todos de valoraci\u00f3n de inventario (primero en entrar / \u00faltimo en entrar).  </li> <li>A\u00f1o fiscal: A\u00f1o definido por la empresa para informes financieros.  </li> <li>Activos fijos: Bienes necesarios para la producci\u00f3n que no generan liquidez inmediata.  </li> <li>Cantidad fija de pedido: Reposici\u00f3n autom\u00e1tica de una cantidad predefinida.  </li> <li>FOB (Libre a bordo): Punto en que se transfiere la propiedad del producto.  </li> <li>Previsi\u00f3n: Estimaci\u00f3n de demanda futura.  </li> <li>Error de previsi\u00f3n: Diferencia entre valor real y previsto.  </li> <li>Libro mayor (G/L): Registro de todas las transacciones financieras.  </li> <li>Implementaci\u00f3n: Configuraci\u00f3n del ERP y formaci\u00f3n del personal.  </li> <li>Estado de resultados: Informe de ingresos y gastos para determinar beneficios o p\u00e9rdidas.  </li> <li>Software integrado: Aplicaci\u00f3n que combina m\u00faltiples funciones.  </li> <li>Inventario: Lista de art\u00edculos disponibles con cantidad y valor.  </li> <li>Ajuste de inventario: Modificaci\u00f3n manual del inventario.  </li> <li>Factura: Documento que detalla productos/servicios y su valor.  </li> <li>Fecha de factura: Fecha de emisi\u00f3n de la factura.  </li> <li>Art\u00edculo: Unidad individual en inventario.  </li> <li>JIT (Justo a tiempo): M\u00e9todo para minimizar inventario.  </li> <li>Orden de trabajo: Autorizaci\u00f3n para producir una cantidad definida de un art\u00edculo.  </li> <li>Coste de orden de trabajo: Valor de materiales, mano de obra y otros costes asociados.  </li> <li>KPI (Indicador clave de rendimiento): M\u00e9trica que refleja el cumplimiento de objetivos.  </li> <li>Tiempo de entrega (Lead Time): Tiempo entre pedido y disponibilidad del producto.  </li> <li>Fabricaci\u00f3n ajustada (Lean): M\u00e9todo que busca reducir desperdicios.  </li> <li>N\u00famero de lote: Identificador de una cantidad espec\u00edfica de material.  </li> <li>Fabricar bajo pedido (MTO): Producci\u00f3n que comienza tras recibir el pedido.  </li> <li>Fabricar para stock (MTS): Producci\u00f3n basada en previsiones.  </li> <li>Programa maestro de producci\u00f3n (MPS): Planificaci\u00f3n de producci\u00f3n por periodo.  </li> <li>MRP / MRP II: Planificaci\u00f3n de necesidades de materiales / Recursos de manufactura.  </li> <li>NAICS: Clasificaci\u00f3n industrial est\u00e1ndar en EE. UU.  </li> <li>Subcontrataci\u00f3n: Uso de terceros para realizar tareas.  </li> <li>Costes indirectos (Overhead): Costes generales no ligados a producci\u00f3n.  </li> <li>Albar\u00e1n: Lista de art\u00edculos incluidos en un env\u00edo.  </li> <li>N\u00famero de parte: Identificador \u00fanico de cada art\u00edculo.  </li> <li>Recuento f\u00edsico: Conteo manual de todo el inventario.  </li> <li>Compra: Proceso de adquisici\u00f3n de materiales o servicios.  </li> <li>Orden de compra: Autorizaci\u00f3n para adquirir productos o servicios.  </li> <li>Solicitud de compra: Petici\u00f3n de aprobaci\u00f3n para comprar.  </li> <li>Cotizaci\u00f3n: Lista de productos/servicios con precios.  </li> <li>Materia prima: Materiales utilizados en la fabricaci\u00f3n.  </li> <li>Recepci\u00f3n: Proceso de entrada de mercanc\u00eda.  </li> <li>Nivel de reposici\u00f3n: Punto que activa una nueva compra.  </li> <li>Reposici\u00f3n: Reabastecimiento de inventario.  </li> <li>Autorizaci\u00f3n de devoluci\u00f3n (RMA): Permiso para devolver productos.  </li> <li>Ruta de producci\u00f3n: Secuencia de pasos para fabricar un art\u00edculo.  </li> <li>Stock de seguridad: Reserva para imprevistos.  </li> <li>Pedido de venta: Autorizaci\u00f3n del cliente para recibir productos.  </li> <li>Planificaci\u00f3n: Organizaci\u00f3n de pedidos para optimizar recursos.  </li> <li>SCM (Gesti\u00f3n de la cadena de suministro): Control de todas las actividades log\u00edsticas.  </li> <li>M\u00e9todo de env\u00edo (Ship Via): Forma de transporte del producto.  </li> <li>Env\u00edo: Proceso de documentaci\u00f3n y entrega de productos.  </li> <li>Licencia de software: Autorizaci\u00f3n para usar un programa.  </li> <li>C\u00f3digo fuente: Propiedad intelectual del software.  </li> <li>Repuestos: Art\u00edculos en stock para mantenimiento.  </li> <li>Proveedor: Organizaci\u00f3n externa que abastece inventario.  </li> <li>Cadena de suministro: Red de actividades desde proveedor hasta cliente final.  </li> <li>Administrador de sistemas: Responsable de configuraci\u00f3n y mantenimiento del ERP.  </li> <li>Hoja de ruta (Traveler): Documento que acompa\u00f1a al producto en producci\u00f3n.  </li> <li>Campo definido por el usuario (UDF): Campo personalizable en el ERP.  </li> <li>Interfaz de usuario (UI): Forma en que el usuario interact\u00faa con el sistema.  </li> <li>Unidad de medida (UOM): Forma de contar un art\u00edculo (unidad, kg, cm\u2026).  </li> <li>Actualizaci\u00f3n: Reemplazo de la versi\u00f3n actual del software por una m\u00e1s reciente.  </li> <li>Usuario: Persona autorizada para acceder al ERP.  </li> <li>Inventario gestionado por proveedor: Stock controlado por el proveedor.  </li> <li>Almac\u00e9n: Lugar donde se guarda inventario.  </li> <li>Trabajo en curso: Art\u00edculos en proceso de producci\u00f3n.</li> </ul> <p>_Licenciado bajo la [Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.</p>"},{"location":"2_1_IntroduccionPython/","title":"Introducci\u00f3n a Python","text":"<p>Empezamos esta secci\u00f3n con una serie de contenidos dedicados a aprender Python, el lenguaje de programaci\u00f3n que vamos a utilizar para crear los m\u00f3dulos de Odoo. </p> <p>Antes de nada contextualicemos qu\u00e9 es Python y como ha llegado hasta aqu\u00ed.</p>"},{"location":"2_1_IntroduccionPython/#un-poco-de-historia","title":"Un poco de historia","text":"<p>Para empezar, qu\u00e9 mejor manera que conocer qu\u00e9 es Python y cu\u00e1les son sus principales caracter\u00edsticas, que lo han convertido en uno de los lenguajes m\u00e1s utilizados hoy en d\u00eda.</p> Guido van Rossum <p>Todo comenz\u00f3 con Guido van Rossum, un desarrollador holand\u00e9s que, a finales de los a\u00f1os 80, decidi\u00f3 crear casi por hobby un lenguaje de scripting. Es decir, un lenguaje pensado m\u00e1s para el trabajo en sistemas que para la creaci\u00f3n de aplicaciones completas. Su objetivo era que tuviera una sintaxis similar a C y que adem\u00e1s fuera f\u00e1cil tanto de aprender como de utilizar.</p> <p>La primera versi\u00f3n de este lenguaje, que llam\u00f3 Python en honor al grupo c\u00f3mico Monty Python, no tuvo una gran acogida inicial. Sin embargo, sent\u00f3 las bases de lo que hoy es Python: un lenguaje muy vers\u00e1til y ampliamente extendido.</p> <p>Durante todo este tiempo, han colaborado muchas personas en el proyecto, pero Guido segu\u00eda siendo el coordinador principal. De hecho, ten\u00eda un t\u00edtulo honor\u00edfico: BDFL (Benevolent Dictator For Life), lo que le otorgaba la \u00faltima palabra sobre las decisiones del proyecto. No obstante, desde mediados de 2018, Guido se retir\u00f3 de ese cargo para quedarse en un segundo plano.</p>"},{"location":"2_1_IntroduccionPython/#definiendo-python","title":"Definiendo Python","text":"<p>La mejor manera de definir Python es como un lenguaje de programaci\u00f3n de prop\u00f3sito general. Esto puede parecer contradictorio despu\u00e9s de haber comentado que naci\u00f3 como lenguaje de scripts, pero aunque ese fue su punto de partida, Python pronto se convirti\u00f3 en un lenguaje capaz de aplicarse a la creaci\u00f3n de casi cualquier tipo de aplicaci\u00f3n.</p> <p>Se utiliza para desarrollar videojuegos, gestionar microcontroladores, construir elementos del stack web, crear scripts, y \u00faltimamente, en \u00e1reas tan populares como la inteligencia artificial o la ciencia de datos.</p> <p>Es un lenguaje de alto nivel, y en este caso, interpretado, no compilado. Esto implica, por un lado, mayores tiempos de ejecuci\u00f3n y la necesidad de incluir siempre el int\u00e9rprete para su ejecuci\u00f3n. Pero por otro lado, esa misma necesidad facilita la multiplataforma: cualquier sistema que tenga un int\u00e9rprete puede ejecutar c\u00f3digo Python.</p> <p>Adem\u00e1s, Python posee una licencia libre llamada PSFL (Python Software Foundation License). Aunque no es la licencia GPL, permite realizar modificaciones del c\u00f3digo que no sean libres, y es compatible con GPL, ya que permite trabajar con otros c\u00f3digos desarrollados bajo esa licencia.</p>"},{"location":"2_1_IntroduccionPython/#caracteristicas-tecnicas","title":"Caracter\u00edsticas t\u00e9cnicas","text":"<p>Entrando en las caracter\u00edsticas t\u00e9cnicas, una de las m\u00e1s llamativas es que Python es un lenguaje multiparadigma, soportando:</p> <ul> <li>Programaci\u00f3n funcional  </li> <li>Programaci\u00f3n orientada a objetos  </li> <li>Programaci\u00f3n estructurada cl\u00e1sica  </li> </ul> <p>Tambi\u00e9n soporta tipado din\u00e1mico, lo que permite al programador despreocuparse de la asignaci\u00f3n del tipo de variable. Es el propio int\u00e9rprete quien infiere el tipo a partir del valor asignado.</p> <p>Incluye un garbage collector (recolector de basura) que limpia autom\u00e1ticamente las estructuras de datos que ocupan memoria y ya no est\u00e1n en uso.</p> <p>Es un lenguaje extensible, lo que significa que se le pueden a\u00f1adir nuevas caracter\u00edsticas mediante m\u00f3dulos o paquetes. Un m\u00f3dulo no es m\u00e1s que un fichero de c\u00f3digo Python que puede ser reutilizado en nuestros programas.</p> <p>Adem\u00e1s, es posible crear m\u00f3dulos no solo en Python, sino tambi\u00e9n en lenguajes como C++, que pueden ser considerados como m\u00f3dulos del sistema. Existe tambi\u00e9n el concepto de paquete, que podemos entender como un conjunto de m\u00f3dulos con un objetivo com\u00fan.</p> <p>Para gestionar estos paquetes, Python incluye una herramienta llamada pip, algo similar a npm en Node.js. Esta herramienta permite gestionar los paquetes de Python comportandose de una forma muy similar a como lo hacen los diferentes gestores de repositorios de linux: <code>apt</code>, <code>snap</code>, <code>yum</code>...</p> <p>Por \u00faltimo, el c\u00f3digo escrito en Python es muy legible. Por ejemplo, se eliminan las t\u00edpicas llaves que definen bloques en lenguajes como C o Java, y se utiliza la indentaci\u00f3n obligatoria para definir qu\u00e9 elementos pertenecen a un bloque.</p>"},{"location":"2_1_IntroduccionPython/#implantacion","title":"Implantaci\u00f3n","text":"<p>Las caracter\u00edsticas que hemos comentado anteriormente hacen que la implantaci\u00f3n de Python sea muy grande hoy en d\u00eda. De hecho, es uno de los lenguajes mejor considerados en la mayor\u00eda de rankings (TIOBE, LinkedIn, Stackoverflow) que valoran lenguajes de programaci\u00f3n.</p> <p>Estos \u00edndices tienen en cuenta factores como:</p> <ul> <li>La popularidad entre los programadores  </li> <li>La cantidad de ofertas laborales que requieren conocimientos en Python  </li> <li>Los sueldos que se pagan a los desarrolladores que lo dominan  </li> </ul> <p>\u00bfY por qu\u00e9 ocurre esto? Entre muchas razones, destaca que su curva de aprendizaje es muy suave, lo que permite que pueda ser utilizado en entornos acad\u00e9micos para introducir la programaci\u00f3n. Tambi\u00e9n es ideal para desarrolladores eventuales, es decir, personas que no se dedican 100% a programar, pero que de vez en cuando necesitan crear alg\u00fan peque\u00f1o programa para resolver problemas puntuales.</p> <p>Adem\u00e1s, Python posee una gran cantidad de m\u00f3dulos y paquetes, lo que facilita encontrar soluciones ya desarrolladas para necesidades concretas de una aplicaci\u00f3n. Por supuesto, es portable, lo que significa que puede funcionar en muchos sistemas operativos, de hecho en los sistemas GNU/Linux como Ubuntu suele estar preinstalado.</p> <p>Y por \u00faltimo, se ha convertido en uno de los lenguajes m\u00e1s habituales en campos como la ciencia de datos y la inteligencia artificial, gracias a la enorme cantidad de paquetes disponibles para trabajar en estos \u00e1mbitos, como <code>TensorFlow</code>, <code>Keras</code> o <code>Pandas</code>.</p>"},{"location":"2_1_IntroduccionPython/#algunas-desventajas","title":"Algunas desventajas","text":"<p>Pero no todo es perfecto. Python tiene una serie de inconvenientes, pocos, pero importantes a tener en cuenta cuando se elige como lenguaje principal para un proyecto.</p> <ul> <li>Velocidad de ejecuci\u00f3n: Python es un lenguaje interpretado, lo que lo hace m\u00e1s lento que los lenguajes compilados. Para ciertas tareas esto puede no ser relevante, pero en otras puede ser cr\u00edtico.</li> <li>Consumo de memoria: No es un lenguaje liviano ni optimizado para trabajar con poca memoria. Su consumo puede ser elevado en comparaci\u00f3n con otros lenguajes.</li> <li>Limitaciones en m\u00f3viles y front-end web: Aunque existen frameworks como <code>Flask</code> o <code>Django</code> para el desarrollo backend, el trabajo en la parte de frontend o en entornos como <code>WebAssembly</code> es muy limitado, por no decir pr\u00e1cticamente nulo.</li> </ul>"},{"location":"2_1_IntroduccionPython/#alternativas-y-soluciones","title":"Alternativas y soluciones","text":"<p>Algunos de estos inconvenientes, especialmente los relacionados con la lentitud, pueden ser solucionados parcialmente mediante alternativas t\u00e9cnicas.</p>"},{"location":"2_1_IntroduccionPython/#interpretes-alternativos","title":"Int\u00e9rpretes alternativos","text":"<p>El int\u00e9rprete original de Python est\u00e1 escrito en C, y muchas veces lo encontrar\u00e1s como CPython. Sin embargo, existen otras implementaciones pensadas para m\u00e1quinas virtuales espec\u00edficas:</p> <ul> <li>Jython: Implementaci\u00f3n escrita en Java que permite ejecutar Python sobre la m\u00e1quina virtual de Java (JVM).</li> <li>IronPython: Similar a Jython, pero para la plataforma .NET, ejecut\u00e1ndose sobre el CLR.</li> <li>PyPy: Implementaci\u00f3n escrita en Python, \u00fatil cuando se quiere trabajar directamente sobre el propio c\u00f3digo del lenguaje.</li> </ul>"},{"location":"2_1_IntroduccionPython/#compiladores-cruzados","title":"Compiladores cruzados","text":"<p>Tambi\u00e9n existen herramientas conocidas como cross-compilers o compiladores cruzados, que convierten c\u00f3digo Python en C. Por ejemplo:</p> <ul> <li>Cython: Convierte c\u00f3digo Python en C, que luego puede ser compilado de forma nativa para una m\u00e1quina concreta, eliminando la necesidad del int\u00e9rprete.</li> <li>OpenInstaller: Genera un \u00fanico paquete ejecutable que incluye tanto el c\u00f3digo Python como el int\u00e9rprete. Para el usuario final, se presenta como un simple fichero <code>.exe</code>.</li> </ul>"},{"location":"2_1_IntroduccionPython/#versiones-de-python","title":"Versiones de Python","text":"<p>Para finalizar, conviene conocer c\u00f3mo se identifican las versiones de Python. Cada versi\u00f3n se compone de tres n\u00fameros: X.Y.Z</p> <ul> <li>X: Versi\u00f3n mayor. Son incompatibles entre s\u00ed. Por ejemplo, un c\u00f3digo pensado para Python 2 no se ejecutar\u00e1 en Python 1, y lo mismo ocurre entre Python 2 y Python 3.</li> <li>Y: Versi\u00f3n menor importante. Introduce novedades en el lenguaje, pero mantiene compatibilidad con la versi\u00f3n mayor correspondiente.</li> <li>Z: Versi\u00f3n de mantenimiento. Corrige errores y fallos de seguridad.</li> </ul> Versi\u00f3n ejecutada de Python <p>Actualmente, la versi\u00f3n 1 est\u00e1 completamente obsoleta. Sin embargo, siguen en producci\u00f3n tanto la versi\u00f3n 2 como la versi\u00f3n 3. La idea es que Python 2 quede obsoleto pronto, pero existe un gran parque de aplicaciones desarrolladas con esa versi\u00f3n, y la migraci\u00f3n a Python 3 no es sencilla. Por eso, muchos sistemas a\u00fan incorporan int\u00e9rpretes para ambas versiones.</p>"},{"location":"2_1_IntroduccionPython/#comparativa-python-vs-java","title":"Comparativa Python vs. Java","text":"<p>Teniendo en cuenta que se ha trabajado <code>Java</code> en otros m\u00f3dulos en el primer curso, es interesante ver las diferencias b\u00e1sicas entre <code>Java</code> y <code>Python</code></p> Caracter\u00edstica Java Python Tipado Est\u00e1tico Din\u00e1mico Sintaxis Verbosa Concisa Compilaci\u00f3n Compilado a bytecode Interpretado Declaraci\u00f3n de variables Obligatoria Impl\u00edcita Manejo de excepciones Obligatorio en muchos casos Opcional Orientaci\u00f3n a objetos Obligatoria Opcional"},{"location":"2_1_IntroduccionPython/#ejemplo-comparativo","title":"Ejemplo comparativo","text":"<p>Como siempre se dice, un ejemplo vale m\u00e1s que mil palabras.</p> <p>Java </p><pre><code>int x = 5;\nSystem.out.println(x);\n</code></pre><p></p> <p>Python </p><pre><code>x = 5\nprint(x)\n</code></pre><p></p> <p>Continuemos centr\u00e1ndonos en las caracter\u00edsticas principales de Python</p>"},{"location":"2_1_IntroduccionPython/#instalacion-de-python","title":"Instalaci\u00f3n de Python","text":""},{"location":"2_1_IntroduccionPython/#windows","title":"Windows","text":"<ol> <li>Visita https://www.python.org/downloads/</li> <li>Descarga el instalador para Windows.</li> <li>Ejecuta el instalador y aseg\u00farate de marcar la opci\u00f3n \"Add Python to PATH\".</li> </ol>"},{"location":"2_1_IntroduccionPython/#macos","title":"macOS","text":"<p>Puedes instalar Python usando Homebrew: </p><pre><code>brew install python\n</code></pre><p></p>"},{"location":"2_1_IntroduccionPython/#linux","title":"Linux","text":"<p>En la mayor\u00eda de distribuciones, puedes instalar Python con: </p><pre><code>sudo apt update\nsudo apt install python3\n</code></pre><p></p>"},{"location":"2_1_IntroduccionPython/#verificacion-de-la-instalacion","title":"Verificaci\u00f3n de la instalaci\u00f3n","text":"<p>Para verificar que Python est\u00e1 correctamente instalado, abre una terminal y ejecuta:</p> <p></p><pre><code>python --version\n</code></pre> o<p></p> <pre><code>python3 --version\n</code></pre>"},{"location":"2_1_IntroduccionPython/#primeros-pasos-en-python","title":"Primeros pasos en Python","text":"<p>Puedes iniciar el int\u00e9rprete interactivo escribiendo <code>python</code> o <code>python3</code> en la terminal. </p> Primeros pasos en Python. Ejecutando desde terminal <p>Tambi\u00e9n puedes guardar tus programas en archivos <code>.py</code> y ejecutarlos.</p> Primeros pasos en Python. Ejecutando script"},{"location":"2_1_IntroduccionPython/#comentarios","title":"Comentarios","text":"<p>Es fundamental el uso de comentarios en nuestro c\u00f3digo. En Python existen b\u00e1sicamente dos modos de introducir comentarios, en una l\u00ednea mediante <code>#</code> y de varias l\u00edneas mediante tres dobles comillas (<code>\"\"\"</code>) en lineas anterior y posterior: </p> <pre><code># Esto es un comentario de l\u00ednea\n\n\"\"\"\nEsto es un comentario\nde varias l\u00edneas\n\"\"\"\n</code></pre>"},{"location":"2_1_IntroduccionPython/#tipos-de-datos-basicos","title":"Tipos de datos b\u00e1sicos","text":"<p>Antes de empezar a escribir c\u00f3digo en Python, es fundamental entender c\u00f3mo maneja la informaci\u00f3n. Todo lenguaje de programaci\u00f3n necesita representar datos: n\u00fameros, textos, valores l\u00f3gicos... y Python lo hace de forma sencilla y muy intuitiva.</p> <p>En esta secci\u00f3n vamos a conocer los tipos de datos b\u00e1sicos que forman la base de cualquier programa en Python. Estos tipos permiten almacenar y manipular informaci\u00f3n de forma eficiente, y son el punto de partida para construir estructuras m\u00e1s complejas como listas, diccionarios o clases.</p> <p>Una caracter\u00edstica muy particular de Python es que las variables no tienen un tipo fijo, sino que el tipo se asigna din\u00e1micamente en funci\u00f3n del valor que contienen. Esto significa que una misma variable puede almacenar un n\u00famero entero en un momento dado, y m\u00e1s adelante contener una cadena de texto, sin necesidad de declararlo expl\u00edcitamente.</p> <pre><code>x = 5        # x es un entero\nx = \"Hola\"   # ahora x es una cadena\n</code></pre> <p>Este comportamiento se conoce como tipado din\u00e1mico, y aunque facilita mucho la escritura de c\u00f3digo, tambi\u00e9n requiere que el programador est\u00e9 atento al tipo de dato que est\u00e1 manipulando en cada momento para evitar errores inesperados.</p>"},{"location":"2_1_IntroduccionPython/#numeros","title":"N\u00fameros","text":"<p>Los n\u00famero pueden ser de diferente tipo. </p> <pre><code>entero = 10\nflotante = 3.14\ncomplejo = 2 + 3j\n</code></pre> <p>Tal y como se asigne un valor u otro, el interprete ya asigna el tipo adecuado a la variable </p> <p>N\u00famero complejos</p> <p>Python es capaz de trabajar con n\u00fameros complejos, que est\u00e1n compuestos por un n\u00famero en coma flotante y un imaginario, pero queda fuera del alcance de nuestro curso, aunque sirva saber que tiene esta capacidad para comprender la dimensi\u00f3n de python.</p>"},{"location":"2_1_IntroduccionPython/#operadores-aritmeticos","title":"Operadores aritm\u00e9ticos","text":"<p>Por supuesto podemos realizas diferentes operaciones matem\u00e1ticas:</p> Operador Descripci\u00f3n Ejemplo Resultado <code>+</code> Suma <code>5 + 3</code> <code>8</code> <code>-</code> Resta <code>5 - 2</code> <code>3</code> <code>*</code> Multiplicaci\u00f3n <code>4 * 2</code> <code>8</code> <code>/</code> Divisi\u00f3n flotante <code>5 / 2</code> <code>2.5</code> <code>//</code> Divisi\u00f3n entera <code>5 // 2</code> <code>2</code> <code>%</code> M\u00f3dulo (resto) <code>5 % 2</code> <code>1</code> <code>**</code> Potencia <code>2 ** 3</code> <code>8</code> <p>El tipo de la variable resultante tras la realizaci\u00f3n de una operaci\u00f3n matem\u00e1tica, ser\u00e1 el tipo m\u00e1s complejo, o sea si se hacer una suma de un entero y un flotante, el resultado ser\u00e1 un flotante.</p>"},{"location":"2_1_IntroduccionPython/#cadenas-de-texto-str","title":"Cadenas de texto  (<code>str</code>)","text":"<p>La definici\u00f3n de l\u00edneas se puede realizar tanto con comillas dobles (<code>\"</code>) como con comillas simples ( <code>'</code>):</p> <pre><code>nombre = \"Sergio\"\nsaludo = 'Hola'\n</code></pre> <p>Podemos definir cadenas t\u00edpicas de una palabra o l\u00ednea o de varias l\u00edneas:</p> <pre><code>cadena = \"Hola, mundo\"\ntexto_multilinea = '''Esto es\nuna cadena\nmultil\u00ednea'''\n</code></pre>"},{"location":"2_1_IntroduccionPython/#concatenacion","title":"Concatenaci\u00f3n","text":"<pre><code>nombre = \"Sergio\"\nmensaje = \"Hola \" + nombre\nprint( mensaje)\nprint( \"Esta tambi\u00e9n es otra cadena concatenada con comas, \", nombre, \"\u00bfse entiende?\")\n</code></pre> <p>Cuidado</p> <p>Si concatenamos cadenas, debemos tener cuidado con el tipo de las variables </p><pre><code>txt = \"hola\"\nnum = 25\nprint( txt, num)                # Correcto\nprint( txt + \" \" + num)         # Incorrecto\nprint( txt + \" \" + str( num))   # Correcto\n</code></pre><p></p>"},{"location":"2_1_IntroduccionPython/#alternativa-moderna-f-strings","title":"Alternativa moderna: f-strings","text":"<p>Desde Python 3.6, puedes usar f-strings para insertar valores dentro de cadenas de forma m\u00e1s limpia y legible. Este tipo de cadenas se define anteponiendo un <code>f</code> a la cadena, de forma que las variables ya no las ponemos entre comillas, sino que las incluimos entre llaves <code>{}</code>:</p> <pre><code>nombre = \"Sergio\"\nedad = 25\nprint(f\"{nombre} tiene {edad} a\u00f1os\")\n</code></pre> <p>Adem\u00e1s no tenemos problemas con el tipo de las variables.</p>"},{"location":"2_1_IntroduccionPython/#tipado-dinamico-y-variables-como-objetos","title":"Tipado din\u00e1mico y variables como objetos","text":"<p>En Python, todo dato que usamos en un programa (ya sea un n\u00famero, una cadena de texto o un valor l\u00f3gico) est\u00e1 representado por un objeto. Esto significa que cada variable que creamos no es simplemente un contenedor de datos, sino una instancia de una clase que define su comportamiento.</p> <p>Cuando creamos una variable en Python, lo que realmente estamos haciendo es crear una referencia a un objeto. Por ejemplo:</p> <pre><code>x = 10\nprint(type(x))  # &lt;class 'int'&gt;\n</code></pre> <p>Aqu\u00ed, <code>x</code> no es simplemente un n\u00famero: es una referencia a un objeto de la clase <code>int</code>. Si luego cambiamos el valor de <code>x</code> por una cadena, el tipo tambi\u00e9n cambia:</p> <pre><code>x = \"Hola\"\nprint(type(x))  # &lt;class 'str'&gt;\n</code></pre> <p>Este comportamiento se llama tipado din\u00e1mico, y es una de las caracter\u00edsticas m\u00e1s distintivas de Python. Aunque facilita mucho la escritura de c\u00f3digo, tambi\u00e9n puede provocar errores si no se tiene cuidado al mezclar tipos.</p> <p>Uno de los errores m\u00e1s frecuentes ocurre al intentar concatenar cadenas con otros tipos de datos. Por ejemplo:</p> <pre><code>edad = 25\nprint(\"Tengo \" + edad + \" a\u00f1os\")  # \u274c Error\n</code></pre> <p>Este c\u00f3digo lanza un error porque estamos intentando sumar (<code>+</code>) una cadena (<code>str</code>) con un entero (<code>int</code>). Para solucionarlo, debemos convertir el n\u00famero a cadena:</p> <pre><code>print(\"Tengo \" + str(edad) + \" a\u00f1os\")  # \u2705 Correcto\n</code></pre> <p>Funciones \u00fatiles de conversi\u00f3n</p> <p>Python incluye varias funciones para convertir entre tipos de datos. Aqu\u00ed tienes las m\u00e1s comunes:</p> Funci\u00f3n Convierte a... Ejemplo de uso <code>str()</code> Cadena (<code>str</code>) <code>str(123)</code> \u2192 <code>\"123\"</code> <code>int()</code> Entero (<code>int</code>) <code>int(\"42\")</code> \u2192 <code>42</code> <code>float()</code> Decimal (<code>float</code>) <code>float(\"3.14\")</code> \u2192 <code>3.14</code> <code>bool()</code> Booleano (<code>bool</code>) <code>bool(\"\")</code> \u2192 <code>False</code> <p>Consejo para realizar operaciones entre variables</p> <p>Antes de realizar operaciones entre variables, aseg\u00farate de que los tipos son compatibles. Si no lo son, usa funciones de conversi\u00f3n para evitar errores.</p> <p>Ejemplos de uso de m\u00e9todos asociados a objetos en las variables</p> <p>No profundizaremos mucho en el tema, pero tal y como se ha comentado toda variable es considerada un objeto por lo que tiene asociado implicitamente una serie de m\u00e9todos </p> <pre><code>texto = \"Python DAM\"\nprint(len(texto))            # Longitud\nprint(texto.upper())         # May\u00fasculas\nprint(texto.lower())         # Min\u00fasculas\nprint(texto.replace(\"DAM\", \"2025\"))  # Reemplazo\nprint(texto[0:6])            # Slicing\n</code></pre>"},{"location":"2_1_IntroduccionPython/#booleanos","title":"Booleanos","text":"<pre><code>verdadero = True\nfalso = False\n</code></pre>"},{"location":"2_1_IntroduccionPython/#entrada-por-consola-input","title":"Entrada por consola: <code>input()</code>","text":"<p>La entrada por consola se realiza mediante el comando <code>input()</code></p> <pre><code>nombre = input()  # Sin mensaje al usuario \n\nnombre = input(\"Introduce tu nombre: \") # Con mensaje al usuario\nprint(f\"Bienvenido, {nombre}\")\n</code></pre> <p>Debemos tener cuidad si queremos hacer conversi\u00f3n de tipos puesto que todas las entradas son cadenas, por lo tanto si necesitamos recoger un valor entero (<code>int</code>) entonces debemos utilizar la funci\u00f3n de conversion <code>int()</code></p> <pre><code>edad = int(input(\"Introduce tu edad: \"))\nprint(f\"Tu edad es {edad}\")\n</code></pre>"},{"location":"2_1_IntroduccionPython/#buenas-practicas-y-estilo-convenciones-pep8","title":"Buenas pr\u00e1cticas y estilo: Convenciones PEP8","text":"<p>La PEP8 es una gu\u00eda que indica las convenciones estil\u00edsticas a seguir para escribir c\u00f3digo Python. Se trata de un conjunto de recomendaciones cuyo objetivo es ayudar a escribir c\u00f3digo m\u00e1s legible y abarca desde c\u00f3mo nombrar variables, al n\u00famero m\u00e1ximo de caracteres que una l\u00ednea debe tener.</p> <p>Recomendaciones m\u00e1s importantes.</p> <pre><code>- Usa 4 espacios por nivel de indentaci\u00f3n.\n- Nombres de variables en min\u00fasculas y con guiones bajos: `nombre_usuario`\n- Comentarios claros y \u00fatiles.\n- Usa docstrings para documentar funciones y clases.\n</code></pre> <p>M\u00e1s info: El libro de Python. Python PEP8: Escribiendo C\u00f3digo F\u00e1cil de Leer</p>"},{"location":"2_2_ControlFlujo/","title":"Estructuras condicionales y control de flujo","text":"<p>En esta sesi\u00f3n se exploran las herramientas fundamentales que permiten tomar decisiones dentro de un programa. Las estructuras condicionales como <code>if</code>, <code>elif</code> y <code>else</code> permiten ejecutar diferentes bloques de c\u00f3digo seg\u00fan se cumplan ciertas condiciones, lo que aporta flexibilidad y dinamismo al comportamiento del programa. Este tipo de l\u00f3gica es esencial para modelar situaciones reales como validaciones, bifurcaciones o respuestas ante distintos escenarios.</p> <p>Tambi\u00e9n se aborda el control de flujo, que incluye instrucciones como <code>break</code>, <code>continue</code> y <code>pass</code>, utilizadas para modificar el comportamiento de los bucles o gestionar casos especiales. Estas herramientas permiten controlar con precisi\u00f3n c\u00f3mo se ejecuta el c\u00f3digo, evitando repeticiones innecesarias o errores en estructuras incompletas. Se explicar\u00e1 c\u00f3mo y cu\u00e1ndo interrumpir o saltar partes del flujo de ejecuci\u00f3n para mantener la l\u00f3gica del programa clara y eficiente.</p> <p>Por \u00faltimo, se introducen los bucles como estructuras que permiten repetir acciones de forma controlada. Se trabajar\u00e1 con <code>for</code> y <code>while</code>, analizando c\u00f3mo recorrer colecciones, repetir tareas hasta que se cumpla una condici\u00f3n, y c\u00f3mo combinar bucles con condicionales para construir programas m\u00e1s expresivos. </p> <p>El objetivo es dominar el flujo de ejecuci\u00f3n completo: decidir, repetir y controlar:</p> <ul> <li>Comprender el uso de condicionales en Python.</li> <li>Aplicar estructuras de control para tomar decisiones en el c\u00f3digo.</li> <li>Comparar la l\u00f3gica condicional en Python con la de Java.</li> <li>Utilizar operadores l\u00f3gicos y de comparaci\u00f3n.</li> <li>Crear scripts interactivos que respondan a diferentes entradas del usuario.</li> </ul>"},{"location":"2_2_ControlFlujo/#condicionales-en-python","title":"Condicionales en Python","text":"<p>El control de flujo permite que un programa tome decisiones y ejecute diferentes bloques de c\u00f3digo seg\u00fan ciertas condiciones. En Python, esto se logra principalmente con las estructuras <code>if</code>, <code>elif</code> y <code>else</code>.</p>"},{"location":"2_2_ControlFlujo/#sintaxis-basica","title":"Sintaxis b\u00e1sica","text":"<pre><code># Definimos una variable con la edad del usuario\nedad = 20\n\n# Evaluamos si la edad es mayor o igual a 18\nif edad &gt;= 18:\n    print(\"Eres mayor de edad.\")\n</code></pre> <p>Este es el caso m\u00e1s simple: si la condici\u00f3n <code>edad &gt;= 18</code> se cumple, se ejecuta el bloque indentado y la condici\u00f3n <code>if</code> finaliza con dos puntos (<code>:</code>). Si no, el programa contin\u00faa sin hacer nada.</p>"},{"location":"2_2_ControlFlujo/#estructura-completa-if-elif-else","title":"Estructura completa: <code>if</code> - <code>elif</code> - <code>else</code>","text":"<p>Para m\u00e1s de una condiciones tenemos la estructura <code>if</code> - <code>elif</code> - <code>else</code>. Observar de nuevo la identaci\u00f3n y el final de las l\u00edneas de los <code>if</code>, <code>elif</code> y <code>else</code></p> <p>Ejemplo 1:</p> <pre><code># Evaluamos una nota num\u00e9rica y mostramos la calificaci\u00f3n correspondiente\nnota = 7\n\nif nota &gt;= 9:\n    print(\"Sobresaliente\")\nelif nota &gt;= 7:\n    print(\"Notable\")\nelif nota &gt;= 5:\n    print(\"Aprobado\")\nelse:\n    print(\"Suspenso\")\n</code></pre> <p>Esta estructura permite evaluar m\u00faltiples condiciones de forma ordenada. Python las eval\u00faa de arriba hacia abajo y ejecuta solo el primer bloque que cumpla la condici\u00f3n.</p> <p>Ejemplo 2:</p> <pre><code># Evaluamos la nota de un alumno con entrada por teclado\nnota = float(input(\"Introduce tu nota (0-10): \"))\n\nif nota &gt;= 9:\n    print(\"\u00a1Excelente! Has sacado un Sobresaliente.\")\nelif nota &gt;= 7:\n    print(\"Muy bien, tu nota es Notable.\")\nelif nota &gt;= 5:\n    print(\"Has aprobado. \u00a1\u00c1nimo para mejorar!\")\nelse:\n    print(\"Lo siento, has suspendido.\")\n</code></pre> <p>Importancia de la indentaci\u00f3n</p> <p>En Python, los bloques de c\u00f3digo se definen por indentaci\u00f3n (espacios), no por llaves <code>{}</code> como en Java. Se recomienda usar 4 espacios por nivel. Una indentaci\u00f3n incorrecta provocar\u00e1 errores de sintaxis (<code>IndentationError</code>).</p>"},{"location":"2_2_ControlFlujo/#operadores","title":"Operadores","text":"<p>Los operadores permiten comparar valores y construir condiciones l\u00f3gicas. Son esenciales para trabajar con estructuras condicionales.</p>"},{"location":"2_2_ControlFlujo/#operadores-de-comparacion","title":"Operadores de comparaci\u00f3n","text":"<p>En la siguiente tabla tenemos los operadores t\u00edpicos de Python.\u00e7</p> Operador Significado Ejemplo Resultado <code>==</code> Igual a <code>x == 5</code> <code>True</code> <code>!=</code> Distinto de <code>x != 3</code> <code>True</code> <code>&lt;</code> Menor que <code>x &lt; 10</code> <code>True</code> <code>&gt;</code> Mayor que <code>x &gt; 2</code> <code>True</code> <code>&lt;=</code> Menor o igual que <code>x &lt;= 5</code> <code>True</code> <code>&gt;=</code> Mayor o igual que <code>x &gt;= 5</code> <code>True</code> <p>Estos operadores devuelven valores booleanos (<code>True</code> o <code>False</code>) que se usan en condiciones. Por ejemplo, <code>if x != 3:</code> se ejecutar\u00e1 si <code>x</code> es distinto de 3.</p>"},{"location":"2_2_ControlFlujo/#operadores-logicos","title":"Operadores l\u00f3gicos","text":"Operador Descripci\u00f3n Ejemplo Resultado <code>and</code> Ambas condiciones <code>x &gt; 5 and x &lt; 10</code> <code>True</code> <code>or</code> Una u otra <code>x &lt; 3 or x &gt; 8</code> <code>True</code> <code>not</code> Negaci\u00f3n <code>not x == 5</code> <code>False</code> <p>Los operadores l\u00f3gicos permiten combinar condiciones. Por ejemplo, <code>if edad &gt;= 18 and pais == \"Espa\u00f1a\":</code> verifica dos requisitos a la vez.</p> <p>Ejemplo entrada de datos</p> <pre><code># Verificamos si un usuario puede acceder a una plataforma\nusuario = input(\"Introduce tu nombre: \")\nedad = int(input(\"Introduce tu edad: \"))\npais = input(\"\u00bfEn qu\u00e9 pa\u00eds vives?: \")\n\nif edad &gt;= 18 and pais.lower() == \"espa\u00f1a\":\n    print(f\"{usuario}, puedes acceder al sistema desde Espa\u00f1a.\")\nelse:\n    print(f\"{usuario}, acceso denegado por edad o pa\u00eds.\")\n</code></pre> <p>Este ejemplo combina entrada de datos, conversi\u00f3n de tipos (<code>int()</code>), condicionales y salida formateada con <code>f-strings</code>. Es ideal para introducir l\u00f3gica b\u00e1sica en Python.</p> <p>Buenas pr\u00e1cticas</p> <ul> <li>Usa nombres de variables descriptivos.</li> <li>Evita condicionales anidados innecesarios.</li> <li>Comenta el prop\u00f3sito de cada bloque si no es evidente.</li> <li>Usa <code>elif</code> en lugar de m\u00faltiples <code>if</code> independientes.</li> </ul>"},{"location":"2_2_ControlFlujo/#estructura-match-en-python-equivalente-a-switchcase","title":"Estructura <code>match</code> en Python (equivalente a <code>switch</code>/<code>case</code>)","text":"<p>En otros lenguajes como Java, C o JavaScript, existe la estructura <code>switch</code>/<code>case</code> para evaluar m\u00faltiples condiciones sobre una misma variable. Python no tuvo una alternativa directa hasta la versi\u00f3n 3.10, donde se introdujo la instrucci\u00f3n <code>match</code>, tambi\u00e9n conocida como pattern matching.</p> <p>Esta nueva sintaxis permite escribir c\u00f3digo m\u00e1s limpio y legible cuando se necesita comparar un valor contra m\u00faltiples opciones.</p>"},{"location":"2_2_ControlFlujo/#instruccion-match","title":"Instrucci\u00f3n <code>match</code>","text":"<p>La instrucci\u00f3n <code>match</code> permite comparar un valor con diferentes patrones. Cada patr\u00f3n se define con la palabra clave <code>case</code>, y se ejecuta el bloque correspondiente si hay coincidencia.</p> <p>Evaluando el d\u00eda de la semana</p> <pre><code># Evaluamos el d\u00eda de la semana usando match-case\ndia = \"lunes\"\n\nmatch dia:\n    case \"lunes\":\n        print(\"Inicio de semana\")\n    case \"viernes\":\n        print(\"\u00daltimo d\u00eda laboral\")\n    case \"s\u00e1bado\" | \"domingo\":\n        print(\"Fin de semana\")\n    case _:\n        print(\"D\u00eda no reconocido\")\n</code></pre> <p>Donde:</p> <ul> <li><code>match dia:</code> inicia la evaluaci\u00f3n del valor de la variable <code>dia</code>.</li> <li>Cada <code>case</code> representa una posible coincidencia.</li> <li>El s\u00edmbolo <code>|</code> permite agrupar varias opciones en un mismo caso.</li> <li>El patr\u00f3n <code>_</code> act\u00faa como comod\u00edn o caso por defecto, similar a <code>default</code> en otros lenguajes.</li> </ul>"},{"location":"2_2_ControlFlujo/#comparacion-con-if-elif-else","title":"Comparaci\u00f3n con <code>if</code> - <code>elif</code> - <code>else</code>","text":"<p>Aunque <code>if</code> sigue siendo m\u00e1s flexible, <code>match</code> es m\u00e1s limpio cuando se eval\u00faa una sola variable contra m\u00faltiples valores.</p> <p>Elecci\u00f3n de d\u00eda con <code>if</code>-<code>elif</code>-<code>else</code></p> <pre><code># Versi\u00f3n equivalente con if-elif-else\ndia = \"lunes\"\n\nif dia == \"lunes\":\n    print(\"Inicio de semana\")\nelif dia == \"viernes\":\n    print(\"\u00daltimo d\u00eda laboral\")\nelif dia == \"s\u00e1bado\" or dia == \"domingo\":\n    print(\"Fin de semana\")\nelse:\n    print(\"D\u00eda no reconocido\")\n</code></pre> <p>Ventajas de <code>match</code>: </p> <ul> <li>Menor repetici\u00f3n de la variable.</li> <li>M\u00e1s legible en estructuras largas.</li> <li>Permite patrones m\u00e1s avanzados (como desestructuraci\u00f3n).</li> </ul>"},{"location":"2_2_ControlFlujo/#uso-con-valores-numericos","title":"Uso con valores num\u00e9ricos","text":"<p>Ejemplo de <code>match</code> con n\u00fameros</p> <pre><code># Evaluamos una nota num\u00e9rica\nnota = 8\n\nmatch nota:\n    case 10:\n        print(\"Matr\u00edcula de honor\")\n    case 9:\n        print(\"Sobresaliente\")\n    case 7 | 8:\n        print(\"Notable\")\n    case 5 | 6:\n        print(\"Aprobado\")\n    case _:\n        print(\"Suspenso\")\n</code></pre> <p>Este ejemplo muestra c\u00f3mo agrupar varios valores en un mismo <code>case</code>. Es \u00fatil cuando varios valores deben producir la misma salida.</p>"},{"location":"2_2_ControlFlujo/#uso-con-tuplas-y-desestructuracion","title":"Uso con tuplas y desestructuraci\u00f3n","text":"<p>En la siguiente sesi\u00f3n veremos veremos datos m\u00e1s avanzados como duplas que veremos en la siguiente sesi\u00f3n, pero, aun as\u00ed en este punto enunciaremos que una de las caracter\u00edsticas m\u00e1s potentes de <code>match</code> es su capacidad para trabajar con estructuras de datos como tuplas o listas.</p> <p>Evaluaci\u00f3n con tuplas</p> <pre><code># Evaluamos coordenadas en un plano\ncoordenada = (0, 0)\n\nmatch coordenada:\n    case (0, 0):\n        print(\"Origen\")\n    case (x, 0):\n        print(f\"Eje X en la posici\u00f3n {x}\")\n    case (0, y):\n        print(f\"Eje Y en la posici\u00f3n {y}\")\n    case (x, y):\n        print(f\"Punto en ({x}, {y})\")\n</code></pre> <ul> <li>Se puede extraer el contenido de la tupla directamente en el <code>case</code>.</li> <li>Si la estructura coincide, se asignan los valores a las variables <code>x</code> e <code>y</code>.</li> </ul>"},{"location":"2_2_ControlFlujo/#caso-por-defecto-con-_","title":"Caso por defecto con <code>_</code>","text":"<p>El patr\u00f3n <code>_</code> se utiliza para capturar cualquier valor que no haya coincidido con los casos anteriores. Es el t\u00edpico <code>default</code> que podemos ver en cualquier otro lenguaje.</p> <p>Veamos de nuevo otro ejemplo.</p> <p>Ejemplo de men\u00fa t\u00edpico para el caso de cualquier otro valor</p> <pre><code># Evaluamos una opci\u00f3n de men\u00fa\nopcion = \"salir\"\n\nmatch opcion:\n    case \"iniciar\":\n        print(\"Sistema iniciado\")\n    case \"configurar\":\n        print(\"Abriendo configuraci\u00f3n\")\n    case _:\n        print(\"Opci\u00f3n no v\u00e1lida\")\n</code></pre> <p>Siempre es recomendable incluir un <code>case _</code> para manejar entradas inesperadas o errores del usuario.</p> <p>Tambi\u00e9n puede ser \u00fatil cuando solicitamos unos valores concretos, y el usuario no teclea uno de estos valores</p> <p>Ejemplo completo con entrada del usuario</p> <pre><code># Simulamos un sistema de selecci\u00f3n de rol\nrol = input(\"Introduce tu rol (admin, editor, lector): \")\n\nmatch rol.lower():\n    case \"admin\":\n        print(\"Acceso completo al sistema.\")\n    case \"editor\":\n        print(\"Acceso limitado a edici\u00f3n de contenidos.\")\n    case \"lector\":\n        print(\"Acceso solo lectura.\")\n    case _:\n        print(\"Rol no reconocido.\")\n</code></pre> <p>en este ejemplo:  </p> <ul> <li>Se usa <code>.lower()</code> para normalizar la entrada del usuario.</li> <li>Se eval\u00faan diferentes roles con <code>match</code>.</li> <li>Se incluye un caso por defecto para manejar errores.</li> </ul>"},{"location":"2_2_ControlFlujo/#estructuras-de-control-de-bucles-en-python","title":"Estructuras de control de bucles en Python","text":"<p>En Python como en otros lenguajes, los bucles permiten ejecutar un bloque de c\u00f3digo varias veces. Son fundamentales para automatizar tareas repetitivas y recorrer estructuras de datos como listas, diccionarios o cadenas.</p> <p>Repasemos los m\u00e1s usados</p>"},{"location":"2_2_ControlFlujo/#bucle-for","title":"Bucle <code>for</code>","text":"<p>El bucle <code>for</code> se utiliza para iterar sobre una secuencia (como una lista, tupla, diccionario, conjunto o cadena).</p> <p>Sintaxis</p> <pre><code>for elemento in secuencia:\n    # Bloque de c\u00f3digo\n</code></pre> <p>El ejemplo t\u00edpico en el que iteramos un determinado n\u00famero de veces, se apoya en el uso del comando <code>range()</code>. El siguiente ejemplo puede ser muy representativo</p> <p>Usar <code>range()</code> para iterar 5 veces</p> <pre><code>for i in range(5):\n    print(\"N\u00famero:\", i)\n</code></pre> <p><code>range(5)</code> genera los n\u00fameros del 0 al 4. </p> <p>Realmente la funci\u00f3n <code>range()</code> se define de con dos par\u00e1metros, de forma que si solo se invoca con uno de ellos, se interpreta que el primero es <code>0</code>. Podemos ver con el ejemplo que el resultado incluye el valor de inicio pero excluye el de fin, por eso usamos <code>range( 1, 6)</code> para obtener del <code>1</code> al <code>5</code>.</p> <p>range() con dos par\u00e1metros</p> <pre><code>for i in range(1, 6):\n    print(\"N\u00famero:\", i)\n</code></pre> <p>Este bucle imprime los n\u00fameros del 1 al 5, uno por l\u00ednea</p> <p>pero <code>range()</code> tambi\u00e9n se puede invocar con 3 par\u00e1metros, siendo el tercer par\u00e1metro el incremento del rango:</p> <p><code>range()</code> con tres par\u00e1metros</p> <pre><code>for i in range(1, 11, 2):\n    print(\"N\u00famero:\", i)\n</code></pre> <p>Este bucle imprime los n\u00fameros impares del 1 al 10, uno por l\u00ednea</p> <p>y para acabar con <code>range()</code> veamos el ejemplo t\u00edpico de la tabla de multiplicar:</p> <p>Tabla de multiplicar con <code>for</code> y <code>range()</code> </p> <pre><code>tabla_del = 5\nfor i in range(1, 11):\n    print(f\"{tabla_del} x {i} = {tabla_del * i}\")\n</code></pre> <p>De nuevo vamos a utilizar una estructura que veremos en la siguiente sesi\u00f3n como son las listas, as\u00ed pues, siguiente ejemplo visualiza que podemos iterar por los elementos de una lista.</p> <p>Ejemplo de interacci\u00f3n sobre una lista</p> <pre><code>frutas = [\"manzana\", \"pl\u00e1tano\", \"cereza\"]\nfor fruta in frutas:\n    print(\"Me gusta la\", fruta)\n</code></pre> <p>Este bucle recorre cada elemento de la lista <code>frutas</code> y lo imprime.</p> <p>Y ya que estamos, existe la posibilidad de crear una lista utilizando la fuci\u00f3n <code>range()</code>, veamos el siguiente ejemplo: </p> <p>Crear una lista con <code>range()</code> </p> <pre><code>numeros = list(range(1, 6))\n    print(\"Lista:\", numeros)\n</code></pre> <p>Convierte el rango en una lista: <code>[ 1, 2, 3,4, 5]</code>.</p> <p>Se pueden colocar bucles dentro de otros bucles. Por supuesto, en Python podemos anidar bucle sin problemas. Veamos un ejemplo:</p> <p>Bucle anidado</p> <pre><code>for i in range(3):\n    for j in range(2):\n        print(f\"i={i}, j={j}\")\n</code></pre> <p>Este ejemplo muestra c\u00f3mo se combinan dos bucles <code>for</code> para recorrer pares de valores.</p> <p>Ejercicio propuesto con <code>for</code>:</p> <p>Crea un programa que pida al usuario un n\u00famero y muestre su tabla de multiplicar del 1 al 10 usando un bucle <code>for</code>.\"</p> Solucion <pre><code>numero = int(input(\"Introduce un n\u00famero: \"))\nfor i in range(1, 11):\n    print(f\"{numero} x {i} = {numero * i}\")\n</code></pre> <p>Variante: Consigue que la tabla multiplicar la imprima al rev\u00e9s, del 10 al 1</p>"},{"location":"2_2_ControlFlujo/#bucle-while","title":"Bucle <code>while</code>","text":"<p>El bucle <code>while</code> ejecuta su bloque de c\u00f3digo mientras una condici\u00f3n sea verdadera.</p> <p>Sintaxis</p> <pre><code>while condici\u00f3n:\n    # Bloque de c\u00f3digo\n</code></pre> <p>Contador simple con <code>while</code></p> <pre><code>contador = 0\nwhile contador &lt; 5:\n    print(\"Contador:\", contador)\n    contador += 1\n</code></pre> <p>Este bucle se repite mientras <code>contador</code> sea menor que 5.</p> <p>En generar podemos utilizar todos los operadores indicados anteriormente con el <code>if</code> as\u00ed que tenemos ejemplos con todo tipo de validaciones:</p> <p>Validaci\u00f3n de entrada</p> <pre><code>respuesta = \"\"\nwhile respuesta != \"s\u00ed\":\n    respuesta = input(\"\u00bfQuieres continuar? (s\u00ed/no): \")\n</code></pre> <p>Este bucle sigue preguntando hasta que el usuario responde \"s\u00ed\".</p> <p>Ejercicio sencillo con <code>while</code></p> <p>Repite de nuevo el bucle de la tabla de multiplicar, pero ahora con  <code>while</code>.</p> Soluci\u00f3n <pre><code>numero = int(input(\"Introduce un n\u00famero: \"))\ni = 1  # Inicializamos el contador\nwhile i &lt;= 10:\n    print(f\"{numero} x {i} = {numero * i}\")\n    i += 1  # Incrementamos el contador\n</code></pre>"},{"location":"2_2_ControlFlujo/#control-de-bucles","title":"Control de bucles","text":"<p>Al igual que ocurre con otros lenguajes, tenemos dos comandos que permite alterar el control de los bucles, en este caso <code>break</code> para interrumpir la ejecuci\u00f3n del bucle, ya que provoca que el bucle finalice al pasar por esta funci\u00f3n y <code>continue</code> que provoca el salto del bucle a la siguiente iteracion, quedando las instrucciones siguiente a <code>continue</code> sin ejecuci\u00f3n en la iteraci\u00f3n correspondiente. </p> <p>Veamos dos ejemplos sencillos</p> <p><code>break</code></p> <p><code>break</code>: salir del bucle</p> <pre><code>for letra in \"Python\":\n    if letra == \"h\":\n        break\n    print(letra)\n</code></pre> <p>El bucle se detiene cuando encuentra la letra \"h\".</p> <p>y <code>continue</code></p> <p><code>continue</code>: saltar a la siguiente iteraci\u00f3n</p> <pre><code>for numero in range(5):\n    if numero == 2:\n        continue\n    print(\"N\u00famero:\", numero)\n</code></pre> <p>Cuando <code>numero</code> es 2, se omite esa iteraci\u00f3n.</p> <p>Buenas pr\u00e1cticas con los bucles</p> <ul> <li>Evita bucles infinitos: aseg\u00farate de que la condici\u00f3n del <code>while</code> se pueda cumplir.</li> <li>Usa nombres de variables descriptivos.</li> <li>Si puedes usar <code>for</code> en lugar de <code>while</code>, hazlo: suele ser m\u00e1s legible.</li> <li>No abuses de <code>break</code> y <code>continue</code>: pueden dificultar la comprensi\u00f3n del flujo.</li> </ul> <p>Ejercicio propuesto tablas de multiplicar</p> <p>Amplia el programa anterior de las tablas de multiplicar para que te pregunte de qu\u00e9 numero quiere hacer la tabla de multiplicar, genere la tabla de multiplicar y termine cuando le pidas la tabla del 0\"</p> Solucion <pre><code>while True:\n    numero = int(input(\"Introduce un n\u00famero (0 para salir): \"))\n\n    if numero == 0:\n        print(\"\u00a1Hasta luego!\")\n        break  # Sale del bucle si el n\u00famero es 0\n\n    print(f\"\\nTabla de multiplicar del {numero}:\")\n    for i in range(1, 11):\n        print(f\"{numero} x {i} = {numero * i}\")\n    print()  # L\u00ednea en blanco para separar tablas\n</code></pre> <p>Variante: si pides las tablas del 5 al 7, solo haga hasta el 5 y no hasta el 10</p>"},{"location":"2_2_ControlFlujo/#ejemplo-y-ejercicio-de-uso","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<pre><code># Mostrar si los n\u00fameros del 1 al 10 son pares o impares\nfor numero in range(1, 11):\n    if numero % 2 == 0:\n        print(f\"{numero} es par\")\n    else:\n        print(f\"{numero} es impar\")\n</code></pre> <p>Este ejemplo combina un bucle <code>for</code> con una estructura <code>if-else</code> para analizar cada n\u00famero y mostrar su tipo.</p> <p>Ejercicio: Contador de positivos y negativos</p> <p>Escribe un programa que:</p> <ol> <li>Pida al usuario 5 n\u00fameros (uno por uno).</li> <li>Use un bucle para recoger los datos.</li> <li>Use condiciones para contar cu\u00e1ntos son positivos y cu\u00e1ntos negativos.</li> <li>Al final, muestre los totales.</li> </ol> Soluci\u00f3n <pre><code>positivos = 0\nnegativos = 0\n\nfor i in range(5):\n    numero = int(input(\"Introduce un n\u00famero: \"))\n    if numero &gt; 0:\n        positivos += 1\n    elif numero &lt; 0:\n        negativos += 1\n\nprint(f\"N\u00fameros positivos: {positivos}\")\nprint(f\"N\u00fameros negativos: {negativos}\")\n</code></pre>"},{"location":"2_3_EstructurasDatos/","title":"Estructuras de datos o colecciones en Python","text":"<p>Python ofrece estructuras de datos vers\u00e1tiles que permiten organizar y manipular informaci\u00f3n de forma eficiente. En esta sesi\u00f3n trabajaremos con listas, diccionarios, tuplas y conjuntos, y aprenderemos a recorrerlos e incluso transformarlos con comprensiones de listas.</p>"},{"location":"2_3_EstructurasDatos/#tabla-resumen-de-estructuras-de-datos-o-colecciones","title":"Tabla resumen de estructuras de datos o colecciones","text":"<p>Sintetizando, estas son las estructuras que vamos a ver.</p> Tipo Nombre t\u00e9cnico Mutabilidad Orden Duplicados Ejemplo Lista <code>list</code> Mutable S\u00ed S\u00ed <code>[\"a\", \"b\", \"c\"]</code> Diccionario <code>dict</code> Mutable S\u00ed No (claves \u00fanicas) <code>{\"a\": 1, \"b\": 2}</code> Tupla <code>tuple</code> Inmutable S\u00ed S\u00ed <code>(\"a\", \"b\", \"c\")</code> Conjunto <code>set</code> Mutable No No <code>{\"a\", \"b\", \"c\"}</code> <p>Donde </p> <ul> <li>Mutabilidad: indica si una colecci\u00f3n puede modificarse despu\u00e9s de creada. Las listas, diccionarios y conjuntos son mutables; las tuplas no lo son.</li> <li>Orden: determina si los elementos mantienen el orden en que fueron a\u00f1adidos. Listas, tuplas y diccionarios (desde Python 3.7) conservan el orden; los conjuntos no.</li> <li>Duplicados: se\u00f1ala si se permiten elementos repetidos. Listas y tuplas s\u00ed los permiten; conjuntos y diccionarios no (las claves deben ser \u00fanicas).</li> </ul>"},{"location":"2_3_EstructurasDatos/#listas-en-python","title":"Listas en Python","text":"<p>Las listas son una de las estructuras de datos m\u00e1s utilizadas en Python. Permiten almacenar m\u00faltiples elementos en una sola variable, manteniendo el orden en que fueron a\u00f1adidos y ofreciendo gran flexibilidad para modificarlos, recorrerlos o aplicar operaciones sobre ellos.</p> <p>Una lista puede contener cualquier tipo de dato: n\u00fameros, cadenas, booleanos, e incluso otras listas o estructuras m\u00e1s complejas. Adem\u00e1s, se pueden mezclar tipos dentro de una misma lista, aunque no siempre es recomendable por cuestiones de claridad y mantenimiento.</p>"},{"location":"2_3_EstructurasDatos/#creacion-y-acceso-a-elementos","title":"Creaci\u00f3n y acceso a elementos","text":"<p>Las listas se definen entre corchetes <code>[]</code> y los elementos se separan por comas. El acceso se realiza mediante \u00edndices, empezando desde 0. Tambi\u00e9n se pueden usar \u00edndices negativos para contar desde el final.</p> <p>Ejemplo de creaci\u00f3n de listas</p> <pre><code># Creamos una lista con nombres de frutas\nfrutas = [\"manzana\", \"pl\u00e1tano\", \"naranja\"]\n\n# Accedemos al primer elemento (\u00edndice 0)\nprint(frutas[0])  # manzana\n\n# Accedemos al \u00faltimo elemento usando \u00edndice negativo\nprint(frutas[-1])  # naranja\n</code></pre>"},{"location":"2_3_EstructurasDatos/#modificacion-de-elementos","title":"Modificaci\u00f3n de elementos","text":"<p>Las listas son mutables, lo que significa que sus elementos pueden cambiar despu\u00e9s de haber sido creados. Esto permite actualizar valores f\u00e1cilmente sin tener que crear una nueva lista.</p> <p>Ejemplo de modificaci\u00f3n de listas</p> <pre><code># Cambiamos el segundo elemento\nfrutas[1] = \"pera\"\n\nprint(frutas)  # ['manzana', 'pera', 'naranja']\n</code></pre>"},{"location":"2_3_EstructurasDatos/#anadir-elementos","title":"A\u00f1adir elementos","text":"<p>El m\u00e9todo <code>append()</code> agrega un nuevo elemento al final de la lista. Es uno de los m\u00e9todos m\u00e1s utilizados cuando se construyen listas din\u00e1micamente, como al leer datos del usuario o procesar resultados.</p> <p>Ejemplo para a\u00f1adir elementos a listas</p> <pre><code># A\u00f1adimos una nueva fruta al final de la lista\nfrutas.append(\"kiwi\")\n\nprint(frutas)  # ['manzana', 'pera', 'naranja', 'kiwi']\n</code></pre>"},{"location":"2_3_EstructurasDatos/#insertar-en-una-posicion-especifica","title":"Insertar en una posici\u00f3n espec\u00edfica","text":"<p>El m\u00e9todo <code>insert()</code> permite colocar un elemento en una posici\u00f3n concreta, desplazando los dem\u00e1s hacia la derecha. Es \u00fatil cuando se quiere mantener un orden espec\u00edfico.</p> <p>Ejemplo de inserci\u00f3n en posici\u00f3n espec\u00edfica</p> <pre><code># Insertamos una fruta en la segunda posici\u00f3n (\u00edndice 1)\nfrutas.insert(1, \"mel\u00f3n\")\n\nprint(frutas)  # ['manzana', 'mel\u00f3n', 'pera', 'naranja', 'kiwi']\n</code></pre>"},{"location":"2_3_EstructurasDatos/#eliminar-elementos","title":"Eliminar elementos","text":"<p>Con <code>remove()</code> se elimina la primera aparici\u00f3n del valor indicado. Si el valor no existe, se genera un error. Para evitarlo, se puede comprobar antes con <code>in</code>.</p> <p>Ejemplo borrado de elementos</p> <pre><code># Eliminamos el elemento \"naranja\"\nfrutas.remove(\"naranja\")\n\nprint(frutas)  # ['manzana', 'mel\u00f3n', 'pera', 'kiwi']\n</code></pre> <p>Las listas ofrecen m\u00e9todos como <code>count()</code> para contar elementos, <code>sort()</code> para ordenarlos, y <code>reverse()</code> para invertir el orden. Estas operaciones son muy \u00fatiles en tareas de an\u00e1lisis y presentaci\u00f3n de datos.</p>"},{"location":"2_3_EstructurasDatos/#comprensiones-de-listas","title":"Comprensiones de listas","text":"<p>Las comprensiones de listas permiten crear nuevas listas de forma compacta y expresiva, aplicando condiciones o transformaciones.</p> <p>Ejemplo de generaci\u00f3n de listas de forma autom\u00e1tica</p> <pre><code># Creamos una lista de cuadrados del 1 al 5\ncuadrados = [x**2 for x in range(1, 6)]\nprint(cuadrados)  # [1, 4, 9, 16, 25]\n\n# Filtramos solo los pares\npares = [x for x in range(10) if x % 2 == 0]\nprint(pares)  # [0, 2, 4, 6, 8]\n</code></pre> <p>Esta t\u00e9cnica es \u00fatil para generar listas a partir de otras, aplicar filtros o realizar c\u00e1lculos en una sola l\u00ednea.</p>"},{"location":"2_3_EstructurasDatos/#resumen-de-operaciones-utiles","title":"Resumen de operaciones \u00fatiles","text":"<p>Las listas en Python no solo permiten almacenar m\u00faltiples elementos, sino que tambi\u00e9n ofrecen una serie de m\u00e9todos integrados que facilitan su manipulaci\u00f3n. Estos m\u00e9todos permiten a\u00f1adir, eliminar, ordenar, buscar y transformar los elementos de forma sencilla.</p> M\u00e9todo Descripci\u00f3n Ejemplo Resultado <code>append(x)</code> A\u00f1ade el elemento <code>x</code> al final de la lista <code>lista.append(\"uva\")</code> <code>[\"manzana\", \"pera\", \"uva\"]</code> <code>insert(i, x)</code> Inserta el elemento <code>x</code> en la posici\u00f3n <code>i</code> <code>lista.insert(1, \"mel\u00f3n\")</code> <code>[\"manzana\", \"mel\u00f3n\", \"pera\"]</code> <code>remove(x)</code> Elimina la primera aparici\u00f3n del elemento <code>x</code> <code>lista.remove(\"pera\")</code> <code>[\"manzana\", \"mel\u00f3n\"]</code> <code>pop()</code> Elimina y devuelve el \u00faltimo elemento <code>lista.pop()</code> <code>[\"manzana\", \"mel\u00f3n\"]</code> <code>pop(i)</code> Elimina y devuelve el elemento en la posici\u00f3n <code>i</code> <code>lista.pop(0)</code> <code>[\"mel\u00f3n\", \"pera\"]</code> <code>count(x)</code> Devuelve cu\u00e1ntas veces aparece el elemento <code>x</code> <code>lista.count(\"pera\")</code> <code>1</code> <code>index(x)</code> Devuelve el \u00edndice de la primera aparici\u00f3n del elemento <code>x</code> <code>lista.index(\"pera\")</code> <code>2</code> <code>sort()</code> Ordena la lista de forma ascendente (alfab\u00e9tica o num\u00e9rica) <code>lista.sort()</code> <code>[\"manzana\", \"pera\", \"uva\"]</code> <code>reverse()</code> Invierte el orden de los elementos <code>lista.reverse()</code> <code>[\"uva\", \"pera\", \"manzana\"]</code> <code>clear()</code> Elimina todos los elementos de la lista <code>lista.clear()</code> <code>[]</code> <code>copy()</code> Devuelve una copia superficial de la lista <code>nueva_lista = lista.copy()</code> <code>[\"manzana\", \"pera\", \"uva\"]</code> <p>Adem\u00e1s de los m\u00e9todos propios del tipo <code>list</code>, Python ofrece instrucciones y funciones integradas que permiten manipular listas desde fuera. Estas operaciones no se invocan con punto (<code>.</code>), pero son igualmente \u00fatiles para eliminar, consultar o transformar listas.</p> Instrucci\u00f3n / Funci\u00f3n Descripci\u00f3n Ejemplo Resultado <code>del lista[i]</code> Elimina el elemento en la posici\u00f3n <code>i</code> <code>del lista[1]</code> <code>[\"manzana\", \"uva\"]</code> <code>del lista[a:b]</code> Elimina un segmento de la lista entre las posiciones <code>a</code> y <code>b</code> <code>del lista[0:2]</code> <code>[\"uva\"]</code> <code>len(lista)</code> Devuelve el n\u00famero de elementos en la lista <code>len(lista)</code> <code>3</code> <code>sum(lista)</code> Devuelve la suma de los elementos num\u00e9ricos de la lista <code>sum([1, 2, 3])</code> <code>6</code> <code>max(lista)</code> Devuelve el valor m\u00e1ximo de la lista <code>max([1, 5, 3])</code> <code>5</code> <code>min(lista)</code> Devuelve el valor m\u00ednimo de la lista <code>min([1, 5, 3])</code> <code>1</code> <code>sorted(lista)</code> Devuelve una nueva lista ordenada sin modificar la original <code>sorted([\"pera\", \"manzana\", \"uva\"])</code> <code>[\"manzana\", \"pera\", \"uva\"]</code> <code>enumerate(lista)</code> Devuelve un objeto iterable con pares <code>(\u00edndice, valor)</code> <code>for i, v in enumerate(lista): ...</code> <code>(0, \"manzana\"), (1, \"pera\")...</code> <code>zip(lista1, lista2)</code> Combina dos listas en pares <code>(x, y)</code> <code>zip([\"a\", \"b\"], [1, 2])</code> <code>[(\"a\", 1), (\"b\", 2)]</code> <p>M\u00e1s info</p> <ul> <li>Documentaci\u00f3n oficial del tipo <code>list</code>   Explica los m\u00e9todos como <code>append()</code>, <code>insert()</code>, <code>remove()</code>, <code>pop()</code>, <code>sort()</code>, <code>reverse()</code>, <code>clear()</code>, <code>copy()</code>, etc.</li> <li> <p>Funciones integradas de Python (<code>built-in functions</code>)   Aqu\u00ed encontrar\u00e1s <code>len()</code>, <code>sum()</code>, <code>max()</code>, <code>min()</code>, <code>sorted()</code>, <code>enumerate()</code>, <code>zip()</code>, entre muchas otras.</p> </li> <li> <p>Referencia del lenguaje Python   Incluye instrucciones como <code>del</code>, estructuras de control, y detalles sobre c\u00f3mo funciona el lenguaje.</p> </li> </ul>"},{"location":"2_3_EstructurasDatos/#ejemplo-y-ejercicio-de-uso","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>Este ejemplo muestra c\u00f3mo combinar varios m\u00e9todos para construir y modificar una lista paso a paso. El resultado final ser\u00eda una lista ordenada con los elementos actualizados.</p> <p>Ejemplo combinado</p> <pre><code># Lista inicial\nfrutas = [\"manzana\", \"pera\", \"naranja\"]\n\n# A\u00f1adir una fruta\nfrutas.append(\"kiwi\")\n\n# Insertar en posici\u00f3n 1\nfrutas.insert(1, \"mel\u00f3n\")\n\n# Eliminar una fruta\nfrutas.remove(\"naranja\")\n\n# Ordenar la lista\nfrutas.sort()\n\n# Mostrar resultado final\nprint(frutas)\n</code></pre> <p>Para finalizar con las listas, vamos a realizar un ejercicio para practicar los m\u00e9todos <code>append()</code>, <code>insert()</code>, <code>pop()</code> y la modificaci\u00f3n por \u00edndice, consolidando el uso b\u00e1sico de listas en Python.</p> <p>Ejercicio b\u00e1sico de listas</p> <p>Crea una lista con tres colores. A\u00f1ade un cuarto color, cambia el segundo por otro, inserta uno en la primera posici\u00f3n, elimina el \u00faltimo y muestra la lista final por pantalla.</p> Solucion <pre><code># Lista inicial\ncolores = [\"rojo\", \"verde\", \"azul\"]\n\n# A\u00f1adir un cuarto color\ncolores.append(\"amarillo\")\n\n# Cambiar el segundo color\ncolores[1] = \"morado\"\n\n# Insertar en la primera posici\u00f3n\ncolores.insert(0, \"negro\")\n\n# Eliminar el \u00faltimo color\ncolores.pop()\n\n# Mostrar la lista final\nprint(colores)\n</code></pre>"},{"location":"2_3_EstructurasDatos/#diccionarios-en-python","title":"Diccionarios en Python","text":"<p>Los diccionarios son una estructura de datos fundamental en Python que permite almacenar informaci\u00f3n en forma de pares clave-valor. A diferencia de las listas, donde cada elemento tiene una posici\u00f3n num\u00e9rica (\u00edndice), en los diccionarios cada valor est\u00e1 asociado a una clave \u00fanica que act\u00faa como identificador.</p> <p>Esta estructura es especialmente \u00fatil cuando se necesita representar entidades con atributos, como un usuario con nombre, edad y correo, o un producto con precio, stock y categor\u00eda. En contextos de desarrollo modular o aplicaciones como Odoo, los diccionarios se asemejan a registros o modelos de datos, lo que los convierte en una herramienta clave para organizar y manipular informaci\u00f3n.</p> Diccionarios vs Listas"},{"location":"2_3_EstructurasDatos/#definicion-de-diccionarios","title":"Definici\u00f3n de Diccionarios","text":"<p>Un diccionario se define entre llaves <code>{}</code>, y cada par clave-valor se separa por dos puntos <code>:</code>. Las claves suelen ser cadenas de texto, aunque tambi\u00e9n pueden ser n\u00fameros o tuplas inmutables.</p> <p>Definici\u00f3n de diccionario</p> <pre><code># Diccionario que representa un usuario\nusuario = {\n    \"nombre\": \"Sergio\",\n    \"edad\": 25,\n    \"correo\": \"sergio@example.com\"\n}\n</code></pre> <p>En este ejemplo, <code>\"nombre\"</code>, <code>\"edad\"</code> y <code>\"correo\"</code> son claves, y sus valores son <code>\"Sergio\"</code>, <code>25</code> y <code>\"sergio@example.com\"</code> respectivamente.</p>"},{"location":"2_3_EstructurasDatos/#acceso-a-valores","title":"Acceso a valores","text":"<p>Para acceder a un valor, se utiliza la clave entre corchetes:</p> <pre><code>print(usuario[\"nombre\"])  # Sergio\n</code></pre> <p>Si se intenta acceder a una clave que no existe, se genera un error <code>KeyError</code>. Para evitarlo, se puede usar el m\u00e9todo <code>get()</code>.</p> <pre><code>print(usuario.get(\"poblaci\u00f3n\"))  # None\n</code></pre>"},{"location":"2_3_EstructurasDatos/#modificacion-y-ampliacion","title":"Modificaci\u00f3n y ampliaci\u00f3n","text":"<p>Los diccionarios son mutables, lo que significa que se pueden modificar, a\u00f1adir o eliminar elementos despu\u00e9s de su creaci\u00f3n.</p> <p>Ejemplo de modificaci\u00f3n y ampliaci\u00f3n de diccionario</p> <pre><code># Modificar un valor existente\nusuario[\"edad\"] = 26\n\n# A\u00f1adir una nueva clave\nusuario[\"poblaci\u00f3n\"] = \"Valencia\"\n</code></pre>"},{"location":"2_3_EstructurasDatos/#metodos-mas-importantes","title":"M\u00e9todos m\u00e1s importantes","text":"<p>A continuaci\u00f3n se presentan los m\u00e9todos m\u00e1s \u00fatiles para trabajar con diccionarios, junto con su prop\u00f3sito y ejemplos pr\u00e1cticos.</p> <ul> <li><code>get(clave)</code></li> </ul> <p>Devuelve el valor asociado a la clave indicada. Si no existe, devuelve <code>None</code> o un valor por defecto si se especifica.</p> <p>Ejemplo de uso de <code>get()</code></p> <pre><code>print(usuario.get(\"correo\"))         # sergio@example.com\nprint(usuario.get(\"tel\u00e9fono\", \"N/D\"))  # N/D\n</code></pre> <p>Ideal para acceder a claves opcionales sin provocar errores.</p> <ul> <li><code>keys()</code>, <code>values()</code>, <code>items()</code></li> </ul> <p>Estos tres m\u00e9todos devuelven vistas del contenido del diccionario, ya sean las claves, los valores o ambos:</p> <p>Ejemplo de usos de <code>keys()</code>, <code>values()</code>, <code>items()</code> </p> <pre><code>print(usuario.keys())    # dict_keys(['nombre', 'edad', 'correo', 'poblaci\u00f3n'])\nprint(usuario.values())  # dict_values(['Sergio', 26, 'sergio@example.com', 'Valencia'])\nprint(usuario.items())   # dict_items([('nombre', 'Sergio'), ('edad', 26), ...])\n</code></pre> <p>Son \u00fatiles para recorrer el diccionario con bucles <code>for</code>:</p> <p>Ejemplo de recuperaci\u00f3n de diccionario con un <code>for</code></p> <pre><code>for clave, valor in usuario.items():\n    print(f\"{clave}: {valor}\")\n</code></pre> <ul> <li><code>update()</code></li> </ul> <p>Permite a\u00f1adir o modificar m\u00faltiples claves a la vez, pasando otro diccionario como argumento.</p> <p>Ejemplo de actualizaci\u00f3n de varias claves a la vez</p> <pre><code>usuario.update({\n    \"edad\": 27,\n    \"tel\u00e9fono\": \"600123456\"\n})\n</code></pre> <p>Muy \u00fatil para fusionar informaci\u00f3n o actualizar registros.</p> <ul> <li><code>pop(clave)</code></li> </ul> <p>Elimina la clave indicada y devuelve su valor. Si no existe, lanza un error.</p> <p>Ejemplo de eliminaci\u00f3n de uso de <code>pop()</code></p> <pre><code>correo = usuario.pop(\"correo\")\nprint(correo)  # sergio@example.com\n</code></pre> <p>Se puede usar para extraer datos y limpiar el diccionario.</p> <ul> <li><code>clear()</code></li> </ul> <p>Elimina todos los elementos del diccionario, dej\u00e1ndolo vac\u00edo.</p> <p>Ejemplo de uso de <code>clear()</code></p> <pre><code>usuario.clear()\nprint(usuario)  # {}\n</code></pre> <ul> <li><code>copy()</code></li> </ul> <p>Devuelve una copia superficial del diccionario. Es \u00fatil para duplicar estructuras sin modificar el original.</p> <p>Ejemplo de uso de <code>copy()</code></p> <pre><code>usuario_copia = usuario.copy()\n</code></pre> <ul> <li>Tabla de m\u00e9todos</li> </ul> M\u00e9todo Descripci\u00f3n Ejemplo Resultado <code>get(clave)</code> Devuelve el valor asociado a la clave, o <code>None</code> si no existe <code>usuario.get(\"edad\")</code> <code>25</code> <code>keys()</code> Devuelve una vista con todas las claves <code>usuario.keys()</code> <code>dict_keys(['nombre', 'edad'])</code> <code>values()</code> Devuelve una vista con todos los valores <code>usuario.values()</code> <code>dict_values(['Sergio', 25])</code> <code>items()</code> Devuelve una vista con pares clave-valor <code>usuario.items()</code> <code>dict_items([('nombre', 'Sergio'), ...])</code> <code>update()</code> A\u00f1ade o modifica claves con nuevos valores <code>usuario.update({\"edad\": 26})</code> <code>{'nombre': 'Sergio', 'edad': 26}</code> <code>pop(clave)</code> Elimina la clave indicada y devuelve su valor <code>usuario.pop(\"edad\")</code> <code>25</code> <code>clear()</code> Elimina todos los elementos del diccionario <code>usuario.clear()</code> <code>{}</code> <code>copy()</code> Devuelve una copia superficial del diccionario <code>nuevo = usuario.copy()</code> <code>{'nombre': 'Sergio', 'edad': 25}</code>"},{"location":"2_3_EstructurasDatos/#ejemplo-y-ejercicio-de-uso_1","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>En el siguiente ejemplo se muestra c\u00f3mo consultar, modificar y eliminar informaci\u00f3n de un diccionario de forma segura y eficiente.</p> <p>Ejemplo combinado de operaciones con diccionarios</p> <pre><code>producto = {\n    \"nombre\": \"Teclado\",\n    \"precio\": 29.99,\n    \"stock\": 100\n}\n\n# Mostrar claves y valores\nfor clave, valor in producto.items():\n    print(f\"{clave}: {valor}\")\n\n# Actualizar precio\nproducto[\"precio\"] = 24.99\n\n# A\u00f1adir categor\u00eda\nproducto[\"categor\u00eda\"] = \"Perif\u00e9ricos\"\n\n# Eliminar stock\nproducto.pop(\"stock\")\n\nprint(producto)\n</code></pre> <p>Ahora intenta realizar el siguiente ejercicio sin mirar la soluc\u00ed\u00f3n. </p> <p>Ejercicio b\u00e1sico: Diccionario de producto</p> <p>Crea un diccionario llamado <code>producto</code> que contenga la siguiente informaci\u00f3n:</p> <ul> <li><code>\"nombre\"</code>: <code>\"Rat\u00f3n \u00f3ptico\"</code></li> <li><code>\"precio\"</code>: <code>19.95</code></li> <li><code>\"stock\"</code>: <code>50</code></li> </ul> <p>y a continuaci\u00f3n, realiza las siguientes operaciones:</p> <ol> <li>Muestra el nombre del producto por pantalla.</li> <li>Modifica el precio a <code>17.50</code>.</li> <li>A\u00f1ade una nueva clave <code>\"marca\"</code> con el valor <code>\"Logitech\"</code>.</li> <li>Elimina la clave <code>\"stock\"</code> del diccionario.</li> <li>Muestra el diccionario completo al final.</li> </ol> <p>Pistas   </p> <ul> <li>Usa corchetes <code>[]</code> para acceder y modificar valores.</li> <li>Usa <code>del</code> para eliminar una clave.</li> <li>Usa <code>print()</code> para mostrar resultados.</li> </ul> Soluci\u00f3n <pre><code># Paso 1: Crear el diccionario inicial\nproducto = {\n    \"nombre\": \"Rat\u00f3n \u00f3ptico\",\n    \"precio\": 19.95,\n    \"stock\": 50\n}\n\n# Paso 2: Mostrar el nombre del producto\nprint(producto[\"nombre\"])  # Rat\u00f3n \u00f3ptico\n\n# Paso 3: Modificar el precio\nproducto[\"precio\"] = 17.50\n\n# Paso 4: A\u00f1adir la clave \"marca\"\nproducto[\"marca\"] = \"Logitech\"\n\n# Paso 5: Eliminar la clave \"stock\"\ndel producto[\"stock\"]\n\n# Paso 6: Mostrar el diccionario completo\nprint(producto)\n</code></pre>"},{"location":"2_3_EstructurasDatos/#tuplas","title":"Tuplas","text":"<p>Las tuplas son colecciones ordenadas pero inmutables. Se usan cuando los datos no deben cambiar, como coordenadas o fechas.</p> <pre><code># Definimos una tupla con coordenadas\ncoordenada = (10.5, 20.3)\n\n# Accedemos a sus elementos por \u00edndice\nprint(coordenada[0])  # 10.5\n</code></pre> <p>Las tuplas se comportan como listas, pero no pueden modificarse. Esto las hace \u00fatiles para representar datos constantes.</p>"},{"location":"2_3_EstructurasDatos/#ejemplo-y-ejercicio-de-uso_2","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>En el siguiente ejemplo se muestra c\u00f3mo crear una tupla, acceder a sus elementos y utilizarla para representar datos que no deben modificarse.</p> <p>Ejemplo combinado de uso de tuplas</p> <pre><code># Tupla que representa una coordenada en el plano\ncoordenada = (10.5, 20.3)\n\n# Acceder a los elementos por \u00edndice\nx = coordenada[0]\ny = coordenada[1]\n\nprint(f\"La coordenada X es {x}\")\nprint(f\"La coordenada Y es {y}\")\n\n# Mostrar la tupla completa\nprint(\"Coordenada completa:\", coordenada)\n</code></pre> <p>Las tuplas son \u00fatiles cuando se necesita agrupar datos que no deben cambiar, como coordenadas, fechas o combinaciones fijas. A diferencia de las listas, no se pueden modificar ni a\u00f1adir elementos una vez creadas.</p> <p>Ahora intenta realizar el siguiente ejercicio sin mirar la soluci\u00f3n.</p> <p>Ejercicio b\u00e1sico: Tupla de datos personales</p> <p>Crea una tupla llamada <code>persona</code> que contenga la siguiente informaci\u00f3n:</p> <ul> <li>Nombre: <code>\"Sergio\"</code></li> <li>Edad: <code>25</code></li> <li>Ciudad: <code>\"Alberic\"</code></li> </ul> <p>y a continuaci\u00f3n, realiza las siguientes operaciones:</p> <ol> <li>Muestra el nombre por pantalla.</li> <li>Muestra la edad por pantalla.</li> <li>Muestra la ciudad por pantalla.</li> <li>Muestra la tupla completa.</li> </ol> <p>Pistas</p> <ul> <li>Usa \u00edndices para acceder a los elementos: <code>persona[0]</code>, <code>persona[1]</code>, etc.</li> <li>Usa <code>print()</code> para mostrar resultados.</li> </ul> Soluci\u00f3n <pre><code># Paso 1: Crear la tupla\npersona = (\"Sergio\", 25, \"Alberic\")\n\n# Paso 2: Mostrar el nombre\nprint(\"Nombre:\", persona[0])\n\n# Paso 3: Mostrar la edad\nprint(\"Edad:\", persona[1])\n\n# Paso 4: Mostrar la ciudad\nprint(\"Ciudad:\", persona[2])\n\n# Paso 5: Mostrar la tupla completa\nprint(\"Datos completos:\", persona)\n</code></pre>"},{"location":"2_3_EstructurasDatos/#sets-conjuntos","title":"Sets (Conjuntos)","text":"<p>Los conjuntos son colecciones no ordenadas y sin elementos duplicados. Se utilizan para eliminar duplicados o realizar operaciones de pertenencia.</p> <pre><code># Creamos un conjunto de colores\ncolores = {\"rojo\", \"verde\", \"azul\", \"rojo\"}\n\n# Mostramos el conjunto\nprint(colores)  # {'rojo', 'verde', 'azul'}\n\n# A\u00f1adimos un nuevo color\ncolores.add(\"amarillo\")\n</code></pre> <p>Los sets eliminan autom\u00e1ticamente los duplicados y permiten operaciones como uni\u00f3n, intersecci\u00f3n y diferencia.</p>"},{"location":"2_3_EstructurasDatos/#metodos-mas-importantes_1","title":"M\u00e9todos m\u00e1s importantes","text":"<p>A continuaci\u00f3n se presentan los m\u00e9todos m\u00e1s \u00fatiles para trabajar con conjuntos (<code>set</code>) en Python, junto con su prop\u00f3sito y ejemplos pr\u00e1cticos.</p> <ul> <li><code>add(elemento)</code></li> </ul> <p>A\u00f1ade un nuevo elemento al conjunto. Si el elemento ya existe, no se a\u00f1ade de nuevo (los sets no permiten duplicados).</p> <p>Ejemplo de uso de <code>add()</code></p> <pre><code>colores = {\"rojo\", \"verde\"}\ncolores.add(\"azul\")\nprint(colores)  # {'rojo', 'verde', 'azul'}\n</code></pre> <p>Ideal para construir conjuntos din\u00e1micamente sin preocuparse por duplicados.</p> <ul> <li><code>discard(elemento)</code></li> </ul> <p>Elimina el elemento indicado si existe. Si no est\u00e1 presente, no lanza error.</p> <p>Ejemplo de uso de <code>discard()</code></p> <pre><code>colores = {\"rojo\", \"verde\"}\ncolores.discard(\"rojo\")\ncolores.discard(\"amarillo\")  # No lanza error\nprint(colores)  # {'verde'}\n</code></pre> <p>\u00datil para eliminar elementos sin necesidad de comprobar si existen.</p> <ul> <li><code>remove(elemento)</code></li> </ul> <p>Elimina el elemento indicado. Si no existe, lanza un error <code>KeyError</code>.</p> <p>Ejemplo de uso de <code>remove()</code></p> <pre><code>colores = {\"rojo\", \"verde\"}\ncolores.remove(\"verde\")\nprint(colores)  # {'rojo'}\n</code></pre> <p>Se recomienda usar <code>discard()</code> si no se quiere gestionar errores manualmente.</p> <ul> <li><code>pop()</code></li> </ul> <p>Elimina y devuelve un elemento aleatorio del conjunto. Como los sets no est\u00e1n ordenados, no se puede predecir cu\u00e1l ser\u00e1 eliminado.</p> <p>Ejemplo de uso de <code>pop()</code></p> <pre><code>colores = {\"rojo\", \"verde\", \"azul\"}\neliminado = colores.pop()\nprint(\"Elemento eliminado:\", eliminado)\nprint(\"Conjunto restante:\", colores)\n</code></pre> <p>\u00datil para vaciar progresivamente un conjunto o extraer elementos sin orden espec\u00edfico.</p> <ul> <li><code>clear()</code></li> </ul> <p>Elimina todos los elementos del conjunto, dej\u00e1ndolo vac\u00edo.</p> <p>Ejemplo de uso de <code>clear()</code></p> <pre><code>colores = {\"rojo\", \"verde\"}\ncolores.clear()\nprint(colores)  # set()\n</code></pre> <p>Ideal para reiniciar la colecci\u00f3n sin crear una nueva variable.</p> <ul> <li><code>copy()</code></li> </ul> <p>Devuelve una copia superficial del conjunto. Es \u00fatil para duplicar conjuntos sin modificar el original.</p> <p>Ejemplo de uso de <code>copy()</code></p> <pre><code>colores = {\"rojo\", \"verde\"}\ncopia = colores.copy()\nprint(copia)  # {'rojo', 'verde'}\n</code></pre> <ul> <li><code>union(set2)</code></li> </ul> <p>Devuelve un nuevo conjunto con todos los elementos de ambos conjuntos, sin duplicados.</p> <p>Ejemplo de uso de <code>union()</code></p> <pre><code>a = {\"rojo\", \"verde\"}\nb = {\"azul\", \"verde\"}\nresultado = a.union(b)\nprint(resultado)  # {'rojo', 'verde', 'azul'}\n</code></pre> <ul> <li><code>intersection(set2)</code></li> </ul> <p>Devuelve un conjunto con los elementos comunes entre ambos conjuntos.</p> <p>Ejemplo de uso de <code>intersection()</code></p> <pre><code>a = {\"rojo\", \"verde\"}\nb = {\"verde\", \"azul\"}\ncomunes = a.intersection(b)\nprint(comunes)  # {'verde'}\n</code></pre> <ul> <li><code>difference(set2)</code></li> </ul> <p>Devuelve los elementos que est\u00e1n en el primer conjunto pero no en el segundo.</p> <p>Ejemplo de uso de <code>difference()</code></p> <pre><code>a = {\"rojo\", \"verde\", \"azul\"}\nb = {\"verde\", \"amarillo\"}\nexclusivos = a.difference(b)\nprint(exclusivos)  # {'rojo', 'azul'}\n</code></pre>"},{"location":"2_3_EstructurasDatos/#tabla-de-metodos","title":"Tabla de m\u00e9todos","text":"M\u00e9todo Descripci\u00f3n Ejemplo Resultado <code>add(x)</code> A\u00f1ade el elemento <code>x</code> al conjunto <code>s.add(\"azul\")</code> <code>{\"rojo\", \"verde\", \"azul\"}</code> <code>discard(x)</code> Elimina <code>x</code> si existe, sin error si no est\u00e1 <code>s.discard(\"rojo\")</code> <code>{\"verde\"}</code> <code>remove(x)</code> Elimina <code>x</code>; lanza error si no existe <code>s.remove(\"verde\")</code> <code>{\"rojo\"}</code> <code>pop()</code> Elimina y devuelve un elemento aleatorio <code>s.pop()</code> Elemento eliminado <code>clear()</code> Elimina todos los elementos del conjunto <code>s.clear()</code> <code>set()</code> <code>copy()</code> Devuelve una copia superficial del conjunto <code>nuevo = s.copy()</code> <code>{\"rojo\", \"verde\"}</code> <code>union(set2)</code> Devuelve un conjunto con todos los elementos de ambos conjuntos <code>a.union(b)</code> <code>{\"rojo\", \"verde\", \"azul\"}</code> <code>intersection(set2)</code> Devuelve los elementos comunes entre dos conjuntos <code>a.intersection(b)</code> <code>{\"verde\"}</code> <code>difference(set2)</code> Devuelve los elementos que est\u00e1n en el primero pero no en el segundo <code>a.difference(b)</code> <code>{\"rojo\", \"azul\"}</code>"},{"location":"2_3_EstructurasDatos/#ejemplo-y-ejercicio-de-uso_3","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>En el siguiente ejemplo se muestra c\u00f3mo crear un conjunto, a\u00f1adir y eliminar elementos, y realizar operaciones t\u00edpicas como uni\u00f3n, intersecci\u00f3n y diferencia entre conjuntos.</p> <p>Ejemplo combinado de operaciones con sets</p> <pre><code># Creamos dos conjuntos de colores\ncolores_a = {\"rojo\", \"verde\", \"azul\"}\ncolores_b = {\"azul\", \"amarillo\", \"negro\"}\n\n# A\u00f1adir un nuevo color\ncolores_a.add(\"blanco\")\n\n# Eliminar un color\ncolores_b.discard(\"negro\")\n\n# Uni\u00f3n de conjuntos\ntodos_colores = colores_a.union(colores_b)\n\n# Intersecci\u00f3n de conjuntos\ncomunes = colores_a.intersection(colores_b)\n\n# Diferencia de conjuntos\nexclusivos_a = colores_a.difference(colores_b)\n\nprint(\"Todos los colores:\", todos_colores)\nprint(\"Colores comunes:\", comunes)\nprint(\"Colores exclusivos de A:\", exclusivos_a)\n</code></pre> <p>Los sets son \u00fatiles cuando se necesita trabajar con colecciones sin duplicados y realizar operaciones de comparaci\u00f3n entre grupos de elementos. A diferencia de las listas, no mantienen el orden y no permiten elementos repetidos.</p> <p>Ahora intenta realizar el siguiente ejercicio sin mirar la soluci\u00f3n.</p> <p>Ejercicio b\u00e1sico: Conjunto de animales</p> <p>Crea un conjunto llamado <code>animales</code> con los siguientes elementos:</p> <ul> <li><code>\"perro\"</code></li> <li><code>\"gato\"</code></li> <li><code>\"loro\"</code></li> <li><code>\"gato\"</code> (duplicado intencionado)</li> </ul> <p>y a continuaci\u00f3n, realiza las siguientes operaciones:</p> <ol> <li>A\u00f1ade el animal <code>\"conejo\"</code> al conjunto.</li> <li>Elimina <code>\"perro\"</code> del conjunto.</li> <li>Crea otro conjunto llamado <code>animales_dom\u00e9sticos</code> con <code>\"gato\"</code>, <code>\"conejo\"</code> y <code>\"pez\"</code>.</li> <li>Muestra la intersecci\u00f3n entre ambos conjuntos.</li> <li>Muestra la diferencia entre <code>animales</code> y <code>animales_dom\u00e9sticos</code>.</li> </ol> <p>Pistas</p> <ul> <li>Usa <code>add()</code> para a\u00f1adir elementos.</li> <li>Usa <code>discard()</code> para eliminar sin error.</li> <li>Usa <code>intersection()</code> y <code>difference()</code> para comparar conjuntos.</li> </ul> Soluci\u00f3n <pre><code># Paso 1: Crear el conjunto inicial\nanimales = {\"perro\", \"gato\", \"loro\", \"gato\"}  # El duplicado se elimina autom\u00e1ticamente\n\n# Paso 2: A\u00f1adir \"conejo\"\nanimales.add(\"conejo\")\n\n# Paso 3: Eliminar \"perro\"\nanimales.discard(\"perro\")\n\n# Paso 4: Crear el segundo conjunto\nanimales_dom\u00e9sticos = {\"gato\", \"conejo\", \"pez\"}\n\n# Paso 5: Intersecci\u00f3n\ncomunes = animales.intersection(animales_dom\u00e9sticos)\nprint(\"Animales comunes:\", comunes)\n\n# Paso 6: Diferencia\nexclusivos = animales.difference(animales_dom\u00e9sticos)\nprint(\"Animales exclusivos:\", exclusivos)\n</code></pre>"},{"location":"2_3_EstructurasDatos/#apendice-sobre-estructuras","title":"Apendice sobre estructuras.","text":"<p>Una vez vistas las 4 estructuras podemos crear todo tipo de combinaciones entre ellas e incluso utilizar el concepto de iteraci\u00f3n que tiene python con <code>for</code> para ampliar su utilidad. </p> <p>Este campo es muy extenso y que da a vuestra curiosidad su ampliaci\u00f3n. </p> <p>Veamos tan solo un par de posibilidades.</p>"},{"location":"2_3_EstructurasDatos/#iteracion-sobre-colecciones","title":"Iteraci\u00f3n sobre colecciones","text":"<p>Tal y como hemos visto en las listas, todas estas estructuras pueden recorrerse con bucles <code>for</code>, lo que permite procesar sus elementos uno a uno.</p> <pre><code># Recorremos una lista de nombres\nnombres = [\"Ana\", \"Luis\", \"Marta\"]\n\nfor nombre in nombres:\n    print(f\"Hola, {nombre}\")\n</code></pre> <p>Recorrer una colecci\u00f3n permite aplicar l\u00f3gica sobre cada elemento, como mostrarlo, modificarlo o filtrarlo.</p>"},{"location":"2_3_EstructurasDatos/#listas-de-diccionarios","title":"Listas de diccionarios","text":"<p>Las listas de diccionarios en Python constituyen una estructura de datos especialmente \u00fatil cuando se necesita representar colecciones de elementos complejos, donde cada elemento tiene m\u00faltiples atributos. Esta combinaci\u00f3n permite organizar la informaci\u00f3n de forma clara, flexible y f\u00e1cilmente manipulable, tanto en programas sencillos como en aplicaciones m\u00e1s avanzadas.</p> <p>El resultado de utilizar listas de diccionarios es una estructura que se comporta como una tabla en memoria: cada diccionario representa una fila (una entidad), y cada clave dentro del diccionario representa una columna (un atributo). Esto facilita la lectura, modificaci\u00f3n, filtrado y an\u00e1lisis de datos de forma estructurada.</p> <p>Las razones por las que esta estructura es ampliamente utilizada son las siguientes:</p> <ul> <li>Permite agrupar m\u00faltiples objetos similares en una sola colecci\u00f3n.</li> <li>Cada objeto puede tener m\u00faltiples propiedades, accesibles por nombre.</li> <li>Es compatible con formatos externos como JSON, lo que facilita la exportaci\u00f3n e importaci\u00f3n de datos.</li> <li>Permite realizar b\u00fasquedas, filtrados y ordenaciones basadas en cualquier atributo.</li> <li>Es especialmente \u00fatil en contextos como gesti\u00f3n de usuarios, inventarios, registros acad\u00e9micos o cualquier sistema que maneje entidades con campos definidos.</li> </ul> <p>Lista de diccionarios</p> <pre><code>empleados = [\n    {\"nombre\": \"Ana\", \"sueldo\": 1800, \"a\u00f1os\": 12, \"activo\": True},\n    {\"nombre\": \"Luis\", \"sueldo\": 1500, \"a\u00f1os\": 5, \"activo\": True},\n    {\"nombre\": \"Mar\u00eda\", \"sueldo\": 2000, \"a\u00f1os\": 20, \"activo\": False}\n]\n</code></pre> <p>Esta estructura permite recorrer la lista para mostrar empleados activos, calcular la media de sueldos, a\u00f1adir nuevos registros o modificar campos espec\u00edficos. Por ejemplo, para mostrar solo los empleados activos:</p> <pre><code>for emp in empleados:\n    if emp[\"activo\"]:\n        print(emp[\"nombre\"], emp[\"sueldo\"])\n</code></pre> <p>Las listas de diccionarios son, por tanto, una herramienta fundamental para modelar datos estructurados en Python de forma clara y eficaz.</p>"},{"location":"2_4_FuncionesExcepciones/","title":"Funciones y manejo de excepciones","text":"<p>Una funci\u00f3n en Python es como una peque\u00f1a herramienta que realiza una tarea espec\u00edfica. En lugar de repetir el mismo bloque de c\u00f3digo varias veces, podemos escribirlo una sola vez dentro de una funci\u00f3n y luego llamarla cada vez que la necesitemos. Esto hace que el c\u00f3digo sea m\u00e1s limpio, m\u00e1s f\u00e1cil de entender y mucho m\u00e1s sencillo de mantener. Por ejemplo, si queremos saludar a varias personas, en lugar de escribir <code>print(\"Hola, Sergio\")</code>, <code>print(\"Hola, Luc\u00eda\")</code>, etc., podemos crear una funci\u00f3n que reciba el nombre como entrada y se encargue de mostrar el saludo. As\u00ed, cada vez que queramos saludar a alguien, solo tenemos que llamar a esa funci\u00f3n con el nombre correspondiente.</p> <p>Adem\u00e1s de aprender a crear funciones, en esta sesi\u00f3n aprovechamos para introducir el manejo de errores mediante excepciones. En muchos programas, pueden surgir situaciones inesperadas: por ejemplo, intentar dividir entre cero, acceder a un dato que no existe o introducir un valor no v\u00e1lido. Las excepciones permiten detectar esos errores y responder de forma controlada, evitando que el programa se detenga bruscamente. Aprender a usar <code>try</code>, <code>except</code> y <code>raise</code> nos ayuda a escribir c\u00f3digo m\u00e1s robusto y profesional, preparado para funcionar correctamente incluso cuando algo no sale como se esperaba.</p> <p>Asi pues, lo contenidos que vamos a abordar en esta secci\u00f3n son: </p> <ul> <li>Definici\u00f3n de funciones con <code>def</code>.</li> <li>Par\u00e1metros posicionales, nombrados y con valores por defecto.</li> <li>\u00c1mbito de variables: local y global.</li> <li>Uso de <code>return</code> para devolver resultados.</li> <li>Documentaci\u00f3n interna con docstrings (<code>\"\"\" \"\"\"</code>).</li> <li>Manejo de errores con <code>try</code>, <code>except</code>, <code>finally</code>, <code>raise</code>.</li> </ul>"},{"location":"2_4_FuncionesExcepciones/#definicion-basica-de-una-funcion","title":"Definici\u00f3n b\u00e1sica de una funci\u00f3n","text":"<p>Las funciones permiten dividir un programa en bloques l\u00f3gicos que realizan tareas espec\u00edficas. Esto mejora la legibilidad, facilita la reutilizaci\u00f3n del c\u00f3digo y permite detectar errores m\u00e1s f\u00e1cilmente. En proyectos reales, como los desarrollos en Odoo, la modularidad es clave para mantener el c\u00f3digo organizado y escalable.</p> <p>La sintaxis en la definici\u00f3n de una funci\u00f3n en Python viene determinada por <code>def</code></p> <p>Ejemplo de definici\u00f3n de una funci\u00f3n <code>saludar</code> con un par\u00e1metro</p> <pre><code>def saludar(nombre):\n    \"\"\"Muestra un saludo personalizado.\"\"\"\n    print(f\"Hola, {nombre}\")\n</code></pre> <p>Esta funci\u00f3n recibe un argumento (<code>nombre</code>) y muestra un mensaje. El docstring explica brevemente qu\u00e9 hace la funci\u00f3n.</p>"},{"location":"2_4_FuncionesExcepciones/#parametros-por-defecto-y-nombrados","title":"Par\u00e1metros por defecto y nombrados","text":"<p>Los par\u00e1metros por defecto permiten definir valores que se usar\u00e1n si no se especifican en la llamada. Para definir un par\u00e1metro por defecto, basta con asignar un valor mediante un <code>=</code> en la cabecera de la funci\u00f3n</p> <p>Ejemplo de funci\u00f3n con par\u00e1metro por defecto</p> <pre><code>def saludar(nombre=\"invitado\"):\n    print(f\"Hola, {nombre}\")\n\nsaludar(\"Sergio\")  # Hola, Sergio\nsaludar()          # Hola, invitado\n</code></pre> <p>Tambi\u00e9n se pueden usar argumentos nombrados para mayor claridad:</p> <pre><code>saludar(nombre=\"Luc\u00eda\")\n</code></pre> <p>Ejemplo de funci\u00f3n con argumentos nombrados (y con valores por defecto)</p> <pre><code>def saludar( nombre = \"Sergio\", apellido = \"Rey\" ):\n    print(f\"Hola, {nombre} {apellido}!\")\n\nsaludar()                                           # Hola, Sergio Rey\nsaludar( \"Carlos\", \"Alcaraz\")                       # Hola, Carlos Alcaraz\nsaludar( nombre = \"Carlos\", apellido = \"Alcaraz\")   # Hola, Carlos Alcaraz\nsaludar( nombre = \"Andr\u00e9s\")                         # Hola, Andr\u00e9s Rey\nsaludar( apellido = \"L\u00f3pez\")                        # Hola, Sergio L\u00f3pez\n</code></pre> <p>En Python, no puedes definir un valor por defecto para un par\u00e1metro si hay otro par\u00e1metro sin valor por defecto despu\u00e9s de \u00e9l. Es decir, los par\u00e1metros con valores por defecto deben ir al final de la lista de par\u00e1metros.</p> <p>Por ejemplo, esto no es v\u00e1lido:</p> <p>Incorrecto</p> <pre><code>def ejemplo(a=1, b, c=3):  # \u274c Error de sintaxis\n    pass\n</code></pre> <p>Python lanzar\u00e1 un <code>SyntaxError</code> porque <code>b</code> no tiene valor por defecto, pero est\u00e1 entre dos par\u00e1metros que s\u00ed lo tienen.</p> <p>En cambio, esto s\u00ed es v\u00e1lido:</p> <p>Correcto</p> <pre><code>def ejemplo(a, b=2, c=3):  # \u2705 Correcto\n    pass\n</code></pre> <p>Si necesitas flexibilidad en el orden, puedes usar argumentos nombrados al llamar a la funci\u00f3n, o bien reestructurar la definici\u00f3n para que los par\u00e1metros sin valor por defecto est\u00e9n primero. </p> <p>La palabra clave <code>pass</code></p> <p>En Python, la palabra clave <code>pass</code> se utiliza como una instrucci\u00f3n vac\u00eda. Sirve para indicar que no se va a ejecutar ninguna acci\u00f3n en ese lugar del c\u00f3digo, pero que la estructura est\u00e1 ah\u00ed por motivos de sintaxis o planificaci\u00f3n.</p> <p>Por ejemplo, si est\u00e1s definiendo una funci\u00f3n pero a\u00fan no has decidido qu\u00e9 va a hacer, puedes escribir:</p> <pre><code>def mi_funcion():\n    pass\n</code></pre> <p>Esto evita que el int\u00e9rprete lance un error por tener una funci\u00f3n sin contenido. Lo mismo ocurre con clases, bucles o condicionales. Es como decir: \u201caqu\u00ed ir\u00e1 algo m\u00e1s adelante, pero por ahora d\u00e9jalo en blanco\u201d.</p> <p>Tambi\u00e9n se usa cuando necesitas que el programa siga funcionando sin hacer nada en ciertos casos:</p> <pre><code>for letra in \"Python\":\n    if letra == \"h\":\n        pass  # No hacemos nada con la letra 'h'\n    else:\n        print(letra)\n</code></pre> <p>Es \u00fatil para mantener la estructura del c\u00f3digo mientras lo desarrollas o cuando quieres ignorar ciertos casos sin romper la l\u00f3gica del programa.</p>"},{"location":"2_4_FuncionesExcepciones/#funciones-con-numero-de-parametros-variables","title":"Funciones con n\u00famero de par\u00e1metros variables","text":"<p>En Python, a veces necesitamos definir funciones que puedan recibir una cantidad variable de argumentos, sin saber cu\u00e1ntos ser\u00e1n exactamente. Esto es \u00fatil cuando queremos que la funci\u00f3n sea flexible y se adapte a diferentes situaciones sin tener que modificar su definici\u00f3n.</p> <p>Para ello, Python ofrece dos mecanismos:</p> <ul> <li><code>*args</code>: permite recibir cualquier n\u00famero de argumentos posicionales.</li> <li><code>**kwargs</code>: permite recibir cualquier n\u00famero de argumentos nombrados (clave-valor).</li> </ul> <p>Tambi\u00e9n se pueden combinar ambos para crear funciones muy vers\u00e1tiles.</p>"},{"location":"2_4_FuncionesExcepciones/#uso-de-args-argumentos-posicionales-variables","title":"Uso de <code>*args</code> (argumentos posicionales variables)","text":"<p>Cuando usamos <code>*args</code> en la definici\u00f3n de una funci\u00f3n, estamos diciendo que esa funci\u00f3n puede recibir muchos valores sin nombre, que ser\u00e1n agrupados en una tupla. Esto es \u00fatil cuando queremos operar con una lista de n\u00fameros, textos u otros elementos sin saber cu\u00e1ntos ser\u00e1n.</p> <p>Se puede ver m\u00e1s claro en los siguientes ejemplos:</p> <p>Ejemplo 1: Sumar varios n\u00fameros pasados como par\u00e1metros</p> <pre><code>def sumar_todos(*numeros):\n    \"\"\"Suma todos los n\u00fameros que se pasen como argumentos.\"\"\"\n    return sum(numeros)\n\nprint(sumar_todos(2, 4, 6))       # 12\nprint(sumar_todos(1, 3, 5, 7, 9)) # 25\n</code></pre> <p>Ejemplo mostramos los par\u00e1metros pasados</p> <pre><code>def mostrar_nombres(*nombres):\n    print(\"Lista de nombres:\")\n    for nombre in nombres:\n        print(\"-\", nombre)\n\nmostrar_nombres(\"Luc\u00eda\", \"Carlos\", \"Marta\")\nmostrar_nombres(\"Sergio\")\n</code></pre> <p>En ambos casos, la funci\u00f3n puede recibir uno, tres o veinte argumentos sin cambiar su definici\u00f3n.</p>"},{"location":"2_4_FuncionesExcepciones/#uso-de-kwargs-argumentos-nombrados-variables","title":"Uso de <code>**kwargs</code> (argumentos nombrados variables)","text":"<p>Cuando usamos <code>**kwargs</code>, la funci\u00f3n puede recibir muchos argumentos con nombre, que ser\u00e1n agrupados en un diccionario. Esto es \u00fatil cuando queremos que el usuario pueda especificar informaci\u00f3n sin seguir un orden fijo.</p> <p>De nuevo comprenderemos mejor su uso con un par de ejemplos. Observar como los par\u00e1metros pasados deben tener formato de diccionario:</p> <p>Mostrar informaci\u00f3n de usuario</p> <pre><code>def mostrar_info(**datos):\n    for clave, valor in datos.items():\n        print(f\"{clave}: {valor}\")\n\nmostrar_info(nombre=\"Sergio\", edad=25, ciudad=\"Alberic\")\n</code></pre> <p>Observar c\u00f3mo se han recuperado tanto la clave como el valor de cada tupla del diccionario</p> <p>Veamos de nuevo otro ejemplo similar</p> <p>Ejemplo de lectura de configuraci\u00f3n</p> <pre><code>def configurar(**opciones):\n    print(\"Configuraci\u00f3n aplicada:\")\n    for clave, valor in opciones.items():\n        print(f\"{clave} = {valor}\")\n\nconfigurar(color=\"azul\", tama\u00f1o=\"mediano\", activo=True)\n</code></pre> <p>En estos ejemplos, los argumentos se pasan como pares clave-valor, y la funci\u00f3n los procesa como un diccionario.</p>"},{"location":"2_4_FuncionesExcepciones/#combinacion-de-parametros-fijos-args-y-kwargs","title":"Combinaci\u00f3n de par\u00e1metros fijos, <code>*args</code> y <code>**kwargs</code>","text":"<p>Tambi\u00e9n se pueden combinar par\u00e1metros normales con <code>*args</code> y <code>**kwargs</code> en una misma funci\u00f3n. El orden debe ser:</p> <ol> <li>Par\u00e1metros normales</li> <li><code>*args</code></li> <li><code>**kwargs</code></li> </ol> <p>Esto permite que la funci\u00f3n tenga una parte fija, una parte variable de datos, y una parte flexible de configuraci\u00f3n.</p> <p>De nuevo veamos un par de ejemplos:</p> <p>Procesar datos con nombre y valores</p> <pre><code>def procesar(nombre, *valores, **opciones):\n    print(\"Nombre:\", nombre)\n    print(\"Valores:\", valores)\n    print(\"Opciones:\", opciones)\n\nprocesar(\"Luc\u00eda\", 10, 20, activo=True, nivel=\"avanzado\")\n</code></pre> <p>Observar en este ejemplo como el primer par\u00e1metro de la invocaci\u00f3n de la funci\u00f3n pertenece al par\u00e1metro fijo y el resto de par\u00e1metros simple se convierten en una lista para los par\u00e1metros posicionales y los par\u00e1metros pasados como tuplas clave-valor se convierten en los par\u00e1metros finales en modo diccionario.</p> <p>Veamos otro ejemplo similar</p> <p>Enviar mensaje personalizado</p> <pre><code>def enviar_mensaje(destinatario, *lineas, **firma):\n    print(f\"Para: {destinatario}\")\n    for linea in lineas:\n        print(linea)\n    if \"nombre\" in firma:\n        print(f\"\\nAtentamente,\\n{firma['nombre']}\")\n\nenviar_mensaje(\"Carlos\", \"Hola,\", \"\u00bfC\u00f3mo est\u00e1s?\", nombre=\"Sergio\")\n</code></pre> <p>Estas funciones permiten construir estructuras muy flexibles, ideales para proyectos reales donde los datos pueden variar seg\u00fan el contexto.</p>"},{"location":"2_4_FuncionesExcepciones/#ejemplo-y-ejercicio-de-uso","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>En el siguiente ejemplo se muestra c\u00f3mo definir una funci\u00f3n que acepta una cantidad variable de argumentos posicionales (<code>*args</code>) y nombrados (<code>**kwargs</code>). La funci\u00f3n simula el registro de un pedido, donde se pueden a\u00f1adir productos sin l\u00edmite y configurar opciones adicionales como env\u00edo o m\u00e9todo de pago.</p> <p>Este ejemplo permite aplicar de forma conjunta los conceptos de funciones, <code>*args</code>, <code>**kwargs</code>, bucles, y acceso a diccionarios.</p> <pre><code>def registrar_pedido(cliente, *productos, **configuracion):\n    \"\"\"Registra un pedido con productos y opciones adicionales.\"\"\"\n    print(f\"Pedido de: {cliente}\")\n\n    if productos:\n        print(\"Productos solicitados:\")\n        for producto in productos:\n            print(\"-\", producto)\n    else:\n        print(\"No se han a\u00f1adido productos.\")\n\n    if configuracion:\n        print(\"Configuraci\u00f3n del pedido:\")\n        for clave, valor in configuracion.items():\n            print(f\"{clave}: {valor}\")\n    else:\n        print(\"Sin configuraci\u00f3n adicional.\")\n\n# Ejemplo de uso\nregistrar_pedido(\"Luc\u00eda\", \"Teclado\", \"Rat\u00f3n\", envio=\"urgente\", pago=\"tarjeta\")\nregistrar_pedido(\"Carlos\")\n</code></pre> <p>Este ejemplo muestra c\u00f3mo se pueden combinar argumentos fijos, m\u00faltiples valores y opciones flexibles en una sola funci\u00f3n.</p> <p>Ejercicio b\u00e1sico: Registro de usuario con par\u00e1metros variables</p> <p>Crea una funci\u00f3n llamada <code>registrar_usuario</code> que reciba:</p> <ul> <li>Un argumento obligatorio: <code>nombre</code></li> <li>Una cantidad variable de intereses (<code>*intereses</code>)</li> <li>Una cantidad variable de datos personales (<code>**datos</code>)</li> </ul> <p>La funci\u00f3n debe:</p> <ol> <li>Mostrar el nombre del usuario.</li> <li>Mostrar los intereses si se han indicado.</li> <li>Mostrar los datos personales como pares clave-valor si se han indicado.</li> </ol> <p>Prueba la funci\u00f3n con los siguientes casos:</p> <ul> <li><code>registrar_usuario(\"Sergio\", \"Python\", \"IA\", ciudad=\"Valencia\", edad=25)</code></li> <li><code>registrar_usuario(\"Luc\u00eda\")</code></li> </ul> <p>Pistas - Usa <code>*intereses</code> para recoger temas de inter\u00e9s. - Usa <code>**datos</code> para recoger informaci\u00f3n adicional. - Usa bucles para mostrar los contenidos.</p> Soluci\u00f3n <pre><code>def registrar_usuario(nombre, *intereses, **datos):\n    print(f\"Usuario registrado: {nombre}\")\n\n    if intereses:\n        print(\"Intereses:\")\n        for interes in intereses:\n            print(\"-\", interes)\n    else:\n        print(\"No se han indicado intereses.\")\n\n    if datos:\n        print(\"Datos personales:\")\n        for clave, valor in datos.items():\n            print(f\"{clave}: {valor}\")\n    else:\n        print(\"No se han indicado datos personales.\")\n\n# Pruebas\nregistrar_usuario(\"Sergio\", \"Python\", \"IA\", ciudad=\"Valencia\", edad=25)\nregistrar_usuario(\"Luc\u00eda\")\n</code></pre>"},{"location":"2_4_FuncionesExcepciones/#retorno-de-valores","title":"Retorno de valores","text":"<p>Una funci\u00f3n puede devolver un resultado con <code>return</code>, lo que permite usar ese valor en otras partes del programa.</p> <p>Ejemplo de funci\u00f3n con devoluci\u00f3n de resultado</p> <pre><code>def sumar(a, b):\n    return a + b\n\nresultado = sumar(3, 5)\nprint(\"Resultado:\", resultado)\n</code></pre>"},{"location":"2_4_FuncionesExcepciones/#ambito-de-variables","title":"\u00c1mbito de variables","text":"<p>Tal y como sucede en otros lenguajes, debemos diferenciar entre variables locales y globales. Las variables definidas dentro de una funci\u00f3n son locales y no afectan al resto del programa. Las variables globales pueden ser accedidas desde cualquier parte, pero deben usarse con cuidado para evitar conflictos.</p>"},{"location":"2_4_FuncionesExcepciones/#variables-locales","title":"Variables locales","text":"<p>Una variable local es aquella que se define dentro de una funci\u00f3n y solo existe mientras esa funci\u00f3n se est\u00e1 ejecutando. No puede ser accedida desde fuera.</p> <p>Error en uso de variable local</p> <pre><code>def saludar():\n    mensaje = \"Hola desde dentro de la funci\u00f3n\"\n    print(mensaje)\n\nsaludar()\nprint(mensaje)  # \u274c Esto da error: 'mensaje' no est\u00e1 definida fuera de la funci\u00f3n\n</code></pre> <p>En este ejemplo, <code>mensaje</code> solo existe dentro de <code>saludar()</code>. Al intentar usarla fuera, Python no la reconoce.</p>"},{"location":"2_4_FuncionesExcepciones/#variables-globales","title":"Variables globales","text":"<p>Una variable global se define fuera de cualquier funci\u00f3n y puede ser utilizada dentro de funciones, pero solo para leer su valor. Si se intenta modificarla directamente dentro de una funci\u00f3n, Python la tratar\u00e1 como una nueva variable local, a menos que se indique lo contrario.</p> <p>Uso correcto de variable global</p> <pre><code>contador = 0  # Variable global\n\ndef mostrar_contador():\n    print(\"Contador global:\", contador)\n\nmostrar_contador()  # \u2705 Se puede leer sin problema\n</code></pre> <p>Aqu\u00ed, <code>contador</code> es global y puede ser le\u00eddo desde dentro de la funci\u00f3n sin necesidad de hacer nada especial.</p>"},{"location":"2_4_FuncionesExcepciones/#variables-con-el-mismo-nombre-local-vs-global","title":"Variables con el mismo nombre: local vs. global","text":"<p>Si dentro de una funci\u00f3n se define una variable con el mismo nombre que una global, la versi\u00f3n local oculta la global dentro de ese \u00e1mbito.</p> <p>Ejemplo de \u00e1mbito de uso de variables local y global</p> <pre><code>mensaje = \"Hola desde fuera\"\n\ndef cambiar_mensaje():\n    mensaje = \"Hola desde dentro\"\n    print(\"Dentro de la funci\u00f3n:\", mensaje)\n\ncambiar_mensaje()\nprint(\"Fuera de la funci\u00f3n:\", mensaje)\n</code></pre> <p>En este caso, aunque ambas variables se llaman <code>mensaje</code>, son distintas. La funci\u00f3n usa su propia versi\u00f3n local y no modifica la global.</p>"},{"location":"2_4_FuncionesExcepciones/#modificar-una-variable-global-desde-una-funcion","title":"Modificar una variable global desde una funci\u00f3n","text":"<p>Si realmente se quiere modificar una variable global desde dentro de una funci\u00f3n, hay que usar la palabra clave <code>global</code>.</p> <p>Ejemplo de modificaci\u00f3n de variable global desde funci\u00f3n</p> <pre><code>contador = 0\n\ndef incrementar():\n    global contador\n    contador += 1\n\nincrementar()\nprint(\"Contador despu\u00e9s de la funci\u00f3n:\", contador)  # 1\n</code></pre> <p>Aqu\u00ed, al declarar <code>global contador</code>, le decimos a Python que queremos usar la variable global y no crear una nueva local. Esto permite modificar su valor desde dentro de la funci\u00f3n.</p>"},{"location":"2_4_FuncionesExcepciones/#manejo-de-excepciones-en-python","title":"Manejo de excepciones en Python","text":"<p>En Python, una excepci\u00f3n es un tipo de error que ocurre mientras el programa se est\u00e1 ejecutando. A diferencia de los errores de sintaxis, que impiden que el programa arranque, las excepciones aparecen cuando algo inesperado sucede durante la ejecuci\u00f3n: por ejemplo, dividir entre cero, acceder a una posici\u00f3n inexistente en una lista o convertir una cadena que no es un n\u00famero con <code>int()</code>.</p> <p>Cuando ocurre una excepci\u00f3n y no se gestiona, el programa se detiene y muestra un mensaje de error. Para evitar esto, Python permite capturar y manejar excepciones usando las instrucciones <code>try</code>, <code>except</code>, <code>finally</code> y <code>raise</code>. Esto permite que el programa contin\u00fae funcionando de forma controlada, incluso si algo falla.</p> <p>El manejo de excepciones es especialmente \u00fatil cuando se trabaja con entrada de datos, operaciones matem\u00e1ticas, acceso a archivos o cualquier situaci\u00f3n en la que el comportamiento del usuario o del entorno pueda provocar errores. Saber identificar y tratar estos errores es fundamental para escribir programas robustos y profesionales.</p>"},{"location":"2_4_FuncionesExcepciones/#uso-de-try-except","title":"Uso de <code>try</code> <code>except</code>","text":"<p>Veamos un ejemplo sencillo de captura de excepciones.</p> <p>Captura de excepci\u00f3n</p> <pre><code>try:\n    x = int(\"abc\")\nexcept:\n    print(\"Algo sali\u00f3 mal\")  # Captura cualquier excepci\u00f3n\n</code></pre> <p>En este ejemplo, se captura el error aunque no se especifique que es un . Sin embargo, si se quiere saber qu\u00e9 tipo de error ocurri\u00f3, se puede capturar el objeto de la excepci\u00f3n:</p> <p>Captura de excepci\u00f3n obteniendo el mensaje de la excepci\u00f3n</p> <pre><code>try:\n    x = int(\"abc\")\nexcept Exception as e:\n    print(\"Error:\", e)\n</code></pre> <p>Esto permite mostrar el mensaje del error sin detener el programa.</p> <p>Pero tambi\u00e9n podemos esperar capturar un excepci\u00f3n en concreto, por ejemplo la t\u00edpica de divisi\u00f3n por cero.</p> <p>Ejemplo de captura de excepci\u00f3n de divisi\u00f3n entre cero</p> <pre><code>def dividir(a, b):\n    try:\n        return a / b\n    except ZeroDivisionError:\n        print(\"Error: No se puede dividir entre cero.\")\n        return None\n</code></pre> <p>Y podemos complicar mucho m\u00e1s la gest\u00f3n de excepciones. En el siguiente ejemplo se muestra c\u00f3mo capturar dos tipos distintos de errores: uno por divisi\u00f3n entre cero (<code>ZeroDivisionError</code>) y otro por conversi\u00f3n incorrecta de tipo (<code>ValueError</code>). Si ocurre cualquier otro tipo de error, se muestra un mensaje gen\u00e9rico indicando el tipo de excepci\u00f3n.</p> <p>Ejemplo de captura de varios tipos de excepciones</p> <pre><code>def procesar_datos():\n    try:\n        numero = int(input(\"Introduce un n\u00famero entero: \"))\n        resultado = 100 / numero\n        print(\"Resultado:\", resultado)\n    except ZeroDivisionError:\n        print(\"Error: No se puede dividir entre cero.\")\n    except ValueError:\n        print(\"Error: Debes introducir un n\u00famero v\u00e1lido.\")\n    except Exception as e:\n        print(\"Ha ocurrido una excepci\u00f3n no prevista:\", type(e).__name__)\n\nprocesar_datos()\n</code></pre> <p>Este ejemplo permite comprobar c\u00f3mo se pueden capturar errores espec\u00edficos y tambi\u00e9n c\u00f3mo se puede mostrar el tipo de error si no se ha previsto. El uso de <code>type(e).__name__</code> permite mostrar el nombre de la excepci\u00f3n que se ha producido.</p> <p>Son muchos los tipos de excepciones a captura, sin embargo, para simplificar a continuaci\u00f3n se muestra una tabla con algunas de las excepciones m\u00e1s habituales que pueden encontrarse al programar en Python:</p> Excepci\u00f3n Cu\u00e1ndo ocurre <code>ZeroDivisionError</code> Al dividir un n\u00famero entre cero <code>ValueError</code> Al pasar un valor incorrecto a una funci\u00f3n (por ejemplo, <code>int(\"abc\")</code>) <code>TypeError</code> Al operar con tipos incompatibles (por ejemplo, <code>5 + \"hola\"</code>) <code>IndexError</code> Al acceder a una posici\u00f3n inexistente en una lista <code>KeyError</code> Al acceder a una clave inexistente en un diccionario <code>FileNotFoundError</code> Al intentar abrir un archivo que no existe <code>ImportError</code> Al intentar importar un m\u00f3dulo que no se encuentra <code>AttributeError</code> Al intentar acceder a un atributo que no existe en un objeto <code>NameError</code> Al usar una variable que no ha sido definida <code>RuntimeError</code> Error gen\u00e9rico que ocurre durante la ejecuci\u00f3n <code>Exception</code> Clase base de todas las excepciones; se puede usar para capturar cualquier tipo"},{"location":"2_4_FuncionesExcepciones/#uso-de-finally","title":"Uso de <code>finally</code>","text":"<p>Tambi\u00e9n se puede usar <code>finally</code> para ejecutar c\u00f3digo siempre, ocurra o no una excepci\u00f3n:</p> <p>Ejemplo de uso de <code>finally</code></p> <pre><code>try:\n    print(\"Intentando operaci\u00f3n...\")\nfinally:\n    print(\"Fin del bloque\")\n</code></pre> <p>Por supuesto, este ejemplo puede ser mejorado con el uso de tantos <code>except</code> como queramos</p>"},{"location":"2_4_FuncionesExcepciones/#lanzar-excepciones-con-raise","title":"Lanzar excepciones con <code>raise</code>","text":"<p>Por \u00faltimo, veamos tambi\u00e9n un ejemplo de <code>raise</code> que nos permite lanzar una excepci\u00f3n manualmente:</p> <p>Uso de <code>raise</code></p> <pre><code>def validar_edad(edad):\n    if edad &lt; 0:\n        raise ValueError(\"La edad no puede ser negativa\")\n</code></pre> <p>En ocasiones, para la gesti\u00f3n de errores de nuestro aplicativo nos puede resultar conveniente el uso de esta estructura.</p>"},{"location":"2_4_FuncionesExcepciones/#ejemplo-y-ejercicio-de-uso_1","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>En el siguiente ejemplo se muestra c\u00f3mo definir una funci\u00f3n que realiza una operaci\u00f3n matem\u00e1tica, valida la entrada del usuario, y gestiona distintos tipos de errores mediante excepciones espec\u00edficas. Adem\u00e1s, se incluye un bloque gen\u00e9rico para capturar cualquier otro tipo de error no previsto.</p> <p>Este ejemplo permite aplicar de forma conjunta los conceptos de funciones, par\u00e1metros, retorno de valores, docstrings, y manejo de excepciones.</p> <pre><code>def calcular_division():\n    \"\"\"Solicita dos n\u00fameros al usuario y devuelve el resultado de dividirlos.\"\"\"\n    try:\n        a = int(input(\"Introduce el numerador: \"))\n        b = int(input(\"Introduce el denominador: \"))\n        resultado = a / b\n        print(f\"Resultado: {resultado}\")\n    except ZeroDivisionError:\n        print(\"Error: No se puede dividir entre cero.\")\n    except ValueError:\n        print(\"Error: Debes introducir n\u00fameros enteros v\u00e1lidos.\")\n    except Exception as e:\n        print(\"Ha ocurrido un error inesperado:\", type(e).__name__)\n\ncalcular_division()\n</code></pre> <p>Este ejemplo cubre tres tipos de errores: - Divisi\u00f3n entre cero (<code>ZeroDivisionError</code>) - Conversi\u00f3n fallida de texto a n\u00famero (<code>ValueError</code>) - Cualquier otro error no previsto (<code>Exception</code>)</p> <p>Ejercicio b\u00e1sico: Validaci\u00f3n de precio con funci\u00f3n y excepciones</p> <p>Crea una funci\u00f3n llamada <code>calcular_precio_final</code> que reciba dos argumentos:</p> <ul> <li><code>precio_base</code>: un n\u00famero que representa el precio sin impuestos.</li> <li><code>iva</code>: porcentaje de IVA aplicado (por defecto 21).</li> </ul> <p>La funci\u00f3n debe:</p> <ol> <li>Calcular el precio final aplicando el IVA.</li> <li>Lanzar una excepci\u00f3n <code>ValueError</code> si el precio base es negativo.</li> <li>Lanzar una excepci\u00f3n <code>TypeError</code> si alguno de los valores no es num\u00e9rico.</li> <li>Devolver el resultado con un mensaje formateado.</li> </ol> <p>Prueba la funci\u00f3n con los siguientes valores:</p> <ul> <li><code>calcular_precio_final(100)</code> </li> <li><code>calcular_precio_final(-50)</code> </li> <li><code>calcular_precio_final(\"cien\")</code></li> </ul> <p>Pistas - Usa <code>try</code>, <code>except</code> y <code>raise</code> dentro de la funci\u00f3n. - Usa <code>isinstance()</code> para comprobar si los valores son num\u00e9ricos. - Usa <code>return</code> para devolver el mensaje final.</p> Soluci\u00f3n <pre><code>def calcular_precio_final(precio_base, iva=21):\n    \"\"\"Calcula el precio final con IVA, validando los datos de entrada.\"\"\"\n    try:\n        if not isinstance(precio_base, (int, float)) or not isinstance(iva, (int, float)):\n            raise TypeError(\"Los valores deben ser num\u00e9ricos.\")\n        if precio_base &lt; 0:\n            raise ValueError(\"El precio base no puede ser negativo.\")\n        precio_final = precio_base * (1 + iva / 100)\n        return f\"Precio final: {round(precio_final, 2)} \u20ac\"\n    except ValueError as ve:\n        return f\"Error de valor: {ve}\"\n    except TypeError as te:\n        return f\"Error de tipo: {te}\"\n    except Exception as e:\n        return f\"Error inesperado: {type(e).__name__}\"\n\nprint(calcular_precio_final(100))     # Precio final: 121.0 \u20ac\nprint(calcular_precio_final(-50))     # Error de valor\nprint(calcular_precio_final(\"cien\"))  # Error de tipo\n</code></pre>"},{"location":"2_5_ModulosPaquetes/","title":"Gesti\u00f3n de m\u00f3dulos, paquetes y entornos virtuales","text":"<p>En este apartado nos centraremos en saber qu\u00e9 son los m\u00f3dulos en Python y c\u00f3mo se utilizan para organizar y reutilizar c\u00f3digo. Se explicar\u00e1 c\u00f3mo importar m\u00f3dulos est\u00e1ndar como <code>math</code> o <code>datetime</code>, as\u00ed como c\u00f3mo crear y utilizar m\u00f3dulos propios. El objetivo es que se comprenda la importancia de dividir el c\u00f3digo en partes funcionales y c\u00f3mo acceder a funciones, clases o variables definidas en otros archivos mediante distintas formas de importaci\u00f3n.</p> <p>Adem\u00e1s, se introducir\u00e1 el uso de paquetes externos mediante el gestor <code>pip</code>, que permite instalar librer\u00edas desarrolladas por terceros. Se aprender\u00e1 a instalar, listar y desinstalar paquetes, as\u00ed como a utilizar herramientas como <code>pip freeze</code> para capturar las dependencias de un proyecto. Se busca que el alumno sea capaz de incorporar nuevas funcionalidades a sus programas sin necesidad de desarrollarlas desde cero, aprovechando el ecosistema abierto de Python.</p> <p>Por \u00faltimo, se abordar\u00e1 la creaci\u00f3n y gesti\u00f3n de entornos virtuales con <code>venv</code>, una herramienta fundamental para trabajar en proyectos profesionales. Se aprender\u00e1 a crear un entorno aislado, activarlo, instalar paquetes dentro de \u00e9l y generar un archivo <code>requirements.txt</code> para compartir las dependencias. El objetivo es que comprenda c\u00f3mo evitar conflictos entre proyectos y c\u00f3mo mantener un entorno limpio y controlado para cada desarrollo.</p> <p>B\u00e1sicamente, los contenidos que vamos a abordar en esta secci\u00f3n son:</p> <ul> <li>Uso de <code>import</code>, <code>from ... import ...</code>, y alias con <code>as</code>.</li> <li>Instalaci\u00f3n de paquetes con <code>pip install</code>.</li> <li>Listado y desinstalaci\u00f3n de paquetes (<code>pip list</code>, <code>pip uninstall</code>).</li> <li>Creaci\u00f3n de entornos virtuales con <code>venv</code>.</li> <li>Activaci\u00f3n y uso de entornos virtuales.</li> <li>Archivo <code>requirements.txt</code> para compartir dependencias.</li> </ul>"},{"location":"2_5_ModulosPaquetes/#introduccion-a-los-modulos","title":"Introducci\u00f3n a los m\u00f3dulos","text":"<p>Un m\u00f3dulo en Python es simplemente un archivo <code>.py</code> que contiene funciones, clases o variables que pueden ser reutilizadas en otros programas. </p> <p>Python incluye muchos m\u00f3dulos est\u00e1ndar como <code>math</code>, <code>random</code> o <code>datetime</code>, y tambi\u00e9n permite crear los tuyos propios.</p> <p>Para poder trabajar con un m\u00f3dulo, en la cabecera del fichero de c\u00f3digo lo debemos importar mediante el comando <code>import</code>;</p> <p>Importaci\u00f3n de m\u00f3dulo <code>math</code></p> <pre><code>import math\nprint(math.sqrt(25))  # 5.0\n</code></pre> <p>Tambi\u00e9n se puede importar solo una parte del m\u00f3dulo mediante <code>from &lt;m\u00f3dulo&gt; import &lt;funcion&gt;</code>:</p> <p>Importaci\u00f3n de funci\u00f3n <code>pi</code> de m\u00f3dulo <code>math</code></p> <pre><code>from math import pi\nprint(pi)  # 3.141592...\n</code></pre> <p>Observar que en el primer caso para el uso de una funci\u00f3n concreta necesitamos indicar <code>modulo.funcion()</code> mientras que al importar una funci\u00f3n directamente, no es necesario indicar el m\u00f3dulo al que pertenece.</p> <p>Y tambi\u00e9n se puede usar alias para acortar nombres de los m\u00f3dulos:</p> <p>Ejemplo de uso de alias para identificar un m\u00f3dulo</p> <pre><code>import datetime as dt\nprint(dt.datetime.now())\n</code></pre> <p>Por supuestos, python dispone de una serie de m\u00f3dulos de todo tipo que podemos usar, a parte de los que podamos desarrollar o usar de otros desarrolladores.</p> <p>Informaci\u00f3n sobre los m\u00f3dulos en Python</p> <p>La fuente m\u00e1s fiable y completa. En ella puedes consultar todos los m\u00f3dulos est\u00e1ndar, sus funciones, clases y ejemplos de uso.</p> <p>https://docs.python.org/es/3/library/index.html</p> <p>Por ejemplo, si quieres saber qu\u00e9 ofrece el m\u00f3dulo <code>math</code>, puedes ir directamente a:</p> <p>https://docs.python.org/es/3/library/math.html</p>"},{"location":"2_5_ModulosPaquetes/#uso-de-modulos-propios-en-python","title":"Uso de m\u00f3dulos propios en Python","text":"<p>Como programadores, podemos crear m\u00f3dulos (archivos) donde definimos funciones que despu\u00e9s vamos a reutilizar en nuestro/s proyectos. </p> <p>Cuando tenemos funciones definidas en un archivo como <code>utils.py</code>, podemos reutilizarlas en otros archivos del mismo proyecto import\u00e1ndolas. No es necesario hacer nada especial para \u201cexportarlas\u201d: basta con que est\u00e9n definidas correctamente y que el archivo est\u00e9 en la misma carpeta (o en una ruta accesible).</p> <p>Por ejemplo, veamos el caso de si tenemos un fichero para m\u00f3dulos y otro principal</p> <p>Uso de m\u00f3dulos propios</p> <p>Supongamos que tenemos esta estructura:</p> <pre><code>mi_proyecto/\n\u251c\u2500\u2500 utils.py\n\u2514\u2500\u2500 main.py\n</code></pre> <p>Y en <code>utils.py</code> tenemos:</p> <pre><code>def saludar(nombre):\n    return f\"Hola, {nombre}!\"\n\ndef sumar(a, b):\n    return a + b\n</code></pre> <p>Entonces en <code>main.py</code> podemos importar estas funciones as\u00ed:</p> <pre><code>from utils import saludar, sumar\n\nprint(saludar(\"Sergio\"))\nprint(sumar(3, 5))\n</code></pre> <p>Tambi\u00e9n podemos importar todo el m\u00f3dulo completo:</p> <pre><code>import utils\n\nprint(utils.saludar(\"Luc\u00eda\"))\nprint(utils.sumar(10, 7))\n</code></pre> <p>Ambas formas son v\u00e1lidas. La primera importa funciones espec\u00edficas, la segunda importa el m\u00f3dulo completo.</p>"},{"location":"2_5_ModulosPaquetes/#ejemplo-y-ejercicio-de-uso","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>Veamos el siguiente ejemplo</p> <p>Ejemplo de uso de m\u00f3dulos propios</p> <p>Archivo <code>utils.py</code></p> <pre><code>def convertir_mayusculas(texto):\n    return texto.upper()\n\ndef obtener_longitud(texto):\n    return len(texto)\n</code></pre> <p>Archivo <code>main.py</code></p> <pre><code>from utils import convertir_mayusculas, obtener_longitud\n\nfrase = \"Hola desde Alberic\"\nprint(convertir_mayusculas(frase))       # HOLA DESDE ALBERIC\nprint(obtener_longitud(frase))           # 18\n</code></pre> <p>Este ejemplo muestra c\u00f3mo separar funciones en un m\u00f3dulo y usarlas desde otro archivo.</p> <p>Ejercicio: Crear m\u00f3dulo de utilidades y usarlo desde otro archivo</p> <p>Crea un archivo llamado <code>utils.py</code> que contenga las siguientes funciones:</p> <ul> <li><code>es_par(n)</code>: devuelve <code>True</code> si el n\u00famero es par.</li> <li><code>formatear_nombre(nombre)</code>: devuelve el nombre con la primera letra en may\u00fascula y el resto en min\u00fascula.</li> </ul> <p>Luego crea otro archivo llamado <code>main.py</code> que:</p> <ol> <li>Importe las funciones desde <code>utils.py</code>.</li> <li>Pida al usuario un n\u00famero y un nombre.</li> <li>Muestre si el n\u00famero es par.</li> <li>Muestre el nombre formateado.</li> </ol> <p>Pistas - Usa <code>input()</code> para recoger datos. - Usa <code>from utils import ...</code> para importar funciones. - Usa <code>int()</code> para convertir el n\u00famero. - Calcula el resto para saber si es por o no y utiliza la funcion <code>texto.capitaliza()</code> para pasar solo la primera letra a mayusculas  </p> Soluci\u00f3n <p>Archivo <code>utils.py</code></p> <pre><code>def es_par(n):\n    return n % 2 == 0\n\ndef formatear_nombre(nombre):\n    return nombre.capitalize()\n</code></pre> <p>Archivo <code>main.py</code></p> <pre><code>from utils import es_par, formatear_nombre\n\nnumero = int(input(\"Introduce un n\u00famero: \"))\nnombre = input(\"Introduce tu nombre: \")\n\nif es_par(numero):\n    print(\"El n\u00famero es par.\")\nelse:\n    print(\"El n\u00famero es impar.\")\n\nprint(\"Nombre formateado:\", formatear_nombre(nombre))\n</code></pre>"},{"location":"2_5_ModulosPaquetes/#instalacion-de-paquetes-con-pip","title":"Instalaci\u00f3n de paquetes con <code>pip</code>","text":"<p><code>pip</code> es el gestor de paquetes oficial de Python. Permite instalar librer\u00edas externas que no vienen incluidas por defecto. Por ejemplo, para instalar la librer\u00eda <code>requests</code>:</p> <pre><code>pip install requests\n</code></pre> <p>Una vez instalada, puedes usarla en tu c\u00f3digo:</p> <p>!!!example \"Ejemplo de uso de librer\u00eda <code>request</code></p> <pre><code>```python\nimport requests\nrespuesta = requests.get(\"https://www.google.com\")\nprint(respuesta.status_code)\n```\n</code></pre> <p>Si intentamos hacer el <code>import</code> de un paquete no instalado en el sistema, entonces tendremos un error.</p> Error por falta de librer\u00eda \"emoji\" <p>Para ver qu\u00e9 paquetes tienes instalados:</p> <pre><code>pip list\n</code></pre> <p>Para desinstalar uno:</p> <pre><code>pip uninstall &lt;&lt;nombre_paquete&gt;&gt;\n</code></pre>"},{"location":"2_5_ModulosPaquetes/#entornos-virtuales","title":"Entornos virtuales","text":"<p>Un entorno virtual es una carpeta aislada que contiene su propia instalaci\u00f3n de Python y sus propios paquetes. Esto evita conflictos entre proyectos y permite mantener cada uno con sus dependencias espec\u00edficas.</p> <p>Esto nos permite crear aplicaciones y tener instalados todos los paquetes de forma aislada, de forma que los paquetes de una aplicaci\u00f3n no interfieren con los de otra. Esto puede parecer trivial, pero no lo es, puesto que podemos usar diferentes versiones de paquetes en aplicaciones diferentes.</p> <p>Para crear un entorno virtual:</p> <pre><code>python -m venv mi_entorno\n</code></pre> <p>Esto crea una carpeta llamada <code>mi_entorno</code>. Para activarlo:</p> <ul> <li>En Windows:   <pre><code>mi_entorno\\Scripts\\activate\n</code></pre></li> <li>En macOS/Linux:   <pre><code>source mi_entorno/bin/activate\n</code></pre></li> </ul> <p>Una vez activado, puedes instalar paquetes con <code>pip</code> y quedar\u00e1n guardados solo en ese entorno.</p> <p>Para salir del entorno:</p> <pre><code>deactivate\n</code></pre> <p>Veamos un ejemplo que clarificar\u00e1 c\u00f3mo se aplica:</p> Entorno Virtual en Python <p>En el ejemplo anterior podemos ver los siguientes pasos:</p> <ol> <li>Se crea un entorno virtual <code>vsge</code> y se activa</li> <li>Se instala el paquete <code>emogi</code></li> <li>Se comprueba que el paquete esta instalado</li> <li>Se sale del entorno virtual</li> <li>Se comprueba que el paquete <code>emogi</code> no esta instalado, por lo que se demuestra que solo queda instalado si se utiliza con el entorno activo.</li> </ol>"},{"location":"2_5_ModulosPaquetes/#trabajando-con-entornos-virtuales-y-organizacion-de-modulos","title":"Trabajando con entornos virtuales y organizaci\u00f3n de m\u00f3dulos","text":"<p>La forma m\u00e1s aconsejable y profesional de organizar un proyecto con entorno virtual es trabajar en una carpeta base del proyecto y tener el entorno virtual como una subcarpeta dentro de ella. Esto permite mantener el c\u00f3digo fuente, los archivos de configuraci\u00f3n, los datos y el entorno virtual bien separados y estructurados, lo que facilita el mantenimiento, la colaboraci\u00f3n y el despliegue.</p> <p>Adem\u00e1s, cuando el proyecto crece, es habitual agrupar funciones propias en subcarpetas que act\u00faan como paquetes. Esto mejora la modularidad y permite importar funciones desde distintos archivos sin mezclar todo en un \u00fanico m\u00f3dulo. Para que una subcarpeta sea tratada como paquete, debe contener un archivo <code>__init__.py</code>, aunque est\u00e9 vac\u00edo.</p> <p>El fichero <code>__init__.py</code></p> <p>El archivo <code>__init__.py</code> indica que una carpeta debe ser tratada como un paquete de Python. Aunque en versiones modernas ya no es obligatorio, sigue siendo una buena pr\u00e1ctica incluirlo.</p> <p>Aunque el archivo <code>__init__.py</code> puede estar vac\u00edo, tambi\u00e9n puede incluir c\u00f3digo \u00fatil de inicializaci\u00f3n para el paquete. Esto permite controlar qu\u00e9 funciones, clases o subm\u00f3dulos se exponen al importar el paquete, definir constantes globales, o incluso agrupar accesos para simplificar el uso desde fuera.</p> <p>Por ejemplo, si tienes varios m\u00f3dulos en la carpeta <code>utilidades/</code>, puedes usar <code>__init__.py</code> para importar funciones clave y facilitar el acceso desde el exterior:</p> <pre><code># utilidades/__init__.py\nfrom .texto import formatear_mensaje\nfrom .numeros import es_par\n</code></pre> <p>Esto permite que desde <code>main.py</code> puedas hacer:</p> <pre><code>from utilidades import formatear_mensaje, es_par\n</code></pre> <p>En lugar de tener que importar cada m\u00f3dulo por separado. Tambi\u00e9n puedes definir constantes o funciones que se ejecuten al cargar el paquete:</p> <pre><code># utilidades/__init__.py\nVERSION = \"1.0\"\n\ndef iniciar():\n    print(\"Paquete utilidades cargado correctamente.\")\n</code></pre> <p>Este enfoque es \u00fatil cuando quieres que el paquete tenga un comportamiento inicial o una configuraci\u00f3n com\u00fan.</p> <p>De hecho, podemos decir que tenemos una estructura base t\u00edpica a la hora de crear un proyecto en Python que ser\u00eda similar a la mostrada en el siguiente ejemplo:</p> <p>Estructura recomendada</p> <pre><code>mi_proyecto/\n\u251c\u2500\u2500 venv/                     \u2190 entorno virtual (subcarpeta)\n\u251c\u2500\u2500 main.py                   \u2190 c\u00f3digo principal\n\u251c\u2500\u2500 utilidades/              \u2190 paquete con m\u00f3dulos propios\n\u2502   \u251c\u2500\u2500 __init__.py          \u2190 indica que es un paquete\n\u2502   \u2514\u2500\u2500 texto.py             \u2190 m\u00f3dulo con funciones de texto\n\u251c\u2500\u2500 requirements.txt         \u2190 dependencias del proyecto\n\u251c\u2500\u2500 README.md                \u2190 documentaci\u00f3n\n\u2514\u2500\u2500 datos/                   \u2190 archivos de entrada/salida\n</code></pre> <p>Esta estructura permite que el entorno virtual est\u00e9 contenido dentro del proyecto, pero no mezclado con el c\u00f3digo. Tambi\u00e9n facilita que puedas subir tu proyecto a GitHub o compartirlo sin incluir el entorno virtual (que suele a\u00f1adirse al <code>.gitignore</code>). Al mismo tiempo, el uso de paquetes como <code>utilidades/</code> permite mantener el c\u00f3digo organizado y reutilizable.</p> <p>Ejemplo de invocaci\u00f3n de funciones desde un m\u00f3dulo en subcarpeta</p> <p>Si tienes una funci\u00f3n <code>formatear_mensaje()</code> definida en <code>utilidades/texto.py</code>, puedes usarla desde <code>main.py</code> as\u00ed:</p> <pre><code>from utilidades.texto import formatear_mensaje\n\nprint(formatear_mensaje(\"hola desde Valencia\"))\n</code></pre> <p>Recuerda que la carpeta <code>utilidades</code> debe contener un archivo <code>__init__.py</code> para que Python la reconozca como paquete.</p> <p>En el siguiente apartado hablaremos el archivo <code>requirements.txt</code></p>"},{"location":"2_5_ModulosPaquetes/#usos-tipicos-de-los-entornos-virtuales","title":"Usos t\u00edpicos de los entornos virtuales","text":"<p>Un entorno virtual no es solo para instalar paquetes. Tambi\u00e9n te permite:</p> <ul> <li>Usar una versi\u00f3n espec\u00edfica de Python (si lo creas con <code>pyenv</code> o herramientas similares).</li> <li>Ejecutar scripts con dependencias aisladas, sin interferencias de otros proyectos.</li> <li>Probar diferentes versiones de librer\u00edas sin afectar tu sistema.</li> <li>Instalar herramientas de desarrollo como linters, formateadores o frameworks sin contaminar el entorno global.</li> </ul> <p>O sea, el entorno virtual es como una \u201cburbuja\u201d donde puedes trabajar con total libertad, sabiendo que todo lo que instales o configures queda dentro de esa carpeta.</p>"},{"location":"2_5_ModulosPaquetes/#archivo-requirementstxt","title":"Archivo <code>requirements.txt</code>","text":"<p>Este archivo contiene la lista de paquetes necesarios para un proyecto. Se puede generar autom\u00e1ticamente:</p> <pre><code>pip freeze &gt; requirements.txt\n</code></pre> <p>Y se puede usar para instalar todos los paquetes en otro entorno:</p> <pre><code>pip install -r requirements.txt\n</code></pre> <p>Esto es muy \u00fatil para compartir proyectos con otros desarrolladores o para desplegar en servidores. En vez de estar instalando manualmente todos los paquetes, mediante este fichero el servidor sabe qu\u00e9 paquetes debe instalar (autom\u00e1ticamente).</p> <p>Instalaci\u00f3n autom\u00e1tica en despliegues</p> <p>En ejecuci\u00f3n local, Python no instala autom\u00e1ticamente los paquetes aunque est\u00e9n en <code>requirements.txt</code>. Pero en entornos de despliegue s\u00ed se automatiza:</p> <ul> <li> <p>Docker </p><pre><code>COPY requirements.txt .\nRUN pip install -r requirements.txt\n</code></pre><p></p> </li> <li> <p>Plataformas como Heroku o GitHub Actions Detectan el fichero y ejecutan autom\u00e1ticamente: </p><pre><code>pip install -r requirements.txt\n</code></pre><p></p> </li> <li> <p>Script de arranque personalizado </p><pre><code>pip install -r requirements.txt &amp;&amp; python main.py\n</code></pre><p></p> </li> </ul>"},{"location":"2_5_ModulosPaquetes/#ejemplo-y-ejercicio-de-uso_1","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>El siguiente ejemplo permite crear un flujo que prepara un proyecto web con Flask sin afectar otros proyectos.</p> <p>Ejemplo de uso</p> <p>Los siguiente pasos crean en entorno virtual, lo activa, instala el paquete flask y genera el fichero requirements.txt</p> <pre><code># Crear entorno virtual\npython -m venv entorno_web\n\n# Activar entorno (Windows)\nentorno_web/Scripts/activate\n\n# Instalar Flask\npip install flask\n\n# Guardar dependencias\npip freeze &gt; requirements.txt\n\n# Desactivar entorno\ndeactivate\n</code></pre> <p>Ejercicio: Preparar entorno para proyecto de an\u00e1lisis de datos</p> <p>Imagina que vas a empezar un proyecto de an\u00e1lisis de datos en Python. Crea un entorno virtual llamado <code>analisis</code>, instala los paquetes <code>pandas</code> y <code>matplotlib</code>, y guarda las dependencias en un archivo <code>requirements.txt</code>.</p> <p>Pistas - Usa <code>python -m venv</code> para crear el entorno. - Activa el entorno antes de instalar los paquetes. - Usa <code>pip freeze</code> para generar el archivo.</p> Soluci\u00f3n <pre><code># Crear entorno virtual\npython -m venv analisis\n\n# Activar entorno (Windows)\nanalisis/Scripts/activate\n\n# Instalar paquetes\npip install pandas matplotlib\n\n# Guardar dependencias\npip freeze &gt; requirements.txt\n\n# Desactivar entorno\ndeactivate\n</code></pre> <p>Genial, Sergio. Aqu\u00ed tienes el listado de m\u00f3dulos t\u00edpicos instalables con <code>pip</code>, presentado como tarjetas visuales para MkDocs Material. Puedes integrarlo directamente en tu documentaci\u00f3n:</p>"},{"location":"2_5_ModulosPaquetes/#apendice-modulos-comunes","title":"Ap\u00e9ndice: M\u00f3dulos comunes","text":"<p>A continuaci\u00f3n se presentan algunos m\u00f3dulos externos populares en Python, con su utilidad y ejemplos de funciones clave. </p> <p>Lor primeros viene incluidos dentro de la propia instalacion de Python:</p> jsondatetimeossysrandommathtime <p>Utilidad: Trabajar con datos en formato JSON (muy usado en APIs y persistencia).</p> <p>Funciones destacadas:</p> <ul> <li><code>dump(obj, file)</code>: Guarda un objeto Python en un fichero <code>.json</code>.</li> <li><code>load(file)</code>: Carga datos desde un fichero <code>.json</code>.</li> <li><code>dumps(obj)</code>: Convierte un objeto Python a cadena JSON.</li> <li><code>loads(str)</code>: Convierte una cadena JSON a objeto Python.</li> </ul> <p>Ejemplo: </p><pre><code>import json\n\ndatos = {\"nombre\": \"Ana\", \"edad\": 30}\ncadena = json.dumps(datos)\nprint(cadena)\n</code></pre><p></p> <p>Utilidad: Gestionar fechas, horas y diferencias temporales.</p> <p>Funciones destacadas:</p> <ul> <li><code>datetime.now()</code>: Fecha y hora actual.</li> <li><code>datetime.strptime()</code>: Convertir cadena a fecha.</li> <li><code>timedelta</code>: Representa una duraci\u00f3n.</li> <li><code>date.today()</code>: Fecha actual sin hora.</li> </ul> <p>Ejemplo: </p><pre><code>from datetime import datetime\nahora = datetime.now()\nprint(ahora.strftime(\"%d/%m/%Y %H:%M\"))\n</code></pre><p></p> <p>Utilidad: Interactuar con el sistema operativo (rutas, entorno, procesos).</p> <p>Funciones destacadas:</p> <ul> <li><code>os.getcwd()</code>: Directorio actual.</li> <li><code>os.listdir()</code>: Archivos en una carpeta.</li> <li><code>os.path.join()</code>: Unir rutas.</li> <li><code>os.environ</code>: Variables de entorno.</li> </ul> <p>Ejemplo: </p><pre><code>import os\nprint(\"Carpeta actual:\", os.getcwd())\n</code></pre><p></p> <p>Utilidad: Acceder a par\u00e1metros del sistema y controlar la ejecuci\u00f3n.</p> <p>Funciones destacadas:</p> <ul> <li><code>sys.argv</code>: Argumentos pasados al script.</li> <li><code>sys.exit()</code>: Finaliza el programa.</li> <li><code>sys.path</code>: Rutas de b\u00fasqueda de m\u00f3dulos.</li> </ul> <p>Ejemplo: </p><pre><code>import sys\nprint(\"Argumentos:\", sys.argv)\n</code></pre><p></p> <p>Utilidad: Generar n\u00fameros aleatorios y seleccionar elementos.</p> <p>Funciones destacadas:</p> <ul> <li><code>random.randint(a, b)</code>: Entero aleatorio entre <code>a</code> y <code>b</code>.</li> <li><code>random.choice(lista)</code>: Elemento aleatorio.</li> <li><code>random.shuffle(lista)</code>: Mezcla la lista.</li> <li><code>random.random()</code>: N\u00famero decimal entre 0 y 1.</li> </ul> <p>Ejemplo: </p><pre><code>import random\nprint(\"N\u00famero aleatorio:\", random.randint(1, 10))\n</code></pre><p></p> <p>Utilidad: Operaciones matem\u00e1ticas b\u00e1sicas y avanzadas.</p> <p>Funciones destacadas:</p> <ul> <li><code>math.sqrt(x)</code>: Ra\u00edz cuadrada.</li> <li><code>math.pow(x, y)</code>: Potencia.</li> <li><code>math.floor(x)</code>: Redondeo hacia abajo.</li> <li><code>math.pi</code>: Constante \u03c0.</li> </ul> <p>Ejemplo: </p><pre><code>import math\nprint(\"Ra\u00edz de 25:\", math.sqrt(25))\n</code></pre><p></p> <p>Utilidad: Medir tiempos, pausas y temporizadores.</p> <p>Funciones destacadas:</p> <ul> <li><code>time.sleep(segundos)</code>: Pausa.</li> <li><code>time.time()</code>: Timestamp actual.</li> <li><code>time.strftime()</code>: Formatear fecha/hora.</li> </ul> <p>Ejemplo: </p><pre><code>import time\nprint(\"Inicio\")\ntime.sleep(2)\nprint(\"Fin tras 2 segundos\")\n</code></pre><p></p> <p>Y ahora otros que necesitan ser instalados usando <code>pip</code></p> <pre><code>pip install nombre_del_paquete\n</code></pre> requestspytestpandasmatplotlibnumpyflaskcoloramaemojibcryptpython-dotenv <p>Utilidad: Realiza peticiones HTTP.</p> <p>Funciones destacadas:</p> <ul> <li><code>get(url)</code>: Realiza una petici\u00f3n GET.</li> <li><code>post(url, data)</code>: Env\u00eda datos con POST.</li> <li><code>json()</code>: Convierte la respuesta en diccionario.</li> <li><code>status_code</code>: C\u00f3digo de estado HTTP.</li> </ul> <p>Ejemplo: </p><pre><code>import requests\nr = requests.get(\"https://api.github.com\")\nprint(r.status_code)\nprint(r.json())\n</code></pre><p></p> <p>Utilidad: Automatiza pruebas unitarias.</p> <p>Funciones destacadas:</p> <ul> <li><code>assert</code>: Verifica condiciones esperadas.</li> <li><code>raises</code>: Comprueba excepciones.</li> <li><code>fixture</code>: Prepara contexto de prueba.</li> <li><code>mark.parametrize</code>: Ejecuta con m\u00faltiples valores.</li> </ul> <p>Ejemplo: </p><pre><code>def suma(a, b): return a + b\n\ndef test_suma():\n    assert suma(2, 3) == 5\n</code></pre><p></p> <p>Utilidad: Manipula datos tabulares.</p> <p>Funciones destacadas:</p> <ul> <li><code>read_csv()</code>: Carga datos desde CSV.</li> <li><code>head()</code>: Primeras filas.</li> <li><code>describe()</code>: Estad\u00edsticas b\u00e1sicas.</li> <li><code>groupby()</code>: Agrupaci\u00f3n por columna.</li> </ul> <p>Ejemplo: </p><pre><code>import pandas as pd\ndf = pd.read_csv(\"datos.csv\")\nprint(df.describe())\n</code></pre><p></p> <p>Utilidad: Genera gr\u00e1ficos 2D.</p> <p>Funciones destacadas:</p> <ul> <li><code>plot()</code>: L\u00ednea simple.</li> <li><code>bar()</code>: Barras.</li> <li><code>scatter()</code>: Dispersi\u00f3n.</li> <li><code>hist()</code>: Histograma.</li> <li><code>show()</code>: Muestra el gr\u00e1fico.</li> </ul> <p>Ejemplo: </p><pre><code>import matplotlib.pyplot as plt\nplt.plot([1, 2, 3], [4, 1, 7])\nplt.title(\"Gr\u00e1fico de ejemplo\")\nplt.show()\n</code></pre><p></p> <p>Utilidad: C\u00e1lculo num\u00e9rico con arrays.</p> <p>Funciones destacadas:</p> <ul> <li><code>array()</code>: Crea un array.</li> <li><code>mean()</code>: Media.</li> <li><code>reshape()</code>: Cambia forma.</li> <li><code>dot()</code>: Producto matricial.</li> <li><code>random.rand()</code>: Array aleatorio.</li> </ul> <p>Ejemplo: </p><pre><code>import numpy as np\na = np.array([1, 2, 3])\nprint(np.mean(a))\n</code></pre><p></p> <p>Utilidad: Aplicaciones web ligeras.</p> <p>Funciones destacadas:</p> <ul> <li><code>Flask()</code>: Crea la app.</li> <li><code>route()</code>: Define rutas.</li> <li><code>render_template()</code>: Usa HTML.</li> <li><code>request</code>: Accede a datos enviados.</li> </ul> <p>Ejemplo: </p><pre><code>from flask import Flask\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef inicio():\n    return \"Hola desde Flask\"\n</code></pre><p></p> <p>Utilidad: Colorea texto en terminal.</p> <p>Funciones destacadas:</p> <ul> <li><code>Fore</code>: Colores de texto.</li> <li><code>Back</code>: Colores de fondo.</li> <li><code>Style</code>: Estilos como negrita.</li> <li><code>init()</code>: Inicializa colorama.</li> </ul> <p>Ejemplo: </p><pre><code>from colorama import Fore, Style\nprint(Fore.RED + Style.BRIGHT + \"Error cr\u00edtico\")\n</code></pre><p></p> <p>Utilidad: Muestra emojis en texto.</p> <p>Funciones destacadas:</p> <ul> <li><code>emojize()</code>: Convierte texto en emoji.</li> <li><code>demojize()</code>: Convierte emoji en texto.</li> <li><code>replace_emoji()</code>: Sustituye emojis.</li> </ul> <p>Ejemplo: </p><pre><code>import emoji\nprint(emoji.emojize(\"Python es divertido :snake:\"))\n</code></pre><p></p> <p>Utilidad: Cifrado seguro de contrase\u00f1as.</p> <p>Funciones destacadas:</p> <ul> <li><code>hashpw()</code>: Cifra una contrase\u00f1a.</li> <li><code>gensalt()</code>: Genera sal aleatoria.</li> <li><code>checkpw()</code>: Verifica contrase\u00f1a.</li> </ul> <p>Ejemplo: </p><pre><code>import bcrypt\nclave = b\"secreta123\"\nhashed = bcrypt.hashpw(clave, bcrypt.gensalt())\nprint(bcrypt.checkpw(clave, hashed))\n</code></pre><p></p> <p>Utilidad: Carga variables desde <code>.env</code>.</p> <p>Funciones destacadas:</p> <ul> <li><code>load_dotenv()</code>: Carga las variables.</li> <li><code>dotenv_values()</code>: Devuelve diccionario.</li> <li><code>find_dotenv()</code>: Localiza el fichero <code>.env</code>.</li> </ul> <p>Ejemplo: </p><pre><code>from dotenv import load_dotenv\nimport os\n\nload_dotenv()\nprint(os.getenv(\"API_KEY\"))\n</code></pre><p></p>"},{"location":"2_6_ProgramacionOrientadaObjetos/","title":"Programaci\u00f3n Orientada a Objetos (POO)","text":"<p>En esta \u00faltima sesi\u00f3n, nos familiarizaremos con los fundamentos de la programaci\u00f3n orientada a objetos en Python, un paradigma que permite modelar problemas del mundo real mediante clases y objetos. Se explicar\u00e1 c\u00f3mo definir clases, crear instancias, y utilizar atributos y m\u00e9todos para encapsular comportamiento. El objetivo es que se comprenda c\u00f3mo organizar el c\u00f3digo en estructuras m\u00e1s robustas y reutilizables.</p> <p>Tambi\u00e9n se abordar\u00e1n conceptos clave como el constructor <code>__init__</code>, el uso de <code>self</code>, y la distinci\u00f3n entre atributos de instancia y m\u00e9todos. Se aprender\u00e1 a crear objetos con estado propio y a manipularlos mediante funciones internas que definen su comportamiento. Se busca que se entienda c\u00f3mo se relacionan los objetos entre s\u00ed y c\u00f3mo se puede construir l\u00f3gica m\u00e1s compleja a partir de clases simples.</p> <p>Por \u00faltimo, se introducir\u00e1 el concepto de herencia, que permite crear nuevas clases a partir de otras ya existentes, reutilizando y extendiendo funcionalidades. Se explicar\u00e1 c\u00f3mo sobrescribir m\u00e9todos, c\u00f3mo usar <code>super()</code> y c\u00f3mo aplicar estos principios para evitar duplicaci\u00f3n de c\u00f3digo y mejorar la mantenibilidad de los programas.</p> <p>B\u00e1sicamente, los contenidos que vamos a abordar en esta secci\u00f3n son:</p> <ul> <li>Definici\u00f3n de clases y objetos</li> <li>Atributos de instancia y uso de <code>self</code></li> <li>M\u00e9todos internos y constructor <code>__init__</code></li> <li>Creaci\u00f3n y uso de instancias</li> <li>Herencia entre clases</li> <li>Sobrescritura de m\u00e9todos y uso de <code>super()</code></li> </ul>"},{"location":"2_6_ProgramacionOrientadaObjetos/#introduccion-a-la-poo-en-python","title":"Introducci\u00f3n a la POO en Python","text":"<p>La programaci\u00f3n orientada a objetos permite representar entidades como \u201cobjetos\u201d que tienen estado (atributos) y comportamiento (m\u00e9todos). En Python, se define una clase con la palabra clave <code>class</code>, y se crean objetos como instancias de esa clase.</p> <p>Ejemplo de Objerto Persona</p> <pre><code>class Persona:\n    def __init__(self, nombre, edad):\n        self.nombre = nombre\n        self.edad = edad\n\n    def saludar(self):\n        print(f\"Hola, soy {self.nombre} y tengo {self.edad} a\u00f1os.\")\n</code></pre> <p>Aqu\u00ed, <code>__init__</code> es el constructor, que se ejecuta al crear el objeto. <code>self</code> representa la instancia actual, y permite acceder a sus atributos y m\u00e9todos.</p> <pre><code>p1 = Persona(\"Sergio\", 30)\np1.saludar()\n</code></pre>"},{"location":"2_6_ProgramacionOrientadaObjetos/#herencia-entre-clases","title":"Herencia entre clases","text":"<p>Una clase puede heredar de otra para reutilizar su comportamiento. Por ejemplo:</p> <p>Ejemplo de objeto Empleado, heredado de Persona</p> <pre><code>class Empleado(Persona):\n    def __init__(self, nombre, edad, puesto):\n        super().__init__(nombre, edad)\n        self.puesto = puesto\n\n    def saludar(self):\n        print(f\"Hola, soy {self.nombre}, trabajo como {self.puesto}.\")\n</code></pre> <p>La clase <code>Empleado</code> hereda de <code>Persona</code>, pero redefine el m\u00e9todo <code>saludar</code>. El uso de <code>super()</code> permite llamar al constructor de la clase base.</p>"},{"location":"2_6_ProgramacionOrientadaObjetos/#ejemplo-y-ejercicio-de-uso","title":"\ud83e\udde9 Ejemplo y ejercicio de uso","text":"<p>Veamos un ejemplo b\u00e1sico que muestra c\u00f3mo una clase hija puede sobrescribir el comportamiento de la clase padre. En este caso, redefinimos la clase Animal como Perro.</p> <p>Clase Perro redefina a Animal</p> <pre><code>class Animal:\n    def __init__(self, nombre):\n        self.nombre = nombre\n\n    def hablar(self):\n        print(f\"{self.nombre} hace un sonido.\")\n\nclass Perro(Animal):\n    def hablar(self):\n        print(f\"{self.nombre} dice: \u00a1Guau!\")\n\nmascota = Perro(\"Toby\")\nmascota.hablar()  # Toby dice: \u00a1Guau!\n</code></pre> <p>Ejercicio: Crear clase <code>Coche</code> con atributos y m\u00e9todo</p> <p>Crea una clase llamada <code>Coche</code> que tenga los siguientes atributos:</p> <ul> <li><code>marca</code></li> <li><code>modelo</code></li> <li><code>a\u00f1o</code></li> </ul> <p>La clase debe tener:</p> <ol> <li>Un constructor que reciba esos tres valores.</li> <li>Un m\u00e9todo llamado <code>mostrar_info()</code> que imprima los datos del coche en una sola l\u00ednea.</li> </ol> <p>Luego crea una instancia de la clase y llama al m\u00e9todo para mostrar la informaci\u00f3n.</p> <p>Pistas - Usa <code>__init__</code> para inicializar los atributos. - Usa <code>self</code> para acceder a los atributos dentro del m\u00e9todo. - Usa <code>print()</code> para mostrar los datos formateados.</p> Soluci\u00f3n <pre><code>class Coche:\n    def __init__(self, marca, modelo, a\u00f1o):\n        self.marca = marca\n        self.modelo = modelo\n        self.a\u00f1o = a\u00f1o\n\n    def mostrar_info(self):\n        print(f\"{self.marca} {self.modelo} ({self.a\u00f1o})\")\n\nmi_coche = Coche(\"Toyota\", \"Corolla\", 2020)\nmi_coche.mostrar_info()  # Toyota Corolla (2020)\n</code></pre>"},{"location":"2_6_ProgramacionOrientadaObjetos/#encapsulamiento-y-visibilidad","title":"Encapsulamiento y visibilidad","text":"<p>En Python, no existe una protecci\u00f3n estricta de atributos como en otros lenguajes, pero se usan convenciones para indicar que un atributo no debe modificarse directamente.</p> <ul> <li><code>_atributo</code>: indica que es de uso interno (convenci\u00f3n).</li> <li><code>__atributo</code>: activa name mangling (ocultaci\u00f3n parcial).</li> <li><code>@property</code>: permite acceder a atributos como si fueran p\u00fablicos, pero controlando su lectura y escritura.</li> </ul> <p>Ejemplo de encapsulamiento con <code>@property</code></p> <pre><code>class Persona:\n    def __init__(self, nombre):\n        self._nombre = nombre\n\n    @property\n    def nombre(self):\n        return self._nombre\n\n    @nombre.setter\n    def nombre(self, nuevo):\n        if nuevo:\n            self._nombre = nuevo\n</code></pre> <p>Esto permite validar o controlar el acceso a los atributos sin exponerlos directamente.</p>"},{"location":"2_6_ProgramacionOrientadaObjetos/#relacion-entre-objetos","title":"Relaci\u00f3n entre objetos","text":"<p>Una clase puede contener instancias de otras clases como atributos. Esto permite modelar relaciones entre entidades.</p> <p>Ejemplo de composici\u00f3n: Coche con Motor</p> <pre><code>class Motor:\n    def __init__(self, tipo):\n        self.tipo = tipo\n\nclass Coche:\n    def __init__(self, marca, motor):\n        self.marca = marca\n        self.motor = motor\n\nm = Motor(\"el\u00e9ctrico\")\nc = Coche(\"Tesla\", m)\nprint(c.motor.tipo)  # el\u00e9ctrico\n</code></pre> <p>Este patr\u00f3n se llama composici\u00f3n y es clave para construir sistemas complejos a partir de componentes simples.</p>"},{"location":"2_6_ProgramacionOrientadaObjetos/#diagrama-conceptual-basico","title":"Diagrama conceptual b\u00e1sico","text":"<p>Esquema de clases con herencia</p> <pre><code>classDiagram\n    class Persona {\n        -nombre: str\n        -edad: int\n        +saludar(): void\n    }\n\n    class Empleado {\n        -puesto: str\n        +saludar(): void\n    }\n\n    Persona &lt;|-- Empleado\n</code></pre> <p>Este diagrama muestra c\u00f3mo <code>Empleado</code> hereda de <code>Persona</code> y a\u00f1ade nuevos atributos y m\u00e9todos.</p>"},{"location":"2_6_ProgramacionOrientadaObjetos/#actividad-de-refuerzo-biblioteca","title":"\ud83e\uddea Actividad de refuerzo: Biblioteca","text":"<p>Ejercicio: Composici\u00f3n y listas de objetos</p> <p>Crea una clase <code>Libro</code> con los siguientes atributos:</p> <ul> <li><code>titulo</code></li> <li><code>autor</code></li> <li><code>anio</code></li> </ul> <p>Luego crea una clase <code>Biblioteca</code> que contenga una lista de libros y un m\u00e9todo <code>mostrar_catalogo()</code> que imprima todos los t\u00edtulos disponibles.</p> <p>Pistas - Usa una lista como atributo interno (<code>self.libros = []</code>). - A\u00f1ade libros con un m\u00e9todo <code>agregar_libro(libro)</code>. - Recorre la lista con un bucle <code>for</code>.</p> Soluci\u00f3n <pre><code>class Libro:\n    def __init__(self, titulo, autor, anio):\n        self.titulo = titulo\n        self.autor = autor\n        self.anyo = anio\n\nclass Biblioteca:\n    def __init__(self):\n        self.libros = []\n\n    def agregar_libro(self, libro):\n        self.libros.append(libro)\n\n    def mostrar_catalogo(self):\n        for libro in self.libros:\n            print(f\"{libro.titulo} ({libro.anio}) - {libro.autor}\")\n\n# Ejemplo de uso\nbiblio = Biblioteca()\nbiblio.agregar_libro(Libro(\"1984\", \"George Orwell\", 1949))\nbiblio.agregar_libro(Libro(\"El Principito\", \"Antoine de Saint-Exup\u00e9ry\", 1943))\nbiblio.mostrar_catalogo()\n</code></pre>"},{"location":"3_1_introduccion/","title":"Introducci\u00f3n a Git","text":""},{"location":"3_1_introduccion/#sistemas-de-control-de-versiones","title":"Sistemas de control de versiones","text":"<p>Cuando trabajas en un proyecto (una aplicaci\u00f3n, un juego, un m\u00f3dulo, etc.), es normal que hagas muchos cambios: corregir errores, a\u00f1adir funciones, reorganizar archivos. El control de versiones (VCS, Version Control System) es una herramienta que te permite:</p> <ul> <li>Llevar un historial de cambios: saber qu\u00e9 se cambi\u00f3, cu\u00e1ndo y por qu\u00e9.</li> <li>Volver atr\u00e1s si algo sale mal (deshacer, recuperar versiones antiguas).</li> <li>Trabajar en equipo sin pisar el trabajo de otros.</li> <li>Tener copias de seguridad distribuidas (cada colaborador tiene el repositorio completo).</li> </ul> <p><code>Git</code> es un sistema de control de versiones muy popular, distribuido y eficiente.</p> <p>Nota: Distribuido</p> <p>Distribuido quiere decir que cada desarrollador tiene una copia completa del repositorio (historial, ramas, archivos). No dependes de un servidor central para trabajar localmente.</p>"},{"location":"3_1_introduccion/#git","title":"Git","text":"<p>Git es un sistema de control de versiones libre y distribuido dise\u00f1ado para gestionar proyectos peque\u00f1os y grandes con rapidez y eficiencia. El objetivo principal de Git es controlar y gestionar los cambios realizados en una gran cantidad de archivos de una forma f\u00e1cil y eficiente.</p> <p>Git fue dise\u00f1ado en 2005 por Linus Torvalds, creador del kernel del sistema operativo Linux, y desde entonces se ha convertido en una herramienta fundamental e imprescindible en la gesti\u00f3n de c\u00f3digo fuente en proyectos colaborativos.</p> <p>Git se basa en repositorios, que se inicializan en un directorio concreto y contienen toda la informaci\u00f3n de los cambios realizados en todo el \u00e1rbol de directorios y archivos a partir de ese directorio.</p> <p>Los principales objetivos y caracter\u00edsticas de Git son:</p> <ul> <li>Control de versiones: Git realiza un seguimiento de las modificaciones a los archivos a lo largo del tiempo,     lo que permite a los desarrolladores ver y recuperar versiones anteriores de su c\u00f3digo.     Esta caracter\u00edstica es esencial para trabajar en equipos y para solucionar problemas o errores.</li> <li>Distribuido: Cada copia de un repositorio Git contiene todo el historial de cambios y puede operar de manera independiente.     Esto facilita el trabajo sin conexi\u00f3n y la colaboraci\u00f3n en equipos distribuidos.</li> <li>Rama y fusi\u00f3n: Git facilita la creaci\u00f3n de ramas (branching) para desarrollar funcionalidades     o solucionar problemas sin afectar la rama principal.     Despu\u00e9s, puedes fusionar (merge) las ramas de nuevo en la rama principal cuando est\u00e9n listas.</li> <li>Gesti\u00f3n de conflictos: Git ofrece herramientas para gestionar conflictos en caso de que dos o m\u00e1s personas hayan realizado     cambios en la misma parte del c\u00f3digo.     Los desarrolladores pueden resolver estos conflictos manualmente.</li> <li>Colaboraci\u00f3n: Git facilita la colaboraci\u00f3n en proyectos de c\u00f3digo abierto o en equipos,     ya que permite a m\u00faltiples personas trabajar en el mismo proyecto de manera eficiente.     Plataformas como GitHub, GitLab y Bitbucket se utilizan com\u00fanmente para alojar repositorios Git en l\u00ednea y colaborar en proyectos.</li> <li>C\u00f3digo abierto y gratuito: Git es de c\u00f3digo abierto y gratuito, lo que significa que cualquiera puede usarlo sin coste y contribuir al desarrollo de la herramienta.</li> </ul>"},{"location":"3_1_introduccion/#usaremos-el-terminal","title":"Usaremos el terminal","text":"<p>En estos apuntes, utilizaremos la terminal para interactuar con Git, pero esto no significa que sea la \u00fanica manera de hacerlo. De hecho, pr\u00e1cticamente todos los entornos de desarrollo modernos tienen integraci\u00f3n con Git, lo que permite realizar las mismas operaciones que proporciona la terminal, pero de forma m\u00e1s visual e intuitiva.</p> <p>No obstante, es importante conocer c\u00f3mo funcionan los comandos de Git en la terminal, por distintas razones:</p> <ul> <li>Portabilidad: La terminal es un entorno com\u00fan en todos los sistemas operativos y en cualquier entorno de desarrollo.</li> <li>Flexibilidad: La terminal permite realizar operaciones m\u00e1s avanzadas y personalizadas que las interfaces gr\u00e1ficas.</li> <li>Comprensi\u00f3n: Permite entender c\u00f3mo funcionan los comandos de Git y los procesos que realiza en el sistema.</li> </ul>"},{"location":"3_1_introduccion/#trabajando-con-git","title":"Trabajando con <code>git</code>","text":"<p>A la hora de trabajar con git, debemos tener en cuenta una serie de conceptos previos</p>"},{"location":"3_1_introduccion/#tres-areas-dentro-de-un-repositorio","title":"Tres \u00e1reas dentro de un repositorio","text":"<p>Para entender c\u00f3mo trabaja Git, es \u00fatil saber que el repositorio (local) est\u00e1 dividido en tres estados o \u201c\u00e1reas\u201d:</p> <ol> <li> <p>Directorio de trabajo (working directory)    Es la copia de los archivos que ves y modificas en tu sistema. Por ejemplo, el c\u00f3digo fuente que editas.</p> </li> <li> <p>\u00c1rea de preparaci\u00f3n (staging area o \u00edndice / index)    Es una \u201czona intermedia\u201d donde marcas los cambios que quieres incluir en el pr\u00f3ximo commit. Aqu\u00ed decides qu\u00e9 cambios van o no van al commit.</p> </li> <li> <p>Repositorio local (.git)    Guarda los commits, el historial, las ramas, etc. Cuando haces <code>git commit</code>, los contenidos del \u00e1rea de preparaci\u00f3n se almacenan aqu\u00ed.</p> </li> </ol> <p>Visualmente:</p> \u00c1reas de un repositorio Git."},{"location":"3_1_introduccion/#flujo-basico-de-trabajo","title":"Flujo b\u00e1sico de trabajo","text":"<p>El flujo de trabajo que sigue la gesti\u00f3n de un repositorio local es: </p> <ol> <li>Modificar archivos en tu directorio de trabajo.</li> <li>Usar <code>git add</code> para moverlos al staging.</li> <li>Hacer <code>git commit</code> para registrar esos cambios como una versi\u00f3n nueva.</li> <li>Si trabajas con repositorio remoto, haces <code>git push</code> para subir esos commits al servidor.</li> <li>Puedes recuperar cambios de otros con <code>git pull</code> o <code>git fetch</code>.</li> </ol> Flujo de trabajo git + repositorio."},{"location":"3_1_introduccion/#instalacion-de-git","title":"instalaci\u00f3n de <code>git</code>","text":"<p>La instalaci\u00f3n de Git es un paso esencial para comenzar a trabajar con control de versiones en proyectos de desarrollo. En sistemas Ubuntu o derivados de Debian, el proceso es muy sencillo: basta con abrir una terminal y ejecutar el comando </p> <pre><code>sudo apt install git\n</code></pre> <p>Esto instalar\u00e1 la versi\u00f3n disponible en los repositorios oficiales. Una vez instalado, puedes verificarlo con </p> <p></p><pre><code>git --version\n</code></pre> Tambi\u00e9n es posible compilar Git desde el c\u00f3digo fuente si se requiere una versi\u00f3n m\u00e1s reciente, aunque esto implica pasos adicionales.<p></p> <p>En Windows, la forma m\u00e1s pr\u00e1ctica de instalar Git es descargando el instalador desde la p\u00e1gina oficial git-scm.com. El asistente de instalaci\u00f3n permite configurar opciones como el editor por defecto, la integraci\u00f3n con Git Bash y el comportamiento de l\u00ednea de comandos. Tras completar la instalaci\u00f3n, puedes abrir Git Bash o usar Git desde PowerShell o CMD. </p> <p>Para m\u00e1s detalles, instrucciones espec\u00edficas por sistema operativo y recomendaciones de configuraci\u00f3n, se recomienda consultar la documentaci\u00f3n oficial de Git.</p>"},{"location":"3_1_introduccion/#comandos-esenciales","title":"Comandos esenciales","text":"Comando Qu\u00e9 hace Nota / explicaci\u00f3n did\u00e1ctica <code>git init</code> Inicializa un repositorio Git en la carpeta actual Crea una carpeta oculta <code>.git</code> que gestionar\u00e1 todo el historial <code>git clone &lt;url&gt;</code> Crea una copia local de un repositorio remoto Clonas todo el historial desde otro repositorio <code>git add &lt;archivo&gt;</code> A\u00f1ade uno o varios archivos al \u00e1rea de preparaci\u00f3n Le dices a Git \u201ceste cambio lo quiero incluir en el pr\u00f3ximo commit\u201d <code>git commit -m \"mensaje\"</code> Crea un nuevo commit con los cambios del staging Cada commit tiene un mensaje que explica qu\u00e9 cambiaste <code>git status</code> Muestra el estado actual: archivos modificados, en staging, sin seguimiento Es muy \u00fatil para saber qu\u00e9 est\u00e1 listo para commit <code>git log</code> Muestra el historial de commits Puedes ver fechas, autor, mensaje <code>git diff</code> Muestra diferencias entre versiones Por ejemplo, lo que cambiaste desde el \u00faltimo commit Flojo de trabajo con git + comandos."},{"location":"3_1_introduccion/#inicializar-repositorio","title":"Inicializar repositorio","text":"<pre><code>git init\n</code></pre> Crea un nuevo repositorio local."},{"location":"3_1_introduccion/#clonar-repositorio","title":"Clonar repositorio","text":"<pre><code>git clone URL\n</code></pre> Descarga un repositorio remoto."},{"location":"3_1_introduccion/#estado-del-repositorio","title":"Estado del repositorio","text":"<pre><code>git status\n</code></pre> Muestra los archivos modificados y no rastreados."},{"location":"3_1_introduccion/#anadir-archivos","title":"A\u00f1adir archivos","text":"<pre><code>git add archivo.txt\n</code></pre> Agrega archivos al \u00e1rea de preparaci\u00f3n. Inicializaci\u00f3n de repositorio git. <p>En la figura anterior, se puede ver como hemos creado un repositorio y se han a\u00f1adido los ficheros nuevos creado al repositorio.</p> <p>A\u00f1adir archivos nuevos</p> <p>No necesitamos recordar todos los archivos nuevos cuando vamos a a\u00f1adirlos al repositorio. Podemos sustituir el nombre de todos los archivos por un <code>.</code> (punto):</p> <pre><code>git add .\n</code></pre> <p>Con esta orden nos incluir\u00e1 todos los archivos nuevos, incluidos los que se encuentren en las diferentes subcarpetas.</p>"},{"location":"3_1_introduccion/#confirmar-cambios","title":"Confirmar cambios","text":"<pre><code>git commit -m \"Descripci\u00f3n del cambio\"\n</code></pre> Guarda los cambios en el historial."},{"location":"3_1_introduccion/#ver-historial","title":"Ver historial","text":"<pre><code>git log\n</code></pre> Muestra los commits realizados. Guardando los cambios realizados. <p>En esta ilustraci\u00f3n guardamos los cambios mediante <code>commit</code> y podemos observar como esto cambios se han guardado correctamente.</p> <p>Si el historial es muy largo, podemos utilizar el par\u00e1metro <code>-n</code> para indicar la cantidad de commits que queremos ver, e incluso si utilizamos --oneline tenemos esta informaci\u00f3n en un \u00fanica l\u00edneas para que sea m\u00e1s sencillo buscar el cambio deseado</p> <pre><code>git log -n3 --oneline\n</code></pre>"},{"location":"3_1_introduccion/#revertir-cambios","title":"Revertir cambios","text":"<pre><code>git checkout -- archivo.txt\n</code></pre> Revierte cambios en un archivo desde el \u00faltimo commit"},{"location":"3_1_introduccion/#revertir-commit","title":"Revertir commit","text":"<pre><code>git revert ID_commit\n</code></pre> Crea un nuevo commit que revierte el anterior."},{"location":"3_1_introduccion/#resetear-a-un-commit-anterior","title":"Resetear a un commit anterior","text":"<pre><code>git reset --hard ID_commit\n</code></pre> Vuelve el repositorio al estado de un commit anterior. <p>La diferencia entre las dos \u00faltimas ordenes, es que la primera revierte creando un nuevo commit en el historial, mientras que la segunda elimina los commits desde el punto indicado.</p>"},{"location":"3_1_introduccion/#el-archivo-gitignore","title":"El archivo <code>.gitignore</code>","text":"<p>El archivo <code>.gitignore</code> es una herramienta fundamental en Git que permite excluir archivos o carpetas del control de versiones, evitando que se agreguen, rastreen o suban al repositorio. Aqu\u00ed tienes una explicaci\u00f3n clara y completa:</p> <ul> <li>Es un archivo de texto que contiene patrones de nombres de archivos o carpetas que Git debe ignorar.</li> <li>Se coloca normalmente en la ra\u00edz del repositorio, aunque tambi\u00e9n puede haber <code>.gitignore</code> en subdirectorios.</li> <li>Git lo consulta al decidir qu\u00e9 archivos no deben ser rastreados ni incluidos en commits.</li> </ul> <p>Las razones m\u00e1s importantes para usar <code>.gitignore</code> son :</p> <ul> <li>Para evitar subir archivos innecesarios o sensibles, como:</li> <li>Archivos temporales (<code>*.log</code>, <code>*.tmp</code>)</li> <li>Carpetas de dependencias (<code>node_modules/</code>, <code>venv/</code>)</li> <li>Archivos compilados (<code>*.class</code>, <code>*.pyc</code>, <code>*.o</code>)</li> <li>Configuraciones locales (<code>.env</code>, <code>.vscode/</code>, <code>.idea/</code>)</li> <li>Archivos del sistema (<code>Thumbs.db</code>, <code>.DS_Store</code>)</li> </ul> <p>Ejemplo de contenido de <code>.gitignore</code></p> <p>Contenido ejemplo de fichero <code>.gitignore</code>: </p><pre><code># Ignorar archivos de log\n*.log\n\n# Ignorar carpetas de dependencias\nnode_modules/\nvenv/\n\n# Ignorar archivos de configuraci\u00f3n local\n.env\n.vscode/\n\n# Ignorar archivos compilados\n*.class\n*.pyc\n*.o\n</code></pre><p></p> <p>Consideraciones importantes</p> <ul> <li>No afecta archivos ya rastreados: Si un archivo ya fue a\u00f1adido al repositorio, <code>.gitignore</code> no lo eliminar\u00e1. Debes usar <code>git rm --cached archivo</code> para dejar de rastrearlo.</li> <li>Puedes tener un <code>.gitignore</code> global para todos tus proyectos, configurado en <code>~/.config/git/ignore</code> o mediante:</li> </ul> <pre><code>git config --global core.excludesFile ~/.gitignore_global\n</code></pre> <p>Para m\u00e1s detalles t\u00e9cnicos</p> <ul> <li>documentaci\u00f3n oficial de Git</li> <li>gu\u00eda pr\u00e1ctica en espa\u00f1ol.</li> </ul> <p>Recuerda estas buenas pr\u00e1cticas iniciales</p> <ul> <li>Haz commits peque\u00f1os y coherentes (cada commit debe tener sentido por s\u00ed solo).</li> <li>Escribe mensajes de commit claros: \u201cCorrecci\u00f3n bug X\u201d, \u201cA\u00f1adida funcionalidad Y\u201d.</li> <li>Usa <code>.gitignore</code> para excluir archivos innecesarios (archivos temporales, binarios, claves, etc.).</li> <li>Practica el uso de <code>git status</code> frecuentemente para tener control del estado del repositorio.</li> </ul>"},{"location":"3_2_ramas/","title":"Ramas en Git","text":"<p>Trabajar con ramas es una de las ventajas m\u00e1s potentes de Git: te permite desarrollar funcionalidades, corregir errores o experimentar sin afectar la rama principal.</p>"},{"location":"3_2_ramas/#concepto-de-rama","title":"Concepto de rama","text":"<ul> <li>Una rama (branch) es simplemente un puntero que apunta a un commit.</li> <li>La rama principal suele llamarse <code>main</code> o <code>master</code> (aunque puedes cambiar el nombre).</li> <li>Cuando creas una rama nueva, Git crea un nuevo puntero que \u201cse mueve\u201d a medida que haces commits en esa rama.</li> </ul> <p>Imagina una l\u00ednea de tiempo:</p> Ramas locales en git. <p>En este gr\u00e1fico podemos ver que podemos tener varias ramas en nuestro proyecto que al mismo tiempo pueden volver a ramificarse en otras ramas y volver a unirse.</p> <p>Mostrar la rama actual de Git en el prompt de Linux</p> <p>Cuando trabajamos con varios proyectos y ramas, es muy \u00fatil que el prompt de la terminal muestre en qu\u00e9 rama de Git estamos. Puede ser muy interesante aplicar este truco antes de trabajar con ramas.</p> <p>Veamos los pasos para activar el prompt de Git</p> <ol> <li> <p>Abre tu archivo <code>~/.bashrc</code> y a\u00f1ade esta funci\u00f3n antes de definir el <code>PS1</code>:</p> <pre><code>parse_git_branch() {\n  git rev-parse --is-inside-work-tree &amp;&gt;/dev/null || return\n  branch=$(git symbolic-ref --short HEAD 2&gt;/dev/null)\n  [ -n \"$branch\" ] &amp;&amp; echo \"($branch)\"\n}\n</code></pre> </li> <li> <p>Modificar el prompt (<code>PS1</code>). Justo despu\u00e9s, modifica la l\u00ednea que define <code>PS1</code>. Por ejemplo:</p> <pre><code>PS1='\\u@\\h:\\w $(parse_git_branch)\\$ '\n</code></pre> </li> <li> <p>Guarda los cambios y recarga el archivo:</p> <pre><code>source ~/.bashrc\n</code></pre> </li> </ol> <p>Tendr\u00e1n un resultado similar al siguiente, donde ver\u00e1s entre parentesis en qu\u00e9 rama te encuentras.</p> <p></p> <p></p> <p>Ventajas de usar ramas</p> <ul> <li>Trabajo aislado: puedes trabajar en nuevas funcionalidades sin afectar el c\u00f3digo estable.</li> <li>Experimentaci\u00f3n: puedes probar ideas nuevas sin miedo.</li> <li>Colaboraci\u00f3n: cada desarrollador puede tener su rama y luego fusionar al proyecto principal.</li> </ul>"},{"location":"3_2_ramas/#comandos-de-ramas","title":"Comandos de ramas","text":"Comando Qu\u00e9 hace <code>git branch nombre_rama</code> Crea una rama llamada <code>nombre_rama</code> (no cambia a ella, solo la crea). <code>git switch nombre_rama</code> Cambia la rama activa a <code>nombre_rama</code> (antes era <code>git checkout nombre_rama</code>). <code>git switch -c nombre_rama</code> Crea y cambia a la rama nueva en un solo paso. <code>git branch</code> Muestra ramas de repositorio actual <code>git show-branch</code> Muestra ramas de repositorio actual de una forma pseudo gr\u00e1fica. <code>git branch -d nombre_rama</code> Elimina la rama local <code>nombre_rama</code> si ya ha sido fusionada o no tiene cambios pendientes. <code>git merge</code> Combina cambios de otra rama en la actual <code>git diff</code> Muestra diferencias entre dos ramas Fast-forward merge Cuando la rama actual puede avanzar sin conflictos Commit de merge Se crea cuando hay l\u00edneas de desarrollo paralelas"},{"location":"3_2_ramas/#crear-y-cambiar-ramas","title":"Crear y cambiar ramas","text":"<pre><code>git branch nueva-rama\ngit switch nueva-rama\n</code></pre> o tambi\u00e9n en un \u00fanico paso <pre><code>git switch -c nueva-rama\n</code></pre> <p>git switch vs git checkout</p> <p>En Git, <code>git switch</code> es el comando moderno y recomendado para cambiar de rama, mientras que <code>git checkout</code> es el comando m\u00e1s antiguo que tambi\u00e9n permite hacerlo, pero con funciones adicionales que pueden generar confusi\u00f3n. </p>"},{"location":"3_2_ramas/#fusionar-ramas","title":"Fusionar ramas","text":"<pre><code>git merge rama-a-fusionar\n</code></pre>"},{"location":"3_2_ramas/#eliminar-ramas","title":"Eliminar ramas","text":"<pre><code>git branch -d nombre-rama\n</code></pre>"},{"location":"3_2_ramas/#ver-diferencias","title":"Ver diferencias","text":"<pre><code>git diff\n</code></pre> Muestra los cambios no confirmados."},{"location":"3_2_ramas/#ver-ramas","title":"Ver ramas","text":"<pre><code>git branch\n</code></pre> Muestra las ramas que tiene el repositorio."},{"location":"3_2_ramas/#flujo-tipico-con-ramas","title":"Flujo t\u00edpico con ramas","text":"<ol> <li>Est\u00e1s en la rama principal <code>main</code>.</li> <li>Creas una rama para tratar una nueva funcionalidad:    <pre><code>git switch -c feature-login\n</code></pre></li> <li>Trabajas, haces commits en <code>feature-login</code>.</li> <li>Cuando est\u00e9 lista la funcionalidad, cambias de nuevo a <code>main</code>:    <pre><code>git switch main\n</code></pre></li> <li>Fusionas (merge) la rama:    <pre><code>git merge feature-login\n</code></pre></li> <li>Si quieres, borras la rama <code>feature-login</code>:    <pre><code>git branch -d feature-login\n</code></pre></li> </ol> Ejemplo de trabajo con ramas."},{"location":"3_2_ramas/#fusiones-merge-y-conflictos","title":"Fusiones (<code>merge</code>) y conflictos","text":"<ul> <li><code>git merge rama_origen</code> fusiona los cambios de la rama indicada en la rama actual.</li> <li>Si los cambios no se solapan, el merge es autom\u00e1tico (fast-forward o commit de merge).</li> <li>Si hay conflictos, Git te avisar\u00e1 y tendr\u00e1s que resolverlos manualmente.</li> <li>Despu\u00e9s de resolver conflictos, haces <code>git add</code> de los archivos modificados y luego <code>git commit</code>.</li> </ul>"},{"location":"3_2_ramas/#ejemplo-practico-creacion-trabajo-y-fusion-de-ramas-en-git","title":"Ejemplo pr\u00e1ctico: creaci\u00f3n, trabajo y fusi\u00f3n de ramas en Git","text":"<p>Este ejemplo muestra paso a paso c\u00f3mo trabajar con ramas en Git utilizando un ejemplo sencillo. Incluye comandos, explicaciones y esquemas gr\u00e1ficos para visualizar la evoluci\u00f3n del repositorio.</p>"},{"location":"3_2_ramas/#crear-el-repositorio-inicial","title":"Crear el repositorio inicial","text":"<pre><code># Creamos una carpeta y entramos\nmkdir demo-git\ncd demo-git\n\n# Inicializamos el repositorio Git\ngit init\n\n# Creamos un archivo inicial\necho \"Proyecto base\" &gt; README.md\ngit add README.md\ngit commit -m \"Commit inicial con README\"\n</code></pre> <p>Estado del repositorio:</p> <pre><code>A \u2190 main\n</code></pre> <p>(Solo existe la rama <code>main</code>, con un \u00fanico commit \u201cA\u201d)</p>"},{"location":"3_2_ramas/#crear-la-rama-login-y-trabajar-en-ella","title":"Crear la rama <code>login</code> y trabajar en ella","text":"<pre><code># Crear y cambiar a la rama 'login'\ngit switch -c login\n\n# Simulamos una modificaci\u00f3n\necho \"Funcionalidad login\" &gt; login.py\ngit add login.py\ngit commit -m \"A\u00f1adido m\u00f3dulo login\"\n</code></pre> <p>Estructura actual:</p> <pre><code>A \u2190 main\n \\\n  B \u2190 login\n</code></pre>"},{"location":"3_2_ramas/#crear-otra-rama-perfil-desde-main","title":"Crear otra rama <code>perfil</code> desde <code>main</code>","text":"<p>Primero volvemos a la rama principal y creamos otra:</p> <pre><code>git switch main\ngit switch -c perfil\necho \"Funcionalidad perfil de usuario\" &gt; perfil.py\ngit add perfil.py\ngit commit -m \"A\u00f1adido m\u00f3dulo perfil de usuario\"\n</code></pre> <p>Estructura actual:</p> <pre><code>A \u2190 main\n \u251c\u2500\u2500 B \u2190 login\n \u2514\u2500\u2500 C \u2190 perfil\n</code></pre> <p>(Cada rama tiene un nuevo commit diferente partiendo del mismo punto A.)</p>"},{"location":"3_2_ramas/#fusionar-la-rama-login-en-main","title":"Fusionar la rama <code>login</code> en <code>main</code>","text":"<p>Volvemos a <code>main</code> y fusionamos los cambios de <code>login</code>:</p> <pre><code>git switch main\ngit merge login\n</code></pre> <p>Despu\u00e9s del merge:</p> <pre><code>A \u2014 B \u2190 main, login\n \\\n  C \u2190 perfil\n</code></pre> <ul> <li>La rama <code>main</code> ahora incluye los cambios de <code>login</code>.  </li> <li>Si no hay conflictos, Git hace un fast-forward merge (mueve el puntero <code>main</code> al commit B).  </li> </ul>"},{"location":"3_2_ramas/#fusionar-la-rama-perfil","title":"Fusionar la rama <code>perfil</code>","text":"<p>Ahora fusionamos la segunda rama:</p> <pre><code>git merge perfil\n</code></pre> <p>Resultado (merge normal):</p> <pre><code>      B \u2190 login\n     / \\\nA \u2014\u2014\u2524   M \u2190 main\n     \\ /\n      C \u2190 perfil\n</code></pre> <ul> <li><code>M</code> es un commit de merge que combina el trabajo de las dos ramas.  </li> <li>La historia se une en un punto com\u00fan.  </li> </ul>"},{"location":"3_2_ramas/#limpiar-ramas-ya-fusionadas","title":"Limpiar ramas ya fusionadas","text":"<pre><code>git branch -d login\ngit branch -d perfil\n</code></pre> <p>Resultado final:</p> <pre><code>A \u2014 B \u2014 M \u2190 main\n</code></pre> <p>(El proyecto tiene la funcionalidad de <code>login</code> y <code>perfil</code> integradas en la rama principal.)</p> <p>Buenas pr\u00e1cticas con ramas</p> <ul> <li>Usa nombres descriptivos (feature-login, bugfix-42, hotfix-crash).</li> <li>No dejes ramas locales sin usar por mucho tiempo.</li> <li>Antes de fusionar, aseg\u00farate de que est\u00e9n actualizadas con la rama principal.</li> <li>Haz pull o fetch en la rama principal antes de crear nuevas ramas, para partir de la versi\u00f3n m\u00e1s reciente.</li> </ul>"},{"location":"3_3_remotos/","title":"Repositorios remotos. Github.","text":"<p>Hasta ahora hemos trabajado localmente. Pero muchas veces querr\u00e1s compartir tu trabajo o colaborar con otros mediante repositorios remotos (GitHub, GitLab, Bitbucket\u2026).</p>"},{"location":"3_3_remotos/#conceptos-clave-en-git-remoto-remoto-tracking-branch-remoto","title":"Conceptos clave en Git remoto: remoto, tracking, branch remoto","text":"<ul> <li>Remoto (remote): copia del repositorio en un servidor. Generalmente se llama <code>origin</code>.</li> <li>Branch remoto: referencia local que apunta al estado conocido de una rama en el remoto, por ejemplo <code>origin/main</code>.</li> <li>Tracking branch: rama local enlazada con una rama remota, lo que permite usar <code>git pull</code> y <code>git push</code> sin par\u00e1metros adicionales.</li> </ul>"},{"location":"3_3_remotos/#1-remoto-remote","title":"1. Remoto (<code>remote</code>)","text":"<p>En Git, un \u201cremoto\u201d no es m\u00e1s que un alias para un repositorio alojado en otro lugar, normalmente en un servidor como GitHub. El nombre m\u00e1s habitual es <code>origin</code>, aunque puedes tener varios (por ejemplo, <code>upstream</code> si est\u00e1s colaborando con otro proyecto). Este alias permite que tu repositorio local sepa d\u00f3nde enviar y recibir cambios.</p> <ul> <li>Es una referencia a un repositorio alojado en un servidor, como GitHub, GitLab o Bitbucket.</li> <li>No es una copia completa, sino un v\u00ednculo que permite sincronizar cambios.</li> <li>El nombre por defecto es <code>origin</code>, pero puedes tener varios remotos (<code>upstream</code>, <code>backup</code>, etc.).</li> <li>Se configura con:</li> </ul> <p></p><pre><code>git remote add origin https://github.com/usuario/repositorio.git\n</code></pre> Este comando vincula tu proyecto local con el repositorio remoto. A partir de aqu\u00ed, puedes sincronizar tu trabajo con el servidor.<p></p>"},{"location":"3_3_remotos/#2-branch-remoto-remote-branch","title":"2. Branch remoto (<code>remote branch</code>)","text":"<p>Cuando haces <code>git fetch</code>, Git no descarga directamente los archivos, sino que actualiza referencias locales que apuntan al estado actual de las ramas en el remoto. Estas referencias se llaman ramas remotas y tienen nombres como <code>origin/main</code> o <code>origin/feature-x</code>.</p> <ul> <li>No puedes modificar directamente <code>origin/main</code>.</li> <li>Es una \u201cfoto\u201d del estado de la rama en el servidor.</li> <li>Se actualiza con <code>git fetch</code>, no con <code>git pull</code>.</li> </ul> <pre><code>git branch -r\n</code></pre> <p>Este comando te muestra todas las ramas remotas conocidas. Son \u00fatiles para saber qu\u00e9 hay en el servidor sin tocar tu copia local.</p>"},{"location":"3_3_remotos/#3-tracking-branch","title":"3. Tracking branch","text":"<p>Aqu\u00ed es donde Git se vuelve realmente c\u00f3modo. Una tracking branch es una rama local que est\u00e1 vinculada a una rama remota. Esto significa que puedes usar comandos como <code>git pull</code> o <code>git push</code> sin tener que especificar a qu\u00e9 rama te refieres: Git ya lo sabe.</p> <p>Por ejemplo, si creas una rama local basada en <code>origin/main</code> con:</p> <pre><code>git checkout --track origin/main\n</code></pre> <p>Git configura autom\u00e1ticamente el seguimiento. Ahora, cuando haces <code>git push</code>, Git sabe que debe enviar los cambios a <code>origin/main</code>. Y cuando haces <code>git pull</code>, sabe de d\u00f3nde traer las actualizaciones.</p> <p>Puedes verificar qu\u00e9 ramas est\u00e1n siguiendo a cu\u00e1les con:</p> <pre><code>git branch -vv\n</code></pre> <p>Comprender estos v\u00ednculos permite trabajar de forma m\u00e1s fluida y evitar errores comunes como \u201c\u00bfpor qu\u00e9 no se suben mis cambios?\u201d o \u201c\u00bfpor qu\u00e9 me dice que no encuentra la rama?\u201d. En entornos educativos, donde los estudiantes clonan repositorios, hacen pr\u00e1cticas y suben correcciones, tener bien configuradas las tracking branches evita confusiones y facilita la evaluaci\u00f3n.</p> Conceptos b\u00e1sico repositorios remotos. <p>Flechas verdes punteadas que indican las tracking branches, es decir, el v\u00ednculo entre la rama local y su correspondiente rama remota.</p>"},{"location":"3_3_remotos/#conectando-un-repositorio-remoto","title":"Conectando un repositorio remoto","text":"<p>Para vincular tu repositorio local con uno remoto (por ejemplo, en GitHub), usa el siguiente comando:</p> <pre><code>git remote add origin &lt;url-del-repositorio&gt;\n</code></pre> <p>Esto crea una referencia llamada <code>origin</code> que apunta a la URL del repositorio remoto. Es una convenci\u00f3n com\u00fan usar <code>origin</code> como nombre por defecto, aunque puedes usar cualquier otro identificador si lo necesitas.</p> <p>Para verificar que el remoto se ha configurado correctamente:</p> <p></p><pre><code>git remote -v\n</code></pre> Este comando muestra las URLs asociadas al remoto, tanto para <code>fetch</code> (descargar) como para <code>push</code> (subir).<p></p> <p>Para comprobar tanto ramas locales como remotas</p> <pre><code>git branch -a\n</code></pre>"},{"location":"3_3_remotos/#obtener-cambios-del-remoto","title":"Obtener cambios del remoto","text":"<p>Una vez conectado el remoto, puedes sincronizar tu repositorio local con los cambios que haya en el servidor:</p> <ul> <li> <p><code>git fetch origin</code>   Descarga los cambios del remoto pero no los fusiona con tu rama actual. Es \u00fatil para revisar antes de aplicar.</p> </li> <li> <p><code>git pull</code>   Realiza un <code>fetch</code> seguido de un <code>merge</code> (o <code>rebase</code>, si est\u00e1 configurado). Es el comando m\u00e1s com\u00fan para actualizar tu rama local con los \u00faltimos cambios del remoto.</p> </li> </ul>"},{"location":"3_3_remotos/#enviar-cambios-al-remoto","title":"Enviar cambios al remoto","text":"<p>Para subir tus commits locales al repositorio remoto:</p> <pre><code>git push origin nombre_rama\n</code></pre> <p>Esto env\u00eda los cambios de la rama especificada (<code>nombre_rama</code>) al remoto <code>origin</code>.</p> <p>Si es la primera vez que subes esa rama y no existe en el remoto, debes establecer una relaci\u00f3n de rastreo:</p> <pre><code>git push -u origin nombre_rama\n</code></pre> <p>El par\u00e1metro <code>-u</code> configura la rama local para que rastree autom\u00e1ticamente la rama remota, lo que permite usar simplemente <code>git push</code> o <code>git pull</code> en el futuro sin especificar el nombre del remoto ni de la rama.</p>"},{"location":"3_3_remotos/#crear-una-rama-local-desde-una-remota","title":"Crear una rama local desde una remota","text":"<pre><code>git fetch origin\ngit switch -c nueva_rama origin/rama_remota\n</code></pre>"},{"location":"3_3_remotos/#eliminar-una-rama-remota","title":"Eliminar una rama remota","text":"<pre><code>git push origin --delete nombre_rama\ngit remote prune origin\n</code></pre>"},{"location":"3_3_remotos/#ejemplo-paso-a-paso","title":"Ejemplo paso a paso","text":"<ol> <li>Crea una rama: <code>git switch -c feature-nueva</code></li> <li>Haz commits.</li> <li>Conecta el remoto: <code>git remote add origin https://github.com/usuario/mi-repo.git</code></li> <li>Sube: <code>git push -u origin feature-nueva</code></li> <li>Crea un pull request en GitHub.</li> <li>Si alguien actualiza <code>main</code>: <code>git pull</code></li> </ol>"},{"location":"3_3_remotos/#uso-de-github-con-git","title":"Uso de GitHub con Git","text":"<p>GitHub es una plataforma en l\u00ednea que permite alojar repositorios Git y colaborar en proyectos de software. Funciona como un \u201crepositorio remoto\u201d donde puedes subir tu c\u00f3digo, compartirlo con otros, gestionar versiones, reportar errores y trabajar en equipo. GitHub se basa en Git, el sistema de control de versiones distribuido que permite llevar un historial completo de los cambios realizados en un proyecto.</p>"},{"location":"3_3_remotos/#requisitos-previos","title":"Requisitos previos","text":"<p>Antes de comenzar a trabajar con GitHub desde tu equipo local, aseg\u00farate de tener lo siguiente:</p> <ul> <li>Git instalado y funcionando correctamente (<code>git --version</code>)</li> <li>Una cuenta activa en GitHub</li> <li>Un repositorio local creado con <code>git init</code> o clonado desde GitHub</li> </ul> <p>A continuaci\u00f3n crearemos un repositorio en Github y veremos c\u00f3mo podemos usarlo para almacenar el repositorio Git que tenemos en nuestra m\u00e1quina local.</p> <p>Para ello veremos </p> <ul> <li>C\u00f3mo crear el repositorio en https://github.com/.</li> <li>C\u00f3mo preparar la autentificaci\u00f3n para conectar el repositorio remoto con el local</li> <li>C\u00f3mo clonar o conectar los repositorios local y remoto.</li> </ul> Trabajando con GitHub. <p>Tutoriales recomendados para aprender a usar GitHub</p> <ul> <li>Documentaci\u00f3n oficial de GitHub (en espa\u00f1ol) \u2014 Precisa y actualizada.</li> <li>Video: Crear y clonar repositorio con GitHub Desktop \u2014 Ideal para principiantes.</li> <li>Chuck's Academy: Creaci\u00f3n y clonaci\u00f3n de repositorios \u2014 Explica tanto Git local como GitHub remoto.</li> <li>FreeCodeCamp en espa\u00f1ol \u2014 Incluye ejemplos y v\u00eddeos subtitulados.</li> </ul>"},{"location":"3_3_remotos/#crear-el-repositorio-en-github","title":"Crear el repositorio en GitHub","text":"<p>Para crear un nuevo, por supuesto debemos tener una cuenta en https://github.com/ y seguir los siguientes pasos:</p> <ol> <li>Accede a github.com e inicia sesi\u00f3n.</li> <li>Haz clic en el bot\u00f3n \"New\" o ve a https://github.com/new.</li> <li>Rellena los campos:</li> <li>Repository name: nombre del proyecto.</li> <li>Description (opcional).</li> <li>Elige Public o Private.</li> <li>Marca \u201cAdd a README file\u201d si quieres incluirlo.</li> <li>Opcional: a\u00f1ade <code>.gitignore</code> y licencia.</li> <li>Haz clic en \"Create repository\".</li> </ol>"},{"location":"3_3_remotos/#autenticacion-en-github","title":"Autenticaci\u00f3n en GitHub","text":"<p>Desde 2021, GitHub ya no permite autenticaci\u00f3n por contrase\u00f1a al usar Git desde la terminal. </p> <p>Debes autenticarte mediante uno de estos m\u00e9todos:</p>"},{"location":"3_3_remotos/#1-token-de-acceso-personal-pat","title":"1. Token de acceso personal (PAT)","text":"<ul> <li>Se genera desde tu cuenta de GitHub en Settings \u2192 Developer settings \u2192 Personal access tokens</li> <li>Al hacer <code>git push</code> o <code>git clone</code>, se te pedir\u00e1 usuario y contrase\u00f1a: usa tu usuario de GitHub y el token como contrase\u00f1a.</li> </ul> <p>C\u00f3mo generar un token cl\u00e1sico en GitHub</p> <ol> <li>Accede a la configuraci\u00f3n de tokens<ul> <li>Ve a:  https://github.com/settings/tokens</li> <li>Haz clic en \"Generate new token (classic)\"</li> </ul> </li> <li>Configura el token<ul> <li>Nombre: elige uno descriptivo (por ejemplo, \u201cToken para Git en SGE\u201d)</li> <li>Expiraci\u00f3n: puedes elegir 30 d\u00edas, 90 d\u00edas o sin expiraci\u00f3n</li> <li>Permisos m\u00ednimos necesarios:<ul> <li><code>repo</code> \u2192 acceso completo a tus repositorios (lectura, escritura, clonaci\u00f3n)</li> <li>(Opcional) <code>read:org</code> si trabajas con repositorios en organizaciones</li> </ul> </li> </ul> </li> <li>Generar y guardar el token<ul> <li>Haz clic en \"Generate token\". GitHub te mostrar\u00e1 el token una sola vez.  </li> <li>C\u00f3pialo y gu\u00e1rdalo en un lugar seguro (gestor de contrase\u00f1as o archivo <code>.token</code>).</li> </ul> </li> <li> <p>Usar el token al clonar por HTTPS</p> <p>Cuando hagas:</p> <pre><code>git clone https://github.com/usuario/repositorio.git\n</code></pre> <p>Git te pedir\u00e1:</p> <pre><code>Username for 'https://github.com': tu_usuario\nPassword for 'https://tu_usuario@github.com': pega_el_token\n</code></pre> <ul> <li>Usuario: tu nombre de usuario en GitHub (no tu correo)</li> <li>Contrase\u00f1a: el token generado</li> </ul> <p>Puedes guardar el token para no tener que escribirlo cada vez:</p> <pre><code>git config --global credential.helper store\n</code></pre> </li> </ol>"},{"location":"3_3_remotos/#2-clave-ssh","title":"2. Clave SSH","text":"<ul> <li>Genera una clave SSH con:   <pre><code>ssh-keygen -t ed25519 -C \"tuemail@example.com\"\n</code></pre></li> <li>A\u00f1ade la clave p\u00fablica (<code>~/.ssh/id_ed25519.pub</code>) en GitHub \u2192 Settings \u2192 SSH and GPG keys</li> <li>Usa la URL SSH del repositorio (por ejemplo: <code>git@github.com:usuario/repositorio.git</code>) en lugar de la URL HTTPS.</li> </ul> <p>Ambos m\u00e9todos son seguros y v\u00e1lidos. El uso de SSH es m\u00e1s c\u00f3modo si trabajas frecuentemente desde el mismo equipo.</p>"},{"location":"3_3_remotos/#clonar-un-repositorio-de-github","title":"Clonar un repositorio de GitHub","text":"<p>Esto crea una copia local completa del repositorio, incluyendo su historial de versiones.</p> <p>Los pasos para clonar un repositorio GitHub en local usando la l\u00ednea de comandos es la siguiente.</p> <ol> <li>Copia la URL del repositorio (bot\u00f3n verde \u201cCode\u201d \u2192 HTTPS).</li> <li>Abre la terminal y navega a la carpeta donde quieres clonar:    <pre><code>cd ~/Documentos/proyectos\n</code></pre></li> <li>Ejecuta el comando:    <pre><code>git clone https://github.com/usuario/nombre-del-repositorio.git\n</code></pre></li> <li>Accede a la carpeta clonada:    <pre><code>cd nombre-del-repositorio\n</code></pre></li> </ol> <p>Tambi\u00e9n es posible usar herramientas como GitHub Desktop, pero no vamos a usar este tipo de herramientas en nuestro curso.</p>"},{"location":"3_3_remotos/#conectar-un-repositorio-local-con-github","title":"Conectar un repositorio local con GitHub","text":"<p>Tambi\u00e9n podemos hacer el paso contrario, crear un repositorio local en el que ya tenemos un trabajo hecho y despu\u00e9s  vincularlo con tu repositorio local usando:</p> <pre><code>git remote add origin https://github.com/usuario/repositorio.git\n</code></pre> <p>Esto crea una referencia llamada <code>origin</code> que apunta al repositorio remoto. Para confirmar que la conexi\u00f3n se ha establecido correctamente:</p> <pre><code>git remote -v\n</code></pre> <p>Este comando muestra las URLs configuradas para subir (<code>push</code>) y descargar (<code>fetch</code>) cambios.</p>"},{"location":"3_3_remotos/#operaciones-basicas-para-gestion-de-repositorios-remotos-github","title":"Operaciones b\u00e1sicas para gesti\u00f3n de repositorios remotos GitHub","text":"Trabajando con GitHub."},{"location":"3_3_remotos/#subir-cambios-al-repositorio-remoto","title":"Subir cambios al repositorio remoto","text":"<p>Cuando hayas hecho commits en tu repositorio local, puedes subirlos a GitHub con:</p> <pre><code>git push origin nombre_rama\n</code></pre> <p>Si es la primera vez que subes esa rama, a\u00f1ade el par\u00e1metro <code>-u</code> para establecer una relaci\u00f3n de seguimiento:</p> <pre><code>git push -u origin nombre_rama\n</code></pre> <p>Esto permite que en el futuro puedas usar simplemente <code>git push</code> sin especificar el remoto ni la rama.</p>"},{"location":"3_3_remotos/#obtener-cambios-del-remoto_1","title":"Obtener cambios del remoto","text":"<p>Para mantener tu repositorio local actualizado con los cambios que se hagan en GitHub:</p> <ul> <li> <p><code>git fetch origin</code>   Descarga los cambios del remoto, pero no los aplica autom\u00e1ticamente. Es \u00fatil para revisar antes de fusionar.</p> </li> <li> <p><code>git pull</code>   Descarga y fusiona los cambios del remoto con tu rama actual. Es el comando m\u00e1s com\u00fan para sincronizar tu trabajo.</p> </li> </ul>"},{"location":"3_3_remotos/#el-archivo-gitignore-en-sistemas-de-control-de-versiones-con-git","title":"El archivo <code>.gitignore</code> en sistemas de control de versiones con Git","text":"<p>El archivo <code>.gitignore</code> constituye una herramienta esencial en la gesti\u00f3n de proyectos versionados con Git. Su funci\u00f3n principal es indicar al sistema qu\u00e9 archivos o directorios deben ser excluidos del seguimiento, evitando que se incluyan en los commits y, por tanto, en el historial del repositorio. Esta exclusi\u00f3n resulta especialmente \u00fatil para preservar la limpieza del repositorio, reducir el ruido t\u00e9cnico y evitar la incorporaci\u00f3n de archivos irrelevantes, temporales o espec\u00edficos del entorno local de desarrollo.</p> <p>En contextos educativos o institucionales, donde los proyectos pueden ser compartidos entre m\u00faltiples usuarios y entornos, el uso adecuado de <code>.gitignore</code> contribuye a mantener la coherencia del repositorio y a prevenir conflictos derivados de configuraciones locales o archivos generados autom\u00e1ticamente.</p>"},{"location":"3_3_remotos/#funcionamiento-y-sintaxis","title":"Funcionamiento y sintaxis","text":"<p>El archivo <code>.gitignore</code> se ubica habitualmente en la ra\u00edz del repositorio, aunque Git permite definir archivos <code>.gitignore</code> adicionales en subdirectorios para aplicar reglas espec\u00edficas a determinadas rutas. Su contenido consiste en una lista de patrones que describen los nombres de archivos o carpetas que deben ser ignorados por Git.</p> <p>Ejemplos de patrones comunes incluyen:</p> <ul> <li>Archivos temporales o de registro: <code>*.log</code>, <code>*.tmp</code></li> <li>Directorios de configuraci\u00f3n de editores: <code>.vscode/</code>, <code>.idea/</code></li> <li>Archivos compilados o generados: <code>*.class</code>, <code>*.pyc</code>, <code>dist/</code>, <code>build/</code></li> </ul> <p>Los patrones pueden incluir comodines (<code>*</code>, <code>?</code>) y rutas relativas. Los comentarios se indican con el s\u00edmbolo <code>#</code>.</p> <p>Ejemplo de fichero <code>.gitignore</code></p> <p>Fichero <code>.gitignore</code> en la ra\u00edz del proyecto git</p> <pre><code># Ignorar archivos temporales\n*.log\n*.tmp\n\n# Ignorar carpetas de configuraci\u00f3n local\n.vscode/\n.idea/\n\n# Ignorar archivos compilados\n*.class\n*.pyc\n</code></pre> <p>Git lee este archivo cada vez que eval\u00faa qu\u00e9 cambios hay en tu proyecto. Si un archivo coincide con alg\u00fan patr\u00f3n de .gitignore, simplemente lo ignora.</p>"},{"location":"3_3_remotos/#consideraciones-practicas","title":"Consideraciones pr\u00e1cticas","text":"<p>El uso de <code>.gitignore</code> debe guiarse por criterios t\u00e9cnicos que favorezcan la reproducibilidad del proyecto y la claridad del repositorio. Se recomienda:</p> <ul> <li>Excluir archivos que no aportan valor al c\u00f3digo fuente ni a la documentaci\u00f3n compartida.</li> <li>Evitar la exclusi\u00f3n de archivos necesarios para la ejecuci\u00f3n o comprensi\u00f3n del proyecto por parte de otros usuarios.</li> <li>Utilizar plantillas espec\u00edficas por lenguaje o entorno, disponibles en repositorios como github.com/github/gitignore, para facilitar la configuraci\u00f3n inicial.</li> <li>Revisar cuidadosamente los patrones amplios que podr\u00edan excluir archivos relevantes por error.</li> </ul>"},{"location":"3_3_remotos/#eliminacion-de-archivos-ya-versionados","title":"Eliminaci\u00f3n de archivos ya versionados","text":"<p>En caso de que un archivo haya sido a\u00f1adido al repositorio antes de ser incluido en <code>.gitignore</code>, Git continuar\u00e1 rastre\u00e1ndolo. Para que deje de hacerlo, es necesario eliminarlo del \u00edndice sin borrarlo del sistema de archivos:</p> <pre><code>git rm --cached nombre-del-archivo.ext\n</code></pre> <p>Una vez ejecutado este comando, Git respetar\u00e1 la regla definida en <code>.gitignore</code> y omitir\u00e1 dicho archivo en futuros commits.</p> <p>El uso correcto de <code>.gitignore</code> no solo mejora la calidad t\u00e9cnica del repositorio, sino que tambi\u00e9n facilita la colaboraci\u00f3n entre estudiantes y docentes, al evitar la propagaci\u00f3n de configuraciones locales, archivos innecesarios o elementos que dificulten la evaluaci\u00f3n y el mantenimiento del proyecto. </p>"},{"location":"3_3_remotos/#actividad-practica","title":"Actividad pr\u00e1ctica","text":"<p>Version 1: </p> <ol> <li>Crear un nuevo repositorio en GitHub (sin README ni .gitignore)  </li> <li>En tu equipo local    <pre><code>mkdir mi-proyecto\ncd mi-proyecto\ngit clone  https://github.com/usuario/mi-proyecto.git\n</code></pre></li> </ol> <p>Versi\u00f3n 2: </p> <ol> <li>Crear un nuevo repositorio en GitHub (sin README ni .gitignore)</li> <li>En tu equipo local:    <pre><code>mkdir mi-proyecto\ncd mi-proyecto\ngit init\n</code></pre></li> <li>Crear un archivo <code>README.md</code> y hacer el primer commit:    <pre><code>echo \"# Mi Proyecto\" &gt; README.md\ngit add README.md\ngit commit -m \"Primer commit\"\n</code></pre></li> <li>Conectar con GitHub:    <pre><code>git remote add origin https://github.com/usuario/mi-proyecto.git\ngit pull --rebase origin main    # esto solo si hay algo en el repositorio\ngit push -u origin main\n</code></pre></li> <li>Verificar que el archivo aparece en GitHub</li> </ol> <p>Buenas pr\u00e1cticas con remotos</p> <ul> <li>Haz <code>git fetch</code> o <code>git pull</code> antes de trabajar.</li> <li>No hagas push directo a <code>main</code>.</li> <li>Usa ramas por funcionalidad.</li> <li>Limpia ramas remotas obsoletas.</li> </ul>"},{"location":"4_1_introduccion/","title":"Introducci\u00f3n","text":""},{"location":"4_1_introduccion/#introduccion-a-los-contenedores","title":"Introducci\u00f3n a los contenedores","text":"<p>En esta unidad vamos a estudiar qu\u00e9 es un contenedor, cu\u00e1l es su prop\u00f3sito y por qu\u00e9 se ha convertido en una tecnolog\u00eda clave en el desarrollo y despliegue de aplicaciones. Nos centraremos especialmente en los contenedores Linux y en la plataforma Docker, analizando sus ventajas frente a otros m\u00e9todos de virtualizaci\u00f3n.</p>"},{"location":"4_1_introduccion/#fundamentos-de-la-virtualizacion","title":"Fundamentos de la virtualizaci\u00f3n","text":"<p>Antes de comprender los contenedores, es importante entender la virtualizaci\u00f3n. Esta t\u00e9cnica permite abstraer el hardware f\u00edsico, creando recursos virtuales que se comportan como si fueran reales. Gracias a ello, se pueden ejecutar sistemas y aplicaciones en entornos aislados, reduciendo costes y facilitando la gesti\u00f3n de recursos. Es ampliamente utilizada en desarrollo, pruebas, an\u00e1lisis de malware y despliegue de sistemas.</p> <p>Existen varios enfoques principales:</p> <ul> <li>M\u00e1quinas virtuales de proceso: Ejecutan software dise\u00f1ado para otra arquitectura como si fuera un proceso m\u00e1s del sistema anfitri\u00f3n. Ejemplos: JVM y .NET. Esto permite que aplicaciones escritas para una plataforma funcionen en otra sin modificaciones.</li> <li>Emuladores: Reproducen hardware o APIs espec\u00edficas, como los emuladores de consolas o Wine para ejecutar aplicaciones Windows en otros sistemas. Son \u00fatiles para pruebas y compatibilidad.</li> <li>Hipervisores: Permiten instalar sistemas operativos completos sobre hardware virtualizado. Herramientas como VirtualBox o VMWare son ejemplos comunes. Se usan para crear entornos aislados con sistemas completos.</li> <li>Contenedores: Se explicar\u00e1n en detalle m\u00e1s adelante, representan una forma m\u00e1s ligera y eficiente de virtualizaci\u00f3n.</li> </ul>"},{"location":"4_1_introduccion/#contenedores-como-alternativa-ligera","title":"Contenedores como alternativa ligera","text":"<p>Los contenedores son entornos aislados que comparten el n\u00facleo del sistema anfitri\u00f3n, sin necesidad de virtualizar el hardware completo. Esto permite aislar procesos, memoria, red y sistema de archivos, manteniendo eficiencia y velocidad.</p> <p>Una analog\u00eda \u00fatil es la de los contenedores mar\u00edtimos: mientras cumplan un est\u00e1ndar, pueden transportarse independientemente del contenido. De forma similar, los contenedores virtuales pueden ejecutarse en cualquier sistema compatible, sin importar qu\u00e9 software contienen.</p>"},{"location":"4_1_introduccion/#aplicaciones-practicas-de-los-contenedores","title":"Aplicaciones pr\u00e1cticas de los contenedores","text":"<p>Los contenedores son especialmente \u00fatiles en desarrollo y despliegue de aplicaciones. Permiten montar entornos de compilaci\u00f3n con versiones espec\u00edficas, realizar pruebas en configuraciones diversas y evitar problemas de compatibilidad al distribuir software.</p> <p>Tambi\u00e9n se emplean en el despliegue de servicios como servidores web, bases de datos o DNS. Facilitan la replicaci\u00f3n exacta de entornos locales en la nube, eliminando el cl\u00e1sico problema de \u201cfunciona en mi m\u00e1quina\u201d. Adem\u00e1s, permiten escalar horizontalmente servicios mediante orquestadores.</p>"},{"location":"4_1_introduccion/#ventajas-y-limitaciones","title":"Ventajas y limitaciones","text":"<p>Los contenedores presentan ventajas claras frente a otras tecnolog\u00edas, aunque tambi\u00e9n tienen limitaciones.</p> <p>Ventajas:</p> <ul> <li>Menor consumo de espacio al no replicar sistemas operativos completos.</li> <li>Ejecuci\u00f3n r\u00e1pida, cercana a la velocidad nativa.</li> <li>Gran soporte empresarial y disponibilidad de im\u00e1genes oficiales.</li> </ul> <p>Limitaciones:</p> <ul> <li>Rendimiento inferior al de ejecuci\u00f3n directa sobre hardware.</li> <li>Gesti\u00f3n compleja de datos persistentes.</li> <li>Uso principalmente por l\u00ednea de comandos (existen entornos gr\u00e1ficos, pero son menos pr\u00e1cticos).</li> </ul>"},{"location":"4_1_introduccion/#contextos-recomendados-para-su-uso","title":"Contextos recomendados para su uso","text":"<p>El uso de contenedores es adecuado en varios escenarios:</p> <ul> <li>Para usuarios que desean probar servicios sin complicaciones.</li> <li>Para desarrolladores que buscan entornos portables y reproducibles.</li> <li>Para realizar pruebas con distintas configuraciones y recursos.</li> <li>Para escalar servicios distribuidos en cl\u00fasteres.</li> </ul>"},{"location":"4_1_introduccion/#contenedores-en-sistemas-linux","title":"Contenedores en sistemas Linux","text":"<p>El concepto de entornos privados no es nuevo en Unix. Herramientas como <code>chroot</code> y <code>jail</code> ya ofrec\u00edan aislamiento desde los a\u00f1os 80 y 90. Los contenedores modernos, como LXC y LXD, se basan en capacidades del kernel de Linux como los namespaces (para aislar procesos) y los cgroups (para limitar recursos).</p> <p>Tambi\u00e9n es posible crear contenedores \u201ca mano\u201d usando scripts, aunque hoy en d\u00eda se utilizan herramientas m\u00e1s avanzadas que simplifican el proceso.</p>"},{"location":"4_1_introduccion/#compatibilidad-con-otros-sistemas","title":"Compatibilidad con otros sistemas","text":"<p>Aunque los contenedores Linux est\u00e1n dise\u00f1ados para ejecutarse en sistemas Linux, pueden funcionar en Windows y macOS mediante virtualizaci\u00f3n. En Windows se usa WSL2 o Hyper-V, y en macOS, Docker Desktop o Hyperkit. Estas soluciones permiten ejecutar contenedores, aunque con menor rendimiento que en Linux.</p>"},{"location":"4_1_introduccion/#introduccion-a-docker","title":"Introducci\u00f3n a Docker","text":"<p>Docker se presenta como una soluci\u00f3n de contenedores Linux que aprovecha las capacidades del kernel para facilitar el desarrollo y despliegue. Existen dos versiones: Docker CE (Community Edition) y Docker EE (Enterprise Edition), ambas compatibles con servicios en la nube como AWS, Azure y Google Cloud.</p> <p>La arquitectura de Docker se divide en tres componentes:</p> <ul> <li>El cliente, que env\u00eda \u00f3rdenes.</li> <li>El servidor (Docker Host), que gestiona contenedores e im\u00e1genes.</li> <li>El registro (Registry), que almacena im\u00e1genes, siendo Docker Hub el m\u00e1s popular.</li> </ul>"},{"location":"4_1_introduccion/#docker-en-windows-y-macos","title":"Docker en Windows y MacOS","text":"<p>Docker puede ejecutarse en sistemas no Linux mediante Docker Desktop, que instala todo lo necesario para lanzar contenedores. En Windows se apoya en WSL2 o Hyper-V, y en MacOS en Hyperkit. Aunque el rendimiento no es nativo, estas soluciones permiten trabajar con contenedores de forma pr\u00e1ctica.</p>"},{"location":"4_1_introduccion/#contenedores-no-linux-con-docker","title":"Contenedores no Linux con Docker","text":"<p>Adem\u00e1s de contenedores Linux, Docker puede lanzar contenedores con Windows Server Core en sistemas Windows, y contenedores MacOS en sistemas Linux mediante KVM. Aunque no son los casos m\u00e1s comunes, ampl\u00edan las posibilidades de uso en entornos espec\u00edficos.</p>"},{"location":"4_1_introduccion/#instalacion-de-docker-con-wsl-y-ubuntu","title":"Instalaci\u00f3n de Docker con WSL y Ubuntu","text":"<p>Durante el curso, utilizaremos Docker sobre Ubuntu instalado en WSL (Windows Subsystem for Linux). Esta configuraci\u00f3n permite trabajar con contenedores Linux desde sistemas Windows, manteniendo compatibilidad con el kernel y acceso a herramientas CLI. Todas las instrucciones que siguen est\u00e1n verificadas para distribuciones basadas en Ubuntu 22.04 o 24.04, y se ejecutar\u00e1n desde la terminal de WSL.</p> <p>Nota sobre la instalaci\u00f3n</p> <p>A continuaci\u00f3n se detalla un proceso de instalaci\u00f3n de Docker en Ubuntu dentro de WSL. A menudo cambian las versiones, por lo que se pueden producir errores al seguir este proceso.</p> <p>Se recomienda consultar la documentaci\u00f3n oficial para evitar errores: DockerDocs: Install Docker Engine on Ubuntu </p>"},{"location":"4_1_introduccion/#eliminacion-de-versiones-anteriores","title":"Eliminaci\u00f3n de versiones anteriores","text":"<p>Antes de instalar Docker, es recomendable eliminar cualquier versi\u00f3n previa que pueda generar conflictos. Ejecuta el siguiente comando en tu terminal WSL:</p> <pre><code>for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt remove $pkg; done\n</code></pre> <p>Este paso garantiza que no haya interferencias con versiones obsoletas o instaladas desde repositorios no oficiales.</p>"},{"location":"4_1_introduccion/#configuracion-del-repositorio-oficial-de-docker","title":"Configuraci\u00f3n del repositorio oficial de Docker","text":"<p>Docker CE debe instalarse desde su repositorio oficial para garantizar acceso a versiones actualizadas y soporte completo.</p> <ol> <li> <p>Actualiza el \u00edndice de paquetes e instala dependencias necesarias:</p> <pre><code>sudo apt update\nsudo apt install ca-certificates curl\n</code></pre> </li> <li> <p>A\u00f1ade la clave GPG del repositorio:</p> <pre><code>sudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo tee /etc/apt/keyrings/docker.asc &gt; /dev/null\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n</code></pre> </li> <li> <p>A\u00f1ade el repositorio de Docker CE. En Ubuntu puro, puedes usar:</p> <pre><code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt update\n</code></pre> </li> </ol> <p>Note</p> <p>En distribuciones derivadas como Linux Mint, <code>lsb_release -cs</code> puede devolver un nombre no reconocido por Docker. En ese caso, sustituye manualmente por el nombre de la versi\u00f3n base de Ubuntu (por ejemplo, <code>noble</code> para Ubuntu 24.04).</p>"},{"location":"4_1_introduccion/#instalacion-del-motor-docker","title":"Instalaci\u00f3n del motor Docker","text":"<p>Una vez a\u00f1adido el repositorio, instala Docker Engine CE y sus componentes:</p> <pre><code>sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> <p>Verifica la instalaci\u00f3n con:</p> <pre><code>docker version\n</code></pre> <p>Este comando debe mostrar tanto la versi\u00f3n del cliente como del servidor Docker. Si aparece un error de permisos, consulta el apartado siguiente.</p>"},{"location":"4_1_introduccion/#uso-sin-privilegios-de-superusuario","title":"Uso sin privilegios de superusuario","text":"<p>Por defecto, Docker requiere permisos de root para ejecutarse. En entornos educativos, es \u00fatil permitir que los alumnos usen Docker sin <code>sudo</code>. Para ello:</p> <ol> <li> <p>Crea el grupo <code>docker</code> (si no existe):</p> <pre><code>sudo groupadd docker\n</code></pre> </li> <li> <p>A\u00f1ade el usuario actual al grupo:</p> <pre><code>sudo usermod -aG docker $USER\n</code></pre> </li> <li> <p>Cierra y vuelve a iniciar sesi\u00f3n en WSL para que los cambios surtan efecto.</p> </li> </ol> <p>Si aparecen errores relacionados con <code>~/.docker/config.json</code>, puedes solucionarlo con:</p> <pre><code>sudo rm -rf ~/.docker/\n</code></pre> <p>O bien:</p> <pre><code>sudo chown \"$USER\":\"$USER\" ~/.docker -R\nsudo chmod g+rwx ~/.docker -R\n</code></pre>"},{"location":"4_1_introduccion/#control-del-arranque-automatico","title":"Control del arranque autom\u00e1tico","text":"<p>Aunque en WSL el arranque autom\u00e1tico no siempre es relevante, en sistemas Linux completos puedes configurar el servicio Docker para que se inicie al arrancar:</p> <pre><code>sudo systemctl enable docker.service\nsudo systemctl enable containerd.service\n</code></pre> <p>Para desactivarlo:</p> <pre><code>sudo systemctl disable docker.service\nsudo systemctl disable containerd.service\n</code></pre> <p>Para gestionar manualmente el servicio:</p> <pre><code>sudo systemctl start docker.service\nsudo systemctl stop docker.service\nsudo systemctl restart docker.service\n</code></pre>"},{"location":"4_1_introduccion/#desinstalacion-completa","title":"Desinstalaci\u00f3n completa","text":"<p>Si necesitas eliminar Docker por completo:</p> <pre><code>sudo apt purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras\n</code></pre> <p>Y para eliminar contenedores, im\u00e1genes y configuraciones:</p> <pre><code>sudo rm -rf /var/lib/docker\nsudo rm -rf /var/lib/containerd\nsudo rm /etc/apt/sources.list.d/docker.list\nsudo rm /etc/apt/keyrings/docker.asc\n</code></pre>"},{"location":"4_2_docker_basico/","title":"Docker b\u00e1sico","text":""},{"location":"4_2_docker_basico/#operaciones-fundamentales-con-docker-desde-terminal","title":"Operaciones fundamentales con Docker desde terminal","text":"<p>Una vez instalado Docker y verificada su correcta ejecuci\u00f3n, se puede comenzar a trabajar con contenedores e im\u00e1genes utilizando exclusivamente la l\u00ednea de comandos. Esta unidad recoge las acciones m\u00e1s habituales que se realizar\u00e1n durante el curso, con ejemplos reproducibles y enlaces a documentaci\u00f3n oficial.</p>"},{"location":"4_2_docker_basico/#imagenes-y-contenedores","title":"Im\u00e1genes y contenedores","text":"<p>Una imagen de Docker es una plantilla de solo lectura que contiene el sistema de archivos y las instrucciones necesarias para crear un contenedor. Las im\u00e1genes pueden derivarse unas de otras mediante capas, lo que permite reutilizar configuraciones y construir nuevas versiones de forma incremental.</p> <p>Un contenedor es una instancia en ejecuci\u00f3n (o parada) de una imagen. Cada contenedor tiene un identificador \u00fanico (64 caracteres) y puede referenciarse por su nombre o por una versi\u00f3n abreviada del ID, siempre que sea un\u00edvoca.</p> <p>Ejemplo de analog\u00eda: si una imagen es el DVD de instalaci\u00f3n de una distribuci\u00f3n Linux, el contenedor ser\u00eda el sistema operativo instalado y funcionando.</p>"},{"location":"4_2_docker_basico/#almacenamiento-interno-de-docker","title":"Almacenamiento interno de Docker","text":"<p>Docker almacena sus datos en el directorio <code>/var/lib/docker</code>, incluyendo im\u00e1genes, contenedores y configuraciones. El driver de almacenamiento m\u00e1s habitual en sistemas Ubuntu es <code>overlay2</code>, que organiza las capas de las im\u00e1genes en subdirectorios.</p> <p>Para consultar esta informaci\u00f3n:</p> <pre><code>docker info\n</code></pre> <p>M\u00e1s detalles sobre drivers de almacenamiento: Docker: Select a storage driver </p>"},{"location":"4_2_docker_basico/#registro-de-imagenes-docker-hub","title":"Registro de im\u00e1genes: Docker Hub","text":"<p>Docker Hub es el registro p\u00fablico por defecto utilizado por Docker. Permite buscar, descargar y publicar im\u00e1genes, tanto oficiales como de terceros. La mayor\u00eda de im\u00e1genes utilizadas en el curso se obtendr\u00e1n desde este repositorio.</p> <p>Buscador de im\u00e1genes: https://hub.docker.com/search?q=&amp;type=image</p> <p>Tambi\u00e9n es posible configurar registros privados o alternativos si se requiere.</p> <p>Gu\u00eda para crear un registro privado: DigitalOcean: C\u00f3mo configurar un registro de Docker privado en Ubuntu </p>"},{"location":"4_2_docker_basico/#creacion-y-ejecucion-de-contenedores","title":"Creaci\u00f3n y ejecuci\u00f3n de contenedores","text":"<p>El comando m\u00e1s utilizado es <code>docker run</code>, que crea un contenedor a partir de una imagen y lo arranca:</p> <pre><code>docker run hello-world\n</code></pre> <p>Este ejemplo descarga la imagen <code>hello-world</code> (si no est\u00e1 presente), crea un contenedor y ejecuta un programa que verifica el funcionamiento de Docker. La imagen se almacena localmente tras la primera ejecuci\u00f3n.</p> <p>Para crear un contenedor sin arrancarlo:</p> <pre><code>docker create ubuntu\n</code></pre> <p>Documentaci\u00f3n oficial: - <code>docker run</code> - <code>docker create</code></p>"},{"location":"4_2_docker_basico/#listado-de-contenedores","title":"Listado de contenedores","text":"<p>Para ver los contenedores en ejecuci\u00f3n:</p> <pre><code>docker ps\n</code></pre> <p>Para ver todos los contenedores, incluidos los detenidos:</p> <pre><code>docker ps -a\n</code></pre> <p>Este listado incluye informaci\u00f3n como el ID, la imagen base, el comando de arranque, el estado, los puertos expuestos y el nombre asignado.</p> <p>Documentaci\u00f3n: docker container ls </p>"},{"location":"4_2_docker_basico/#gestion-del-ciclo-de-vida-de-contenedores","title":"Gesti\u00f3n del ciclo de vida de contenedores","text":"<p>Para arrancar un contenedor ya creado:</p> <pre><code>docker start nombre_o_id\n</code></pre> <p>Para detenerlo:</p> <pre><code>docker stop nombre_o_id\n</code></pre> <p>Para reiniciarlo:</p> <pre><code>docker restart nombre_o_id\n</code></pre> <p>Documentaci\u00f3n: - <code>start</code> - <code>stop</code> - <code>restart</code></p>"},{"location":"4_2_docker_basico/#inspeccion-de-contenedores","title":"Inspecci\u00f3n de contenedores","text":"<p>Para obtener informaci\u00f3n detallada de un contenedor:</p> <pre><code>docker inspect nombre_o_id\n</code></pre> <p>Este comando devuelve un objeto JSON con detalles sobre configuraci\u00f3n, red, vol\u00famenes, imagen base, etc.</p> <p>Documentaci\u00f3n: docker inspect </p>"},{"location":"4_2_docker_basico/#ejecucion-de-comandos-en-contenedores","title":"Ejecuci\u00f3n de comandos en contenedores","text":"<p>Para ejecutar comandos dentro de un contenedor en ejecuci\u00f3n:</p> <pre><code>docker exec -it nombre_o_id bash\n</code></pre> <p>Tambi\u00e9n se pueden establecer variables de entorno:</p> <pre><code>docker exec -it -e VAR1=valor nombre_o_id bash\n</code></pre> <p>Ejemplo en segundo plano:</p> <pre><code>docker exec -d nombre_o_id touch /tmp/prueba\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker container exec</code> </p>"},{"location":"4_2_docker_basico/#transferencia-de-archivos","title":"Transferencia de archivos","text":"<p>Para copiar archivos entre el sistema anfitri\u00f3n y un contenedor:</p> <pre><code>docker cp contenedor:/ruta/origen ./destino_local\ndocker cp ./archivo_local contenedor:/ruta/destino\n</code></pre> <p>No se permite la copia directa entre contenedores.</p> <p>Mas documentaci\u00f3n: <code>docker container cp</code> </p>"},{"location":"4_2_docker_basico/#acceso-a-procesos-en-ejecucion","title":"Acceso a procesos en ejecuci\u00f3n","text":"<p>Para enlazar la entrada/salida est\u00e1ndar de un contenedor en ejecuci\u00f3n:</p> <pre><code>docker attach nombre_o_id\n</code></pre> <p>Este comando permite observar directamente lo que est\u00e1 generando el proceso activo.</p> <p>M\u00e1s documentaci\u00f3n: <code>docker container attach</code> </p>"},{"location":"4_2_docker_basico/#consulta-de-logs","title":"Consulta de logs","text":"<p>Para obtener los logs generados por un contenedor:</p> <pre><code>docker logs nombre_o_id\n</code></pre> <p>Ejemplo con seguimiento en tiempo real:</p> <pre><code>docker logs -f --until=2s nombre_o_id\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker container logs</code> </p>"},{"location":"4_2_docker_basico/#renombrar-contenedores","title":"Renombrar contenedores","text":"<p>Para cambiar el nombre de un contenedor:</p> <pre><code>docker rename antiguo_nombre nuevo_nombre\n</code></pre> <p>M\u00e1s Documentaci\u00f3n: <code>docker container rename</code> </p>"},{"location":"4_2_docker_basico/#tabla-resumen-de-comandos-basicos-de-docker","title":"Tabla resumen de comandos b\u00e1sicos de Docker","text":"Comando Descripci\u00f3n <code>docker run -d --name=cont1 ubuntu tail -f /dev/null</code> Crea un contenedor llamado <code>cont1</code> con la imagen <code>ubuntu</code> y ejecuta un proceso que no termina. <code>docker run -d -p 1200:80 nginx</code> Crea un contenedor con la imagen <code>nginx</code> y expone el puerto 80 del contenedor en el puerto 1200 del anfitri\u00f3n. <code>docker run -it -e MENSAJE=HOLA ubuntu:24.04 bash</code> Crea un contenedor interactivo con Ubuntu 24.04 y define la variable de entorno <code>MENSAJE</code>. <code>docker ps</code> Muestra los contenedores en ejecuci\u00f3n. <code>docker ps -a</code> Muestra todos los contenedores, incluidos los detenidos. <code>docker start micontenedor</code> Arranca un contenedor detenido. <code>docker start -ai micontenedor</code> Arranca un contenedor y enlaza su entrada/salida a la terminal. <code>docker exec -it idcont bash</code> Ejecuta una shell interactiva dentro del contenedor <code>idcont</code>. <code>docker exec -it -e FICHERO=prueba cont bash</code> Ejecuta una shell en <code>cont</code> con la variable de entorno <code>FICHERO=prueba</code>. <code>docker exec -d cont touch /tmp/prueba</code> Ejecuta en segundo plano la creaci\u00f3n de un archivo dentro del contenedor. <code>docker attach idcontainer</code> Enlaza la terminal al proceso principal del contenedor. <code>docker logs -n 10 idcontainer</code> Muestra las \u00faltimas 10 l\u00edneas del log del contenedor. <code>docker cp idcontainer:/tmp/prueba ./</code> Copia un archivo del contenedor al anfitri\u00f3n. <code>docker cp ./miFichero idcontainer:/tmp</code> Copia un archivo del anfitri\u00f3n al contenedor."},{"location":"4_2_docker_basico/#ejemplo-guiado-de-uso","title":"\ud83e\udde9 Ejemplo guiado de uso","text":"<p>Pr\u00e1ctica guiada: primeros pasos con contenedores</p> <ol> <li> <p>Crear un contenedor persistente</p> <pre><code>docker run -d --name=cont1 ubuntu tail -f /dev/null\n</code></pre> <ul> <li>Comprueba que el contenedor est\u00e1 en ejecuci\u00f3n con <code>docker ps</code>.</li> <li>Este contenedor permanecer\u00e1 activo sin hacer nada, \u00fatil para pruebas.</li> <li>Para entrar en el terminal de este contenedor <code>docker exec it cont1 /bin/bash</code></li> </ul> </li> <li> <p>Crear un contenedor con puerto expuesto</p> <pre><code>docker run -d -p 1200:80 nginx\n</code></pre> <ul> <li>Abre un navegador en Windows y accede a <code>http://localhost:1200</code> para ver la p\u00e1gina de bienvenida de Nginx.</li> </ul> </li> <li> <p>Crear un contenedor con variable de entorno</p> <pre><code>docker run -it -e MENSAJE=HOLA ubuntu:24.04 bash\n</code></pre> <ul> <li>Dentro del contenedor, ejecuta <code>echo $MENSAJE</code> para comprobar el valor.</li> </ul> </li> <li> <p>Listar contenedores</p> <pre><code>docker ps        # Solo los activos\ndocker ps -a     # Todos, incluidos los detenidos\n</code></pre> </li> <li> <p>Detener y volver a arrancar un contenedor</p> <pre><code>docker stop cont1\ndocker start -ai cont1\n</code></pre> <ul> <li>Observa c\u00f3mo se enlaza la terminal al proceso activo.<ul> <li><code>docker start</code>: Inicia un contenedor detenido</li> <li><code>-a</code>: Adjunta (attach) la salida est\u00e1ndar y error del contenedor a la terminal actual</li> <li><code>-i</code>: Mantiene abierta la entrada est\u00e1ndar (STDIN) para permitir interacci\u00f3n</li> <li><code>cont1</code>: Es el nombre o ID del contenedor que se desea iniciar</li> </ul> </li> </ul> </li> <li> <p>Ejecutar comandos dentro de un contenedor</p> <pre><code>docker exec -it cont1 bash\n</code></pre> <ul> <li>Accede a una shell dentro del contenedor <code>cont1</code>.<ul> <li><code>-i</code> de nuevo significa interactivo</li> <li><code>-t</code> asigna un terminal donde ejecutar el comando que le sigue</li> </ul> </li> </ul> <pre><code>docker exec -it -e FICHERO=prueba cont1 bash\n</code></pre> <ul> <li>Comprueba que la variable <code>FICHERO</code> est\u00e1 disponible con <code>echo $FICHERO</code>.</li> </ul> <pre><code>docker exec -d cont1 touch /tmp/prueba\n</code></pre> <ul> <li>Verifica que el archivo se ha creado con <code>ls /tmp</code>.<ul> <li><code>-d</code>: (detached) Ejecuta el comando en segundo plano, sin bloquear la terminal actual</li> <li><code>touch /tmp/prueba</code>: Es el comando que se ejecutar\u00e1, en este caso crear\u00e1 un archivo vac\u00edo llamado \"prueba\" en el directorio /tmp</li> </ul> </li> </ul> </li> <li> <p>Adjuntar y consultar logs</p> <pre><code>docker attach cont1\n</code></pre> <ul> <li>Sal de la sesi\u00f3n con <code>Ctrl+P</code> seguido de <code>Ctrl+Q</code>.</li> </ul> <pre><code>docker logs -n 10 cont1\n</code></pre> <ul> <li>Muestra las \u00faltimas l\u00edneas del log del contenedor.</li> </ul> </li> <li> <p>Copiar archivos entre anfitri\u00f3n y contenedor</p> <pre><code>docker cp cont1:/tmp/prueba ./\ndocker cp ./miFichero cont1:/tmp\n</code></pre> <ul> <li>Verifica los archivos copiados dentro del contenedor con <code>ls /tmp</code>.</li> </ul> </li> </ol>"},{"location":"4_3_imagenes_docker/","title":"Im\u00e1genes Docker","text":""},{"location":"4_3_imagenes_docker/#gestion-de-imagenes-en-docker","title":"Gesti\u00f3n de im\u00e1genes en Docker","text":"<p>Docker permite gestionar im\u00e1genes de forma flexible: listarlas, descargarlas, eliminarlas, exportarlas, versionarlas y construirlas desde cero. Esta unidad recoge los comandos esenciales para trabajar con im\u00e1genes locales y remotas, as\u00ed como para crear im\u00e1genes propias mediante <code>commit</code> o <code>Dockerfile</code>.</p>"},{"location":"4_3_imagenes_docker/#listado-de-imagenes-locales","title":"Listado de im\u00e1genes locales","text":"<p>Para consultar las im\u00e1genes almacenadas en el sistema:</p> <pre><code>docker images\n</code></pre> <p>Se puede filtrar por repositorio y etiqueta:</p> <pre><code>docker images ubuntu:22.04\n</code></pre> <p>Tambi\u00e9n es posible aplicar filtros avanzados:</p> <pre><code>docker images -f=reference=\"u*:*04\"\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker images</code></p>"},{"location":"4_3_imagenes_docker/#busqueda-de-imagenes-en-docker-hub","title":"B\u00fasqueda de im\u00e1genes en Docker Hub","text":"<p>Para buscar im\u00e1genes disponibles en el registro por defecto (Docker Hub):</p> <pre><code>docker search ubuntu\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker search</code></p>"},{"location":"4_3_imagenes_docker/#descarga-de-imagenes","title":"Descarga de im\u00e1genes","text":"<p>Para descargar una imagen sin necesidad de ejecutarla:</p> <pre><code>docker pull alpine:3.10\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker pull</code></p>"},{"location":"4_3_imagenes_docker/#historial-de-una-imagen","title":"Historial de una imagen","text":"<p>Para consultar las capas que componen una imagen:</p> <pre><code>docker history nginx\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker history</code></p>"},{"location":"4_3_imagenes_docker/#eliminacion-de-imagenes","title":"Eliminaci\u00f3n de im\u00e1genes","text":"<p>Para eliminar una imagen concreta:</p> <pre><code>docker rmi ubuntu:22.04\n</code></pre> <p>Para eliminar todas las im\u00e1genes no utilizadas por contenedores:</p> <pre><code>docker rmi $(docker images -q)\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker rmi</code></p>"},{"location":"4_3_imagenes_docker/#eliminacion-de-contenedores","title":"Eliminaci\u00f3n de contenedores","text":"<p>Para eliminar un contenedor detenido:</p> <pre><code>docker rm nombre_o_id\n</code></pre> <p>Para detener y eliminar todos los contenedores:</p> <pre><code>docker stop $(docker ps -a -q)\ndocker rm $(docker ps -a -q)\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker rm</code></p>"},{"location":"4_3_imagenes_docker/#limpieza-completa-del-sistema","title":"Limpieza completa del sistema","text":"<p>Para eliminar im\u00e1genes, contenedores detenidos, redes no utilizadas y cach\u00e9 de construcci\u00f3n:</p> <pre><code>docker system prune -a\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker system prune</code></p>"},{"location":"4_3_imagenes_docker/#crear-una-imagen-a-partir-de-un-contenedor","title":"Crear una imagen a partir de un contenedor","text":"<p>Es posible guardar el estado de un contenedor como una nueva imagen:</p> <pre><code>docker commit -a \"Autor\" -m \"Comentario\" nombre_o_id usuariodockerhub/imagen:2025\n</code></pre> <p>Para a\u00f1adir una etiqueta adicional:</p> <pre><code>docker tag usuariodockerhub/imagen:2025 usuariodockerhub/imagen:latest\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker commit</code> <code>docker tag</code></p>"},{"location":"4_3_imagenes_docker/#exportar-e-importar-imagenes","title":"Exportar e importar im\u00e1genes","text":"<p>Para guardar una imagen en un archivo:</p> <pre><code>docker save -o copia.tar usuariodockerhub/imagen\n</code></pre> <p>O bien:</p> <pre><code>docker save usuariodockerhub/imagen &gt; copia.tar\n</code></pre> <p>Para importar una imagen desde archivo:</p> <pre><code>docker load -i copia.tar\n</code></pre> <p>O bien:</p> <pre><code>docker load &lt; copia.tar\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker save</code> <code>docker load</code></p>"},{"location":"4_3_imagenes_docker/#subida-de-imagenes-a-docker-hub","title":"Subida de im\u00e1genes a <code>Docker Hub</code>","text":"<ol> <li> <p>Iniciar sesi\u00f3n:</p> <pre><code>docker login\n</code></pre> </li> <li> <p>Crear el repositorio en https://hub.docker.com  </p> </li> <li> <p>Etiquetar la imagen si es necesario:</p> <pre><code>docker tag imagen_local usuariodockerhub/nombre_repo\n</code></pre> </li> <li> <p>Subir la imagen:</p> <pre><code>docker push usuariodockerhub/nombre_repo\n</code></pre> </li> </ol> <p>M\u00e1s documentaci\u00f3n: <code>docker login</code> <code>docker push</code></p>"},{"location":"4_3_imagenes_docker/#creacion-de-contenedores-personalizados","title":"Creaci\u00f3n de contenedores personalizados","text":"<p>Docker permite construir im\u00e1genes propias a partir de instrucciones declarativas contenidas en un fichero llamado <code>Dockerfile</code>. Estas im\u00e1genes pueden incluir software preinstalado, configuraciones espec\u00edficas, scripts de arranque, usuarios personalizados, variables de entorno, puertos expuestos y cualquier otra personalizaci\u00f3n que se desee aplicar al entorno de ejecuci\u00f3n.</p> <p>Este enfoque es especialmente \u00fatil en contextos educativos, ya que permite preparar entornos reproducibles para pr\u00e1cticas, simulaciones o despliegues controlados.</p>"},{"location":"4_3_imagenes_docker/#fundamentos-del-dockerfile","title":"Fundamentos del Dockerfile","text":"<p>Un <code>Dockerfile</code> es un archivo de texto plano que define, paso a paso, c\u00f3mo debe construirse una imagen. Cada l\u00ednea representa una instrucci\u00f3n que Docker ejecutar\u00e1 durante el proceso de construcci\u00f3n (<code>docker build</code>). Las instrucciones m\u00e1s comunes son:</p> <ul> <li><code>FROM</code>: define la imagen base sobre la que se construye. Puede ser una distribuci\u00f3n Linux (<code>ubuntu</code>, <code>alpine</code>) o una imagen especializada (<code>python</code>, <code>node</code>, etc.).</li> <li><code>LABEL</code>: a\u00f1ade metadatos como el autor o el prop\u00f3sito de la imagen.</li> <li><code>RUN</code>: ejecuta comandos en la imagen durante la construcci\u00f3n. Se utiliza para instalar paquetes, modificar archivos, crear usuarios, etc.</li> <li><code>COPY</code> o <code>ADD</code>: copia archivos locales al contenedor o descarga recursos externos.</li> <li><code>WORKDIR</code>: establece el directorio de trabajo dentro del contenedor.</li> <li><code>ENV</code>: define variables de entorno persistentes.</li> <li><code>EXPOSE</code>: declara puertos que el contenedor utilizar\u00e1 (no los publica en el host).</li> <li><code>CMD</code>: indica el comando que se ejecutar\u00e1 por defecto al lanzar el contenedor.</li> <li><code>ENTRYPOINT</code>: define el proceso principal del contenedor, \u00fatil para im\u00e1genes que deben comportarse como ejecutables.</li> </ul> <p>M\u00e1s documentaci\u00f3n: <code>Dockerfile reference</code></p> <p>Buenas pr\u00e1cticas en la construcci\u00f3n de im\u00e1genes</p> <ul> <li>Utilizar im\u00e1genes base ligeras (<code>alpine</code>, <code>slim</code>) cuando sea posible.</li> <li>Agrupar comandos en un solo <code>RUN</code> para reducir el n\u00famero de capas.</li> <li>Evitar copiar archivos innecesarios al contenedor.</li> <li>Usar <code>CMD</code> para definir el comportamiento por defecto y <code>ENTRYPOINT</code> si se requiere control total del proceso.</li> <li>A\u00f1adir etiquetas (<code>docker tag</code>) para versionar las im\u00e1genes y facilitar su gesti\u00f3n.</li> <li>Documentar el prop\u00f3sito de cada instrucci\u00f3n dentro del Dockerfile.</li> </ul>"},{"location":"4_3_imagenes_docker/#flujo-de-trabajo-tipico","title":"Flujo de trabajo t\u00edpico","text":"<ol> <li>Crear un directorio de trabajo con los archivos necesarios (scripts, configuraciones, etc.).</li> <li>Escribir el <code>Dockerfile</code> con las instrucciones deseadas.</li> <li>Construir la imagen:</li> </ol> <pre><code>docker build -t nombreimagen .\n</code></pre> <ol> <li>Verificar que la imagen se ha creado:</li> </ol> <pre><code>docker images\n</code></pre> <ol> <li>Lanzar un contenedor basado en la imagen:</li> </ol> <pre><code>docker run -it nombreimagen\n</code></pre> <ol> <li>(Opcional) Subir la imagen a Docker Hub:</li> </ol> <pre><code>docker login\ndocker push usuario/nombreimagen\n</code></pre>"},{"location":"4_3_imagenes_docker/#ejemplos-de-contenedores-personalizados","title":"Ejemplos de contenedores personalizados","text":"<p>Los siguientes ejemplos ilustran distintos enfoques de personalizaci\u00f3n:</p> <ul> <li>Servidor web con Apache y PHP sobre Alpine: imagen ligera con entorno gr\u00e1fico m\u00ednimo y configuraci\u00f3n web b\u00e1sica.</li> <li>Aplicaci\u00f3n Flask en Python: entorno de desarrollo web con dependencias gestionadas por <code>pip</code>.</li> <li>Contenedor de diagn\u00f3stico de red en Ubuntu: imagen con herramientas CLI para pr\u00e1cticas de redes.</li> </ul> <p>1 Servidor web con Apache y PHP sobre Alpine</p> <p>El siguiente contenedor est\u00e1 pensado para servir una p\u00e1gina PHP b\u00e1sica mediante Apache, con configuraci\u00f3n m\u00ednima y sin entorno gr\u00e1fico.</p> <p></p><pre><code>FROM alpine\nLABEL maintainer=\"email@gmail.com\"\nRUN apk update &amp;&amp; apk add apache2 php php-apache2 openrc tar\nADD ./start.sh /start.sh\nADD https://gist.githubusercontent.com/SyntaxC4/5648247/raw/info.php /var/www/localhost/htdocs/index.php\nRUN adduser -u 82 -D -S -G www-data www-data\nRUN chown -R www-data:www-data /var/www/ &amp;&amp; chmod -R 775 /var/www/ &amp;&amp; chmod 755 /start.sh\nEXPOSE 80\nCMD /start.sh\n</code></pre> Explicaci\u00f3n<p></p> <ul> <li>FROM alpine: usa como base la imagen Alpine Linux, una distribuci\u00f3n ligera ideal para contenedores.</li> <li>LABEL maintainer: a\u00f1ade metadatos indicando el responsable de la imagen.</li> <li>RUN apk update &amp;&amp; apk add ...: actualiza el \u00edndice de paquetes e instala Apache2, PHP y herramientas necesarias.</li> <li>ADD ./start.sh /start.sh: copia un script local al contenedor. Este script se usar\u00e1 para iniciar Apache.</li> <li>ADD https://.../info.php ...: descarga un archivo PHP de ejemplo y lo coloca como p\u00e1gina principal.</li> <li>RUN adduser ...: crea un usuario <code>www-data</code> con UID 82 y lo asocia al grupo del mismo nombre.</li> <li>RUN chown/chmod: asigna propiedad y permisos adecuados al directorio web y al script de arranque.</li> <li>EXPOSE 80: declara el puerto 80 como expuesto para otros contenedores (no lo publica en el host).</li> <li>CMD /start.sh: define el comando que se ejecutar\u00e1 por defecto al lanzar el contenedor.</li> </ul> <p>2: Contenedor con Python y Flask</p> <p>Este contenedor es ideal para ense\u00f1ar desarrollo web b\u00e1sico con Flask o para montar APIs REST en pr\u00e1cticas.</p> <pre><code>FROM python:3.11-slim\nLABEL maintainer=\"docente@centro.edu\"\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\nCOPY app.py .\nEXPOSE 5000\nCMD [\"python\", \"app.py\"]\n</code></pre> <ul> <li>Usa una imagen ligera de Python 3.11.</li> <li>Instala dependencias desde <code>requirements.txt</code> (por ejemplo, Flask).</li> <li>Copia el archivo principal <code>app.py</code> al contenedor.</li> <li>Expone el puerto 5000 (por defecto en Flask).</li> <li>Lanza la aplicaci\u00f3n con <code>python app.py</code>.</li> </ul> <p>3: Contenedor de Ubuntu con herramientas de red</p> <p>Este contenedor puede utilizarse en pr\u00e1cticas de redes, para ense\u00f1ar comandos b\u00e1sicos o simular entornos de prueba.</p> <pre><code>FROM ubuntu:24.04\nLABEL maintainer=\"admin@fp.edu\"\nRUN apt update &amp;&amp; apt install -y net-tools iputils-ping curl dnsutils\nCMD [\"/bin/bash\"]\n</code></pre> <ul> <li>Usa Ubuntu 24.04 como base.</li> <li>Instala herramientas de red \u00fatiles para diagn\u00f3stico (<code>ping</code>, <code>netstat</code>, <code>dig</code>, <code>curl</code>, etc.).</li> <li>Lanza una shell interactiva por defecto.</li> </ul>"},{"location":"4_3_imagenes_docker/#tabla-resumen-de-comandos","title":"Tabla resumen de comandos","text":""},{"location":"4_3_imagenes_docker/#gestion-de-imagenes","title":"Gesti\u00f3n de im\u00e1genes","text":"Comando Descripci\u00f3n Ejemplo <code>docker images</code> Lista las im\u00e1genes locales disponibles. <code>docker images</code> <code>docker search &lt;nombre&gt;</code> Busca im\u00e1genes en Docker Hub. <code>docker search ubuntu</code> <code>docker pull &lt;imagen&gt;</code> Descarga una imagen desde el registro. <code>docker pull alpine</code> <code>docker history &lt;imagen&gt;</code> Muestra el historial de capas de una imagen. <code>docker history alpine</code> <code>docker rmi &lt;imagen:tag&gt;</code> Elimina una imagen local. <code>docker rmi ubuntu:14.04</code> <code>docker rmi $(docker images -q)</code> Elimina todas las im\u00e1genes no utilizadas. <code>docker rmi $(docker images -q)</code> <code>docker rm &lt;id&gt;</code> Elimina un contenedor detenido. <code>docker rm 3fb53852ce99</code> <code>docker stop $(docker ps -a -q)</code> Detiene todos los contenedores. <code>docker stop $(docker ps -a -q)</code> <code>docker rm $(docker ps -a -q)</code> Elimina todos los contenedores detenidos. <code>docker rm $(docker ps -a -q)</code> <code>docker system prune -a</code> Elimina im\u00e1genes, contenedores y redes no utilizados. <code>docker system prune -a</code>"},{"location":"4_3_imagenes_docker/#creacion-y-exportacion-de-imagenes","title":"Creaci\u00f3n y exportaci\u00f3n de im\u00e1genes","text":"Comando Descripci\u00f3n Ejemplo <code>docker commit -m \"&lt;comentario&gt;\" &lt;id&gt; &lt;usuario/imagen:tag&gt;</code> Crea una imagen a partir de un contenedor. <code>docker commit -m \"Ubuntu modificado\" 3fb5 usuario/ubuntu:mod</code> <code>docker save -o &lt;archivo&gt;.tar &lt;imagen&gt;</code> Exporta una imagen a un archivo <code>.tar</code>. <code>docker save -o copiaSeguridad.tar alpine</code> <code>docker load -i &lt;archivo&gt;.tar</code> Importa una imagen desde un archivo <code>.tar</code>. <code>docker load -i copiaSeguridad.tar</code>"},{"location":"4_3_imagenes_docker/#docker-hub","title":"Docker Hub","text":"Comando Descripci\u00f3n Ejemplo <code>docker login</code> Inicia sesi\u00f3n en Docker Hub. <code>docker login</code> <code>docker push &lt;usuario/imagen:tag&gt;</code> Sube una imagen al repositorio. <code>docker push usuario/ubuntu:mod</code>"},{"location":"4_3_imagenes_docker/#ejemplo-guiado-de-uso","title":"\ud83e\udde9 Ejemplo guiado de uso","text":"<p>Pr\u00e1ctica guiada: gesti\u00f3n de im\u00e1genes en Docker</p> <p>Aprender a listar, descargar, eliminar, exportar, importar y versionar im\u00e1genes en Docker, utilizando exclusivamente la l\u00ednea de comandos en entornos WSL con Ubuntu.</p> <ol> <li> <p>Listar im\u00e1genes locales</p> <pre><code>docker images\n</code></pre> <p>Consulta todas las im\u00e1genes disponibles en tu sistema. Para filtrar por nombre y versi\u00f3n:</p> <pre><code>docker images ubuntu:22.04\n</code></pre> </li> <li> <p>Buscar im\u00e1genes en Docker Hub</p> <pre><code>docker search alpine\n</code></pre> <p>Muestra im\u00e1genes disponibles en el registro remoto.</p> </li> <li> <p>Descargar una imagen</p> <pre><code>docker pull alpine:3.10\n</code></pre> <p>Descarga la imagen <code>alpine</code> con la etiqueta <code>3.10</code>.</p> </li> <li> <p>Consultar el historial de una imagen</p> <pre><code>docker history alpine\n</code></pre> <p>Muestra las capas que componen la imagen.</p> </li> <li> <p>Eliminar im\u00e1genes</p> <p>Eliminar una imagen concreta:</p> <pre><code>docker rmi ubuntu:22.04\n</code></pre> <p>Eliminar todas las im\u00e1genes no utilizadas:</p> <pre><code>docker rmi $(docker images -q)\n</code></pre> </li> <li> <p>Eliminar contenedores</p> <p>Eliminar un contenedor por ID:</p> <pre><code>docker rm 3fb53852ce99\n</code></pre> <p>Detener y eliminar todos los contenedores:</p> <pre><code>docker stop $(docker ps -a -q)\ndocker rm $(docker ps -a -q)\n</code></pre> </li> <li> <p>Limpieza completa del sistema</p> <pre><code>docker system prune -a\n</code></pre> <p>Elimina contenedores detenidos, im\u00e1genes sin uso, redes no utilizadas y cach\u00e9 de construcci\u00f3n.</p> </li> <li> <p>Crear una imagen a partir de un contenedor</p> <pre><code>docker commit -m \"Ubuntu modificado\" 3fb5 usuario/ubuntu:mod\n</code></pre> </li> <li> <p>Exportar e importar im\u00e1genes</p> <p>Guardar una imagen en archivo <code>.tar</code>:</p> <pre><code>docker save -o copiaSeguridad.tar alpine\n</code></pre> <p>Importar una imagen desde archivo:</p> <pre><code>docker load -i copiaSeguridad.tar\n</code></pre> </li> <li> <p>Subir im\u00e1genes a Docker Hub</p> <p>Iniciar sesi\u00f3n:</p> <pre><code>docker login\n</code></pre> <p>Subir imagen:</p> <pre><code>docker push usuario/ubuntu:mod\n</code></pre> </li> </ol>"},{"location":"4_4_redes_volumenes_docker/","title":"Redes y Vol\u00famenes","text":"<p>Docker permite configurar redes virtuales entre contenedores y gestionar la persistencia de datos mediante distintos tipos de vol\u00famenes. Estas capacidades son fundamentales para construir entornos distribuidos, simular arquitecturas reales y garantizar que los datos sobrevivan al ciclo de vida de los contenedores.</p>"},{"location":"4_4_redes_volumenes_docker/#redes-en-docker","title":"Redes en Docker","text":""},{"location":"4_4_redes_volumenes_docker/#redes-predefinidas","title":"Redes predefinidas","text":"<p>Al instalar Docker, se crean tres redes internas:</p> <ul> <li><code>bridge</code>: red por defecto. Asigna una IP privada al contenedor y lo conecta mediante la interfaz virtual <code>docker0</code>.</li> <li><code>host</code>: el contenedor comparte la pila de red del anfitri\u00f3n. No hay aislamiento.</li> <li><code>none</code>: el contenedor no tiene acceso a ninguna red externa, solo loopback.</li> </ul> <p>Para inspeccionar la red <code>docker0</code>:</p> <pre><code>ip a show docker0\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker network</code></p>"},{"location":"4_4_redes_volumenes_docker/#creacion-de-redes-personalizadas","title":"Creaci\u00f3n de redes personalizadas","text":"<p>Docker permite crear redes aisladas para agrupar contenedores:</p> <pre><code>docker network create redtest\n</code></pre> <p>Opciones adicionales:</p> <ul> <li><code>--internal</code>: red sin acceso externo.</li> <li><code>--subnet</code>: define la subred en formato CIDR.</li> <li><code>--gateway</code>: especifica la puerta de enlace.</li> <li><code>--ip-range</code>: delimita el rango de IPs asignables.</li> </ul> <p>M\u00e1s documentaci\u00f3n: <code>docker network create</code></p>"},{"location":"4_4_redes_volumenes_docker/#inspeccion-y-eliminacion-de-redes","title":"Inspecci\u00f3n y eliminaci\u00f3n de redes","text":"<p>Listar redes:</p> <pre><code>docker network ls\n</code></pre> <p>Inspeccionar una red:</p> <pre><code>docker network inspect redtest\n</code></pre> <p>Eliminar una red (solo si no hay contenedores conectados):</p> <pre><code>docker network rm redtest\n</code></pre>"},{"location":"4_4_redes_volumenes_docker/#asignacion-de-redes-a-contenedores","title":"Asignaci\u00f3n de redes a contenedores","text":"<p>Al crear un contenedor, se puede especificar la red:</p> <pre><code>docker run -it --network redtest ubuntu /bin/bash\n</code></pre> <p>Tambi\u00e9n se puede asignar un alias DNS:</p> <pre><code>docker run -it --network redtest --network-alias miservidor --name prueba3 alpine\n</code></pre> <p>Esto permite que otros contenedores en la misma red accedan a <code>prueba3</code> usando el nombre <code>miservidor</code>.</p>"},{"location":"4_4_redes_volumenes_docker/#conexion-y-desconexion-dinamica","title":"Conexi\u00f3n y desconexi\u00f3n din\u00e1mica","text":"<p>Conectar un contenedor a una red existente:</p> <pre><code>docker network connect redtest prueba1\n</code></pre> <p>Opciones \u00fatiles:</p> <ul> <li><code>--alias</code>: asigna un nombre DNS adicional.</li> <li><code>--ip</code>: asigna una IP fija.</li> </ul> <p>Desconectar un contenedor:</p> <pre><code>docker network disconnect redtest prueba1\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>docker network connect</code></p>"},{"location":"4_4_redes_volumenes_docker/#ejemplo-de-uso-guiado","title":"\ud83e\udde9 Ejemplo de uso guiado","text":"<p>Comprobar comunicaci\u00f3n entre dos contenedores</p> <p>Vamos a usar dos contenedores ubuntu (imagen <code>ubuntu</code>) y una red bridge propia para que las IPs est\u00e9n en el mismo segmento y tengas resoluci\u00f3n por nombre.</p> <ol> <li> <p>Crear la red y arrancar los dos contenedores (cada uno en un terminal)</p> <p>En una terminal (Terminal A), crea la red y lanza los contenedores en segundo plano:</p> <pre><code># Crear una red bridge aislada\ndocker network create demo-net\n\n# Lanzar dos contenedores en esa red, en background\ndocker run -d --name c1 --network demo-net ubuntu sleep infinity\ndocker run -d --name c2 --network demo-net ubuntu sleep infinity\n\n# Verifica que est\u00e1n en marcha\ndocker ps \n</code></pre> <ul> <li>Usamos <code>sleep infinity</code> para que queden ejecut\u00e1ndose en segundo plano.</li> <li>Con <code>--name</code> fijas nombres para luego poder entrar por <code>docker exec</code>.</li> <li>Ambos est\u00e1n conectados a <code>demo-net</code>.</li> </ul> </li> <li> <p>Entrar en cada contenedor desde dos terminales</p> <ul> <li> <p>Terminal A \u2192 entra en <code>c1</code>: </p><pre><code>docker exec -it c1 bash\n</code></pre><p></p> </li> <li> <p>Terminal B \u2192 entra en <code>c2</code>: </p><pre><code>docker exec -it c2 bash\n</code></pre><p></p> </li> </ul> </li> <li> <p>Instalar utilidades dentro de cada contenedor</p> <p>En cada contenedor (tanto en <code>c1</code> como en <code>c2</code>), ejecuta:</p> <pre><code>apt update &amp;&amp; apt install -y iproute2 iputils-ping\n</code></pre> <ul> <li><code>iproute2</code> \u2192 para usar <code>ip a</code> o <code>ip -brief addr</code>.</li> <li><code>iputils-ping</code> \u2192 para poder hacer <code>ping</code>.</li> </ul> <p>Este paso se hace una sola vez por contenedor (si los destruyes y recreas, habr\u00e1 que repetirlo; o puedes construir una imagen propia que ya lo traiga instalado).</p> </li> <li> <p>Ver la IP de cada contenedor</p> <p>En cada terminal: </p><pre><code>hostname -I\nip -brief addr\nping -c 3 c2\n</code></pre><p></p> <ul> <li>La interfaz t\u00edpica ser\u00e1 <code>eth0</code> con una IP del rango de <code>demo-net</code>.</li> </ul> </li> <li> <p>Limpieza (cuando termines la demo)     </p><pre><code>docker rm -f c1 c2\ndocker network rm demo-net\n</code></pre><p></p> </li> </ol> <p>Variante r\u00e1pida con Alpine (sin <code>apt</code>)</p> <p>Si prefieres evitar la instalaci\u00f3n, Alpine trae <code>ping</code> (busybox) y puedes usar <code>ip</code> instalando <code>iproute2</code> v\u00eda <code>apk</code> si lo necesitas:</p> <pre><code>docker network create demo-net\ndocker run -d --name c1 --network demo-net alpine sleep infinity\ndocker run -d --name c2 --network demo-net alpine sleep infinity\n\n# En cada una de las contenedores entramos y ejecutamos el ping\ndocker exec -it c1 sh\n</code></pre> <p>Listar las IPs de los contenedores activos</p> <p>Hay varias formas de ver las IPs de los servidores activos, por ejemplo aqu\u00ed tenemos suna:  </p><pre><code># IP por defecto de cada contenedor (todas las redes)\ndocker ps -q | xargs -n1 -I {} docker inspect -f '{{.Name}} -&gt; {{range .NetworkSettings.Networks}}{{.IPAddress}} {{end}}' {}\n</code></pre><p></p> <p>Mantener contenedores en ejecuci\u00f3n</p> <p>Cuando se ejecuta un contenedor, si no tiene nada que hacer quedar\u00e1 parado autom\u00e1ticamente. Si al hacer el <code>run</code> entramos en su terminal, finalizar\u00e1 al salir de el.  Para que esto no ocurra tenemos el truco <code>sleep infinity</code> que dejar\u00e1 el contenedor activo hasta que lo finalicemos explicitamente</p> <pre><code>docker run -d --name c1 --network demo-net alpine sleep infinity\n</code></pre>"},{"location":"4_4_redes_volumenes_docker/#persistencia-de-datos","title":"Persistencia de datos","text":"<p>La persistencia de datos en Docker permite conservar informaci\u00f3n m\u00e1s all\u00e1 del ciclo de vida de los contenedores, asegurando que los archivos, configuraciones o resultados generados no se pierdan al detener o eliminar un contenedor. Esta funcionalidad es esencial cuando se trabaja con servicios que requieren almacenamiento duradero, como bases de datos, servidores web o aplicaciones que gestionan archivos. Docker ofrece varias estrategias para lograr esta persistencia, cada una con caracter\u00edsticas t\u00e9cnicas y casos de uso espec\u00edficos: los montajes directos desde el sistema anfitri\u00f3n (binding mounts), los vol\u00famenes gestionados por Docker y los vol\u00famenes temporales en memoria (<code>tmpfs</code>). </p> <p>A continuaci\u00f3n revisamos estas 3 formas:</p> <ul> <li>Binding mount: monta un directorio del anfitri\u00f3n en el contenedor.</li> <li>Vol\u00famenes gestionados por Docker: abstraen la ubicaci\u00f3n f\u00edsica del almacenamiento.</li> <li>Vol\u00famenes <code>tmpfs</code>: almacenan datos en memoria, sin persistencia.</li> </ul> <p>M\u00e1s documentaci\u00f3n: <code>Docker storage</code></p>"},{"location":"4_4_redes_volumenes_docker/#binding-mount","title":"Binding mount","text":"<p>Montaje directo de un directorio del anfitri\u00f3n:</p> <pre><code>docker run -d -it --name appcontainer -v /home/alumno/target:/app nginx:latest\n</code></pre> <p>O con sintaxis expl\u00edcita:</p> <pre><code>docker run -d -it --name appcontainer --mount type=bind,source=/home/alumno/target,target=/app nginx:latest\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>bind mounts</code></p> Crea una carpeta en y arranca un contenedor ubuntu enlazando esta carpeta a una carpeta del contendor, por ejemplo <code>/home</code>. A\u00f1ade un fichero a la carpeta y comprueba que es accesible desde el contenedor. <pre><code>mkdir carpeta\necho \"Fichero visible desde contenedor\" &gt; carpeta/fichero.txt\ndocker run -it --name my_ubuntu -v ./carpeta:/home ubuntu /bin/bash\n</code></pre> <p>Comprueba que si creas un fichero en tu carpeta esta</p>"},{"location":"4_4_redes_volumenes_docker/#volumenes-docker","title":"Vol\u00famenes Docker","text":"<p>Montaje de un volumen gestionado por Docker:</p> <pre><code>docker run -d -it --name appcontainer -v mivolumen:/app nginx:latest\n</code></pre> <p>O con sintaxis expl\u00edcita:</p> <pre><code>docker run -d -it --name appcontainer --mount source=mivolumen,target=/app nginx:latest\n</code></pre> <p>Gesti\u00f3n de vol\u00famenes:</p> <pre><code>docker volume create mivolumen      # crea un volumen\ndocker volume ls                    # lista todos los vol\u00famenes\ndocker volume inspect mivolumen     # obtiene informaci\u00f3n sobre un volumen\ndocker volume rm mivolumen          # elimina un volumen\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>volumes</code></p>"},{"location":"4_4_redes_volumenes_docker/#volumenes-tmpfs","title":"Vol\u00famenes <code>tmpfs</code>","text":"<p>Montaje en memoria (sin persistencia):</p> <pre><code>docker run -d -it --tmpfs /app nginx\n</code></pre> <p>O con sintaxis expl\u00edcita:</p> <pre><code>docker run -d -it --mount type=tmpfs,destination=/app nginx\n</code></pre> <p>M\u00e1s documentaci\u00f3n: <code>tmpfs</code></p>"},{"location":"4_4_redes_volumenes_docker/#copia-de-seguridad-de-volumenes","title":"Copia de seguridad de vol\u00famenes","text":"<p>Seguimos Ejemplo para copiar el contenido de un volumen a un archivo <code>.tar</code>:</p> <pre><code>docker stop contenedor1\ndocker run --rm --volumes-from contenedor1 -v /home/alumno/backup:/backup ubuntu bash -c \"cd /datos &amp;&amp; tar cvf /backup/copiaseguridad.tar .\"\n</code></pre> <p>Este comando lanza un contenedor temporal que accede al volumen montado en <code>/datos</code> y guarda su contenido en <code>/home/alumno/backup</code>.</p>"},{"location":"4_4_redes_volumenes_docker/#tabla-de-comandos","title":"Tabla de comandos","text":""},{"location":"4_4_redes_volumenes_docker/#redes","title":"Redes","text":"Comando Docker Descripci\u00f3n <code>docker network ls</code> Lista todas las redes disponibles en Docker. <code>docker network inspect &lt;nombre_red&gt;</code> Muestra detalles de una red, incluyendo contenedores conectados y configuraci\u00f3n IP. <code>docker network create &lt;nombre_red&gt;</code> Crea una nueva red personalizada. <code>docker network create --driver bridge &lt;nombre_red&gt;</code> Crea una red tipo bridge (la m\u00e1s com\u00fan). <code>docker network create --subnet 192.168.100.0/24 &lt;nombre_red&gt;</code> Crea una red con una subred espec\u00edfica en formato CIDR. <code>docker network rm &lt;nombre_red&gt;</code> Elimina una red Docker. <code>docker run --network &lt;nombre_red&gt; &lt;imagen&gt;</code> Ejecuta un contenedor conectado a una red espec\u00edfica. <code>docker network connect &lt;nombre_red&gt; &lt;contenedor&gt;</code> Conecta un contenedor existente a una red. <code>docker network disconnect &lt;nombre_red&gt; &lt;contenedor&gt;</code> Desconecta un contenedor de una red."},{"location":"4_4_redes_volumenes_docker/#volumenes","title":"Vol\u00famenes","text":"Comando Docker Descripci\u00f3n <code>docker volume ls</code> Lista todos los vol\u00famenes existentes. <code>docker volume create &lt;nombre_volumen&gt;</code> Crea un nuevo volumen. <code>docker volume inspect &lt;nombre_volumen&gt;</code> Muestra detalles del volumen, incluyendo su ruta en el sistema. <code>docker volume rm &lt;nombre_volumen&gt;</code> Elimina un volumen (solo si no est\u00e1 en uso). <code>docker volume prune</code> Elimina todos los vol\u00famenes no utilizados. <code>docker run -v &lt;nombre_volumen&gt;:/ruta/en/contenedor &lt;imagen&gt;</code> Ejecuta un contenedor montando un volumen en una ruta espec\u00edfica. <code>docker run --mount source=&lt;nombre_volumen&gt;,target=/ruta &lt;imagen&gt;</code> Alternativa moderna para montar vol\u00famenes usando <code>--mount</code>. <code>docker inspect &lt;contenedor&gt;</code> Permite ver qu\u00e9 vol\u00famenes est\u00e1n montados en un contenedor."},{"location":"4_4_redes_volumenes_docker/#ejemplo-de-uso-guiado_1","title":"\ud83e\udde9 Ejemplo de uso guiado","text":"<p>Pr\u00e1ctica guiada: redes y vol\u00famenes en Docker</p> <p>Configurar redes personalizadas entre contenedores y aplicar distintos tipos de vol\u00famenes para gestionar la persistencia de datos. Esta pr\u00e1ctica se realiza \u00edntegramente desde la terminal en entornos WSL con Ubuntu.</p> <ol> <li> <p>Crear una red personalizada</p> <pre><code>docker network create redtest\n</code></pre> <p>Verifica que se ha creado:</p> <pre><code>docker network ls\n</code></pre> </li> <li> <p>Crear dos contenedores en la misma red</p> <pre><code>docker run -it --network redtest --name prueba1 alpine\n</code></pre> <p>Dentro del contenedor, sal con <code>exit</code> y vuelve a iniciarlo:</p> <pre><code>docker start prueba1\n</code></pre> <p>Lanza el segundo contenedor:</p> <pre><code>docker run -it --network redtest --name prueba2 alpine\n</code></pre> <p>Desde <code>prueba2</code>, comprueba la conectividad con <code>prueba1</code>:</p> <pre><code>ping prueba1\n</code></pre> </li> <li> <p>Asignar alias DNS a un contenedor</p> <pre><code>docker run -it --network redtest --network-alias miservidor --name prueba3 alpine\n</code></pre> <p>Desde otro contenedor en la misma red, prueba:</p> <pre><code>ping miservidor\n</code></pre> </li> <li> <p>Conectar y desconectar contenedores de redes</p> <p>Conectar un contenedor a otra red:</p> <pre><code>docker network connect redtest prueba1\n</code></pre> <p>Desconectarlo:</p> <pre><code>docker network disconnect redtest prueba1\n</code></pre> </li> <li> <p>Crear un volumen tipo binding mount</p> <pre><code>docker run -d -it --name appcontainer -v /home/alumno/target:/app nginx:latest\n</code></pre> <p>Verifica que el contenido de <code>/home/alumno/target</code> est\u00e1 accesible en <code>/app</code> dentro del contenedor.</p> </li> <li> <p>Crear un volumen gestionado por Docker</p> <pre><code>docker volume create mivolumen\ndocker run -d -it --name appcontainer2 -v mivolumen:/app nginx:latest\n</code></pre> <p>Verifica que el volumen aparece en la lista:</p> <pre><code>docker volume ls\n</code></pre> </li> <li> <p>Crear un volumen temporal en memoria (<code>tmpfs</code>)</p> <pre><code>docker run -d -it --tmpfs /app nginx\n</code></pre> <p>Este volumen no se guarda en disco y desaparece al detener el contenedor.</p> </li> <li> <p>Realizar copia de seguridad de un volumen</p> <pre><code>docker stop contenedor1\ndocker run --rm --volumes-from contenedor1 -v /home/alumno/backup:/backup ubuntu bash -c \"cd /datos &amp;&amp; tar cvf /backup/copiaseguridad.tar .\"\n</code></pre> <p>Verifica que el archivo <code>copiaseguridad.tar</code> se ha creado en <code>/home/alumno/backup</code>.</p> </li> </ol>"},{"location":"4_5_docker_compose/","title":"Orquestaci\u00f3n de contenedores con Docker Compose","text":"<p>Docker Compose es una herramienta que permite definir y gestionar m\u00faltiples contenedores como una \u00fanica aplicaci\u00f3n. Utiliza un fichero de configuraci\u00f3n en formato YAML (<code>docker-compose.yml</code>) para describir los servicios, redes, vol\u00famenes y dependencias que conforman el entorno. Esta funcionalidad resulta especialmente \u00fatil en entornos educativos y de desarrollo, donde se requiere levantar arquitecturas completas de forma reproducible y automatizada.</p>"},{"location":"4_5_docker_compose/#ventajas-de-docker-compose","title":"Ventajas de Docker Compose","text":"<ul> <li>Permite definir m\u00faltiples servicios en un solo archivo.</li> <li>Automatiza la creaci\u00f3n, conexi\u00f3n y configuraci\u00f3n de contenedores.</li> <li>Facilita la gesti\u00f3n de redes, vol\u00famenes y variables de entorno.</li> <li>Admite escalado local de servicios mediante m\u00faltiples instancias.</li> <li>Simplifica la puesta en marcha de entornos complejos como WordPress, bases de datos, APIs, etc.</li> </ul> <p>M\u00e1s documentaci\u00f3n: <code>Docker Compose</code></p>"},{"location":"4_5_docker_compose/#estructura-del-fichero-docker-composeyml","title":"Estructura del fichero <code>docker-compose.yml</code>","text":"<p>El fichero <code>docker-compose.yml</code> se escribe en formato YAML y puede incluir:</p> <ul> <li><code>services</code>: definici\u00f3n de cada contenedor.</li> <li><code>volumes</code>: vol\u00famenes compartidos entre servicios.</li> <li><code>networks</code>: redes personalizadas.</li> <li><code>environment</code>: variables de entorno.</li> <li><code>depends_on</code>: orden de arranque entre servicios.</li> <li><code>build</code>: ruta al Dockerfile si se desea construir una imagen personalizada.</li> <li><code>ports</code>: mapeo de puertos entre contenedor y anfitri\u00f3n.</li> <li><code>restart</code>: pol\u00edtica de reinicio autom\u00e1tico.</li> <li><code>command</code>: sobreescritura del comando por defecto.</li> </ul> <p>M\u00e1s documentaci\u00f3n: <code>Compose file reference</code></p>"},{"location":"4_5_docker_compose/#ejemplo-completo-wordpress-mariadb","title":"Ejemplo completo: WordPress + MariaDB","text":"<p>El siguiente fichero <code>docker-compose.yml</code> define dos servicios: una base de datos MariaDB y una instancia de WordPress conectada a ella. Incluye vol\u00famenes persistentes, variables de entorno y mapeo de puertos.</p> <pre><code>version: \"3.9\"\n\nservices:\n  db:\n    image: mariadb:10.11.2\n    container_name: wordpress-db\n    volumes:\n      - db_data:/var/lib/mysql\n      - db_config:/etc/mysql/conf.d\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: somewordpress\n      MYSQL_DATABASE: wordpress\n      MYSQL_USER: wordpress\n      MYSQL_PASSWORD: wordpress\n    networks:\n      backend:\n        aliases:\n          - mariadb\n\n  wordpress:\n    image: wordpress:latest\n    container_name: wordpress-app\n    depends_on:\n      - db\n    ports:\n      - \"8000:80\"\n    volumes:\n      - wp_data:/var/www/html\n      - wp_plugins:/var/www/html/wp-content/plugins\n    restart: always\n    environment:\n      WORDPRESS_DB_HOST: mariadb:3306\n      WORDPRESS_DB_USER: wordpress\n      WORDPRESS_DB_PASSWORD: wordpress\n      WORDPRESS_DB_NAME: wordpress\n    networks:\n      frontend:\n      backend:\n\nvolumes:\n  db_data:\n  db_config:\n  wp_data:\n  wp_plugins:\n\nnetworks:\n  frontend:\n    driver: bridge\n  backend:\n    driver: bridge\n</code></pre> <p>Aspectos a tener en cuenta</p> <ul> <li> <p>Redes</p> <ul> <li>frontend: conecta WordPress con el exterior (puerto 8000).</li> <li>backend: conecta WordPress con la base de datos MariaDB.</li> <li>Separar redes mejora la seguridad y el aislamiento l\u00f3gico.</li> </ul> </li> <li> <p>Vol\u00famenes</p> <ul> <li><code>db_data</code>: almacena los datos persistentes de MariaDB.</li> <li><code>db_config</code>: permite a\u00f1adir configuraciones personalizadas a MariaDB.</li> <li><code>wp_data</code>: guarda el contenido principal de WordPress.</li> <li><code>wp_plugins</code>: separa los plugins para facilitar su gesti\u00f3n y copia.</li> </ul> </li> <li> <p>Alias de red</p> <p>Se define <code>mariadb</code> como alias en la red <code>backend</code>, lo que permite que WordPress se conecte usando <code>mariadb:3306</code> como host.</p> </li> <li> <p>Contenedores nombrados</p> <p>Se asignan nombres expl\u00edcitos (<code>wordpress-db</code>, <code>wordpress-app</code>) para facilitar la inspecci\u00f3n y depuraci\u00f3n.</p> </li> </ul> <p>Para lanzar el entorno:</p> <pre><code>docker compose up -d\n</code></pre> <p>Para detenerlo:</p> <pre><code>docker compose down\n</code></pre>"},{"location":"4_5_docker_compose/#comandos-principales-de-docker-compose","title":"Comandos principales de Docker Compose","text":"Comando Descripci\u00f3n <code>docker compose up -d</code> Lanza los servicios en segundo plano. <code>docker compose down</code> Detiene y elimina los servicios. <code>docker compose build</code> Construye las im\u00e1genes definidas en el fichero. <code>docker compose pull</code> Descarga las im\u00e1genes necesarias. <code>docker compose start</code> / <code>stop</code> Inicia o detiene servicios espec\u00edficos. <code>docker compose exec &lt;servicio&gt; &lt;comando&gt;</code> Ejecuta un comando dentro de un contenedor. <code>docker compose ps</code> Lista los contenedores activos del proyecto. <code>docker compose rm</code> Elimina contenedores detenidos. Comando Descripci\u00f3n Uso de ejemplo <code>docker-compose up</code> Crea y inicia contenedores <code>docker-compose up</code> <code>docker-compose up -d</code> Ejecutar en segundo plano <code>docker-compose up -d</code> <code>docker-compose exec</code> Ejecutar un comando en un contenedor en ejecuci\u00f3n <code>docker-compose exec web bash</code> <code>docker-compose build</code> Construir/reconstruir im\u00e1genes <code>docker-compose build</code> <code>docker-compose down</code> Detener y eliminar contenedores, redes, vol\u00famenes e im\u00e1genes <code>docker-compose down</code> <code>docker-compose logs -f</code> Ver y seguir los registros <code>docker-compose logs -f</code> <code>docker-compose ps</code> Listar contenedores en ejecuci\u00f3n <code>docker-compose ps</code> <code>docker-compose run</code> Ejecutar comandos de una sola vez (ignora el comando en el archivo Compose) <code>docker-compose run web python manage.py migrate</code> <code>docker-compose stop</code> Detener contenedores en ejecuci\u00f3n (se pueden reiniciar con start) <code>docker-compose stop</code> <code>docker-compose restart</code> Reiniciar servicios <code>docker-compose restart web</code> <code>docker-compose pull</code> Descargar im\u00e1genes de servicio <code>docker-compose pull</code> <code>docker-compose rm</code> Eliminar contenedores detenidos de servicios <code>docker-compose rm web</code> <code>docker-compose config</code> Validar y ver el archivo Compose <code>docker-compose config</code> <code>docker-compose up --scale web=3</code> Iniciar m\u00faltiples instancias de un servicio <code>docker-compose up --scale web=3</code> <p>M\u00e1s documentaci\u00f3n: <code>Compose CLI</code></p>"},{"location":"4_5_docker_compose/#ejemplos-con-redes-personalizadas-y-volumenes","title":"Ejemplos con redes personalizadas y vol\u00famenes","text":"<p>Ejemplo 1: NGINX + Redis con red personalizada y vol\u00famenes</p> <pre><code>version: '3.8'\n\nservices:\n  nginx:\n    image: nginx:latest\n    ports:\n      - \"8080:80\"\n    volumes:\n      - ./nginx/html:/usr/share/nginx/html\n    networks:\n      - appnet\n\n  redis:\n    image: redis:7\n    volumes:\n      - redis_data:/data\n    networks:\n      - appnet\n\nvolumes:\n  redis_data:\n\nnetworks:\n  appnet:\n    driver: bridge\n</code></pre> <ul> <li>nginx: sirve archivos est\u00e1ticos desde <code>./nginx/html</code> en el host.</li> <li>redis: almacena datos persistentes en el volumen <code>redis_data</code>.</li> <li>Ambos servicios est\u00e1n en la red <code>appnet</code>, lo que permite que se comuniquen por nombre de servicio (<code>redis</code>, <code>nginx</code>).</li> </ul> <p>Ejemplo 2: PostgreSQL + Adminer con vol\u00famenes y red</p> <pre><code>version: '3.8'\n\nservices:\n  db:\n    image: postgres:15\n    environment:\n      POSTGRES_USER: admin\n      POSTGRES_PASSWORD: secret\n      POSTGRES_DB: demo\n    volumes:\n      - pgdata:/var/lib/postgresql/data\n    networks:\n      - backend\n\n  adminer:\n    image: adminer\n    ports:\n      - \"8081:8080\"\n    networks:\n      - backend\n\nvolumes:\n  pgdata:\n\nnetworks:\n  backend:\n</code></pre> <ul> <li>PostgreSQL: base de datos con credenciales configuradas.</li> <li>Adminer: interfaz web para gestionar la base de datos.</li> <li>Ambos comparten la red <code>backend</code> y el volumen <code>pgdata</code> mantiene los datos persistentes.</li> </ul> <p>Ejemplo 3 Simulaci\u00f3n de XAMPP con Apache + PHP + MySQL</p> <pre><code>version: '3.8'\n\nservices:\n  apache:\n    image: webdevops/php-apache:latest\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./htdocs:/app\n    networks:\n      - xamppnet\n    depends_on:\n      - mysql\n\n  mysql:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: xamppdb\n      MYSQL_USER: xamppuser\n      MYSQL_PASSWORD: xampppass\n    volumes:\n      - mysql_data:/var/lib/mysql\n    networks:\n      - xamppnet\n\nvolumes:\n  mysql_data:\n\nnetworks:\n  xamppnet:\n</code></pre> <ul> <li>Apache + PHP: sirve archivos PHP desde <code>./htdocs</code>.</li> <li>MySQL: base de datos con credenciales configuradas.</li> <li>Ambos servicios est\u00e1n conectados por la red <code>xamppnet</code> y usan vol\u00famenes para persistencia.</li> </ul> <p>Ejemplo 4: node.js con postgre</p> <pre><code>version: '3.8'\nservices:\n  app:\n    image: node:14\n    volumes:\n      - ./app:/usr/src/app\n    networks:\n      - red-backend\n    working_dir: /usr/src/app\n    command: node index.js\n\n  db:\n    image: postgres\n    environment:\n      POSTGRES_PASSWORD: ejemplo123\n    volumes:\n      - datos-db:/var/lib/postgresql/data\n    networks:\n      - red-backend\n\nvolumes:\n  datos-db:\n\nnetworks:\n  red-backend:\n    driver: bridge\n</code></pre> <p>Explicaci\u00f3n del ejemplo - app: Servicio que ejecuta una aplicaci\u00f3n Node.js, montando el c\u00f3digo fuente desde el host. - db: Servicio de base de datos PostgreSQL con persistencia de datos usando vol\u00famenes. - volumes: Define un volumen llamado <code>datos-db</code> para guardar los datos de PostgreSQL. - networks: Crea una red personalizada <code>red-backend</code> para que los servicios se comuniquen de forma aislada.</p>"},{"location":"4_5_docker_compose/#repositorios-utiles-con-ejemplos","title":"Repositorios \u00fatiles con ejemplos","text":"<ul> <li>Ejemplos variados de docker-compose.yml</li> <li>Gu\u00eda r\u00e1pida con ejemplos anotados</li> <li>Uso de vol\u00famenes en Docker Compose</li> </ul>"},{"location":"5_1_introduccion_odoo/","title":"Introducci\u00f3n a Odoo.","text":""},{"location":"5_1_introduccion_odoo/#odoo","title":"Odoo","text":"<p>Odoo es un sistema ERP (Enterprise Resource Planning) de c\u00f3digo abierto que ofrece una suite completa de aplicaciones empresariales integradas. Desarrollado originalmente en 2005 bajo el nombre de TinyERP, posteriormente renombrado a OpenERP y finalmente a Odoo en 2014, se ha convertido en uno de los ERP m\u00e1s populares del mundo.</p> <p>Filosof\u00eda y Enfoque : Odoo se distingue por su filosof\u00eda de \"todo en uno\", ofreciendo una soluci\u00f3n integral donde todos los m\u00f3dulos est\u00e1n perfectamente integrados y comparten la misma base de datos. Esto elimina los problemas t\u00edpicos de sincronizaci\u00f3n entre diferentes sistemas que muchas empresas enfrentan.</p> <p>Datos relevantes</p> <ul> <li>M\u00e1s de 7 millones de usuarios en todo el mundo</li> <li>Disponible en m\u00e1s de 80 idiomas</li> <li>M\u00e1s de 30.000 aplicaciones en el Odoo App Store</li> <li>Comunidad activa con miles de desarrolladores</li> </ul>"},{"location":"5_1_introduccion_odoo/#caracteristicas-principales","title":"Caracter\u00edsticas Principales","text":""},{"location":"5_1_introduccion_odoo/#1-modularidad","title":"1. Modularidad","text":"<p>Odoo est\u00e1 construido sobre una arquitectura modular que permite a las empresas instalar \u00fanicamente las aplicaciones que necesitan. Esta modularidad facilita:</p> <ul> <li>Implementaci\u00f3n progresiva seg\u00fan las necesidades del negocio</li> <li>Escalabilidad horizontal a\u00f1adiendo m\u00f3dulos cuando sea necesario</li> <li>Personalizaci\u00f3n sin afectar al n\u00facleo del sistema</li> <li>Mantenimiento simplificado de funcionalidades espec\u00edficas</li> </ul>"},{"location":"5_1_introduccion_odoo/#2-codigo-abierto","title":"2. C\u00f3digo Abierto","text":"<p>Disponible bajo licencia LGPL v3 para la versi\u00f3n Community y con licencia propietaria para la versi\u00f3n Enterprise. Esto proporciona:</p> <ul> <li>Transparencia total del c\u00f3digo fuente</li> <li>Posibilidad de personalizaci\u00f3n sin restricciones</li> <li>Comunidad activa que contribuye constantemente</li> <li>Reducci\u00f3n de costes en licencias</li> <li>Independencia del proveedor</li> </ul>"},{"location":"5_1_introduccion_odoo/#3-tecnologia-web-moderna","title":"3. Tecnolog\u00eda Web Moderna","text":"<p>Construido con tecnolog\u00edas actuales y robustas:</p> <ul> <li>Backend: Python (framework propietario de Odoo)</li> <li>Frontend: JavaScript (OWL Framework - Odoo Web Library)</li> <li>Base de datos: PostgreSQL</li> <li>Arquitectura: MVC (Modelo-Vista-Controlador)</li> <li>Interfaz responsive y moderna</li> </ul>"},{"location":"5_1_introduccion_odoo/#4-integracion-total","title":"4. Integraci\u00f3n Total","text":"<p>Todos los m\u00f3dulos comparten:</p> <ul> <li>Una \u00fanica base de datos</li> <li>Misma interfaz de usuario</li> <li>Flujos de trabajo interconectados</li> <li>Informaci\u00f3n en tiempo real entre m\u00f3dulos</li> </ul>"},{"location":"5_1_introduccion_odoo/#ventajas-de-odoo","title":"Ventajas de Odoo","text":""},{"location":"5_1_introduccion_odoo/#flexibilidad-y-personalizacion","title":"Flexibilidad y Personalizaci\u00f3n","text":"<p>La arquitectura de Odoo permite personalizar cualquier aspecto del sistema sin modificar el c\u00f3digo base, mediante el uso de m\u00f3dulos de extensi\u00f3n que heredan y modifican funcionalidades existentes.</p>"},{"location":"5_1_introduccion_odoo/#interfaz-intuitiva","title":"Interfaz Intuitiva","text":"<p>La interfaz de usuario est\u00e1 dise\u00f1ada pensando en la experiencia del usuario:</p> <ul> <li>Dise\u00f1o limpio y moderno</li> <li>Navegaci\u00f3n intuitiva</li> <li>Vistas adaptadas a cada tipo de dato (lista, formulario, kanban, calendario, etc.)</li> <li>Responsive design para uso en m\u00f3viles y tablets</li> </ul>"},{"location":"5_1_introduccion_odoo/#coste-efectividad","title":"Coste-Efectividad","text":"<ul> <li>Versi\u00f3n Community completamente gratuita</li> <li>Versi\u00f3n Enterprise con precio por usuario competitivo</li> <li>Sin costes ocultos de infraestructura</li> <li>Posibilidad de hosting propio o en la nube</li> </ul>"},{"location":"5_1_introduccion_odoo/#escalabilidad","title":"Escalabilidad","text":"<p>Odoo crece con tu negocio:</p> <ul> <li>Desde peque\u00f1as empresas hasta grandes corporaciones</li> <li>Desde un \u00fanico m\u00f3dulo hasta implementaciones completas</li> <li>Soporta m\u00faltiples empresas y almacenes</li> <li>Infraestructura preparada para alto rendimiento</li> </ul>"},{"location":"5_1_introduccion_odoo/#comunidad-y-soporte","title":"Comunidad y Soporte","text":"<ul> <li>Amplia documentaci\u00f3n oficial</li> <li>Foros activos y comunidad de desarrolladores</li> <li>Odoo Experience (conferencia anual)</li> <li>Soporte profesional disponible</li> <li>Miles de partners certificados</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-principales-de-odoo","title":"M\u00f3dulos Principales de Odoo","text":""},{"location":"5_1_introduccion_odoo/#modulos-de-gestion-comercial","title":"M\u00f3dulos de Gesti\u00f3n Comercial","text":""},{"location":"5_1_introduccion_odoo/#ventas-sales","title":"Ventas (Sales)","text":"<p>El m\u00f3dulo de ventas gestiona todo el ciclo comercial:</p> <ul> <li>Creaci\u00f3n y seguimiento de presupuestos</li> <li>Conversi\u00f3n autom\u00e1tica a pedidos de venta</li> <li>Gesti\u00f3n de productos y listas de precios</li> <li>Portal del cliente para seguimiento online</li> <li>Firma electr\u00f3nica de documentos</li> <li>Integraci\u00f3n con CRM, inventario y facturaci\u00f3n</li> </ul> M\u00f3dulo de Ventas. Presupuesto."},{"location":"5_1_introduccion_odoo/#crm-customer-relationship-management","title":"CRM (Customer Relationship Management)","text":"<p>Gesti\u00f3n completa de la relaci\u00f3n con clientes:</p> <ul> <li>Pipeline visual de oportunidades (kanban)</li> <li>Seguimiento de leads y prospecci\u00f3n</li> <li>Gesti\u00f3n de actividades y llamadas</li> <li>Automatizaci\u00f3n de acciones</li> <li>An\u00e1lisis de rendimiento del equipo comercial</li> <li>Integraci\u00f3n con email y calendario</li> </ul>"},{"location":"5_1_introduccion_odoo/#compras-purchase","title":"Compras (Purchase)","text":"<p>Control total del proceso de aprovisionamiento:</p> <ul> <li>Solicitudes de presupuesto a proveedores</li> <li>Gesti\u00f3n de \u00f3rdenes de compra</li> <li>Control de recepciones</li> <li>Gesti\u00f3n de facturaci\u00f3n de proveedores</li> <li>An\u00e1lisis de rendimiento de proveedores</li> <li>Acuerdos de compra y contratos</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-de-gestion-financiera","title":"M\u00f3dulos de Gesti\u00f3n Financiera","text":""},{"location":"5_1_introduccion_odoo/#contabilidad-accounting","title":"Contabilidad (Accounting)","text":"<p>Sistema contable completo y flexible:</p> <ul> <li>Contabilidad general y anal\u00edtica</li> <li>Gesti\u00f3n de clientes y proveedores</li> <li>Conciliaci\u00f3n bancaria automatizada</li> <li>Multi-moneda y multi-compa\u00f1\u00eda</li> <li>Informes financieros personalizables</li> <li>Cumplimiento normativo por pa\u00edses</li> <li>Gesti\u00f3n de activos fijos</li> </ul> Contabilidad en Odoo. Cuenta de resultados."},{"location":"5_1_introduccion_odoo/#facturacion-invoicing","title":"Facturaci\u00f3n (Invoicing)","text":"<p>Emisi\u00f3n y gesti\u00f3n de facturas:</p> <ul> <li>Facturaci\u00f3n autom\u00e1tica desde ventas o compras</li> <li>Plantillas personalizables</li> <li>Gesti\u00f3n de pagos y cobros</li> <li>Facturas recurrentes (suscripciones)</li> <li>Portal del cliente</li> <li>Seguimiento de estado de facturas</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-de-inventario-y-logistica","title":"M\u00f3dulos de Inventario y Log\u00edstica","text":""},{"location":"5_1_introduccion_odoo/#inventario-inventory","title":"Inventario (Inventory)","text":"<p>Gesti\u00f3n avanzada de stock:</p> <ul> <li>Control de stock en tiempo real</li> <li>M\u00faltiples almacenes y ubicaciones</li> <li>Trazabilidad completa (n\u00fameros de serie/lote)</li> <li>Reglas de reabastecimiento autom\u00e1tico</li> <li>Valoraci\u00f3n de inventario (FIFO, LIFO, Promedio)</li> <li>Operaciones de picking, packing y shipping</li> <li>Gesti\u00f3n de rutas log\u00edsticas</li> </ul>"},{"location":"5_1_introduccion_odoo/#fabricacion-manufacturing","title":"Fabricaci\u00f3n (Manufacturing)","text":"<p>MRP completo para empresas productoras:</p> <ul> <li>Listas de materiales (BoM) multinivel</li> <li>\u00d3rdenes de fabricaci\u00f3n</li> <li>Planificaci\u00f3n de la producci\u00f3n</li> <li>Control de calidad</li> <li>Mantenimiento de equipos</li> <li>Gesti\u00f3n de centros de trabajo</li> <li>Subcontrataci\u00f3n</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-de-recursos-humanos","title":"M\u00f3dulos de Recursos Humanos","text":""},{"location":"5_1_introduccion_odoo/#empleados-employees","title":"Empleados (Employees)","text":"<p>Gesti\u00f3n del personal:</p> <ul> <li>Ficha completa de empleados</li> <li>Organigrama de la empresa</li> <li>Gesti\u00f3n documental</li> <li>Evaluaciones de desempe\u00f1o</li> <li>Directorio corporativo</li> </ul>"},{"location":"5_1_introduccion_odoo/#ausencias-time-off","title":"Ausencias (Time Off)","text":"<p>Control de vacaciones y ausencias:</p> <ul> <li>Tipos de ausencias configurables</li> <li>Solicitudes y aprobaciones</li> <li>Calendario de ausencias</li> <li>Acumulaci\u00f3n autom\u00e1tica de d\u00edas</li> <li>Informes de absentismo</li> </ul>"},{"location":"5_1_introduccion_odoo/#asistencia-attendance","title":"Asistencia (Attendance)","text":"<p>Registro de jornada laboral:</p> <ul> <li>Check-in/Check-out desde kiosko o app</li> <li>Control de horas trabajadas</li> <li>Gesti\u00f3n de horas extras</li> <li>Integraci\u00f3n con n\u00f3minas</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-de-gestion-de-proyectos","title":"M\u00f3dulos de Gesti\u00f3n de Proyectos","text":""},{"location":"5_1_introduccion_odoo/#proyectos-project","title":"Proyectos (Project)","text":"<p>Gesti\u00f3n completa de proyectos:</p> <ul> <li>Proyectos y tareas con subtareas</li> <li>Vistas kanban, lista, gantt y calendario</li> <li>Asignaci\u00f3n de recursos</li> <li>Seguimiento de tiempos</li> <li>Automatizaci\u00f3n de flujos de trabajo</li> <li>Portal del cliente para seguimiento</li> <li>An\u00e1lisis de rentabilidad</li> </ul> Vista kanban de un proyecto con diferentes etapas y tareas. <p>Imagen sugerida</p>"},{"location":"5_1_introduccion_odoo/#partes-de-horas-timesheet","title":"Partes de Horas (Timesheet)","text":"<p>Control de imputaci\u00f3n de tiempos:</p> <ul> <li>Registro de horas por proyecto/tarea</li> <li>Integraci\u00f3n con facturaci\u00f3n</li> <li>An\u00e1lisis de productividad</li> <li>Facturaci\u00f3n basada en tiempo</li> <li>Comparaci\u00f3n planificado vs. real</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-de-productividad","title":"M\u00f3dulos de Productividad","text":""},{"location":"5_1_introduccion_odoo/#documentos-documents","title":"Documentos (Documents)","text":"<p>Gestor documental integrado:</p> <ul> <li>Organizaci\u00f3n por carpetas y etiquetas</li> <li>Automatizaci\u00f3n de flujos documentales</li> <li>OCR para procesamiento autom\u00e1tico</li> <li>Versionado de documentos</li> <li>Compartici\u00f3n segura</li> </ul>"},{"location":"5_1_introduccion_odoo/#sitio-web-website","title":"Sitio Web (Website)","text":"<p>Constructor de sitios web integrado:</p> <ul> <li>Editor drag &amp; drop</li> <li>Responsive design autom\u00e1tico</li> <li>SEO optimizado</li> <li>Integraci\u00f3n con eCommerce</li> <li>Blog y gesti\u00f3n de contenidos</li> <li>Formularios personalizables</li> </ul>"},{"location":"5_1_introduccion_odoo/#ecommerce","title":"eCommerce","text":"<p>Tienda online integrada:</p> <ul> <li>Cat\u00e1logo de productos sincronizado</li> <li>Carrito de compra y checkout</li> <li>M\u00faltiples m\u00e9todos de pago</li> <li>Gesti\u00f3n de env\u00edos</li> <li>Cross-selling y up-selling</li> <li>Sincronizaci\u00f3n total con inventario y contabilidad</li> </ul>"},{"location":"5_1_introduccion_odoo/#modulos-de-comunicacion","title":"M\u00f3dulos de Comunicaci\u00f3n","text":""},{"location":"5_1_introduccion_odoo/#conversaciones-discuss","title":"Conversaciones (Discuss)","text":"<p>Sistema de mensajer\u00eda interna:</p> <ul> <li>Chat individual y grupal</li> <li>Canales p\u00fablicos y privados</li> <li>Videoconferencias integradas</li> <li>Historial de conversaciones</li> <li>Notificaciones inteligentes</li> <li>Integraci\u00f3n con email</li> </ul>"},{"location":"5_1_introduccion_odoo/#calendario-calendar","title":"Calendario (Calendar)","text":"<p>Gesti\u00f3n de agenda:</p> <ul> <li>Calendarios personales y compartidos</li> <li>Sincronizaci\u00f3n con Google Calendar</li> <li>Invitaciones a reuniones</li> <li>Recordatorios autom\u00e1ticos</li> <li>Vista de disponibilidad del equipo</li> </ul>"},{"location":"5_1_introduccion_odoo/#arquitectura-de-odoo","title":"Arquitectura de Odoo","text":""},{"location":"5_1_introduccion_odoo/#estructura-de-tres-capas","title":"Estructura de Tres Capas","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Capa de Presentaci\u00f3n        \u2502\n\u2502   (Cliente Web - JavaScript)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2195\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Capa de Negocio            \u2502\n\u2502      (Servidor - Python)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2195\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Capa de Datos              \u2502\n\u2502     (PostgreSQL Database)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"5_1_introduccion_odoo/#componentes-clave","title":"Componentes Clave","text":"<p>ORM (Object-Relational Mapping)</p> <ul> <li>Abstracci\u00f3n de la base de datos</li> <li>Definici\u00f3n de modelos mediante clases Python</li> <li>Gesti\u00f3n autom\u00e1tica de relaciones entre modelos</li> <li>Validaciones y constraints</li> </ul> <p>Motor de Vistas</p> <ul> <li>XML para definici\u00f3n de vistas</li> <li>M\u00faltiples tipos: form, tree, kanban, calendar, pivot, graph</li> <li>QWeb para templates</li> <li>Herencia de vistas para personalizaci\u00f3n</li> </ul> <p>Sistema de Permisos</p> <ul> <li>Control de acceso basado en roles</li> <li>Reglas de registro (record rules)</li> <li>Permisos a nivel de campo</li> <li>Multi-compa\u00f1\u00eda</li> </ul>"},{"location":"5_1_introduccion_odoo/#ediciones-de-odoo","title":"Ediciones de Odoo","text":""},{"location":"5_1_introduccion_odoo/#community-edition","title":"Community Edition","text":"<ul> <li>Licencia: LGPL v3 (c\u00f3digo abierto)</li> <li>Coste: Gratuito</li> <li>Caracter\u00edsticas:<ul> <li>M\u00f3dulos base completos</li> <li>Auto-hosting requerido</li> <li>Soporte de la comunidad</li> <li>Ideal para peque\u00f1as empresas o desarrollo</li> </ul> </li> </ul>"},{"location":"5_1_introduccion_odoo/#enterprise-edition","title":"Enterprise Edition","text":"<ul> <li>Licencia: Propietaria (Odoo S.A.)</li> <li>Coste: Por usuario/mes (aprox. 20-30\u20ac)</li> <li>Caracter\u00edsticas adicionales:<ul> <li>M\u00f3dulos exclusivos (Estudio, Firma, IoT, etc.)</li> <li>Interfaz mejorada</li> <li>Hosting en Odoo.sh opcional</li> <li>Soporte oficial</li> <li>Actualizaciones autom\u00e1ticas</li> </ul> </li> </ul> <p>Diferencias clave</p> <p>La versi\u00f3n Enterprise incluye m\u00f3dulos exclusivos y mejoras de interfaz, pero ambas versiones comparten el n\u00facleo funcional. Para el desarrollo de m\u00f3dulos personalizados, las diferencias son m\u00ednimas.</p>"},{"location":"5_1_introduccion_odoo/#casos-de-uso","title":"Casos de Uso","text":"<p>Odoo es vers\u00e1til y se adapta a m\u00faltiples sectores:</p> <ul> <li>Comercio: Tiendas online, retail, distribuci\u00f3n</li> <li>Servicios: Consultor\u00edas, agencias, estudios profesionales</li> <li>Industria: Manufactura, log\u00edstica, producci\u00f3n</li> <li>Educaci\u00f3n: Centros educativos, academias</li> <li>Salud: Cl\u00ednicas, centros m\u00e9dicos</li> <li>Hosteler\u00eda: Restaurantes, hoteles</li> <li>Organizaciones: ONGs, asociaciones</li> </ul>"},{"location":"5_1_introduccion_odoo/#instalar-odoo","title":"Instalar <code>Odoo</code>","text":"<p><code>Odoo</code> puede instalarse en cualquier sistema operativo. Sin embargo, se desarrolla pensando en Ubuntu o Debian y es el sistema en el que vamos a trabajar.</p> <p><code>Odoo</code>, en esencia, es un servidor web hecho en Python que se conecta con una base de datos PostgreSQL. Hay muchas maneras de instalar <code>Odoo</code>, desde las m\u00e1s avanzadas, que son descargar por git el repositorio y hacer que arranque al inicio, hasta las m\u00e1s simples, que son desplegar un docker con todo funcionando.</p>"},{"location":"5_1_introduccion_odoo/#opciones-para-la-instalacion-de-odoo","title":"Opciones para la instalaci\u00f3n de <code>Odoo</code>","text":"<p>Cada empresa tiene unas necesidades y cada necesidad se puede cubrir de diferente forma.</p> <p>Para el caso de Odoo tenemos diferentes formas de instalarlo, o en un servidor dedicado o mediante virtualizaci\u00f3n o utilizando las diferentes opciones que nos encontramos en la nube.</p> <p>Vamos a hacer una comparativa no rigurosa de las distintas opciones:</p> Lugar Tecnolog\u00eda Prop\u00f3sito Servidor local Directamente instalado en Ubuntu Server En funci\u00f3n de la potencia, capacidad y seguridad del servidor, puede servir para cualquier empresa. Instalar directamente da menos flexibilidad, pero aprovecha toda la potencia de la m\u00e1quina y la compatibilidad con todo. La empresa tiene control total de los datos y es responsable de la seguridad. Tambi\u00e9n controla los gastos. Es poco escalable y migrable. Servidor local En Docker, Proxmox o VirtualBox Igual que la opci\u00f3n anterior, pero con m\u00e1s posibilidades de ser escalable y migrable. Permite compartir mejor los recursos de la m\u00e1quina con otros servicios. En la nube VPS No es necesario pensar en la seguridad f\u00edsica, pero s\u00ed en la l\u00f3gica. Es escalable si el proveedor permite ampliar la m\u00e1quina. El precio suele estar predeterminado, pero a la larga es m\u00e1s caro que los servidores propios. En el caso de proveedores principales como AWS, Azure, Google Cloud... el precio es por uso y es peligroso no controlarlo. En la nube SAAS (Odoo.sh) Ya no es necesario preocuparse tanto por la seguridad l\u00f3gica, solo por los usuarios de Odoo. Es escalable, pero mucho m\u00e1s caro. No es personalizable. En la nube PAAS (Render, Railway, Fly.io...) Cada servicio tiene sus caracter\u00edsticas, pero combinan las ventajas de Docker en cuanto a personalizaci\u00f3n con una interfaz muy c\u00f3moda para DevOps y CI/CD. El despliegue se trata como si fuera c\u00f3digo. <p>La respuesta sigue sin ser clara. Cada empresa tiene sus posibilidades y necesidades. </p> <p>Una microempresa con pocos ordenadores y solo necesidad de intranet puede instalar en un Docker en un servidor de bajo consumo con copias de seguridad peri\u00f3dicas. Una empresa peque\u00f1a puede desplegar en VPS o PAAS con precios predefinidos y controlados e ir aumentando seg\u00fan lo necesite. </p> <p>Una empresa m\u00e1s grande puede optar por nubes m\u00e1s de bajo nivel (IAAS) o por una instalaci\u00f3n on-premise m\u00e1s seria con alta disponibilidad en la propia empresa. </p> <p>Un SAAS puede ser \u00fatil para empresas que no necesitan ninguna personalizaci\u00f3n. </p> <p>Si el negocio es ofrecer el propio servicio de Odoo, se puede optar por contratar un IAAS y, sobre \u00e9l, dar un servicio SAAS con personalizaciones a medida y cobrar por el servicio y por las personalizaciones.</p> <p>Si estamos en una empresa que no puede depender de tener o no red por el sistema productivo, entonces eliminaremos todas las opciones de la nube.</p>"},{"location":"5_1_introduccion_odoo/#referencias-y-recursos","title":"Referencias y Recursos","text":"<ul> <li>V\u00eddeo de instalar Odoo manualmente</li> <li>V\u00eddeo de configurar Odoo como servicio</li> <li> <p>V\u00eddeo de Copias de seguridad</p> </li> <li> <p>Documentaci\u00f3n oficial: https://www.odoo.com/documentation</p> </li> <li>C\u00f3digo fuente: https://github.com/odoo/odoo</li> <li>Foros de la comunidad: https://www.odoo.com/forum</li> <li>Odoo Apps Store: https://apps.odoo.com</li> <li>Tutoriales: https://www.odoo.com/slides</li> <li>Manual technical training Odoo: https://github.com/odoo/technical-training/tree/12.0-99-sysadmin</li> <li>V\u00eddeo de instalar Odoo manualmente</li> <li>V\u00eddeo de configurar Odoo como servicio</li> <li>V\u00eddeo de Copias de seguridad</li> </ul>"},{"location":"5_2_instalacion_odoo/","title":"Instalaci\u00f3n de Odoo","text":"<p>En este curso trabajaremos con Odoo desplegado mediante Docker Compose. Esta aproximaci\u00f3n nos proporciona m\u00faltiples ventajas para el desarrollo:</p> <ul> <li>Entorno consistente: Todos trabajamos con la misma configuraci\u00f3n</li> <li>F\u00e1cil compartici\u00f3n: Podemos compartir nuestro trabajo f\u00e1cilmente</li> <li>Aislamiento: No afecta al sistema operativo principal</li> <li>Portabilidad: Funciona igual en cualquier sistema operativo</li> <li>Copias de seguridad sencillas: Los datos est\u00e1n organizados en carpetas locales</li> </ul> <p>\u00bfPor qu\u00e9 Docker Compose?</p> <p>Docker Compose nos permite definir toda la infraestructura de Odoo (servidor web + base de datos) en un \u00fanico archivo de configuraci\u00f3n, facilitando enormemente su gesti\u00f3n y despliegue.</p>"},{"location":"5_2_instalacion_odoo/#metodos-de-instalacion","title":"M\u00e9todos de Instalaci\u00f3n","text":"<p>Existen varios m\u00e9todos para instalar Odoo:</p>"},{"location":"5_2_instalacion_odoo/#1-instalacion-nativa-en-ubuntudebian","title":"1. Instalaci\u00f3n Nativa en Ubuntu/Debian","text":"<p>Odoo proporciona repositorios oficiales llamados Nightly que permiten instalar el sistema directamente en Ubuntu o Debian. Esta opci\u00f3n es v\u00e1lida para servidores en producci\u00f3n pero no la usaremos en el curso por las siguientes razones:</p> <ul> <li>Requiere configuraci\u00f3n manual de dependencias</li> <li>Dificulta compartir el trabajo entre compa\u00f1eros</li> <li>Problemas de compatibilidad entre diferentes sistemas</li> <li>Complica las copias de seguridad</li> </ul> <p>Instalaci\u00f3n nativa - Solo referencia</p> <p>Si en el futuro necesitas instalar Odoo de forma nativa, puedes consultar el Anexo: Instalaci\u00f3n en Ubuntu al final de este documento.</p>"},{"location":"5_2_instalacion_odoo/#2-docker-compose","title":"2. Docker Compose","text":"<p>Este es el m\u00e9todo que utilizaremos en clase. Docker Compose nos permite:</p> <ul> <li>Desplegar Odoo y PostgreSQL con un \u00fanico comando</li> <li>Tener todos los datos organizados en carpetas locales</li> <li>Compartir proyectos f\u00e1cilmente (solo compartir carpetas)</li> <li>Realizar copias de seguridad simplemente copiando directorios</li> <li>Trabajar en modo desarrollo con recarga autom\u00e1tica</li> </ul>"},{"location":"5_2_instalacion_odoo/#instalacion-con-docker-compose","title":"Instalaci\u00f3n con Docker Compose","text":""},{"location":"5_2_instalacion_odoo/#prerrequisitos","title":"Prerrequisitos","text":"<p>Antes de comenzar, aseg\u00farate de tener instalado:</p> <ul> <li>Docker: Gu\u00eda de instalaci\u00f3n oficial</li> <li>Docker Compose: Normalmente viene incluido con Docker Desktop</li> <li>Editor de c\u00f3digo: Recomendamos Visual Studio Code</li> </ul> <p>Verifica la instalaci\u00f3n</p> <p>Comprueba que Docker est\u00e1 correctamente instalado ejecutando: </p><pre><code>docker --version\ndocker compose version\n</code></pre><p></p>"},{"location":"5_2_instalacion_odoo/#estructura-del-proyecto","title":"Estructura del Proyecto","text":"<p>Vamos a crear una estructura de carpetas organizada para nuestro entorno de desarrollo de Odoo:</p> <pre><code>proyecto-odoo/\n\u251c\u2500\u2500 docker-compose.yml          # Configuraci\u00f3n de los contenedores\n\u251c\u2500\u2500 data/\n\u2502   \u251c\u2500\u2500 addons/                 # Nuestros m\u00f3dulos personalizados\n\u2502   \u251c\u2500\u2500 odoo_config/           # Configuraci\u00f3n de Odoo\n\u2502   \u2502   \u2514\u2500\u2500 odoo.conf          # Archivo de configuraci\u00f3n principal\n\u2502   \u251c\u2500\u2500 odoo/\n\u2502   \u2502   \u251c\u2500\u2500 filestore/         # Archivos subidos (im\u00e1genes, documentos)\n\u2502   \u2502   \u2514\u2500\u2500 sessions/          # Sesiones de usuario\n\u2502   \u2514\u2500\u2500 backups/               # Copias de seguridad de la BD\n</code></pre>"},{"location":"5_2_instalacion_odoo/#paso-1-crear-la-estructura-de-carpetas","title":"Paso 1: Crear la Estructura de Carpetas","text":"<p>Crea una carpeta para tu proyecto y la estructura b\u00e1sica:</p> <pre><code>mkdir proyecto-odoo\ncd proyecto-odoo\nmkdir -p data/addons data/odoo_config data/odoo/filestore data/odoo/sessions data/backups\n</code></pre>"},{"location":"5_2_instalacion_odoo/#paso-2-crear-el-archivo-docker-composeyml","title":"Paso 2: Crear el archivo docker-compose.yml","text":"<p>Crea un archivo llamado <code>docker-compose.yml</code> en la ra\u00edz del proyecto con el siguiente contenido:</p> <pre><code>services:\n  # Servicio principal: Odoo\n  odoo_dev_dam:\n    image: odoo:19                    # Versi\u00f3n de Odoo a utilizar\n    container_name: odoo_dev_dam\n    depends_on:\n      - postgres_dev_dam              # Espera a que PostgreSQL est\u00e9 listo\n\n    ports:\n      - \"8069:8069\"                   # Puerto para acceder: http://localhost:8069\n\n    volumes:\n      # Carpetas locales mapeadas al contenedor\n      - ./data/addons:/mnt/extra-addons\n      - ./data/odoo_config:/etc/odoo\n      - ./data/odoo/filestore:/var/lib/odoo/filestore\n      - ./data/odoo/sessions:/var/lib/odoo/sessions\n\n    user: root                        # Necesario para desarrollo\n\n    environment:\n      - HOST=postgres_dev_dam         # Nombre del servicio de base de datos\n      - USER=odoo\n      - PASSWORD=odoo\n\n    # Modo desarrollo: recarga autom\u00e1tica de cambios\n    command: -c /etc/odoo/odoo.conf --dev=all\n\n    networks:\n      - network_dev_dam\n\n  # Servicio de base de datos: PostgreSQL\n  postgres_dev_dam:\n    image: postgres:15\n    container_name: postgres_dev_dam\n\n    environment:\n      - POSTGRES_USER=odoo\n      - POSTGRES_PASSWORD=odoo\n      - POSTGRES_DB=postgres\n\n    volumes:\n      - postgres_data_volume:/var/lib/postgresql/data\n      - ./data/backups:/backups       # Para copias de seguridad\n\n    networks:\n      - network_dev_dam\n\n# Definici\u00f3n de vol\u00famenes persistentes\nvolumes:\n  postgres_data_volume:               # Volumen para los datos de PostgreSQL\n\n# Definici\u00f3n de red interna\nnetworks:\n  network_dev_dam:\n    driver: bridge\n</code></pre> <p>Explicaci\u00f3n de la configuraci\u00f3n</p> <ul> <li>odoo_dev_dam: Contenedor con el servidor Odoo</li> <li>postgres_dev_dam: Contenedor con la base de datos PostgreSQL</li> <li>volumes: Carpetas compartidas entre tu sistema y los contenedores</li> <li>networks: Red interna para comunicaci\u00f3n entre contenedores</li> <li>--dev=all: Activa el modo desarrollo con recarga autom\u00e1tica</li> </ul>"},{"location":"5_2_instalacion_odoo/#paso-3-crear-el-archivo-de-configuracion","title":"Paso 3: Crear el Archivo de Configuraci\u00f3n","text":"<p>Necesitamos crear el archivo de configuraci\u00f3n personalizado de Odoo. Crea el archivo <code>odoo.conf</code> en la carpeta <code>data/odoo_config/</code>:</p> <pre><code>nano data/odoo_config/odoo.conf\n</code></pre> <p>O cr\u00e9alo con tu editor favorito y pega el siguiente contenido:</p> <pre><code>[options]\n; ------------------------------------------------------------------\n;  Clave Maestra: \u00a1CAMBIA ESTO POR UNA CONTRASE\u00d1A SEGURA!\n; ------------------------------------------------------------------\nadmin_passwd = Clave_Maestra_Segura_1234\n\n; ------------------------------------------------------------------\n;  Rutas de Addons\n; ------------------------------------------------------------------\n; Esta es la l\u00ednea m\u00e1s importante. \n; 1. Le dice a Odoo que mire en /mnt/extra-addons (donde tu .yml monta ./data/addons)\n; 2. Le dice que tambi\u00e9n mire en los addons oficiales.\naddons_path = /mnt/extra-addons, /usr/lib/python3/dist-packages/odoo/addons\n\n; ------------------------------------------------------------------\n;  Conexi\u00f3n a la Base de Datos\n; ------------------------------------------------------------------\n; Estos valores DEBEN coincidir con tu docker-compose.yml\ndb_host = postgres_dev_dam\ndb_user = odoo\ndb_password = odoo\ndb_port = 5432\n\n; ------------------------------------------------------------------\n;  Rutas de Datos (Alineadas con tus vol\u00famenes)\n; ------------------------------------------------------------------\n; Le decimos a Odoo cu\u00e1l es su directorio de datos principal\ndata_dir = /var/lib/odoo\n\n; ------------------------------------------------------------------\n;  Opciones de Desarrollo (Opcionales pero \u00fatiles)\n; ------------------------------------------------------------------\n; Para que los cambios en vistas (XML) se apliquen sin reiniciar\ndev_mode = xml\n\n; Si quieres que Odoo instale/actualice \"mi_modulo\" al arrancar:\n; init = mi_modulo\n; Si quieres que actualice todos los m\u00f3dulos de tu carpeta de addons:\n; upgrade = all\n</code></pre> <p>Importante: Clave Maestra</p> <p>La clave maestra (<code>admin_passwd</code>) protege las operaciones cr\u00edticas como crear, duplicar o eliminar bases de datos. C\u00e1mbiala por una contrase\u00f1a segura.</p> <p>Explicaci\u00f3n de la configuraci\u00f3n</p> <ul> <li>admin_passwd: Contrase\u00f1a maestra para gesti\u00f3n de bases de datos</li> <li>addons_path: Rutas donde Odoo busca m\u00f3dulos (primero personalizados, luego oficiales)</li> <li>db_host/db_user/db_password: Credenciales de PostgreSQL (coinciden con docker-compose.yml)</li> <li>data_dir: Directorio principal de datos de Odoo</li> <li>dev_mode: Activa recarga autom\u00e1tica de cambios en XML</li> </ul>"},{"location":"5_2_instalacion_odoo/#paso-5-verificar-que-todo-funciona","title":"Paso 5: Verificar que Todo Funciona","text":"<p>Comprueba que los contenedores est\u00e1n en ejecuci\u00f3n:</p> <pre><code>docker compose ps -d\n</code></pre> <p>Deber\u00edas ver algo similar a:</p> Arranque contenedores Odoo."},{"location":"5_2_instalacion_odoo/#paso-6-acceder-a-odoo","title":"Paso 6: Acceder a Odoo","text":"<p>Abre tu navegador y ve a: http://localhost:8069</p> Primer arranque de Odoo. <p>Deber\u00edas ver la pantalla de creaci\u00f3n de base de datos de Odoo.</p> <p>Primera configuraci\u00f3n</p> <ul> <li>Master Password: Por defecto es <code>admin</code>, c\u00e1mbiala si lo deseas, por ejemplo la que tienes en el fichero <code>odoo.conf</code></li> <li>Database Name: Elige un nombre descriptivo (ej: <code>proyecto_dam</code>)</li> <li>Email: Tu email (usuario administrador)</li> <li>Password: Contrase\u00f1a para el usuario admin</li> <li>Language: Espa\u00f1ol</li> <li>Country: Spain</li> <li>Demo data: \u2705 Marca esta opci\u00f3n para tener datos de ejemplo. Esta opci\u00f3n es muy \u00fatil para hacer pruebas, puesto que Odoo nos carga datos de demostraci\u00f3n. Si hacemos una instalaci\u00f3n para producci\u00f3n no es aconsejable activar esta opci\u00f3n.</li> </ul>"},{"location":"5_2_instalacion_odoo/#modo-desarrollo-en-odoo","title":"Modo Desarrollo en Odoo","text":"<p>La configuraci\u00f3n que hemos preparado incluye el par\u00e1metro <code>--dev=all</code>, que activa m\u00faltiples funcionalidades para desarrollo:</p>"},{"location":"5_2_instalacion_odoo/#caracteristicas-del-modo-desarrollo","title":"Caracter\u00edsticas del Modo Desarrollo","text":"Opci\u00f3n Descripci\u00f3n all Activa todas las funcionalidades de desarrollo xml Carga plantillas QWeb desde archivos XML en lugar de BD reload Reinicia el servidor al detectar cambios en archivos Python qweb Permite depuraci\u00f3n de plantillas QWeb pdb Activa depurador Python en caso de error werkzeug Muestra traza completa de errores en el navegador <p>Solo para desarrollo</p> <p>Nunca uses <code>--dev=all</code> en producci\u00f3n. Estas opciones reducen el rendimiento y exponen informaci\u00f3n sensible de depuraci\u00f3n.</p>"},{"location":"5_2_instalacion_odoo/#limitaciones-del-modo-devall","title":"Limitaciones del Modo --dev=all","text":"<p>El modo desarrollo tiene algunas limitaciones importantes:</p> <ul> <li>\u274c No crea nuevos modelos o campos autom\u00e1ticamente</li> <li>\u274c No actualiza todos los XML, solo vistas ya registradas</li> <li>\u2705 S\u00ed recarga c\u00f3digo Python autom\u00e1ticamente</li> <li>\u2705 S\u00ed actualiza contenido de vistas existentes</li> </ul> <p>Para crear nuevos modelos o campos, necesitar\u00e1s actualizar el m\u00f3dulo manualmente (lo veremos m\u00e1s adelante).</p>"},{"location":"5_2_instalacion_odoo/#trabajando-con-el-sistema","title":"Trabajando con el Sistema","text":""},{"location":"5_2_instalacion_odoo/#ver-los-logs","title":"Ver los Logs","text":"<p>Para ver los mensajes de log de Odoo en tiempo real:</p> <pre><code>docker logs odoo_dev_dam -f\n</code></pre> <p>El par\u00e1metro <code>-f</code> (follow) mantiene el log abierto mostrando mensajes nuevos.</p> <p>Para salir, pulsa <code>Ctrl+C</code>.</p>"},{"location":"5_2_instalacion_odoo/#parar-el-sistema","title":"Parar el Sistema","text":"<p>Para parar simplemente</p> <p></p><pre><code>docker compose stop\n</code></pre> Esto detiene los contenedores sin eliminar nada.<p></p> <p>Si hacemos </p> <pre><code>docker compose down\n</code></pre> <p>Esto para y elimina los contenedores, pero mantiene los datos en los vol\u00famenes.</p>"},{"location":"5_2_instalacion_odoo/#reiniciar-odoo","title":"Reiniciar Odoo","text":"<p>Si lo hemos parado anteriormente mediante <code>stop</code>, ahora simplemente hacemos</p> <pre><code>docker compose start odoo_dev_dam\n</code></pre> <p>Si en un momento determinado necesitmos reiniciar Odoo (sin tocar la base de datos):</p> <pre><code>docker compose restart odoo_dev_dam\n</code></pre>"},{"location":"5_2_instalacion_odoo/#reiniciar-todo","title":"Reiniciar Todo","text":"<p>Para reiniciar completamente el sistema:</p> <pre><code>docker compose down -v  \ndocker compose up -d\n</code></pre> <ul> <li><code>-v</code> elimina los vol\u00famenes de los contenedores, o sea, todos los datos.</li> </ul>"},{"location":"5_2_instalacion_odoo/#acceder-a-la-base-de-datos","title":"Acceder a la Base de Datos","text":"<p>Si necesitas ejecutar comandos SQL directamente en PostgreSQL:</p> <pre><code>docker exec -it postgres_dev_dam psql -U odoo -d postgres\n</code></pre> <p>Comandos \u00fatiles de PostgreSQL:</p> <pre><code>\\l                          -- Listar bases de datos\n\\c nombre_base_datos        -- Conectar a una base de datos\n\\dt                         -- Listar tablas\n\\q                          -- Salir\n</code></pre> Prueba de conexi\u00f3n con la base de datos PostgreSQL."},{"location":"5_2_instalacion_odoo/#listar-ips-de-los-contenedores","title":"Listar IPs de los Contenedores","text":"<p>Para ver las direcciones IP de los contenedores:</p> <pre><code>docker ps -q | xargs -n 1 docker inspect --format '{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'\n</code></pre> Salida del comando mostrando IPs de contenedores."},{"location":"5_2_instalacion_odoo/#copias-de-seguridad-y-compartir-trabajo","title":"Copias de Seguridad y Compartir Trabajo","text":"<p>Una de las grandes ventajas de nuestra configuraci\u00f3n es la facilidad para realizar copias de seguridad y compartir el trabajo.</p>"},{"location":"5_2_instalacion_odoo/#estructura-de-datos","title":"Estructura de Datos","text":"<p>Todos los datos importantes est\u00e1n en la carpeta <code>data/</code>:</p> <pre><code>data/\n\u251c\u2500\u2500 addons/           \u2192 Tus m\u00f3dulos personalizados\n\u251c\u2500\u2500 odoo_config/      \u2192 Configuraci\u00f3n\n\u251c\u2500\u2500 odoo/\n\u2502   \u251c\u2500\u2500 filestore/   \u2192 Archivos subidos\n\u2502   \u2514\u2500\u2500 sessions/    \u2192 Sesiones\n\u2514\u2500\u2500 backups/         \u2192 Copias de seguridad BD\n</code></pre>"},{"location":"5_2_instalacion_odoo/#hacer-copia-de-seguridad","title":"Hacer Copia de Seguridad","text":"<p>Opci\u00f3n 1: Backup desde interfaz web</p> <ol> <li>Ve a http://localhost:8069/web/database/manager</li> <li>Selecciona tu base de datos</li> <li>Haz clic en Backup</li> <li>El archivo se guardar\u00e1 en <code>data/backups/</code></li> </ol> <p>Opci\u00f3n 2: Backup manual de PostgreSQL</p> <pre><code>docker exec postgres_dev_dam pg_dump -U odoo -d nombre_base_datos &gt; data/backups/backup_$(date +%Y%m%d).sql\n</code></pre> <p>Opci\u00f3n 3: Copiar toda la carpeta data/</p> <p>La forma m\u00e1s sencilla es simplemente copiar toda la carpeta <code>data/</code>:</p> <pre><code># Comprimir todo\ntar -czf proyecto-odoo-backup.tar.gz data/\n\n# O copiar a otro lugar\ncp -r data/ /ruta/destino/backup/\n</code></pre>"},{"location":"5_2_instalacion_odoo/#comandos-utiles-cheatsheet","title":"Comandos \u00datiles - Cheatsheet","text":""},{"location":"5_2_instalacion_odoo/#gestion-de-contenedores","title":"Gesti\u00f3n de Contenedores","text":"Comando Descripci\u00f3n <code>docker compose up -d</code> Iniciar sistema <code>docker compose down</code> Parar sistema <code>docker compose ps</code> Ver estado de contenedores <code>docker compose restart odoo_dev_dam</code> Reiniciar solo Odoo <code>docker compose logs -f odoo_dev_dam</code> Ver logs de Odoo"},{"location":"5_2_instalacion_odoo/#trabajo-con-modulos","title":"Trabajo con M\u00f3dulos","text":"Comando Descripci\u00f3n <code>docker exec -it odoo_dev_dam odoo scaffold modulo /mnt/extra-addons</code> Crear m\u00f3dulo <code>docker exec -it odoo_dev_dam chmod 777 -R /mnt/extra-addons/modulo</code> Ajustar permisos <code>docker exec -it odoo_dev_dam odoo shell -d basedatos</code> Abrir shell Python"},{"location":"5_2_instalacion_odoo/#base-de-datos","title":"Base de Datos","text":"Comando Descripci\u00f3n <code>docker exec -it postgres_dev_dam psql -U odoo -d postgres</code> Conectar a PostgreSQL <code>docker exec postgres_dev_dam pg_dump -U odoo -d bd &gt; backup.sql</code> Backup de BD"},{"location":"5_2_instalacion_odoo/#solucion-de-problemas","title":"Soluci\u00f3n de Problemas","text":""},{"location":"5_2_instalacion_odoo/#el-puerto-8069-esta-ocupado","title":"El puerto 8069 est\u00e1 ocupado","text":"<p>Error: <code>Bind for 0.0.0.0:8069 failed: port is already allocated</code></p> <p>Soluci\u00f3n: Cambia el puerto en <code>docker-compose.yml</code>: </p><pre><code>ports:\n  - \"8070:8069\"  # Usa el puerto 8070 en lugar de 8069\n</code></pre><p></p>"},{"location":"5_2_instalacion_odoo/#no-se-ven-los-cambios-en-el-modulo","title":"No se ven los cambios en el m\u00f3dulo","text":"<ol> <li>Verifica que el archivo est\u00e9 guardado</li> <li>Reinicia Odoo: <code>docker compose restart odoo_dev_dam</code></li> <li>Actualiza el m\u00f3dulo desde la interfaz web</li> <li>Verifica los logs: <code>docker logs odoo_dev_dam -f</code></li> </ol>"},{"location":"5_2_instalacion_odoo/#error-de-permisos","title":"Error de permisos","text":"<pre><code># Dar permisos a toda la carpeta data\nsudo chmod -R 777 data/\n</code></pre>"},{"location":"5_2_instalacion_odoo/#contenedor-no-arranca","title":"Contenedor no arranca","text":"<ol> <li> <p>Ver los logs:    </p><pre><code>docker logs odoo_dev_dam\n</code></pre><p></p> </li> <li> <p>Si hay error de configuraci\u00f3n, verificar <code>odoo.conf</code></p> </li> <li> <p>Recrear desde cero:    </p><pre><code>docker compose down -v\ndocker compose up -d\n</code></pre><p></p> </li> </ol>"},{"location":"5_2_instalacion_odoo/#olvide-la-contrasena-de-admin","title":"Olvid\u00e9 la contrase\u00f1a de admin","text":"<p>Soluci\u00f3n desde PostgreSQL:</p> <pre><code>docker exec -it postgres_dev_dam psql -U odoo -d nombre_base_datos\n</code></pre> <pre><code>UPDATE res_users SET password='nueva_password' WHERE login='admin';\n\\q\n</code></pre>"},{"location":"5_2_instalacion_odoo/#anexo-instalacion-en-ubuntu","title":"Anexo: Instalaci\u00f3n en Ubuntu","text":"<p>Solo como referencia</p> <p>Esta secci\u00f3n es \u00fanicamente informativa. No la uses en el curso.</p> <p>Si en el futuro necesitas instalar Odoo de forma nativa en Ubuntu/Debian:</p> <ul> <li>Configurar Locales</li> </ul> <pre><code>sudo dpkg-reconfigure locales\n</code></pre> <p>Selecciona <code>es_ES.UTF-8</code> como idioma por defecto.</p> <ul> <li>A\u00f1adir Repositorio de Odoo</li> </ul> <pre><code>sudo apt-get install ca-certificates\nwget -O - https://nightly.odoo.com/odoo.key | sudo gpg --dearmor -o /usr/share/keyrings/odoo-archive-keyring.gpg\necho 'deb [signed-by=/usr/share/keyrings/odoo-archive-keyring.gpg] https://nightly.odoo.com/19.0/nightly/deb/ ./' | sudo tee /etc/apt/sources.list.d/odoo.list\nsudo apt-get update &amp;&amp; sudo apt-get install odoo\n</code></pre> <ul> <li>Configurar Usuario Odoo</li> </ul> <pre><code>sudo passwd odoo\nsudo usermod -s /bin/bash odoo\n</code></pre> <ul> <li>Iniciar Servicio</li> </ul> <pre><code>sudo systemctl start odoo\nsudo systemctl enable odoo\n</code></pre> <p>Accede en: http://localhost:8069</p> <p>Para m\u00e1s detalles sobre instalaci\u00f3n nativa, consulta la documentaci\u00f3n oficial de Odoo.</p>"},{"location":"5_2_instalacion_odoo/#referencias","title":"Referencias","text":"<ul> <li>Documentaci\u00f3n oficial de Odoo</li> <li>Docker Hub - Imagen oficial de Odoo</li> <li>Docker Compose Documentation</li> <li>Odoo Developer Documentation</li> </ul>"},{"location":"5_3_arquitectura_odoo/","title":"Arquitectura de Odoo","text":"<p>Antes de comenzar a desarrollar m\u00f3dulos en Odoo, es fundamental comprender su arquitectura para entender c\u00f3mo funciona el sistema y c\u00f3mo debemos programar utilizando el framework que nos proporciona.</p> <p>El conocimiento de la arquitectura nos permitir\u00e1:</p> <ul> <li>Comprender el flujo de datos en el sistema</li> <li>Utilizar correctamente el framework de desarrollo</li> <li>Dise\u00f1ar m\u00f3dulos eficientes y bien estructurados</li> <li>Diagnosticar y resolver problemas m\u00e1s f\u00e1cilmente</li> </ul>"},{"location":"5_3_arquitectura_odoo/#vision-general-de-la-arquitectura","title":"Visi\u00f3n General de la Arquitectura","text":""},{"location":"5_3_arquitectura_odoo/#arquitectura-de-tenencia-multiple","title":"Arquitectura de Tenencia M\u00faltiple","text":"<p>Odoo implementa una arquitectura de tenencia m\u00faltiple (Multi-Tenancy), lo que significa que:</p> <ul> <li>Un \u00fanico servidor de Odoo puede servir a m\u00faltiples empresas/clientes</li> <li>Cada empresa tiene su propia base de datos independiente</li> <li>Los recursos del servidor (c\u00f3digo, memoria) se comparten entre todas las empresas</li> <li>Cada base de datos est\u00e1 completamente aislada de las dem\u00e1s</li> </ul> <pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   Servidor Odoo         \u2502\n                    \u2502   (C\u00f3digo compartido)   \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                \u2502               \u2502               \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502 Empresa A  \u2502   \u2502 Empresa B \u2502  \u2502 Empresa C \u2502\n          \u2502  (BD 1)    \u2502   \u2502  (BD 2)   \u2502  \u2502  (BD 3)   \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Ventajas de Multi-Tenancy</p> <ul> <li>Menor coste de infraestructura</li> <li>Actualizaciones centralizadas</li> <li>Mantenimiento simplificado</li> <li>Escalabilidad horizontal</li> </ul>"},{"location":"5_3_arquitectura_odoo/#arquitectura-en-capas","title":"Arquitectura en Capas","text":"<p>Odoo est\u00e1 organizado en tres capas principales siguiendo el patr\u00f3n MVC (Modelo-Vista-Controlador):</p> <pre><code>          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502              CAPA DE PRESENTACI\u00d3N                   \u2502\n          \u2502        (Vista - Interfaz de Usuario)                \u2502\n          \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n          \u2502  \u2502  Templates XML, QWeb, CSS, JavaScript (OWL)  \u2502   \u2502\n          \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502           CAPA DE L\u00d3GICA DE NEGOCIO                 \u2502\n          \u2502            (Controlador - Servidor)                 \u2502\n          \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n          \u2502  \u2502  M\u00e9todos Python, Business Logic, API, ORM    \u2502   \u2502\n          \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502              CAPA DE DATOS                          \u2502\n          \u2502           (Modelo - PostgreSQL)                     \u2502\n          \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n          \u2502  \u2502        Tablas, Relaciones, Datos             \u2502   \u2502\n          \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Otra forma de ver esta arquitectura es la que representa la siguiente imagen:</p> Diagrama Modelo - Vista - Controlador en Odoo"},{"location":"5_3_arquitectura_odoo/#componentes-fundamentales","title":"Componentes Fundamentales","text":""},{"location":"5_3_arquitectura_odoo/#1-orm-object-relational-mapping","title":"1. ORM (Object-Relational Mapping)","text":"<p>El ORM es el coraz\u00f3n de Odoo. Proporciona una capa de abstracci\u00f3n entre las clases Python y las tablas de PostgreSQL. Las funciones principales son </p> <ul> <li>Mapea autom\u00e1ticamente clases Python \u2192 tablas PostgreSQL</li> <li>Elimina SQL manual: No necesitas escribir consultas SQL</li> <li>Gestiona relaciones: One2many, Many2one, Many2many autom\u00e1ticamente</li> <li>Valida datos: Aplica constraints y validaciones</li> <li>Control de acceso: Gestiona permisos a nivel de registro</li> </ul> Diagrama del ORM de Odoo <p>Ejemplo conceptual</p> <pre><code># En lugar de escribir SQL...\nSELECT * FROM sale_order WHERE state = 'draft'\n\n# Con el ORM de Odoo escribes...\norders = self.env['sale.order'].search([('state', '=', 'draft')])\n</code></pre> <p>Ventajas del ORM</p> <ul> <li>C\u00f3digo m\u00e1s legible y mantenible</li> <li>Prevenci\u00f3n de inyecci\u00f3n SQL</li> <li>Gesti\u00f3n autom\u00e1tica de transacciones</li> <li>Cache inteligente de consultas</li> <li>Compatibilidad entre versiones</li> </ul> <p>Documentaci\u00f3n: ORM Methods in Odoo</p>"},{"location":"5_3_arquitectura_odoo/#2-modelo-vista-controlador-mvc","title":"2. Modelo-Vista-Controlador (MVC)","text":""},{"location":"5_3_arquitectura_odoo/#modelo-model","title":"Modelo (Model)","text":"<ul> <li>Definici\u00f3n: Clases Python que representan entidades de negocio</li> <li>Ubicaci\u00f3n: Archivos <code>.py</code> en la carpeta <code>models/</code></li> <li>Responsabilidad: Estructura de datos + l\u00f3gica de negocio</li> <li>Persistencia: El ORM mapea autom\u00e1ticamente a PostgreSQL</li> </ul> <p>Ejemplo: Un modelo <code>sale.order</code> define qu\u00e9 es un pedido de venta, sus campos (cliente, l\u00edneas, total, etc.) y m\u00e9todos (confirmar, cancelar, etc.)</p>"},{"location":"5_3_arquitectura_odoo/#vista-view","title":"Vista (View)","text":"<ul> <li>Definici\u00f3n: Archivos XML que definen c\u00f3mo se visualizan los datos</li> <li>Ubicaci\u00f3n: Archivos <code>.xml</code> en la carpeta <code>views/</code></li> <li>Responsabilidad: Presentaci\u00f3n de la informaci\u00f3n al usuario</li> <li>Tipos: Formularios, listas, kanban, calendario, gr\u00e1ficos, pivote, etc.</li> </ul> <p>Ejemplo: Una vista de formulario de <code>sale.order</code> define c\u00f3mo se muestra el pedido en pantalla (campos visibles, orden, agrupaciones, etc.)</p>"},{"location":"5_3_arquitectura_odoo/#controlador-controller","title":"Controlador (Controller)","text":"<ul> <li>Definici\u00f3n: M\u00e9todos Python que procesan la l\u00f3gica de negocio</li> <li>Ubicaci\u00f3n: Dentro de las clases de modelo o en <code>controllers/</code></li> <li>Responsabilidad: Procesar acciones, validar datos, coordinar el flujo</li> <li>Tipos: M\u00e9todos de modelo, controladores web (HTTP)</li> </ul> <p>Ejemplo: Un m\u00e9todo <code>action_confirm()</code> en <code>sale.order</code> que valida y confirma el pedido</p>"},{"location":"5_3_arquitectura_odoo/#3-wsgi-y-werkzeug","title":"3. WSGI y Werkzeug","text":"<p>WSGI (Web Server Gateway Interface) es el est\u00e1ndar Python para comunicaci\u00f3n entre servidores web y aplicaciones.</p> <p>Werkzeug es la biblioteca que Odoo utiliza para:</p> <ul> <li>Recibir peticiones HTTP/HTTPS</li> <li>Enrutar las peticiones a los controladores correctos</li> <li>Generar las respuestas HTTP</li> <li>Gestionar sesiones y cookies</li> </ul> <pre><code>Cliente Web \u2192 HTTP Request \u2192 Werkzeug \u2192 Controlador Odoo \u2192 Respuesta\n</code></pre> <p>Aqu\u00ed tienes un esquema en texto plano (ASCII) que explica la relaci\u00f3n entre WSGI, Werkzeug y Odoo:</p> <p></p><pre><code>          +------------------------------------------------------+\n          |                      Odoo                            |\n          |  (Aplicaci\u00f3n Python para ERP)                        |\n          +------------------------------------------------------+\n                                \u2502\n                                \u2502 usa\n                                \u25bc\n          +------------------------------------------------------+\n          |                    WSGI                              |\n          |  (Web Server Gateway Interface)                      |\n          |  Est\u00e1ndar que conecta servidores web con apps        |\n          |  Python. Define c\u00f3mo se comunican.                   |\n          +------------------------------------------------------+\n                                \u2502\n                                \u2502 implementado por\n                                \u25bc\n          +------------------------------------------------------+\n          |                   Werkzeug                           |\n          |  (Biblioteca WSGI en Python)                         |\n          |  Proporciona utilidades para manejar peticiones,     |\n          |  respuestas y middlewares.                           |\n          +------------------------------------------------------+\n</code></pre> Explicaci\u00f3n r\u00e1pida del esquema:<p></p> <ul> <li>Odoo es la aplicaci\u00f3n ERP escrita en Python.</li> <li>Para servir contenido web, Odoo necesita hablar con un servidor (como Gunicorn, uWSGI).</li> <li>WSGI es el protocolo est\u00e1ndar que define c\u00f3mo se comunican aplicaciones Python con servidores web.</li> <li>Werkzeug es una implementaci\u00f3n de WSGI que Odoo utiliza internamente para gestionar peticiones HTTP y respuestas.</li> </ul>"},{"location":"5_3_arquitectura_odoo/#4-business-objects","title":"4. Business Objects","text":"<p>Los Business Objects son los modelos que contienen tanto datos como l\u00f3gica de negocio.</p> <p>Caracter\u00edsticas:  </p> <ul> <li>Heredan de <code>models.Model</code></li> <li>Combinan estructura (campos) y comportamiento (m\u00e9todos)</li> <li>Representan entidades del mundo real (clientes, productos, facturas)</li> <li>Encapsulan la l\u00f3gica relacionada con esa entidad</li> </ul> <p>Ejemplo conceptual</p> <pre><code>class Cliente(models.Model):\n    _name = 'res.partner'\n\n    # DATOS (Estructura)\n    name = fields.Char('Nombre')\n    email = fields.Char('Email')\n\n    # L\u00d3GICA (Comportamiento)\n    def enviar_bienvenida(self):\n        # L\u00f3gica para enviar email de bienvenida\n        pass\n</code></pre>"},{"location":"5_3_arquitectura_odoo/#5-wizards-asistentes","title":"5. Wizards (Asistentes)","text":"<p>Los Wizards son formularios temporales que gu\u00edan al usuario en procesos complejos paso a paso.</p> <p>Caracter\u00edsticas: - Heredan de <code>models.TransientModel</code> - No persisten permanentemente en la BD (se auto-eliminan) - Simplifican tareas complejas dividi\u00e9ndolas en pasos - Suelen tener botones de \"Siguiente\", \"Anterior\", \"Finalizar\"</p> <p>Ejemplos de uso: - Asistente de facturaci\u00f3n masiva - Importador de datos CSV - Configurador de productos con m\u00faltiples opciones - Generador de informes personalizados</p>"},{"location":"5_3_arquitectura_odoo/#6-cliente-web-owl-widgets","title":"6. Cliente Web (OWL + Widgets)","text":"<p>El cliente web de Odoo est\u00e1 construido con tecnolog\u00edas modernas:</p> <ul> <li> <p>OWL (Odoo Web Library)</p> <ul> <li>Framework JavaScript propio de Odoo (similar a React/Vue)</li> <li>Basado en componentes</li> <li>Reactivo y eficiente</li> <li>Sistema de plantillas con QWeb</li> </ul> </li> <li> <p>Widgets</p> </li> </ul> <p>Los Widgets son componentes visuales que se adaptan al tipo de dato:</p> Tipo de Campo Widget Comportamiento Date Calendario Muestra selector de fecha Many2one Select2 Autocompletado con b\u00fasqueda Boolean Checkbox Casilla de verificaci\u00f3n Selection Dropdown Lista desplegable Image Image Visor/cargador de im\u00e1genes HTML HTML Editor Editor de texto enriquecido <p>Personalizaci\u00f3n</p> <p>Puedes crear widgets personalizados para comportamientos espec\u00edficos de tu negocio</p>"},{"location":"5_3_arquitectura_odoo/#resumen-de-componentes","title":"Resumen de Componentes","text":"Componente Descripci\u00f3n Tecnolog\u00eda Base de Datos Almacenamiento persistente de datos PostgreSQL ORM Mapeo objeto-relacional, abstrae SQL Python Business Objects Modelos con datos + l\u00f3gica de negocio Python (models.Model) WSGI/Werkzeug Servidor HTTP, enrutamiento Python/Werkzeug Wizards Asistentes temporales Python (TransientModel) Cliente Web Interfaz de usuario interactiva JavaScript (OWL) + QWeb Widgets Componentes visuales adaptables JavaScript"},{"location":"5_3_arquitectura_odoo/#la-base-de-datos-en-odoo","title":"La Base de Datos en Odoo","text":""},{"location":"5_3_arquitectura_odoo/#diseno-automatico","title":"Dise\u00f1o Autom\u00e1tico","text":"<p>En Odoo no existe un dise\u00f1o expl\u00edcito de base de datos. En su lugar:</p> <ul> <li>El desarrollador define clases Python (modelos)</li> <li>El ORM mapea autom\u00e1ticamente esas clases a tablas</li> <li>PostgreSQL almacena los datos resultantes</li> </ul> <p>Sin diagramas ER</p> <p>Odoo no proporciona diagramas Entidad-Relaci\u00f3n tradicionales. La \"base de datos\" es el resultado del mapeo autom\u00e1tico de los modelos.</p>"},{"location":"5_3_arquitectura_odoo/#nomenclatura-de-tablas-y-campos","title":"Nomenclatura de Tablas y Campos","text":""},{"location":"5_3_arquitectura_odoo/#reglas-de-nomenclatura","title":"Reglas de Nomenclatura","text":"<p>Clases Python \u2192 Tablas PostgreSQL</p> <pre><code># Clase Python en Odoo\nclass SaleOrder(models.Model):\n    _name = 'sale.order'  # Nombre del modelo\n</code></pre> <p>Se mapea a:</p> <pre><code>-- Tabla en PostgreSQL\nCREATE TABLE sale_order (...)\n</code></pre> <p>Regla: Los puntos (<code>.</code>) se convierten en guiones bajos (<code>_</code>)</p> <p>Atributos Python \u2192 Columnas PostgreSQL</p> <pre><code>class SaleOrder(models.Model):\n    _name = 'sale.order'\n\n    date_order = fields.Datetime('Fecha Pedido')\n    amount_total = fields.Float('Total')\n</code></pre> <p>Se mapea a:</p> <pre><code>CREATE TABLE sale_order (\n    date_order TIMESTAMP,\n    amount_total NUMERIC,\n    ...\n)\n</code></pre> <p>Regla: Los nombres de atributos Python se mantienen id\u00e9nticos como nombres de columna</p>"},{"location":"5_3_arquitectura_odoo/#ejemplos-de-nomenclatura","title":"Ejemplos de Nomenclatura","text":"Modelo Python Tabla PostgreSQL Descripci\u00f3n <code>res.partner</code> <code>res_partner</code> Contactos (clientes/proveedores) <code>sale.order</code> <code>sale_order</code> Pedidos de venta <code>sale.order.line</code> <code>sale_order_line</code> L\u00edneas de pedido <code>account.move</code> <code>account_move</code> Asientos contables <code>product.product</code> <code>product_product</code> Productos"},{"location":"5_3_arquitectura_odoo/#inspeccion-desde-la-interfaz-web","title":"Inspecci\u00f3n desde la Interfaz Web","text":"<p>Odoo permite descubrir el nombre t\u00e9cnico de modelos y campos desde la interfaz:</p> <ol> <li> <p>Activar Modo Desarrollador: </p> <ul> <li>Configuraci\u00f3n \u2192 Activar modo desarrollador</li> <li>O a\u00f1adir <code>?debug=1</code> a la URL</li> </ul> </li> <li> <p>Ver informaci\u00f3n t\u00e9cnica:</p> <ul> <li>Al pasar el rat\u00f3n sobre campos, aparece el nombre t\u00e9cnico</li> <li>Men\u00fa \"Ver metadatos\" muestra modelo y campos</li> <li>Vista de formulario muestra la estructura XML</li> </ul> </li> </ol> <p>Ejemplo pr\u00e1ctico</p> <p>Si en un formulario de cliente ves el campo \"Nombre\" y activas el modo desarrollador, ver\u00e1s que: - Modelo: <code>res.partner</code> - Campo: <code>name</code> - Tabla: <code>res_partner</code> - Columna: <code>name</code></p>"},{"location":"5_3_arquitectura_odoo/#estructura-de-carpetas-de-odoo","title":"Estructura de Carpetas de Odoo","text":"<pre><code>odoo/\n\u251c\u2500\u2500 addons/              # M\u00f3dulos oficiales de Odoo\n\u2502   \u251c\u2500\u2500 sale/\n\u2502   \u251c\u2500\u2500 purchase/\n\u2502   \u251c\u2500\u2500 account/\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 odoo/                # N\u00facleo del framework\n\u2502   \u251c\u2500\u2500 models/          # Definici\u00f3n del ORM\n\u2502   \u251c\u2500\u2500 addons/          # M\u00f3dulos integrados en el core\n\u2502   \u251c\u2500\u2500 tools/           # Utilidades y helpers\n\u2502   \u2514\u2500\u2500 http.py          # Gesti\u00f3n de peticiones HTTP\n\u251c\u2500\u2500 config/              # Archivos de configuraci\u00f3n\n\u2502   \u2514\u2500\u2500 odoo.conf\n\u251c\u2500\u2500 data/                # Datos persistentes (filestore)\n\u251c\u2500\u2500 setup/               # Scripts de instalaci\u00f3n\n\u251c\u2500\u2500 tests/               # Tests automatizados\n\u251c\u2500\u2500 doc/                 # Documentaci\u00f3n t\u00e9cnica\n\u251c\u2500\u2500 static/              # Archivos est\u00e1ticos (CSS, JS, im\u00e1genes)\n\u2514\u2500\u2500 web/                 # M\u00f3dulo de interfaz web\n</code></pre>"},{"location":"5_3_arquitectura_odoo/#addons-modulos-oficiales","title":"<code>addons/</code> - M\u00f3dulos Oficiales","text":"<p>Contiene todos los m\u00f3dulos est\u00e1ndar de Odoo:</p> <ul> <li>Cada m\u00f3dulo en su propia carpeta</li> <li>Estructura completa: models, views, controllers, data, security</li> <li>Ejemplos: <code>sale</code>, <code>account</code>, <code>crm</code>, <code>inventory</code>, <code>hr</code></li> </ul> <p>Uso: Estos m\u00f3dulos se instalan desde la interfaz de Odoo</p>"},{"location":"5_3_arquitectura_odoo/#odoo-nucleo-del-framework","title":"<code>odoo/</code> - N\u00facleo del Framework","text":"<p>El coraz\u00f3n de Odoo con todos los componentes esenciales:</p> <p>Subcarpetas importantes:</p> <ul> <li><code>odoo/models/</code>: Clases base del ORM (<code>Model</code>, <code>TransientModel</code>, <code>AbstractModel</code>)</li> <li><code>odoo/fields/</code>: Definici\u00f3n de tipos de campos</li> <li><code>odoo/tools/</code>: Funciones auxiliares (validaciones, conversiones, etc.)</li> <li><code>odoo/http.py</code>: Manejo de peticiones HTTP y controladores web</li> <li><code>odoo/api.py</code>: Decoradores y API del ORM</li> </ul> <p>Uso: Los desarrolladores rara vez modifican esta carpeta directamente</p>"},{"location":"5_3_arquitectura_odoo/#config-configuracion","title":"<code>config/</code> - Configuraci\u00f3n","text":"<p>Archivos de configuraci\u00f3n del servidor:</p> <ul> <li><code>odoo.conf</code>: Configuraci\u00f3n principal (puertos, BD, addons_path, workers, etc.)</li> <li>Par\u00e1metros de conexi\u00f3n a PostgreSQL</li> <li>Rutas de m\u00f3dulos personalizados</li> </ul> <p>Uso: Editar para personalizar el comportamiento del servidor</p>"},{"location":"5_3_arquitectura_odoo/#data-datos-persistentes","title":"<code>data/</code> - Datos Persistentes","text":"<p>Almacenamiento de archivos subidos por usuarios:</p> <ul> <li>Im\u00e1genes de productos</li> <li>Documentos adjuntos</li> <li>Archivos de importaci\u00f3n/exportaci\u00f3n</li> <li>Avatar de usuarios</li> </ul> <p>Uso: Backup regular de esta carpeta es crucial</p>"},{"location":"5_3_arquitectura_odoo/#custom_addons-modulos-personalizados","title":"<code>custom_addons/</code> - M\u00f3dulos Personalizados","text":"<p>Esta carpeta no existe por defecto, pero es una convenci\u00f3n com\u00fan:</p> <ul> <li>Separar m\u00f3dulos personalizados de los oficiales</li> <li>Facilitar actualizaciones de Odoo sin perder cambios</li> <li>Mejor organizaci\u00f3n del c\u00f3digo</li> </ul> <p>Configuraci\u00f3n en <code>odoo.conf</code>: </p><pre><code>addons_path = /mnt/custom_addons,/usr/lib/python3/dist-packages/odoo/addons\n</code></pre><p></p>"},{"location":"5_3_arquitectura_odoo/#relacion-con-docker-compose","title":"Relaci\u00f3n con Docker Compose","text":"<p>Las carpetas que mapeamos en nuestro <code>docker-compose.yml</code>:</p> <pre><code>volumes:\n  - ./data/addons:/mnt/extra-addons                 # \u2190 Nuestros m\u00f3dulos personalizados\n  - ./data/odoo_config:/etc/odoo                    # \u2190 Archivo odoo.conf\n  - ./data/odoo/filestore:/var/lib/odoo/filestore   # \u2190 Archivos subidos\n  - ./data/odoo/sessions:/var/lib/odoo/sessions     # \u2190 Sesiones de usuario\n</code></pre> <p>Correspondencia:</p> Volumen Docker Ruta en Contenedor Prop\u00f3sito <code>./data/addons</code> <code>/mnt/extra-addons</code> M\u00f3dulos personalizados <code>./data/odoo_config</code> <code>/etc/odoo</code> Configuraci\u00f3n (odoo.conf) <code>./data/odoo/filestore</code> <code>/var/lib/odoo/filestore</code> Archivos adjuntos <code>./data/odoo/sessions</code> <code>/var/lib/odoo/sessions</code> Sesiones web <p>Ventaja de los vol\u00famenes</p> <p>Al mapear estas carpetas, nuestros cambios persisten incluso si eliminamos los contenedores</p>"},{"location":"5_3_arquitectura_odoo/#recursos-y-referencias","title":"Recursos y Referencias","text":"<p>Documentaci\u00f3n Oficial:</p> <ul> <li>Odoo Developer Documentation</li> <li>ORM API Reference</li> <li>Views Reference</li> <li>Controllers &amp; Routing</li> </ul> <p>Tutoriales y Gu\u00edas:</p> <ul> <li>An Overview of ORM Methods in Odoo</li> <li>Odoo Module Manifest Reference</li> </ul>"},{"location":"5_4_primer_modulo/","title":"Primer M\u00f3dulo en Odoo","text":"<p>Una vez instalado Odoo y comprendida su arquitectura, el siguiente objetivo ser\u00e1 desarrollar nuestro primer m\u00f3dulo: el t\u00edpico \"Hola Mundo\".</p> <p>Vamos a crear tres versiones diferentes del m\u00f3dulo, cada una m\u00e1s completa que la anterior, para ir profundizando progresivamente en los elementos b\u00e1sicos de un m\u00f3dulo en Odoo.</p>"},{"location":"5_4_primer_modulo/#hola-mundo-version-1-modulo-minimo","title":"Hola Mundo - Versi\u00f3n 1: M\u00f3dulo M\u00ednimo","text":"<p>Esta primera versi\u00f3n no tendr\u00e1 ninguna utilidad m\u00e1s all\u00e1 de comprobar que somos capaces de crear e instalar un m\u00f3dulo (aunque no haga nada).</p> <p>El objetivo es aprender la estructura m\u00ednima necesaria para que Odoo reconozca algo como un m\u00f3dulo instalable.</p> <p>El primer paso siempre ser\u00e1 crear una carpeta en el directorio <code>addons/</code> con el nombre del m\u00f3dulo:</p> <pre><code>mkdir ./data/addons/HolaMundo_V1\n</code></pre> <p>Dentro de esta carpeta crearemos solo dos archivos: <code>__init__.py</code> y <code>__manifest__.py</code></p> <pre><code>data/addons/HolaMundo_V1/\n\u251c\u2500\u2500 __init__.py\n\u2514\u2500\u2500 __manifest__.py\n</code></pre>"},{"location":"5_4_primer_modulo/#archivo-__init__py","title":"Archivo <code>__init__.py</code>","text":"<p>Este archivo le indica a Python que esta carpeta es un paquete. En esta versi\u00f3n estar\u00e1 vac\u00edo porque no tenemos modelos ni controladores que cargar.</p> <pre><code># HolaMundo_V1/__init__.py\n# Archivo vac\u00edo - solo indica que esto es un paquete Python\n</code></pre>"},{"location":"5_4_primer_modulo/#archivo-__manifest__py","title":"Archivo <code>__manifest__.py</code>","text":"<p>Este archivo contiene la descripci\u00f3n del m\u00f3dulo. Es la ficha t\u00e9cnica que le indica a Odoo:</p> <ul> <li>C\u00f3mo se llama el m\u00f3dulo</li> <li>Qu\u00e9 hace</li> <li>Qu\u00e9 necesita para funcionar</li> <li>Qu\u00e9 archivos debe cargar</li> </ul> <pre><code># HolaMundo_V1/__manifest__.py\n\n{\n    'name': 'Hola Mundo V1',\n    'version': '1.0',\n    'summary': 'M\u00f3dulo b\u00e1sico de ejemplo',\n    'description': 'Este es un m\u00f3dulo de ejemplo que no hace nada, solo sirve como plantilla.',\n    'author': 'Tu Nombre',\n    'category': 'Tools',\n    'depends': [],\n    'data': [],\n    'installable': True,\n    'application': False,\n    'auto_install': False,\n}\n</code></pre> <p>Explicaci\u00f3n de los Campos del Manifest: </p> Campo Descripci\u00f3n <code>name</code> Nombre del m\u00f3dulo tal como aparecer\u00e1 en la interfaz <code>version</code> Versi\u00f3n del m\u00f3dulo, \u00fatil para actualizaciones <code>summary</code> Descripci\u00f3n corta que aparece en la lista de aplicaciones <code>description</code> Descripci\u00f3n larga y detallada del m\u00f3dulo <code>author</code> Qui\u00e9n lo ha creado <code>category</code> Categor\u00eda en Odoo (\"Tools\", \"Sales\", \"Inventory\", etc.) <code>depends</code> Lista de m\u00f3dulos necesarios (casi todos dependen de <code>base</code>) <code>data</code> Archivos XML/CSV a cargar (vistas, men\u00fas, datos, seguridad) <code>demo</code> Archivos que se cargan solo en modo demo <code>installable</code> Si es <code>True</code>, el m\u00f3dulo se puede instalar <code>application</code> Si es <code>True</code>, se muestra como aplicaci\u00f3n en el panel principal <code>auto_install</code> Si es <code>True</code>, se instala autom\u00e1ticamente si sus dependencias est\u00e1n instaladas <p>Campos opcionales</p> <p>Existen m\u00e1s campos opcionales, pero con estos tienes lo b\u00e1sico para que el m\u00f3dulo funcione correctamente.</p>"},{"location":"5_4_primer_modulo/#proceso-de-instalacion","title":"Proceso de Instalaci\u00f3n","text":""},{"location":"5_4_primer_modulo/#paso-1-reiniciar-el-servidor","title":"Paso 1: Reiniciar el Servidor","text":"<p>Para que el servidor reconozca el nuevo m\u00f3dulo:</p> <pre><code>docker compose restart odoo_dev_dam\n</code></pre> <p>O pulsa el bot\u00f3n que configuramos en VSCode con Action Buttons.</p>"},{"location":"5_4_primer_modulo/#paso-2-ver-los-logs","title":"Paso 2: Ver los Logs","text":"<p>Es recomendable tener los logs visibles para detectar posibles errores:</p> <pre><code>docker logs odoo_dev_dam -f\n</code></pre>"},{"location":"5_4_primer_modulo/#paso-3-activar-modo-desarrollador","title":"Paso 3: Activar Modo Desarrollador","text":"<p>Hay varias formas de activar el modo desarrollador en Odoo:</p> <p>Opci\u00f3n A: Desde el men\u00fa de Ajustes</p> <p>Ve a Ajustes \u2192 Activar el modo desarrollador</p> Activar modo desarrollador desde ajustes <p>Opci\u00f3n B: Usando la URL directamente</p> <p>A\u00f1ade <code>?debug=1</code> al final de la URL:</p> <pre><code>http://localhost:8069/web?debug=1\n</code></pre> Activar modo desarrollador desde la URL <p>Variantes de la URL:</p> <ul> <li><code>?debug=1</code> - Modo desarrollador normal</li> <li><code>?debug=assets</code> - Ver archivos fuente (\u00fatil para frontend)</li> <li><code>?debug=tests</code> - Para pruebas automatizadas</li> </ul> <p>Opci\u00f3n C: Extensi\u00f3n del navegador</p> <p>Puedes usar la extensi\u00f3n Odoo Debug para Firefox o Chrome, que activa el modo con un solo clic.</p> Extensi\u00f3n para activar modo desarrollador <p>Una vez en modo desarrollo, aparecer\u00e1n nuevas opciones en la interfaz, como un men\u00fa con forma de cucaracha que permite acceder a funcionalidades de desarrollador.</p> Nuevas opciones disponibles en modo desarrollador"},{"location":"5_4_primer_modulo/#paso-4-actualizar-lista-de-aplicaciones","title":"Paso 4: Actualizar Lista de Aplicaciones","text":"<ol> <li>Ve a Aplicaciones</li> <li>Pulsa el bot\u00f3n Actualizar lista de aplicaciones</li> <li>Busca \"Hola Mundo V1\" en el buscador</li> <li>Quita el filtro \"Aplicaciones\" si no aparece (porque <code>application: False</code>)</li> <li>Haz clic en Instalar</li> </ol> M\u00f3dulo buscado y listo para instalar <p>Si todo ha ido bien, el m\u00f3dulo se instalar\u00e1 correctamente. Como no tiene funcionalidad, no aparecer\u00e1 en ning\u00fan men\u00fa, pero puedes verificar su instalaci\u00f3n viendo la informaci\u00f3n del m\u00f3dulo.</p> Informaci\u00f3n del m\u00f3dulo instalado <p>Configuraci\u00f3n de VSCode</p> <p>Para no tener que estar reiniciando <code>docker</code> desde la l\u00ednea de comando, podemos a\u00f1adir a <code>Visual Studio Code</code> una extensi\u00f3n como VS Code Action Buttons. Una vez instalada esta extensi\u00f3n, vamos la configuraci\u00f3n de la extensi\u00f3n y completamos el <code>json</code>  de configuraci\u00f3n as\u00ed:</p> <pre><code>\"commands\": [\n{\n     \"name\": \"$(triangle-right) Run Odoo\",\n     \"color\": \"purple\",\n     \"singleInstance\": true,\n     \"command\": \"docker-compose down &amp;&amp; docker-compose up -d &amp;&amp; docker logs odoo -f\"\n},\n{\n     \"name\": \"$(triangle-right) Rerun Odoo\",\n     \"color\": \"purple\",\n     \"singleInstance\": true,\n     \"command\": \"docker-compose restart odoo &amp;&amp; docker logs odoo -f\"\n}\n],\n</code></pre> <p>El primer comando lo reinicia todo, tanto la base de datos como Odoo y elimina los contenedores para recrearlos. Esto puede solucionar algunos problemas. </p> <p>El segundo reinicia solo el contenedor Odoo sin recrearlo. Es m\u00e1s r\u00e1pido y tambi\u00e9n actualiza la base de datos en caso de haber modificado alg\u00fan modelo. </p> <p>El comando se puede utilizar en una terminal si no queremos hacer los botones o estamos en un entorno sin interfaz gr\u00e1fica.</p>"},{"location":"5_4_primer_modulo/#resumen-de-pasos","title":"Resumen de Pasos","text":"<p>Proceso est\u00e1ndar de instalaci\u00f3n</p> <p>Estos pasos se repetir\u00e1n cada vez que a\u00f1adas o modifiques un m\u00f3dulo:</p> <ol> <li>Crear o modificar los archivos necesarios del m\u00f3dulo</li> <li>Reiniciar el servidor de Odoo</li> <li>Activar el modo desarrollador (si no est\u00e1 activo)</li> <li>Ir a Aplicaciones \u2192 Actualizar lista de aplicaciones</li> <li>Buscar e instalar el m\u00f3dulo</li> <li>Comprobar en los logs que no haya errores</li> </ol>"},{"location":"5_4_primer_modulo/#hola-mundo-version-2-modulo-con-interfaz","title":"Hola Mundo - Versi\u00f3n 2: M\u00f3dulo con Interfaz","text":"<p>La versi\u00f3n anterior fue muy b\u00e1sica pero \u00fatil para entender el proceso. Ahora vamos a crear una versi\u00f3n completa que:</p> <ul> <li>Aparezca en el men\u00fa de aplicaciones</li> <li>Tenga un modelo de datos</li> <li>Muestre vistas (lista y formulario)</li> <li>Tenga permisos de seguridad configurados</li> </ul>"},{"location":"5_4_primer_modulo/#estructura-del-modulo","title":"Estructura del M\u00f3dulo","text":"<pre><code>data/addons/HolaMundo_V2/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 __manifest__.py\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 hola.py\n\u251c\u2500\u2500 views/\n\u2502   \u2514\u2500\u2500 hola_view.xml\n\u2514\u2500\u2500 security/\n    \u2514\u2500\u2500 ir.model.access.csv\n</code></pre> <p>Como puedes ver, ahora incluimos:</p> <ul> <li>models/: Carpeta con la definici\u00f3n del modelo de datos</li> <li>views/: Carpeta con las vistas (interfaz de usuario)</li> <li>security/: Carpeta con los permisos de acceso</li> </ul>"},{"location":"5_4_primer_modulo/#archivo-__init__py-raiz","title":"Archivo <code>__init__.py</code> (ra\u00edz)","text":"<p>Ahora el archivo ra\u00edz debe importar la carpeta <code>models</code>:</p> <pre><code># HolaMundo_V2/__init__.py\n\nfrom . import models\n</code></pre>"},{"location":"5_4_primer_modulo/#archivo-__manifest__py_1","title":"Archivo <code>__manifest__.py</code>","text":"<p>El manifest ahora incluye dependencias y archivos a cargar:</p> <pre><code># HolaMundo_V2/__manifest__.py\n\n{\n    'name': 'Hola Mundo V2',\n    'version': '2.0',\n    'summary': 'M\u00f3dulo de ejemplo Hola Mundo V2',\n    'description': 'Este m\u00f3dulo muestra un mensaje b\u00e1sico en Odoo con interfaz completa.',\n    'author': 'Tu Nombre',\n    'category': 'Tools',\n    'depends': ['base'],\n    'data': [\n        'security/ir.model.access.csv',\n        'views/hola_view.xml',\n    ],\n    'installable': True,\n    'application': True,\n}\n</code></pre> <p>Orden de carga</p> <p>El orden de los archivos en <code>data</code> es importante. Los archivos de seguridad (<code>security/</code>) deben cargarse antes que las vistas, ya que si no, Odoo podr\u00eda denegar el acceso a las vistas por falta de permisos.</p>"},{"location":"5_4_primer_modulo/#archivo-models__init__py","title":"Archivo <code>models/__init__.py</code>","text":"<p>Este archivo permite a Python reconocer <code>models</code> como un paquete e importa el archivo del modelo:</p> <pre><code># HolaMundo_V2/models/__init__.py\n\nfrom . import hola\n</code></pre> <p>Importaci\u00f3n en cadena</p> <p>Cuando en el <code>__init__.py</code> ra\u00edz escribimos <code>from . import models</code>, Python busca el archivo <code>models/__init__.py</code>. Dentro de ese archivo, la l\u00ednea <code>from . import hola</code> le dice a Odoo que cargue el modelo definido en <code>models/hola.py</code>.</p>"},{"location":"5_4_primer_modulo/#archivo-modelsholapy","title":"Archivo <code>models/hola.py</code>","text":"<p>Aqu\u00ed se define el modelo de datos, que representa una tabla en la base de datos:</p> <pre><code># HolaMundo_V2/models/hola.py\n\nfrom odoo import models, fields\n\nclass HolaMundo(models.Model):\n    _name = 'hola.mundo.v2'\n    _description = 'Modelo Hola Mundo V2'\n\n    mensaje = fields.Char(string='Mensaje', default='\u00a1Hola Mundo V2 desde Odoo!')\n</code></pre> <p>Explicaci\u00f3n del Modelo: </p> Elemento Descripci\u00f3n <code>_name</code> Nombre t\u00e9cnico del modelo (obligatorio). Define el nombre de la tabla en PostgreSQL <code>_description</code> Descripci\u00f3n del modelo (recomendado) <code>mensaje</code> Campo de tipo texto que se mostrar\u00e1 en las vistas <code>default</code> Valor por defecto del campo <p>La tabla en PostgreSQL se llamar\u00e1 <code>hola_mundo_v2</code> (los puntos se convierten en guiones bajos).</p>"},{"location":"5_4_primer_modulo/#archivo-viewshola_viewxml","title":"Archivo <code>views/hola_view.xml</code>","text":"<p>Este archivo define c\u00f3mo se visualizan los datos y c\u00f3mo se accede al m\u00f3dulo:</p> <pre><code>&lt;!-- HolaMundo_V2/views/hola_view.xml --&gt;\n\n&lt;odoo&gt;\n    &lt;!-- Vista de Lista --&gt;\n    &lt;record id=\"view_hola_mundo_v2_list\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;hola.mundo.v2.list&lt;/field&gt;\n        &lt;field name=\"model\"&gt;hola.mundo.v2&lt;/field&gt;\n        &lt;field name=\"type\"&gt;list&lt;/field&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n            &lt;list&gt;\n                &lt;field name=\"mensaje\"/&gt;\n            &lt;/list&gt;\n        &lt;/field&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Vista de Formulario --&gt;\n    &lt;record id=\"view_hola_mundo_v2_form\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;hola.mundo.v2.form&lt;/field&gt;\n        &lt;field name=\"model\"&gt;hola.mundo.v2&lt;/field&gt;\n        &lt;field name=\"type\"&gt;form&lt;/field&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n            &lt;form&gt;\n                &lt;sheet&gt;\n                    &lt;field name=\"mensaje\"/&gt;\n                &lt;/sheet&gt;\n            &lt;/form&gt;\n        &lt;/field&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Acci\u00f3n que conecta las vistas con el men\u00fa --&gt;\n    &lt;record id=\"action_hola_mundo_v2\" model=\"ir.actions.act_window\"&gt;\n        &lt;field name=\"name\"&gt;Hola Mundo V2&lt;/field&gt;\n        &lt;field name=\"res_model\"&gt;hola.mundo.v2&lt;/field&gt;\n        &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Men\u00fas --&gt;\n    &lt;menuitem id=\"menu_hola_mundo_v2_root\" name=\"Hola Mundo V2\"/&gt;\n    &lt;menuitem id=\"menu_hola_mundo_v2\" name=\"Mensajes\" parent=\"menu_hola_mundo_v2_root\"/&gt;\n    &lt;menuitem id=\"menu_hola_mundo_v2_items\" name=\"Ver Mensajes\" parent=\"menu_hola_mundo_v2\" action=\"action_hola_mundo_v2\"/&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Cambio en Odoo 18</p> <p>En Odoo 18.0 y posteriores, el tipo de vista que antes se llamaba <code>tree</code> ahora se llama <code>list</code>. Si usas versiones anteriores de Odoo, debes cambiar <code>type=\"list\"</code> por <code>type=\"tree\"</code> y la etiqueta <code>&lt;list&gt;</code> por <code>&lt;tree&gt;</code>.</p> <p>Estructura de las Vistas. El archivo XML define:</p> <ol> <li>Vista de lista: C\u00f3mo se muestra la tabla con todos los registros</li> <li>Vista de formulario: C\u00f3mo se muestra el detalle de un registro individual</li> <li>Acci\u00f3n: Conecta el modelo con las vistas</li> <li>Men\u00fas: Estructura de navegaci\u00f3n para acceder al m\u00f3dulo</li> </ol>"},{"location":"5_4_primer_modulo/#archivo-securityirmodelaccesscsv","title":"Archivo <code>security/ir.model.access.csv</code>","text":"<p>Este archivo define los permisos de acceso al modelo:</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_hola_mundo_v2,hola.mundo.v2,model_hola_mundo_v2,,1,1,1,1\n</code></pre> <p>Descripci\u00f3n del fichero de permisos:</p> Columna Descripci\u00f3n <code>id</code> Identificador \u00fanico del permiso <code>name</code> Nombre descriptivo <code>model_id:id</code> Referencia al modelo (formato: <code>model_&lt;nombre_modelo&gt;</code>) <code>group_id:id</code> Grupo al que se aplica (vac\u00edo = todos los usuarios) <code>perm_read</code> Permiso de lectura (1 = s\u00ed, 0 = no) <code>perm_write</code> Permiso de escritura <code>perm_create</code> Permiso de creaci\u00f3n <code>perm_unlink</code> Permiso de eliminaci\u00f3n <p>Sin permisos, sin acceso</p> <p>Si no incluyes este archivo, ning\u00fan usuario podr\u00e1 acceder al m\u00f3dulo, aunque est\u00e9 instalado. Odoo denegar\u00e1 el acceso por defecto por razones de seguridad.</p>"},{"location":"5_4_primer_modulo/#instalacion-de-la-version-2","title":"Instalaci\u00f3n de la Versi\u00f3n 2","text":"<p>Sigue el mismo proceso que en la Versi\u00f3n 1:</p> <ol> <li>Crea todos los archivos en las ubicaciones indicadas</li> <li>Reinicia el servidor de Odoo</li> <li>Activa el modo desarrollador (si no lo est\u00e1)</li> <li>Ve a Aplicaciones \u2192 Actualizar lista de aplicaciones</li> <li>Busca Hola Mundo V2</li> <li>Haz clic en Instalar</li> </ol> <p>Esta vez, al instalar el m\u00f3dulo, aparecer\u00e1 un nuevo men\u00fa en la barra superior llamado \"Hola Mundo V2\", y podr\u00e1s acceder a las vistas y crear registros.</p> <p>Diferencia con la V1</p> <p>Si buscas m\u00f3dulos sin quitar el filtro \"Aplicaciones\", solo ver\u00e1s la V2 porque en su manifest tiene <code>'application': True</code>. La V1 solo aparecer\u00e1 si quitas ese filtro.</p>"},{"location":"5_4_primer_modulo/#hola-mundo-version-3-usando-scaffold","title":"Hola Mundo - Versi\u00f3n 3: Usando Scaffold","text":"<p>Un scaffold es una herramienta que genera autom\u00e1ticamente la estructura b\u00e1sica de un m\u00f3dulo. Es como un \"esqueleto\" inicial que incluye todos los archivos y carpetas necesarios para empezar a desarrollar.</p> <p>En lugar de crear manualmente cada archivo y carpeta, Odoo puede hacerlo por nosotros con un solo comando.</p>"},{"location":"5_4_primer_modulo/#crear-el-modulo-con-scaffold","title":"Crear el M\u00f3dulo con Scaffold","text":"<p>Para crear un m\u00f3dulo con scaffold, ejecutamos:</p> <pre><code>docker exec -it odoo_dev_dam odoo scaffold HolaMundo_V3 /mnt/extra-addons\n</code></pre> <p>Este comando:</p> <ul> <li>Ejecuta <code>odoo scaffold</code> dentro del contenedor</li> <li>Crea un m\u00f3dulo llamado <code>HolaMundo_V3</code></li> <li>Lo ubica en <code>/mnt/extra-addons</code> (que est\u00e1 mapeado a <code>./data/addons/</code>)</li> </ul> Estructura creada por el comando scaffold"},{"location":"5_4_primer_modulo/#ajustar-permisos","title":"Ajustar Permisos","text":"<p>Despu\u00e9s de crear el m\u00f3dulo, ajusta los permisos para poder editarlo:</p> <p>Para dar permisos podemos hacer que el m\u00f3dulo sea propiedad del desarrollador, tal vez as\u00ed evitaremos problemas en el futuro de acceso o copias de seguridad. Para ello:</p> <pre><code>sudo chown -R sergio:sergio hola_mundo__v3/\n</code></pre> <p>Tambi\u00e9n se puede hacer desde el propio contenedor dando permisos a todos:</p> <pre><code>docker exec -it odoo_dev_dam chmod 777 -R /mnt/extra-addons/HolaMundo_V3\n</code></pre> <p>Esto permite que tanto el proceso Docker (que corre como <code>root</code>) como tu usuario local puedan modificar los archivos.</p>"},{"location":"5_4_primer_modulo/#estructura-generada","title":"Estructura Generada","text":"<p>Scaffold crea autom\u00e1ticamente:</p> <pre><code>HolaMundo_V3/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 __manifest__.py\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 models.py           # Modelo de ejemplo (comentado)\n\u251c\u2500\u2500 views/\n\u2502   \u251c\u2500\u2500 views.xml           # Vistas de ejemplo (comentadas)\n\u2502   \u2514\u2500\u2500 templates.xml       # Templates web (comentadas)\n\u251c\u2500\u2500 controllers/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 controllers.py      # Controladores web (comentados)\n\u251c\u2500\u2500 security/\n\u2502   \u2514\u2500\u2500 ir.model.access.csv\n\u251c\u2500\u2500 demo/\n\u2502   \u2514\u2500\u2500 demo.xml            # Datos de demostraci\u00f3n (comentados)\n\u2514\u2500\u2500 static/\n    \u2514\u2500\u2500 description/\n        \u2514\u2500\u2500 icon.png        # Icono del m\u00f3dulo\n</code></pre> <p>Instalaci\u00f3n inicial: En este estado, el m\u00f3dulo ya es instalable pero no hace nada (similar a la Versi\u00f3n 1):</p> <ol> <li>Reinicia el servidor</li> <li>Actualiza la lista de aplicaciones</li> <li>Busca \"HolaMundo_V3\"</li> <li>Inst\u00e1lalo</li> </ol> <p>Para que el m\u00f3dulo funcione como la Versi\u00f3n 2, debes:</p> <ol> <li> <p>Revisar <code>__manifest__.py</code>: Actualiza la informaci\u00f3n del m\u00f3dulo y descomenta las l\u00edneas de <code>data</code> que necesites:</p> <pre><code># __manifest__.py\n{\n    'name': \"HolaMundo_V3\",\n    'summary': \"M\u00f3dulo creado con scaffold\",\n    'description': \"\"\"\n        M\u00f3dulo de ejemplo creado autom\u00e1ticamente con scaffold\n    \"\"\",\n    'author': \"Tu Nombre\",\n    'category': 'Tools',\n    'version': '3.0',\n    'depends': ['base'],\n    'data': [\n        'security/ir.model.access.csv',\n        'views/views.xml',\n        # 'views/templates.xml',\n    ],\n    # 'demo': [\n    #     'demo/demo.xml',\n    # ],\n}\n</code></pre> </li> <li> <p>Descomentar <code>models/models.py</code>: Este archivo contiene un modelo de ejemplo. Descomenta el c\u00f3digo y personal\u00edzalo:</p> <pre><code># models/models.py\nfrom odoo import models, fields, api\n\nclass HolaMundo_V3(models.Model):\n    _name = 'holamundo_v3.holamundo_v3'\n    _description = 'Ejemplo con Scaffold'\n\n    name = fields.Char()\n    value = fields.Integer()\n    value2 = fields.Float(compute=\"_value_pc\", store=True)\n    description = fields.Text()\n\n    @api.depends('value')\n    def _value_pc(self):\n        for record in self:\n            record.value2 = float(record.value) / 100\n</code></pre> </li> <li> <p>Descomentar <code>views/views.xml</code>: Contiene las vistas de ejemplo:</p> <pre><code>&lt;!-- views/views.xml --&gt;\n&lt;odoo&gt;\n  &lt;data&gt;\n    &lt;!-- Vista de lista --&gt;\n    &lt;record model=\"ir.ui.view\" id=\"holamundo_v3.list\"&gt;\n      &lt;field name=\"name\"&gt;HolaMundo_V3 list&lt;/field&gt;\n      &lt;field name=\"model\"&gt;holamundo_v3.holamundo_v3&lt;/field&gt;\n      &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;list&gt;\n          &lt;field name=\"name\"/&gt;\n          &lt;field name=\"value\"/&gt;\n          &lt;field name=\"value2\"/&gt;\n        &lt;/list&gt;\n      &lt;/field&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Acci\u00f3n --&gt;\n    &lt;record model=\"ir.actions.act_window\" id=\"holamundo_v3.action_window\"&gt;\n      &lt;field name=\"name\"&gt;HolaMundo_V3 window&lt;/field&gt;\n      &lt;field name=\"res_model\"&gt;holamundo_v3.holamundo_v3&lt;/field&gt;\n      &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Men\u00fas --&gt;\n    &lt;menuitem name=\"HolaMundo_V3\" id=\"holamundo_v3.menu_root\"/&gt;\n    &lt;menuitem name=\"Menu 1\" id=\"holamundo_v3.menu_1\" parent=\"holamundo_v3.menu_root\"/&gt;\n    &lt;menuitem name=\"List\" id=\"holamundo_v3.menu_1_list\" parent=\"holamundo_v3.menu_1\"\n              action=\"holamundo_v3.action_window\"/&gt;\n  &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre> </li> <li> <p>Archivo de seguridad: Ya est\u00e1 creado por defecto, solo verifica que el contenido es correcto:</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_holamundo_v3_holamundo_v3,holamundo_v3.holamundo_v3,model_holamundo_v3_holamundo_v3,base.group_user,1,1,1,1\n</code></pre> </li> <li> <p>Controladores (opcional): El archivo <code>controllers/controllers.py</code> contiene ejemplos de controladores web. Puedes descomentarlo si quieres crear p\u00e1ginas web personalizadas.</p> </li> </ol>"},{"location":"5_4_primer_modulo/#actualizar-el-modulo","title":"Actualizar el M\u00f3dulo","text":"<p>Una vez descomentado el c\u00f3digo:</p> <ol> <li>Reinicia el servidor Odoo</li> <li>Ve a Aplicaciones</li> <li>Busca \"HolaMundo_V3\"</li> <li>Haz clic en los tres puntos del m\u00f3dulo</li> <li>Selecciona Actualizar</li> </ol> <p>Ahora el m\u00f3dulo tendr\u00e1 funcionalidad completa con vistas, modelos y men\u00fas.</p> M\u00f3dulo HolaMundo V3 funcionando con scaffold"},{"location":"5_4_primer_modulo/#archivos-opcionales","title":"Archivos Opcionales","text":"<ul> <li> <p><code>demo/demo.xml</code>: Contiene datos de demostraci\u00f3n que se cargan autom\u00e1ticamente si instalas el m\u00f3dulo con datos de prueba. Es \u00fatil para desarrollo pero generalmente se desactiva en producci\u00f3n.</p> </li> <li> <p><code>controllers/controllers.py</code>: Permite crear rutas web personalizadas (p\u00e1ginas accesibles desde el navegador). No lo necesitamos para un m\u00f3dulo b\u00e1sico.</p> </li> <li> <p><code>views/templates.xml</code>: Define templates QWeb para p\u00e1ginas web. \u00datil si quieres personalizar el frontend del m\u00f3dulo.</p> </li> </ul>"},{"location":"5_4_primer_modulo/#ventajas-de-usar-scaffold","title":"Ventajas de Usar Scaffold","text":"<ul> <li>Genera toda la estructura autom\u00e1ticamente</li> <li>Incluye ejemplos de c\u00f3digo comentados</li> <li>Asegura que sigues las convenciones de Odoo</li> <li>Ahorra tiempo en la creaci\u00f3n inicial</li> <li>Incluye archivos que podr\u00edas olvidar (como <code>__init__.py</code>)</li> </ul> <p>Tambi\u00e9n debemos tener en cuenta que hay ocasiones en que es aconsejable o no utilizar Scaffold</p> <p>Usa scaffold cuando:</p> <ul> <li>Empiezas un m\u00f3dulo nuevo desde cero</li> <li>Quieres asegurarte de tener la estructura correcta</li> <li>Necesitas ejemplos de c\u00f3digo para guiarte</li> </ul> <p>Crea manualmente cuando:</p> <ul> <li>Est\u00e1s aprendiendo y quieres entender cada archivo</li> <li>Necesitas solo una parte espec\u00edfica</li> <li>Quieres un m\u00f3dulo muy simple sin archivos extra</li> </ul>"},{"location":"5_4_primer_modulo/#resumen-de-las-tres-versiones","title":"Resumen de las Tres Versiones","text":"Versi\u00f3n Archivos Funcionalidad Objetivo de la implementaci\u00f3n V1 <code>__init__.py</code><code>__manifest__.py</code> Ninguna Estructura m\u00ednima de un m\u00f3dulo V2 V1 + models + views + security Completa con interfaz M\u00f3dulo funcional completo V3 Generado con scaffold Similar a V2 Uso de herramientas de Odoo"},{"location":"5_4_primer_modulo/#recursos-adicionales","title":"Recursos Adicionales","text":"<ul> <li>Documentaci\u00f3n oficial: Scaffolding</li> <li>Documentaci\u00f3n oficial: Module Manifest</li> <li>Documentaci\u00f3n oficial: Models</li> </ul>"},{"location":"6_1_creacion_modelo_basico/","title":"Creaci\u00f3n de un modelo b\u00e1sico, vistas, men\u00fas y actions","text":""},{"location":"6_1_creacion_modelo_basico/#creacion-de-un-modelo-basico","title":"Creaci\u00f3n de un Modelo B\u00e1sico","text":""},{"location":"6_1_creacion_modelo_basico/#introduccion","title":"Introducci\u00f3n","text":"<p>En esta secci\u00f3n vamos a realizar de forma guiada un ejemplo de desarrollo de un m\u00f3dulo que nos permitir\u00e1 gestionar la realizaci\u00f3n de proyectos de desarrollo inform\u00e1tico.</p> <p>B\u00e1sicamente, los elementos que vamos a tener en cuenta para nuestro m\u00f3dulo son los siguientes:</p> <ul> <li>Proyectos: Cada desarrollo de una aplicaci\u00f3n diferente ser\u00e1 un proyecto</li> <li>Tareas: El desarrollo se basa en la realizaci\u00f3n de tareas</li> <li>Sprints: Dividimos la fase de desarrollo en sprints temporales que agrupan una serie de tareas a realizar</li> <li>Desarrolladores: Son las personas que realizan cada una de las tareas del proyecto</li> </ul>"},{"location":"6_1_creacion_modelo_basico/#creacion-de-la-aplicacion","title":"Creaci\u00f3n de la Aplicaci\u00f3n","text":"<p>Para comenzar, puesto que ya tenemos el sistema configurado, procedemos a la creaci\u00f3n de la estructura de la aplicaci\u00f3n mediante scaffold.</p> <p>Debemos tener claro el nombre de nuestra aplicaci\u00f3n que ser\u00e1 gestion_tareas_sergio en mi caso.</p> <p>Creaci\u00f3n de estructura mediante <code>scaffold</code> para nuestro nuevo m\u00f3dulo</p> <pre><code>docker exec -it odoo_dev_dam odoo scaffold gestion_tareas_sergio /mnt/extra-addons\n</code></pre> <p>Comprobamos que se ha generado toda la estructura:</p> Creaci\u00f3n de la estructura del m\u00f3dulo <p>Permisos</p> <p>En caso de tener problemas de permisos, recuerda modificar propietarios o a\u00f1adir permisos a todos los elementos:</p> <pre><code># o cambiamos el propietario para poder editar los contenidos\nsudo chown -R sergio:sergio hola_mundo__v3/\n\n# o modificamos los permisos\ndocker exec -it odoo_dev_dam chmod 777 -R /mnt/extra-addons/gestion_tareas_sergio\n</code></pre> <p>Ahora configuramos el <code>__manifest__.py</code> para dar descripci\u00f3n de nuestra aplicaci\u00f3n y lo vamos a instalar para comprobar que todo funciona correctamente.</p> Comprobaci\u00f3n de que la aplicaci\u00f3n est\u00e1 instalada correctamente <p>Estar\u00eda bien crear un logotipo para nuestra aplicaci\u00f3n y as\u00ed identificarla r\u00e1pidamente.</p> <p>A\u00f1adir un Logo a tu M\u00f3dulo</p> <p>Para que tu m\u00f3dulo tenga un icono personalizado:</p> <ol> <li>Crea la carpeta: <code>static/description/</code></li> <li>Coloca una imagen PNG de 48x48 o 256x256 p\u00edxeles llamada exactamente <code>icon.png</code></li> <li>Importante: El logo solo se carga al instalar, no al actualizar</li> <li>Si cambias el logo: Desinstala \u2192 Reinicia \u2192 Reinstala el m\u00f3dulo</li> </ol> <pre><code>    # Crear estructura dentro del contenedor\n    mkdir -p static/description\n\n    # Copiar tu imagen desde el exterior del contenedor\n    docker cp icon.png /mnt/extra-addons/HolaMundo/static/description/icon.png\n\n    # Ajustar permisos dentro del contenedor si es preciso\n    chown ubuntu:ubuntu icon.png\n</code></pre> <p>\u00bfReiniciar o actualizar?</p> <p>Debes reiniciar el servidor de Odoo cuando:</p> <ul> <li>Modificas modelos Python (<code>models/*.py</code>), ya que el c\u00f3digo se carga al iniciar el servidor</li> <li>Cambias el archivo <code>__manifest__.py</code>, porque Odoo lo lee al cargar los m\u00f3dulos</li> </ul> <p>Puedes actualizar el m\u00f3dulo sin reiniciar el servidor si:</p> <ul> <li>Solo modificas vistas XML (formularios, listas, etc.)</li> <li>Cambias archivos de datos est\u00e1ticos (<code>views/*.xml</code>, <code>security/*.xml</code>, etc.)</li> <li>Ajustas controladores web (<code>controllers/*.py</code>), aunque en algunos casos puede requerir reinicio</li> </ul> <p>En ocasiones, si los cambios realizados en los m\u00f3dulos son muy grandes, la aplicaci\u00f3n puede fallar y es mejor desinstalar y volver a instalar la aplicaci\u00f3n, aunque esto conlleve la p\u00e9rdida de datos.</p>"},{"location":"6_1_creacion_modelo_basico/#creacion-de-modulo-basico-de-tareas","title":"Creaci\u00f3n de M\u00f3dulo B\u00e1sico de Tareas","text":"<p>Comenzaremos creando un m\u00f3dulo b\u00e1sico que contendr\u00e1 informaci\u00f3n de las tareas en las que se dividir\u00e1 nuestro desarrollo completo.</p>"},{"location":"6_1_creacion_modelo_basico/#anadir-el-modelo","title":"A\u00f1adir el Modelo","text":"<p>Lo primero de todo ser\u00e1 ir al fichero <code>models/models.py</code> y comenzar a modificar el fichero existente para crear el modelo seg\u00fan nuestras necesidades.</p> <p>Recordad que tenemos por una parte <code>__init__.py</code> donde se importan los modelos que hay en <code>./models</code>, y que aqu\u00ed tenemos otro <code>models/__init__.py</code> que nos indica los ficheros modelo concretos a importar, en este caso <code>models/models.py</code>.</p> Arquitectura de importaci\u00f3n de modelos <p>En principio, los campos que vamos a necesitar van a ser los siguientes:</p> <ul> <li>Nombre de tarea, de tipo texto corto (<code>fields.Char()</code>)</li> <li>Descripci\u00f3n, de tipo texto largo (<code>fields.Text()</code>)</li> </ul> <p>As\u00ed pues, comencemos modificando el modelo, para lo cual damos un nombre a la clase de la tarea y le asignamos un nombre y una descripci\u00f3n.</p> <p>El nombre que le vamos a dar a la clase es <code>tareas_sergio</code> en mi caso, y despu\u00e9s en el <code>_name</code> debemos especificar de nuevo este nombre precedido de forma correcta por el nombre de la aplicaci\u00f3n.</p> models.py <pre><code>from odoo import models, fields, api\n\nclass tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n    _description = 'Modelo de Tareas para Gesti\u00f3n de Proyectos'\n\n    nombre = fields.Char()\n    descripcion = fields.Text()\n</code></pre> <p>Intenta hacer esta parte sin mirar la soluci\u00f3n.</p> <p>Vamos a comenzar poco a poco, de forma que tras cada modificaci\u00f3n vamos a actualizar la aplicaci\u00f3n para comprobar que todo funciona correctamente. Si hacemos muchos cambios a la vez sin actualizar ni verificar, nos encontraremos con errores arrastrados que ser\u00e1n muy dif\u00edciles de solucionar.</p>"},{"location":"6_1_creacion_modelo_basico/#revision-de-la-base-de-datos","title":"Revisi\u00f3n de la Base de Datos","text":"<p>En Odoo, la estructura de las tablas creadas depende del modelo definido en el sistema. Odoo utiliza el ORM (Object-Relational Mapping) de Python para mapear clases a tablas en la base de datos PostgreSQL.</p> <p>As\u00ed pues, una vez instalado el m\u00f3dulo, si no hemos tenido ning\u00fan problema, podemos comprobar c\u00f3mo ha trabajado este ORM y c\u00f3mo debe haberse creado el modelo, por tanto debe haber cambios en la base de datos.</p> <p>Vamos a revisar estos cambios y comprobar que todo cambio en el modelo repercute en un cambio en las tablas.</p> <p>Para comprobar los cambios realizados en la base de datos, tenemos tres opciones:</p> <ul> <li>Desde el propio interfaz de Odoo en modo desarrollo</li> <li>Desde la l\u00ednea de comandos usando el interfaz de PostgreSQL</li> <li>Desde una herramienta de administraci\u00f3n de base de datos con interfaz gr\u00e1fico como DBeaver</li> </ul>"},{"location":"6_1_creacion_modelo_basico/#desde-el-interfaz-de-odoo","title":"Desde el Interfaz de Odoo","text":"<p>Para revisar los modelos desde el interfaz de Odoo, una vez en modo desarrollo, accedemos a Ajustes \u2192 T\u00e9cnico y ah\u00ed tenemos una secci\u00f3n dedicada a la Estructura de la base de datos:</p> Revisi\u00f3n de base de datos desde Odoo <p>Aqu\u00ed podemos ver un listado de todas las tablas tanto del propio sistema Odoo como de todas las aplicaciones que tenemos instaladas.</p> <p>En Odoo, el nombre de la tabla que se crea en la base de datos se determina principalmente por el atributo <code>_name</code> del modelo:</p> <ul> <li>Si defines <code>_name = 'mi.modelo'</code>, la tabla se llamar\u00e1 <code>mi_modelo</code></li> <li>Odoo reemplaza los puntos (<code>.</code>) por guiones bajos (<code>_</code>) para formar el nombre de la tabla</li> </ul> <p>Si buscamos el modelo que hemos creado, en mi caso <code>tareas_sergio</code>, hacemos clic sobre \u00e9l y podemos ver sus caracter\u00edsticas as\u00ed como los campos que tiene:</p> Revisi\u00f3n de base de datos desde Odoo - Campos del modelo <p>Como se puede ver en la figura anterior, adem\u00e1s de los dos campos que hemos creado para el modelo, Odoo crea autom\u00e1ticamente una serie de campos para llevar control de versiones y a\u00f1adir sus propios \u00edndices.</p>"},{"location":"6_1_creacion_modelo_basico/#desde-la-linea-de-comandos","title":"Desde la L\u00ednea de Comandos","text":"<p>Como somos apasionados de los sistemas, nos gusta comprobar que todo funciona desde el terminal, por lo que podemos entrar en el interfaz de PostgreSQL y desde ah\u00ed revisar tanto la existencia de la tabla asociada al modelo como sus campos.</p> <p>Para ello, entramos en el terminal del contenedor:</p> <pre><code>docker exec -it postgres_dev_dam bash\n</code></pre> <p>Accedemos al interfaz de comando de PostgreSQL:</p> <pre><code>psql -U odoo\n</code></pre> <p>Una vez en el interfaz, comprobamos las bases de datos existentes y cambiamos a la correspondiente:</p> <pre><code>\\l\n\\c nombre_base_datos\n</code></pre> <p>Buscamos la tabla con una de las siguientes opciones:</p> <pre><code>\\dt *sergio*\n</code></pre> <p>o con SQL:</p> <pre><code>SELECT * FROM pg_tables WHERE tablename LIKE '%sergio%';\n</code></pre> <p>En el primer caso, el <code>*</code> (asterisco) sirve como comod\u00edn.</p> <p>Finalmente, listamos los campos de la tabla:</p> <pre><code>\\d gestion_tareas_sergio_tareas_sergio\n</code></pre> <p>o con SQL:</p> <pre><code>SELECT column_name, data_type \nFROM information_schema.columns \nWHERE table_name = 'gestion_tareas_sergio_tareas_sergio';\n</code></pre> <p>Para salir del interfaz de PostgreSQL:</p> <pre><code>\\q\n</code></pre> Revisi\u00f3n de base de datos - Campos del modelo desde interfaz PostgreSQL"},{"location":"6_1_creacion_modelo_basico/#desde-dbeaver","title":"Desde DBeaver","text":"<p>Tambi\u00e9n podemos utilizar esta aplicaci\u00f3n de gesti\u00f3n de base de datos para acceder y comprobar las tablas y campos de nuestro modelo.</p> <p>Para ello, tras instalar la aplicaci\u00f3n, creamos una nueva conexi\u00f3n a la base de datos. Como hemos expuesto el puerto del contenedor en la definici\u00f3n del <code>docker-compose.yml</code>, podemos acceder como si se tratara de una base de datos en local.</p> <p>Creamos y configuramos una conexi\u00f3n:</p> Configuraci\u00f3n de conexi\u00f3n en DBeaver <p>Si todo funciona bien, podemos ver tambi\u00e9n la tabla y su estructura:</p> Tabla y su estructura en DBeaver"},{"location":"6_1_creacion_modelo_basico/#vistas-menu-y-actions","title":"Vistas, Men\u00fa y Actions","text":"<p>Ahora que ya tenemos el modelo definido y lo hemos revisado en la base de datos, es momento de continuar trabajando con nuestro m\u00f3dulo y hacer que sea visible desde el men\u00fa de Odoo.</p> <p>Para ello, tal y como hemos visto en el ejemplo de \"Hola Mundo V3\", tenemos que:</p> <ol> <li>Definir las vistas que queremos publicar</li> <li>Mostrar una opci\u00f3n en el men\u00fa para poder ver estas vistas</li> <li>Activar las acciones para dar funcionalidad al men\u00fa</li> </ol>"},{"location":"6_1_creacion_modelo_basico/#configurando-vistas","title":"Configurando Vistas","text":"<p>De momento, este modelo no es accesible desde ning\u00fan sitio: no tenemos ninguna vista. Por defecto, Odoo crea unas vistas b\u00e1sicas si no haces nada, pero vamos a ver d\u00f3nde est\u00e1n y c\u00f3mo personalizarlas.</p> <p>Las vistas est\u00e1n en el directorio <code>views/</code>, en un documento XML.</p> <p>En este fichero comentado tenemos algunos bloques:</p> <ul> <li>Uno de vista</li> <li>Uno de action (que veremos m\u00e1s adelante)</li> <li>Uno de server action</li> <li>Uno de men\u00fas</li> </ul> <p>Vamos a ir vi\u00e9ndolos poco a poco, porque se trata de ir definiendo cada uno de esos bloques.</p> <p>Realmente, un bloque <code>&lt;record&gt;</code> implica que va a ser un registro en la base de datos. Este registro necesita saber d\u00f3nde se va a guardar, en el primer caso en el modelo <code>ir.ui.view</code> (las vistas tambi\u00e9n son modelos en Odoo).</p> <p>As\u00ed pues comenzamos descomentando el primer bloque y ponemos un <code>id</code> \u00fanico, en mi caso, por ejemplo <code>gestion_tareas_sergio.list</code>, que ser\u00e1 la vista en modo lista (anteriormente Tree) de las tareas.</p> <p>Establecemos un nombre (no es lo m\u00e1s importante, pero hay que establecerlo), por ejemplo <code>Gestion Tareas Sergio list</code>.</p> <p>Despu\u00e9s establecemos el modelo que debe coincidir con el nombre del modelo que hemos establecido al definirlo, en mi caso <code>gestion_tareas_sergio.tareas_sergio</code>. Esto es fundamental.</p> <p>A continuaci\u00f3n, a\u00f1adimos el listado de campos que mostrar\u00e1 la vista. En este caso, solo tenemos dos campos creados: <code>nombre</code> y <code>descripcion</code>. De nuevo son los mismos que hemos establecido en el modelo.</p> Definiendo la vista de un modelo <p>Este XML indica que es una vista de tipo list y que mostrar\u00e1 los campos especificados del modelo. Estos campos deben existir en el fichero Python, como hemos visto antes.</p> C\u00f3digo de la vista <pre><code>&lt;!-- Vista de Lista --&gt;\n&lt;record model=\"ir.ui.view\" id=\"gestion_tareas_sergio.list\"&gt;\n  &lt;field name=\"name\"&gt;Gestion Tareas Sergio list&lt;/field&gt;\n  &lt;field name=\"model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n  &lt;field name=\"arch\" type=\"xml\"&gt;\n    &lt;list&gt;\n      &lt;field name=\"nombre\"/&gt;\n      &lt;field name=\"descripcion\"/&gt;\n    &lt;/list&gt;\n  &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Revisando la vista definida</p> <p>Una vez definida la vista, ahora deber\u00edamos poder encontrarla si consultamos desde la aplicaci\u00f3n el listado de vistas. Si actualizamos el m\u00f3dulo, la podremos encontrar. En este caso, no hemos tenido que reiniciar el servicio.</p> <p></p> Listado de vistas disponibles <p></p>"},{"location":"6_1_creacion_modelo_basico/#actions","title":"Actions","text":"<p>La vista a\u00fan es inaccesible porque no hay ning\u00fan men\u00fa que permita acceder a ella. Para relacionarlo y ver una lista de tareas, vamos a activar el action correspondiente.</p> <p>Un action permite abrir, cuando se relacione con una opci\u00f3n de men\u00fa, la vista correspondiente. Ser\u00e1 un registro del modelo de acciones de ventana (<code>ir.actions.act_window</code>).</p> <p>Continuamos pues descomentando el siguiente bloque de c\u00f3digo y asignando un <code>id</code> \u00fanico, por ejemplo <code>gestion_tareas_sergio.action_window</code>. Le ponemos un nombre, indicamos el modelo sobre el que act\u00faa y el orden en el que queremos que se muestren las vistas (primero la list que acabamos de crear y despu\u00e9s la form, que Odoo generar\u00e1 autom\u00e1ticamente si no la hemos definido).</p> C\u00f3digo del action <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"gestion_tareas_sergio.action_window\"&gt;\n  &lt;field name=\"name\"&gt;Gesti\u00f3n de Tareas&lt;/field&gt;\n  &lt;field name=\"res_model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n  &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Una acci\u00f3n relaciona un men\u00fa o bot\u00f3n con una acci\u00f3n que se desencadena en el cliente y se convierte en una petici\u00f3n al servidor. En este caso, el action se transforma en una petici\u00f3n que demanda al servidor las vistas list y form del modelo de tareas, y el servidor devolver\u00e1 la vista list creada y una vista form generada autom\u00e1ticamente.</p>"},{"location":"6_1_creacion_modelo_basico/#menus","title":"Men\u00fas","text":"<p>Para que este action funcione, el cliente debe tener un men\u00fa.</p> <p>As\u00ed que seguimos descomentando el bloque de c\u00f3digo de men\u00fa y vamos a crear una opci\u00f3n de men\u00fa principal, por ejemplo <code>Gesti\u00f3n Tareas Sergio</code>, y de ah\u00ed colgar\u00e1 un submen\u00fa llamado <code>Gesti\u00f3n</code>, y finalmente otro llamado <code>Tareas</code>. El action del men\u00fa <code>Tareas</code> ser\u00e1 el que hemos definido antes, para que al pulsar se cargue la vista de tareas.</p> <p>La <code>action</code> de este men\u00fa ser\u00e1 el <code>id</code> del <code>ir.actions.act_window</code> que hemos definido anteriormente.</p> <p>Por una parte tenemos el c\u00f3digo:</p> Bloques de men\u00fa <pre><code>&lt;!-- Top menu item --&gt;\n&lt;menuitem name=\"Gesti\u00f3n Tareas Sergio\" id=\"gestion_tareas_sergio.menu_root\"/&gt;\n\n&lt;!-- menu categories --&gt;\n&lt;menuitem name=\"Gesti\u00f3n\" id=\"gestion_tareas_sergio.gestion\" \n          parent=\"gestion_tareas_sergio.menu_root\"/&gt;\n\n&lt;!-- actions --&gt;\n&lt;menuitem name=\"Tareas\" id=\"gestion_tareas_sergio.gestion_tareas\" \n          parent=\"gestion_tareas_sergio.gestion\"\n          action=\"gestion_tareas_sergio.action_window\"/&gt;\n</code></pre> <p>Y por otra tenemos el esquema de c\u00f3mo debe estar todo conectado:</p> Estructura de la configuraci\u00f3n del men\u00fa <p>Ahora ya tenemos definido el men\u00fa y antes de seguir ser\u00eda aconsejable volver a actualizar el m\u00f3dulo para asegurarnos de que no tenemos ning\u00fan error y comprobar si sale o no el men\u00fa.</p> <p>Si revisamos, sigue sin salir nuestra aplicaci\u00f3n en el men\u00fa tras haberlo definido. Esto es debido a un tema de permisos que abordamos en el siguiente punto.</p>"},{"location":"6_1_creacion_modelo_basico/#permisos","title":"Permisos","text":"<p>En Odoo, para que un usuario pueda ver un men\u00fa y acceder a listas o formularios de un modelo, se deben cumplir ciertos requisitos de permisos y configuraciones.</p> <p>Se debe definir un archivo XML o CSV con los permisos para el modelo. Esto se hace en un archivo como <code>security/ir.model.access.csv</code>.</p> <p>Cada l\u00ednea define:</p> <ul> <li>Modelo</li> <li>Grupo</li> <li>Permisos: leer (<code>perm_read</code>), escribir (<code>perm_write</code>), crear (<code>perm_create</code>), borrar (<code>perm_unlink</code>)</li> </ul> <p>Ejemplo <code>security/ir.model.access.csv</code> permisos</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_gestion_tareas_sergio_tareas_sergio,acceso_tareas_sergio,model_gestion_tareas_sergio_tareas_sergio,base.group_user,1,1,1,1\n</code></pre> <p>Donde cada l\u00ednea representa un conjunto de permisos para un grupo sobre un modelo. Los campos son:</p> <ul> <li>id: Identificador \u00fanico del registro (puede ser cualquier nombre \u00fanico)</li> <li>name: Nombre legible del permiso, puede ser cualquiera</li> <li>model_id:id: Hace referencia al modelo al que se aplican los permisos. La forma est\u00e1ndar de referenciarlo es <code>model_&lt;nombre_del_modelo&gt;</code>, donde <code>&lt;nombre_del_modelo&gt;</code> es el valor de <code>_name</code> del modelo, sustituyendo los puntos (<code>.</code>) por guiones bajos (<code>_</code>). Puede parecer poco intuitivo, pero es el formato que exige Odoo</li> <li>group_id:id: Grupo de usuarios al que se le asignan los permisos (puede ser <code>base.group_user</code>, <code>base.group_system</code>, etc.). Si se deja vac\u00edo, aplica a todos los usuarios</li> <li>perm_read: 1 si puede leer, 0 si no</li> <li>perm_write: 1 si puede modificar, 0 si no</li> <li>perm_create: 1 si puede crear, 0 si no</li> <li>perm_unlink: 1 si puede borrar, 0 si no</li> </ul> <p>De esta forma, para que un men\u00fa sea visible:</p> <ul> <li>El usuario debe tener acceso al grupo asignado al men\u00fa. Para simplificar, de momento van a ser todos los usuarios: <code>base.group_user</code></li> <li>El men\u00fa debe estar vinculado a una acci\u00f3n, aspecto que en nuestro caso ya hemos hecho</li> <li>Se debe tener al menos una vista de tipo <code>list</code> o <code>form</code> para que la acci\u00f3n funcione correctamente</li> </ul>"},{"location":"6_1_creacion_modelo_basico/#configurar-el-manifest","title":"Configurar el Manifest","text":"<p>En el fichero <code>__manifest__.py</code> hay que habilitar estos permisos para que se carguen. Esta l\u00ednea suele venir comentada por defecto y hay que descomentarla:</p> <pre><code>'data': [\n    'security/ir.model.access.csv',\n    'views/views.xml',\n],\n</code></pre> <p>Ahora ya deber\u00edamos verlo todo: reiniciamos el servidor Odoo, actualizamos el m\u00f3dulo y ya aparece la opci\u00f3n de men\u00fa principal. Si la cargamos, tenemos <code>Gesti\u00f3n</code> y <code>Tareas</code>. Al pulsar en <code>Tareas</code> aparece la vista con los campos definidos. Si pulsamos en \"Nuevo\", podemos crear tareas (esto es una vista formulario generada por defecto).</p>"},{"location":"6_1_creacion_modelo_basico/#verificacion-rapida","title":"Verificaci\u00f3n R\u00e1pida","text":"<p>Para comprobar si todo est\u00e1 bien configurado:</p> <ol> <li>Activa el modo desarrollador</li> <li>Ve a Ajustes \u2192 T\u00e9cnico \u2192 Seguridad \u2192 Reglas de acceso y Reglas de registro</li> <li>Aseg\u00farate de que el usuario pertenece al grupo correcto</li> <li>Verifica que el men\u00fa tiene una acci\u00f3n v\u00e1lida y que el modelo tiene permisos definidos</li> </ol> <p>O directamente, podemos ver que ya aparece en el men\u00fa de aplicaci\u00f3n todos los elementos que hemos definido:</p> Vista de men\u00fa y aplicaci\u00f3n funcionando <p>En esta imagen estamos viendo la vista tipo listado con los dos campos, y adem\u00e1s se ha accedido al men\u00fa y se pueden ver los 3 niveles de men\u00fa que hemos definido: Gesti\u00f3n Tareas Sergio \u2192 Gesti\u00f3n \u2192 Tareas</p> <p>De esta manera, hemos visto c\u00f3mo crear un m\u00f3dulo b\u00e1sico con funcionalidad b\u00e1sica: un modelo, vistas, permisos, opciones de men\u00fa y c\u00f3mo relacionarlo todo.</p>"},{"location":"6_1_creacion_modelo_basico/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora que has visto c\u00f3mo crear un m\u00f3dulo completo de gesti\u00f3n de tareas, es tu turno de aplicar estos mismos conceptos en un contexto diferente. Vamos a crear un Gestor de Restaurante que seguir\u00e1 la misma estructura t\u00e9cnica pero adaptada al mundo de la gastronom\u00eda.</p>"},{"location":"6_1_creacion_modelo_basico/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>Vas a desarrollar un sistema para gestionar un restaurante que permita gestionar platos del men\u00fa, organizarlos en men\u00fas del d\u00eda/semanales, controlar ingredientes y gestionar categor\u00edas.</p> <p>En esta primera sesi\u00f3n crear\u00e1s el m\u00f3dulo b\u00e1sico con el modelo Platos, con dos campos sencillos (nombre y descripci\u00f3n), siguiendo los mismos pasos que acabamos de ver con el modelo de Tareas.</p> <p>Especificaciones t\u00e9cnicas:</p> <ul> <li>M\u00f3dulo: <code>gestion_restaurante_tunombre</code></li> <li>Modelo: Plato (<code>platos_tunombre</code>)</li> <li>Campos: <code>nombre</code> (Char) y <code>descripcion</code> (Text)</li> <li>Men\u00fa: Gesti\u00f3n Restaurante \u2192 Men\u00fa \u2192 Platos</li> </ul>"},{"location":"6_1_creacion_modelo_basico/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Crear el m\u00f3dulo con scaffold </p><pre><code>docker exec -it odoo_dev_dam odoo scaffold gestion_restaurante_tunombre /mnt/extra-addons\n</code></pre><p></p> </li> <li> <p>Ajustar permisos</p> <ul> <li>Recuerda que tienes que cambiar o el propietario de las carpetas o los permisos, como m\u00e1s c\u00f3modo te sientas.</li> </ul> </li> <li> <p>Configurar el <code>__manifest__.py</code></p> <ul> <li>Actualiza el nombre a algo como \"Gesti\u00f3n de Restaurante\"</li> <li>Actualiza la descripci\u00f3n</li> <li>Aseg\u00farate de que la l\u00ednea de seguridad est\u00e1 descomentada</li> </ul> </li> <li> <p>Crear el modelo <code>Plato</code> en <code>models/models.py</code></p> <ul> <li>Nombre de la clase: <code>platos_tunombre</code></li> <li><code>_name</code>: <code>'gestion_restaurante_tunombre.platos_tunombre'</code></li> <li><code>_description</code>: \"Modelo de Platos para Gesti\u00f3n de Restaurante\"</li> <li>Campos: <code>nombre</code> y <code>descripcion</code></li> </ul> </li> <li> <p>Verificar el modelo en la base de datos</p> <ul> <li>Desde Odoo: Ajustes \u2192 T\u00e9cnico \u2192 Modelos</li> <li>Busca tu modelo y verifica los campos</li> <li>Opcional: Comprueba desde PostgreSQL o DBeaver</li> </ul> </li> <li> <p>Configurar la vista en <code>views/views.xml</code></p> <ul> <li>Descomenta y modifica el bloque de vista tipo <code>list</code></li> <li>Aseg\u00farate de que el <code>id</code> es \u00fanico (ej: <code>gestion_restaurante_tunombre.list</code>)</li> <li>Indica correctamente el <code>model</code></li> <li>A\u00f1ade los campos <code>nombre</code> y <code>descripcion</code></li> </ul> </li> <li> <p>Configurar el action</p> <ul> <li>Descomenta el bloque <code>ir.actions.act_window</code></li> <li>Ponle un nombre descriptivo (ej: \"Gesti\u00f3n de Platos\")</li> <li>Indica el modelo correcto</li> <li>View mode: <code>list,form</code></li> </ul> </li> <li> <p>Configurar los men\u00fas</p> <ul> <li>Men\u00fa principal: \"Gesti\u00f3n Restaurante\"</li> <li>Submen\u00fa: \"Men\u00fa\"</li> <li>Opci\u00f3n: \"Platos\" (vinculada al action)</li> </ul> </li> <li> <p>Configurar permisos en <code>security/ir.model.access.csv</code> </p><pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_gestion_restaurante_tunombre_platos,acceso_platos,model_gestion_restaurante_tunombre_platos_tunombre,base.group_user,1,1,1,1\n</code></pre><p></p> </li> <li> <p>Instalar y probar</p> <ul> <li>Reinicia el servidor Odoo</li> <li>Activa modo desarrollador</li> <li>Actualiza lista de aplicaciones</li> <li>Instala tu m\u00f3dulo</li> <li>Verifica que aparece el men\u00fa</li> <li>Crea algunos platos de prueba</li> </ul> </li> </ol>"},{"location":"6_1_creacion_modelo_basico/#verificaciones","title":"Verificaciones","text":"<p>Antes de dar por terminado el ejercicio, comprueba que:</p> <ul> <li>El m\u00f3dulo se instala sin errores</li> <li>Aparece el men\u00fa \"Gesti\u00f3n Restaurante\" en la barra superior</li> <li>Al entrar en \"Men\u00fa \u2192 Platos\" aparece la vista de lista vac\u00eda</li> <li>Puedes crear nuevos platos con el bot\u00f3n \"Nuevo\"</li> <li>El formulario muestra los campos <code>nombre</code> y <code>descripcion</code></li> <li>Puedes guardar platos y aparecen en la lista</li> </ul>"},{"location":"6_1_creacion_modelo_basico/#resultado-esperado","title":"Resultado Esperado","text":"<p>Al finalizar esta sesi\u00f3n deber\u00edas tener:</p> <ul> <li>Un m\u00f3dulo Odoo instalado y funcionando</li> <li>Un modelo <code>Plato</code> con dos campos b\u00e1sicos</li> <li>Una vista de lista mostrando los platos</li> <li>Una vista de formulario (generada autom\u00e1ticamente) para crear/editar platos</li> <li>Un men\u00fa de navegaci\u00f3n de tres niveles</li> <li>Permisos configurados correctamente</li> </ul> <p>Datos de Prueba Sugeridos</p> <p>Para probar tu m\u00f3dulo, crea al menos estos 3 platos:</p> <ol> <li> <p>Ensalada C\u00e9sar</p> <ul> <li>Descripci\u00f3n: \"Lechuga romana, pollo a la parrilla, queso parmesano y salsa c\u00e9sar\"</li> </ul> </li> <li> <p>Pizza Margarita</p> <ul> <li>Descripci\u00f3n: \"Tomate, mozzarella, albahaca fresca y aceite de oliva\"</li> </ul> </li> <li> <p>Tiramis\u00fa</p> <ul> <li>Descripci\u00f3n: \"Postre italiano con caf\u00e9, mascarpone y cacao\"</li> </ul> </li> </ol> <p>Consejos</p> <ul> <li>Haz commits frecuentes en Git mientras desarrollas</li> <li>Si algo no funciona, revisa los logs: <code>docker logs odoo_dev_dam -f</code></li> <li>No olvides reiniciar el servidor despu\u00e9s de modificar archivos Python</li> <li>Puedes actualizar el m\u00f3dulo sin reiniciar si solo cambias XML</li> <li>Guarda capturas de pantalla de tu progreso</li> </ul> <p>Preguntas para Reflexionar</p> <p>Una vez terminado el ejercicio, reflexiona sobre:</p> <ol> <li>\u00bfQu\u00e9 diferencias t\u00e9cnicas hay entre tu m\u00f3dulo de Restaurante y el de Gesti\u00f3n de Tareas?</li> <li>\u00bfPor qu\u00e9 es importante la nomenclatura en <code>_name</code> del modelo?</li> <li>\u00bfQu\u00e9 pasar\u00eda si no configuramos los permisos en <code>ir.model.access.csv</code>?</li> <li>\u00bfC\u00f3mo se relaciona el <code>id</code> del action con el atributo <code>action</code> del men\u00fa?</li> </ol> <p>En la siguiente sesi\u00f3n a\u00f1adiremos m\u00e1s campos al modelo de Platos (precio, tiempo de preparaci\u00f3n, disponibilidad, etc.) y empezaremos a crear relaciones con otros modelos como Men\u00fas e Ingredientes.</p>"},{"location":"6_2_campos_basico_relacionales/","title":"Campos b\u00e1sicos y relacionales","text":""},{"location":"6_2_campos_basico_relacionales/#campos-basicos-y-relacionales","title":"Campos B\u00e1sicos y Relacionales","text":"<p>Seguimos con el ejemplo creado en la secci\u00f3n anterior y en este apartado veremos c\u00f3mo a\u00f1adir distintos campos b\u00e1sicos y relaciones a nuestros modelos en Odoo. No nos centraremos en vistas avanzadas, sino en ver la relaci\u00f3n entre modelos y c\u00f3mo Odoo toma vistas por defecto, adem\u00e1s de c\u00f3mo podemos modificarlas.</p> <p>Tenemos un modelo <code>tareas_sergio</code> con dos campos propios de tipo car\u00e1cter llamados <code>nombre</code> y <code>descripcion</code>.</p> <p>Documentaci\u00f3n de desarrollo ORM</p> <p>Puedes consultar la documentaci\u00f3n de desarrollo de Odoo para m\u00e1s informaci\u00f3n sobre el ORM y los campos disponibles.</p>"},{"location":"6_2_campos_basico_relacionales/#campos-basicos-y-parametros","title":"Campos B\u00e1sicos y Par\u00e1metros","text":"<p>Al crear un campo, puedes a\u00f1adir par\u00e1metros que modifican su comportamiento:</p> <ul> <li>string: Etiqueta que se muestra en la interfaz. Si no se indica, se usa el nombre del campo</li> <li>readonly: Hace el campo de solo lectura (no editable)</li> <li>required: Hace el campo obligatorio</li> <li>help: Mensaje de ayuda que aparece al pasar el cursor sobre el campo</li> </ul> <p>Cuando modificas el modelo, debes reiniciar el servidor y actualizar el m\u00f3dulo para aplicar los cambios.</p>"},{"location":"6_2_campos_basico_relacionales/#ejemplo-de-campos-basicos","title":"Ejemplo de Campos B\u00e1sicos","text":"<p>Vamos a a\u00f1adir los siguientes campos al modelo <code>tareas_sergio</code>:</p> <ul> <li><code>fecha_creacion</code>: tipo <code>Date</code></li> <li><code>fecha_ini</code>: tipo <code>Datetime</code></li> <li><code>fecha_fin</code>: tipo <code>Datetime</code></li> <li><code>finalizado</code>: tipo <code>Boolean</code></li> </ul> <p>Adem\u00e1s, a\u00f1adiremos par\u00e1metros a todos los campos (tanto los nuevos como los existentes) para mejorar la usabilidad.</p> models.py <pre><code>from odoo import models, fields, api\n\nclass tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n    _description = 'Modelo de Tareas para Gesti\u00f3n de Proyectos'\n\n    nombre = fields.Char(\n        string=\"Nombre\", \n        required=True, \n        help=\"Introduzca el nombre de la tarea\")\n\n    descripcion = fields.Text(\n        string=\"Descripci\u00f3n\", \n        help=\"Breve descripci\u00f3n de la tarea\")\n\n    fecha_creacion = fields.Date(\n        string=\"Fecha Creaci\u00f3n\", \n        required=True, \n        help=\"Fecha en la que se dio de alta la tarea\")\n\n    fecha_ini = fields.Datetime(\n        string=\"Fecha Inicio\", \n        required=True, \n        help=\"Fecha y hora de inicio de la tarea\")\n\n    fecha_fin = fields.Datetime(\n        string=\"Fecha Final\", \n        help=\"Fecha y hora de finalizaci\u00f3n de la tarea\")\n\n    finalizado = fields.Boolean(\n        string=\"Finalizado\", \n        help=\"Indica si la tarea ha sido finalizada o no\")\n</code></pre> <p>Una vez a\u00f1adidos, comprobamos que todo funciona bien:</p> <ol> <li>Reinicia el servidor</li> <li>Actualiza el m\u00f3dulo</li> <li>Comprueba que aparecen los nuevos campos</li> <li>Verifica que sale la ayuda al pasar el cursor</li> <li>Comprueba que los campos obligatorios funcionan correctamente</li> </ol>"},{"location":"6_2_campos_basico_relacionales/#actualizando-las-vistas","title":"Actualizando las Vistas","text":"<p>Por defecto, Odoo crea una vista de tipo formulario con todos los campos, pero suele ser muy b\u00e1sica y poco organizada.</p> <p>Para personalizar la vista, vamos a editar el archivo <code>views/views.xml</code> y definir expl\u00edcitamente qu\u00e9 campos queremos mostrar y c\u00f3mo organizarlos.</p> <p>Estrategia: Copiar la vista <code>list</code> existente y adaptarla para crear una vista <code>form</code>:</p> <ul> <li>Cambiar <code>&lt;list&gt;</code> por <code>&lt;form&gt;</code></li> <li>A\u00f1adir <code>&lt;sheet&gt;</code> y <code>&lt;group&gt;</code> para organizar los campos</li> <li>Seleccionar qu\u00e9 campos mostrar en cada vista</li> </ul> views/views.xml <pre><code>&lt;!-- Vista de Lista --&gt;\n&lt;record model=\"ir.ui.view\" id=\"tareas_list\"&gt;\n    &lt;field name=\"name\"&gt;gestion_tareas_sergio.tareas_sergio.list&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;list&gt;\n            &lt;field name=\"nombre\"/&gt;\n            &lt;field name=\"descripcion\"/&gt;\n            &lt;field name=\"finalizado\"/&gt;\n        &lt;/list&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n\n&lt;!-- Vista de Formulario --&gt;\n&lt;record model=\"ir.ui.view\" id=\"tareas_form\"&gt;\n    &lt;field name=\"name\"&gt;gestion_tareas_sergio.tareas_sergio.form&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;form&gt;\n            &lt;sheet&gt;\n                &lt;group&gt;\n                    &lt;field name=\"nombre\"/&gt;\n                    &lt;field name=\"descripcion\"/&gt;\n                    &lt;field name=\"fecha_creacion\"/&gt;\n                    &lt;field name=\"fecha_ini\"/&gt;\n                    &lt;field name=\"fecha_fin\"/&gt;\n                    &lt;field name=\"finalizado\"/&gt;\n                &lt;/group&gt;\n            &lt;/sheet&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Observa que no todos los campos aparecen en todas las vistas. En este ejemplo:</p> <ul> <li>Vista lista: 3 campos (nombre, descripci\u00f3n, finalizado)</li> <li>Vista formulario: 6 campos (todos)</li> </ul> <p>Nombre del modelo</p> <p>Es fundamental que el valor del campo <code>model</code> coincida exactamente con el <code>_name</code> del modelo Python. Si te equivocas, Odoo mostrar\u00e1 vistas gen\u00e9ricas por defecto.</p> <p>Comprueba que todo funciona correctamente y que puedes introducir valores en todos los campos.</p>"},{"location":"6_2_campos_basico_relacionales/#relaciones-entre-modelos","title":"Relaciones Entre Modelos","text":"<p>Las relaciones entre modelos (y por tanto entre tablas de la base de datos) se simplifican gracias al ORM. Odoo proporciona tres tipos de campos relacionales:</p> Tipo Uso Ejemplo Many2one Muchos a uno Muchas tareas \u2192 1 sprint One2many Uno a muchos 1 sprint \u2192 muchas tareas Many2many Muchos a muchos Tareas \u2194 Tecnolog\u00edas <p>Gesti\u00f3n autom\u00e1tica</p> <p>Las relaciones Many2many requieren una tabla intermedia en la base de datos, pero Odoo la crea autom\u00e1ticamente. No tienes que preocuparte por las claves for\u00e1neas ni las restricciones de integridad.</p>"},{"location":"6_2_campos_basico_relacionales/#campos-relacionales-many2one","title":"Campos Relacionales: Many2one","text":"<p>Vamos a crear una relaci\u00f3n Many2one entre tareas y sprints. Primero necesitamos entender qu\u00e9 es un sprint:</p> <p>Sprints y Tareas</p> <p>Un sprint es un ciclo de trabajo corto y repetitivo, t\u00edpicamente de 1 a 4 semanas, en el que:</p> <ul> <li>Se planifican tareas espec\u00edficas (historias de usuario, bugs, mejoras)</li> <li>Se ejecutan esas tareas con un objetivo claro</li> <li>Se revisa el trabajo realizado al final del sprint</li> <li>Se reflexiona sobre c\u00f3mo mejorar en el siguiente sprint</li> </ul> <p>Un sprint contiene varias tareas (tambi\u00e9n llamadas issues, tickets o historias de usuario) que son las unidades de trabajo que deben completarse dentro del sprint.</p>"},{"location":"6_2_campos_basico_relacionales/#crear-el-modelo-sprint","title":"Crear el Modelo Sprint","text":"<p>Vamos a crear un nuevo modelo <code>sprint</code> con los siguientes campos:</p> <ul> <li><code>nombre</code></li> <li><code>descripcion</code></li> <li><code>fecha_ini</code></li> <li><code>fecha_fin</code></li> </ul> <p>Intenta generar el c\u00f3digo t\u00fa mismo antes de mirar la soluci\u00f3n. Es muy sencillo porque la mayor\u00eda de los campos son iguales a los del modelo de tareas.</p> Modelo Sprint en models.py <pre><code>class sprints_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.sprints_sergio'\n    _description = 'Modelo de Sprints para Gesti\u00f3n de Proyectos'\n\n    nombre = fields.Char(\n        string=\"Nombre\", \n        required=True, \n        help=\"Introduzca el nombre del sprint\")\n\n    descripcion = fields.Text(\n        string=\"Descripci\u00f3n\", \n        help=\"Breve descripci\u00f3n del sprint\")\n\n    fecha_ini = fields.Datetime(\n        string=\"Fecha Inicio\", \n        required=True, \n        help=\"Fecha y hora de inicio del sprint\")\n\n    fecha_fin = fields.Datetime(\n        string=\"Fecha Final\", \n        help=\"Fecha y hora de finalizaci\u00f3n del sprint\")\n</code></pre> <p>Antes de continuar</p> <p>Reinicia el servidor y actualiza el m\u00f3dulo para asegurarte de que el nuevo modelo se crea correctamente en la base de datos.</p>"},{"location":"6_2_campos_basico_relacionales/#crear-la-relacion-many2one","title":"Crear la Relaci\u00f3n Many2one","text":"<p>Una vez tenemos el modelo Sprint, podemos relacionarlo con Tareas. A\u00f1adimos un campo <code>sprint</code> en el modelo <code>tareas_sergio</code>:</p> <p>Ejemplo de creaci\u00f3n de campo Many2one</p> <pre><code>sprint = fields.Many2one(\n    'gestion_tareas_sergio.sprints_sergio', \n    string='Sprint relacionado', \n    ondelete='set null', \n    help='Sprint al que pertenece esta tarea')\n</code></pre> <p>Explicaci\u00f3n de los par\u00e1metros:</p> <ul> <li><code>sprint</code>: Nombre del campo en el modelo actual</li> <li><code>fields.Many2one(...)</code>: Define una relaci\u00f3n de muchos a uno</li> <li><code>'gestion_tareas_sergio.sprints_sergio'</code>: Modelo destino de la relaci\u00f3n</li> <li><code>string='Sprint relacionado'</code>: Etiqueta en la interfaz de usuario</li> <li><code>ondelete='set null'</code>: Si se elimina el sprint, este campo se pone a <code>null</code> (la tarea no se elimina)</li> <li><code>help</code>: Texto de ayuda</li> </ul> <p>Opciones de <code>ondelete</code>:</p> Valor Comportamiento <code>set null</code> Pone el campo a NULL (por defecto) <code>cascade</code> Elimina tambi\u00e9n el registro relacionado <code>restrict</code> Impide eliminar si hay registros relacionados <code>set default</code> Pone el valor por defecto <code>no action</code> No hace nada (puede causar errores) <p>Con esta simple l\u00ednea, el ORM gestiona autom\u00e1ticamente toda la relaci\u00f3n entre los modelos.</p>"},{"location":"6_2_campos_basico_relacionales/#configurar-permisos-y-vistas","title":"Configurar Permisos y Vistas","text":"<p>Para que el nuevo modelo sea accesible, debemos:</p> <ol> <li> <p>A\u00f1adir permisos en <code>security/ir.model.access.csv</code>:</p> ir.model.access.csv <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_gestion_tareas_sergio_tareas_sergio,acceso_tareas_sergio,model_gestion_tareas_sergio_tareas_sergio,base.group_user,1,1,1,1\naccess_gestion_tareas_sergio_sprints_sergio,acceso_sprints_sergio,model_gestion_tareas_sergio_sprints_sergio,base.group_user,1,1,1,1\n</code></pre> </li> <li> <p>A\u00f1adir el campo <code>sprint</code> en la vista de formulario de Tareas:</p> <pre><code>&lt;field name=\"sprint\"/&gt;\n</code></pre> </li> <li> <p>Opcional: Crear vistas y men\u00fas para el modelo Sprint (si no, Odoo usar\u00e1 vistas por defecto)</p> </li> </ol> <p>Prueba y observa que:  </p> <ul> <li>Ya tienes el nuevo campo <code>sprint</code> en el formulario de tareas  </li> <li>Puedes seleccionar un sprint existente  </li> <li>Puedes crear nuevos sprints directamente desde el formulario de tareas (bot\u00f3n \"+\")</li> </ul> <p>si no sale bien el nombre del sprint en la tarea</p> <p>Si al indicar el nombre del sprint en la tarea, en vez de mostrar el nombre del sprint sale algo as\u00ed como <code>gestion_tareas_sergio.tareas_sergio,1</code> es debido a que el primer campo que identifica el sprint debe ser <code>name</code>y no <code>nombre</code>.</p> <p>Cambia en el modelo de <code>sprints_sergio</code></p> <p></p><pre><code>    nombre = fields.Char(\n</code></pre> por  <pre><code>    name = fields.Char(\n</code></pre><p></p> <p>Es aconsejable que en TODOS los modelos tener el campo <code>name</code> que lo identifique, cosa que no hicimos en el modelo <code>tareas_sergio</code>. \u00bfCrees que deber\u00edas cambiarlo?</p>"},{"location":"6_2_campos_basico_relacionales/#campos-relacionales-one2many","title":"Campos Relacionales: One2many","text":"<p>La relaci\u00f3n One2many es la inversa de Many2one. Permite que desde un registro padre (sprint) podamos ver y gestionar todos sus registros hijos (tareas).</p> <p>En la pr\u00e1ctica, esto significa que desde el formulario de un sprint podremos ver todas las tareas que le pertenecen.</p>"},{"location":"6_2_campos_basico_relacionales/#crear-la-relacion-one2many","title":"Crear la Relaci\u00f3n One2many","text":"<p>A\u00f1adimos un campo <code>tareas</code> en el modelo <code>sprint</code>:</p> <p>Ejemplo de creaci\u00f3n de campo One2many</p> <pre><code>tareas = fields.One2many(\n    'gestion_tareas_sergio.tareas_sergio', \n    'sprint', \n    string='Tareas del Sprint')\n</code></pre> <p>Explicaci\u00f3n de los par\u00e1metros:</p> <ul> <li><code>tareas</code>: Nombre del campo en el modelo actual</li> <li><code>'gestion_tareas_sergio.tareas_sergio'</code>: Modelo relacionado (tareas)</li> <li><code>'sprint'</code>: Campo inverso en el modelo de tareas (el Many2one que creamos antes)</li> <li><code>string='Tareas del Sprint'</code>: Etiqueta en la interfaz</li> </ul> <p>Campo inverso obligatorio</p> <p>El segundo par\u00e1metro (<code>'sprint'</code>) es imprescindible y debe coincidir exactamente con el nombre del campo Many2one en el modelo de tareas. Si no existe o est\u00e1 mal escrito, dar\u00e1 error.</p> <p>Gracias a esta definici\u00f3n, desde el formulario de un sprint podemos:</p> <ul> <li>Ver todas las tareas relacionadas</li> <li>Crear nuevas tareas directamente</li> <li>Editar o eliminar tareas existentes</li> </ul> <p>Ejemplo visual de la relaci\u00f3n:</p> Ejemplo de relaci\u00f3n One2many: desde un Sprint se ven todas sus Tareas"},{"location":"6_2_campos_basico_relacionales/#campos-relacionales-many2many","title":"Campos Relacionales: Many2many","text":"<p>Los campos relacionales Many2many permiten establecer una relaci\u00f3n de muchos a muchos entre dos modelos. Esto significa que un registro de un modelo puede estar vinculado a varios registros de otro modelo, y viceversa.</p> <p>Ejemplo: Un estudiante puede estar inscrito en varios cursos, y cada curso puede tener varios estudiantes.</p>"},{"location":"6_2_campos_basico_relacionales/#caso-de-uso-tecnologias","title":"Caso de Uso: Tecnolog\u00edas","text":"<p>Vamos a crear un modelo Tecnolog\u00edas que liste las diferentes tecnolog\u00edas que pueden aplicarse a un proyecto (Python, Java, JavaScript, etc.). De esta forma:</p> <ul> <li>Un proyecto puede implementarse usando muchas tecnolog\u00edas</li> <li>Cada tecnolog\u00eda puede ser usada en muchos proyectos</li> </ul>"},{"location":"6_2_campos_basico_relacionales/#crear-el-modelo-tecnologia","title":"Crear el Modelo Tecnolog\u00eda","text":"<p>Crea un modelo Tecnolog\u00eda con los siguientes campos:</p> <ul> <li><code>nombre</code></li> <li><code>descripcion</code></li> <li><code>logo</code>: Campo de tipo imagen de 256x256 p\u00edxeles m\u00e1ximo</li> </ul> Modelo Tecnolog\u00eda en models.py <pre><code>class tecnologias_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tecnologias_sergio'\n    _description = 'Modelo de Tecnolog\u00edas'\n\n    name = fields.Char(\n        string=\"Nombre\", \n        required=True, \n        help=\"Nombre de la tecnolog\u00eda\")\n\n    descripcion = fields.Text(\n        string=\"Descripci\u00f3n\", \n        help=\"Breve descripci\u00f3n de la tecnolog\u00eda\")\n\n    logo = fields.Image(\n        string=\"Logo\", \n        max_width=256, \n        max_height=256,\n        help=\"Logo de la tecnolog\u00eda\")\n</code></pre> <p>Campo Image</p> <p>El campo <code>Image</code> almacena im\u00e1genes en base64. Los par\u00e1metros <code>max_width</code> y <code>max_height</code> redimensionan autom\u00e1ticamente la imagen si es mayor.</p>"},{"location":"6_2_campos_basico_relacionales/#crear-la-relacion-many2many","title":"Crear la Relaci\u00f3n Many2many","text":"<p>Ahora creamos campos en ambos modelos para establecer la relaci\u00f3n bidireccional.</p> <p>En el modelo Tareas:</p> <p>Ejemplo de creaci\u00f3n de campo Many2many. Tecnolog\u00edas</p> <pre><code>rel_tecnologias = fields.Many2many(\n    comodel_name='gestion_tareas_sergio.tecnologias_sergio',\n    relation='relacion_tareas_tecnologias',\n    column1='rel_tareas',\n    column2='rel_tecnologias',\n    string='Tecnolog\u00edas')\n</code></pre> <p>Explicaci\u00f3n de los par\u00e1metros:</p> <ul> <li><code>comodel_name</code>: Modelo con el que se relaciona</li> <li><code>relation</code>: Nombre de la tabla intermedia en la base de datos</li> <li><code>column1</code>: Nombre de la columna en la tabla intermedia que referencia al modelo actual (tareas)</li> <li><code>column2</code>: Nombre de la columna que referencia al otro modelo (tecnolog\u00edas)</li> <li><code>string</code>: Etiqueta en la interfaz</li> </ul> <p>En el modelo Tecnolog\u00edas (relaci\u00f3n inversa):</p> <p>Ejemplo de creaci\u00f3n de campo Many2many. Tareas</p> <pre><code>rel_tareas = fields.Many2many(\n    comodel_name='gestion_tareas_sergio.tareas_sergio',\n    relation='relacion_tareas_tecnologias',\n    column1='rel_tecnologias',\n    column2='rel_tareas',\n    string='Tareas')\n</code></pre> <p>Mismo nombre de tabla</p> <p>El par\u00e1metro <code>relation</code> debe ser id\u00e9ntico en ambos modelos. As\u00ed Odoo sabe que es la misma relaci\u00f3n.</p>"},{"location":"6_2_campos_basico_relacionales/#configurar-permisos-vistas-y-menus","title":"Configurar Permisos, Vistas y Men\u00fas","text":"<p>Para que funcione correctamente:</p> <ol> <li>A\u00f1adir permisos en <code>security/ir.model.access.csv</code></li> <li>A\u00f1adir el campo en las vistas correspondientes</li> <li>Opcional: Crear men\u00fas para acceder al modelo Tecnolog\u00edas</li> <li>Reiniciar y actualizar el m\u00f3dulo</li> </ol>"},{"location":"6_2_campos_basico_relacionales/#widgets-para-many2many","title":"Widgets para Many2many","text":"<p>Al a\u00f1adir el campo en la vista, puedes usar diferentes widgets para cambiar su apariencia:</p> <p>Widget por defecto: </p><pre><code>&lt;field name=\"rel_tecnologias\"/&gt;\n</code></pre><p></p> <p>Widget de tags (recomendado para Many2many): </p><pre><code>&lt;field name=\"rel_tecnologias\" widget=\"many2many_tags\"/&gt;\n</code></pre><p></p> <p>El widget <code>many2many_tags</code> muestra cada tecnolog\u00eda como una etiqueta (tag) de colores, siendo m\u00e1s visual y compacto.</p> <p>M\u00e1s widgets disponibles</p> <p>Puedes consultar todos los widgets disponibles en la documentaci\u00f3n oficial.</p> <p>Gracias a esta configuraci\u00f3n, es posible seleccionar y gestionar f\u00e1cilmente las tecnolog\u00edas asociadas a una tarea desde el formulario correspondiente, permitiendo una administraci\u00f3n flexible y eficiente de las relaciones entre tareas y tecnolog\u00edas.</p>"},{"location":"6_2_campos_basico_relacionales/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora vas a aplicar todo lo aprendido sobre campos b\u00e1sicos y relaciones al proyecto del restaurante.</p>"},{"location":"6_2_campos_basico_relacionales/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>En esta sesi\u00f3n ampliar\u00e1s el modelo Plato con m\u00e1s campos y crear\u00e1s dos nuevos modelos relacionados:</p> <ul> <li>Men\u00fas: Agrupaciones de platos (men\u00fa del d\u00eda, men\u00fa de fin de semana, etc.)</li> <li>Ingredientes: Ingredientes/al\u00e9rgenos que contiene cada plato</li> </ul> <p>Aplicar\u00e1s los tres tipos de relaciones: </p> <ul> <li>Many2one: Plato \u2192 Men\u00fa</li> <li>One2many: Men\u00fa \u2192 Platos</li> <li>Many2many: Plato \u2194 Ingredientes</li> </ul>"},{"location":"6_2_campos_basico_relacionales/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Ampliar el modelo Plato con nuevos campos b\u00e1sicos</p> <ul> <li><code>precio</code>: tipo <code>Float</code> (obligatorio)</li> <li><code>tiempo_preparacion</code>: tipo <code>Integer</code> (en minutos)</li> <li><code>disponible</code>: tipo <code>Boolean</code> (por defecto True)</li> <li><code>categoria</code>: tipo <code>Selection</code> con opciones: 'entrante', 'principal', 'postre', 'bebida'</li> </ul> <p>A\u00f1ade par\u00e1metros <code>string</code>, <code>required</code> y <code>help</code> a todos los campos.</p> </li> <li> <p>Actualizar las vistas de Plato</p> <ul> <li>Vista lista: nombre, categoria, precio, disponible</li> <li>Vista formulario: todos los campos organizados en un <code>&lt;group&gt;</code></li> </ul> </li> <li> <p>Crear el modelo Men\u00fa</p> <ul> <li><code>name</code>: Char (obligatorio)</li> <li><code>descripcion</code>: Text</li> <li><code>fecha_inicio</code>: Date (obligatorio)</li> <li><code>fecha_fin</code>: Date</li> <li><code>activo</code>: Boolean</li> </ul> </li> <li> <p>Crear relaci\u00f3n Many2one: Plato \u2192 Men\u00fa</p> <ul> <li>Campo <code>menu</code> en el modelo Plato</li> <li>Tipo <code>Many2one</code> apuntando a <code>gestion_restaurante_tunombre.menus_tunombre</code></li> <li><code>ondelete='set null'</code></li> </ul> </li> <li> <p>Crear relaci\u00f3n One2many: Men\u00fa \u2192 Platos</p> <ul> <li>Campo <code>platos</code> en el modelo Men\u00fa</li> <li>Tipo <code>One2many</code> apuntando a platos usando el campo inverso <code>menu</code></li> </ul> </li> <li> <p>Crear el modelo Ingrediente</p> <ul> <li><code>name</code>: Char (obligatorio)</li> <li><code>es_alergeno</code>: Boolean</li> <li><code>descripcion</code>: Text</li> </ul> </li> <li> <p>Crear relaci\u00f3n Many2many bidireccional</p> <ul> <li>En Plato tenemos que crear la relaci\u00f3n con los ingredientes. </li> <li>En Ingrediente creamos la relaci\u00f3n inversa con los platos.</li> </ul> </li> <li> <p>Configurar permisos para los nuevos modelos</p> <ul> <li>A\u00f1adir en <code>ir.model.access.csv</code> una nueva l\u00edneas para asignar permisos y as\u00ed poder acceder al modelo</li> </ul> </li> <li> <p>Crear vistas y men\u00fas para los nuevos modelos</p> <p>Estructura de men\u00fas sugerida: </p><pre><code>Gesti\u00f3n Restaurante\n\u251c\u2500\u2500 Men\u00fa\n\u2502   \u251c\u2500\u2500 Platos\n\u2502   \u251c\u2500\u2500 Men\u00fas\n\u2502   \u2514\u2500\u2500 Ingredientes\n</code></pre><p></p> </li> <li> <p>Probar el widget many2many_tags</p> <p>En la vista de Plato: </p><pre><code>&lt;field name=\"rel_ingredientes\" widget=\"many2many_tags\"/&gt;\n</code></pre><p></p> </li> </ol>"},{"location":"6_2_campos_basico_relacionales/#verificaciones-y-resultado-esperado","title":"Verificaciones y Resultado Esperado","text":"<p>Comprueba que:</p> <ul> <li>Los nuevos campos aparecen correctamente en los formularios</li> <li>Los campos obligatorios funcionan</li> <li>Puedes seleccionar un men\u00fa desde un plato</li> <li>Desde un men\u00fa ves todos sus platos</li> <li>Puedes asociar m\u00faltiples ingredientes a un plato</li> <li>Los ingredientes se muestran como tags de colores</li> </ul> <p>Por ejemplo puedes utilizar estos datos de prueba</p> <p>Men\u00fa de Mediod\u00eda:</p> <ul> <li>Fecha inicio: Hoy</li> <li>Platos: Ensalada C\u00e9sar, Pizza Margarita</li> </ul> <p>Ingredientes:</p> <ul> <li>Tomate (no al\u00e9rgeno)</li> <li>Gluten (al\u00e9rgeno)</li> <li>Huevo (al\u00e9rgeno)</li> <li>Lechuga (no al\u00e9rgeno)</li> </ul> <p>Pizza Margarita actualizada:</p> <ul> <li>Precio: 12.50</li> <li>Tiempo preparaci\u00f3n: 15 minutos</li> <li>Categor\u00eda: Principal</li> <li>Disponible: S\u00ed</li> <li>Men\u00fa: Men\u00fa de Mediod\u00eda</li> <li>Ingredientes: Tomate, Gluten</li> </ul> <p>Resultado final: Tres modelos relacionados (Plato, Men\u00fa, Ingrediente) con los tres tipos de relaciones funcionando correctamente.</p>"},{"location":"6_3_campos_computados/","title":"Campos computados","text":""},{"location":"6_3_campos_computados/#campos-computados","title":"Campos Computados","text":"<p>En esta secci\u00f3n abordaremos la creaci\u00f3n de campos computados en Odoo, es decir, aquellos campos cuyo valor no es introducido manualmente por el usuario, sino que se determina autom\u00e1ticamente en funci\u00f3n de otros atributos del modelo. Este tipo de campos resulta fundamental para mantener la integridad y coherencia de los datos, as\u00ed como para automatizar procesos dentro del sistema.</p>"},{"location":"6_3_campos_computados/#que-es-un-campo-computado","title":"\u00bfQu\u00e9 es un Campo Computado?","text":"<p>Un campo computado es un campo cuyo valor se calcula mediante una funci\u00f3n Python en lugar de ser ingresado directamente por el usuario.</p> <p>Caracter\u00edsticas:</p> <ul> <li>El valor se genera autom\u00e1ticamente</li> <li>Se calcula mediante un m\u00e9todo del modelo</li> <li>Puede almacenarse en la base de datos o calcularse din\u00e1micamente</li> <li>Puede depender de otros campos del modelo</li> </ul> <p>Casos de uso comunes:</p> <ul> <li>C\u00f3digos autom\u00e1ticos (referencias, SKU)</li> <li>Totales y subtotales</li> <li>Fechas calculadas</li> <li>Estados derivados de otras condiciones</li> <li>Contadores y estad\u00edsticas</li> </ul>"},{"location":"6_3_campos_computados/#campo-computado-sin-almacenamiento","title":"Campo Computado Sin Almacenamiento","text":"<p>Como primer ejemplo, crearemos un campo computado llamado <code>codigo</code> que generar\u00e1 autom\u00e1ticamente un c\u00f3digo \u00fanico para cada tarea.</p>"},{"location":"6_3_campos_computados/#definicion-del-campo","title":"Definici\u00f3n del Campo","text":"<pre><code># En el modelo tareas_sergio\ncodigo = fields.Char(compute=\"_get_codigo\")\n</code></pre> <p>El par\u00e1metro <code>compute</code> indica el nombre del m\u00e9todo que calcular\u00e1 el valor del campo.</p>"},{"location":"6_3_campos_computados/#implementacion-del-metodo","title":"Implementaci\u00f3n del M\u00e9todo","text":"<p>ejemplo de implementaci\u00f3n de m\u00e9todo</p> <pre><code>def _get_codigo(self):\n    for tarea in self:\n        # Si la tarea no tiene un sprint asignado\n        if not tarea.sprint:\n            tarea.codigo = \"TSK_\" + str(tarea.id)\n        else:\n            # Si tiene sprint, usamos su nombre\n            tarea.codigo = str(tarea.sprint.name).upper() + \"_\" + str(tarea.id)\n</code></pre> <p>Explicaci\u00f3n del c\u00f3digo:</p> <ul> <li><code>for tarea in self</code>: Itera sobre todos los registros de la colecci\u00f3n</li> <li><code>tarea.id</code>: Es la clave primaria generada autom\u00e1ticamente por Odoo</li> <li>Si no hay sprint asignado: <code>TSK_&lt;id&gt;</code> (ejemplo: <code>TSK_42</code>)</li> <li>Si hay sprint: <code>&lt;NOMBRE_SPRINT&gt;_&lt;id&gt;</code> (ejemplo: <code>SPRINT1_42</code>)</li> </ul> <p>Campo id autom\u00e1tico</p> <p>El campo <code>id</code> es la clave primaria generada autom\u00e1ticamente en todos los modelos de Odoo. Puedes comprobarlo revisando las tablas en PostgreSQL.</p>"},{"location":"6_3_campos_computados/#caracteristicas-de-este-campo","title":"Caracter\u00edsticas de este Campo","text":"<p>Sin almacenamiento en base de datos:</p> <ul> <li>El valor se recalcula din\u00e1micamente cada vez que se visualiza</li> <li>No ocupa espacio en la base de datos</li> <li>Se actualiza autom\u00e1ticamente si cambian los valores de los que depende</li> </ul> <p>Para visualizarlo:</p> <ul> <li>Debe a\u00f1adirse expl\u00edcitamente en la vista XML</li> </ul> <pre><code>&lt;field name=\"codigo\"/&gt;\n</code></pre>"},{"location":"6_3_campos_computados/#verificacion","title":"Verificaci\u00f3n","text":"<p>Para comprobar que el campo no se almacena:</p> <ol> <li>Revisa la tabla en PostgreSQL</li> <li>No encontrar\u00e1s una columna <code>codigo</code></li> <li>El valor se genera al mostrar el registro</li> </ol> <p>Comportamiento:</p> <ul> <li>Al crear una tarea sin sprint: c\u00f3digo <code>TSK_&lt;id&gt;</code></li> <li>Al asignar un sprint y guardar: c\u00f3digo se actualiza a <code>&lt;SPRINT&gt;_&lt;id&gt;</code></li> </ul>"},{"location":"6_3_campos_computados/#campo-computado-con-almacenamiento-y-dependencias","title":"Campo Computado con Almacenamiento y Dependencias","text":"<p>En situaciones m\u00e1s complejas, necesitamos campos computados que:</p> <ul> <li>Se almacenen en la base de datos</li> <li>Solo se recalculen cuando cambien sus dependencias</li> <li>Est\u00e9n disponibles para b\u00fasquedas y filtros</li> </ul> <p>Este enfoque es \u00fatil cuando el c\u00e1lculo es costoso o cuando el valor debe ser indexable.</p>"},{"location":"6_3_campos_computados/#caso-de-uso-fecha-fin-de-sprint","title":"Caso de Uso: Fecha Fin de Sprint","text":"<p>Supongamos que en el modelo <code>Sprint</code> tenemos:</p> <ul> <li><code>fecha_ini</code>: Fecha de inicio (tipo Datetime)</li> <li><code>duracion</code>: Duraci\u00f3n en d\u00edas (tipo Integer)</li> <li><code>fecha_fin</code>: Campo computado que se calcula autom\u00e1ticamente</li> </ul> <p>Implementaci\u00f3n</p> <pre><code>from datetime import timedelta\nfrom odoo import models, fields, api\n\nclass sprints_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.sprints_sergio'\n    _description = 'Modelo de Sprints para Gesti\u00f3n de Proyectos'\n\n    nombre = fields.Char(string=\"Nombre\", required=True)\n    fecha_ini = fields.Datetime(string=\"Fecha Inicio\", required=True)\n    duracion = fields.Integer(\n        string=\"Duraci\u00f3n\", \n        help=\"Cantidad de d\u00edas que tiene asignado el sprint\")\n\n    fecha_fin = fields.Datetime(\n        compute='_compute_fecha_fin', \n        store=True,\n        string=\"Fecha Fin\")\n\n    @api.depends('fecha_ini', 'duracion')\n    def _compute_fecha_fin(self):\n        for sprint in self:\n            if sprint.fecha_ini and sprint.duracion and sprint.duracion &gt; 0:\n                sprint.fecha_fin = sprint.fecha_ini + timedelta(days=sprint.duracion)\n            else:\n                sprint.fecha_fin = sprint.fecha_ini\n</code></pre> <p>Aspectos Clave de la Implementaci\u00f3n</p> <p>1. Decorador <code>@api.depends</code>: </p><pre><code>@api.depends('fecha_ini', 'duracion')\n</code></pre><p></p> <ul> <li>Indica qu\u00e9 campos disparan el rec\u00e1lculo</li> <li>El campo solo se recalcula cuando cambian <code>fecha_ini</code> o <code>duracion</code></li> <li>Optimiza el rendimiento evitando c\u00e1lculos innecesarios</li> </ul> <p>2. Par\u00e1metro <code>store=True</code>: </p><pre><code>fecha_fin = fields.Datetime(compute='_compute_fecha_fin', store=True)\n</code></pre><p></p> <ul> <li>El valor calculado se almacena en la base de datos</li> <li>Permite usar el campo en b\u00fasquedas y filtros</li> <li>El valor persiste y no se recalcula en cada lectura</li> </ul> <p>3. L\u00f3gica del M\u00e9todo: </p><pre><code>for sprint in self:\n    if sprint.fecha_ini and sprint.duracion and sprint.duracion &gt; 0:\n        sprint.fecha_fin = sprint.fecha_ini + timedelta(days=sprint.duracion)\n    else:\n        sprint.fecha_fin = sprint.fecha_ini\n</code></pre><p></p> <ul> <li>Verifica que existan los valores necesarios</li> <li>Suma la duraci\u00f3n en d\u00edas a la fecha de inicio</li> <li>Si falta alg\u00fan dato, usa la fecha de inicio como valor por defecto</li> </ul> <p>4. Importaci\u00f3n de <code>timedelta</code>: </p><pre><code>from datetime import timedelta\n</code></pre><p></p> <ul> <li>Necesaria para sumar d\u00edas a una fecha</li> <li><code>timedelta(days=10)</code> representa 10 d\u00edas</li> </ul>"},{"location":"6_3_campos_computados/#verificacion-en-base-de-datos","title":"Verificaci\u00f3n en Base de Datos","text":"<p>Tras actualizar el m\u00f3dulo:</p> <ol> <li>Revisa la tabla en PostgreSQL</li> <li>Ahora s\u00ed encontrar\u00e1s una columna <code>fecha_fin</code></li> <li>El valor est\u00e1 almacenado y persiste</li> </ol>"},{"location":"6_3_campos_computados/#comportamiento","title":"Comportamiento","text":"<p>Al crear o editar un sprint:</p> <ol> <li>Usuario introduce <code>fecha_ini</code>: 2024-01-01</li> <li>Usuario introduce <code>duracion</code>: 14 (d\u00edas)</li> <li>Odoo calcula autom\u00e1ticamente <code>fecha_fin</code>: 2024-01-15</li> <li>El valor se guarda en la base de datos</li> </ol> Ejemplo de funcionamiento de campo calculado con almacenamiento"},{"location":"6_3_campos_computados/#comparativa-con-y-sin-almacenamiento","title":"Comparativa: Con y Sin Almacenamiento","text":"Caracter\u00edstica Sin <code>store</code> Con <code>store=True</code> Almacenamiento No se guarda en BD Se guarda en BD C\u00e1lculo Cada vez que se lee Solo cuando cambian dependencias B\u00fasquedas No disponible Disponible Filtros No disponible Disponible Rendimiento M\u00e1s lento en lectura M\u00e1s r\u00e1pido en lectura Uso de disco Ninguno Ocupa espacio Uso t\u00edpico C\u00e1lculos simples y r\u00e1pidos C\u00e1lculos costosos o indexables <p>Cu\u00e1ndo Usar Cada Tipo: </p> <ul> <li> <p>Campos computados sin almacenamiento (sin <code>store</code>):</p> <ul> <li>C\u00e1lculos muy simples y r\u00e1pidos</li> <li>Valores que cambian constantemente</li> <li>No necesitas buscar o filtrar por ese campo</li> <li>Ejemplo: Formateo de texto, concatenaciones simples</li> </ul> </li> <li> <p>Campos computados con almacenamiento (<code>store=True</code>):</p> <ul> <li>C\u00e1lculos complejos o costosos</li> <li>Necesitas buscar o filtrar por ese campo</li> <li>El valor no cambia frecuentemente</li> <li>Quieres usar el campo en vistas pivot o gr\u00e1ficas</li> <li>Ejemplo: Totales, fechas calculadas, contadores</li> </ul> </li> </ul>"},{"location":"6_3_campos_computados/#solucion-de-problemas","title":"Soluci\u00f3n de Problemas","text":"<p>Errores al actualizar modelos</p> <p>En ocasiones, los cambios en campos computados pueden generar inconsistencias en la base de datos. Si el ORM no se refresca correctamente tras reiniciar el servicio, la soluci\u00f3n es eliminar toda la base de datos:</p> <pre><code>docker compose down -v\ndocker compose up -d\n</code></pre> <p>Advertencia: Esto eliminar\u00e1 todos los datos. Haz una copia de seguridad si los necesitas.</p> <p>Errores Comunes</p> <p>1. Campo no se actualiza:</p> <ul> <li>Verifica que el decorador <code>@api.depends</code> incluya todos los campos necesarios</li> <li>Aseg\u00farate de que la sintaxis del m\u00e9todo es correcta</li> </ul> <p>2. Error \"field 'X' does not exist\":</p> <ul> <li>El campo debe estar definido en el modelo antes del m\u00e9todo compute</li> <li>Reinicia el servidor despu\u00e9s de a\u00f1adir el campo</li> </ul> <p>3. El campo aparece vac\u00edo:</p> <ul> <li>Verifica que la l\u00f3gica del m\u00e9todo asigna un valor en todos los casos</li> <li>Comprueba que los campos dependientes tienen valores</li> </ul> <p>4. Error de recursi\u00f3n:</p> <ul> <li>No uses el propio campo computado dentro de <code>@api.depends</code></li> <li>No modifiques campos que disparan el mismo m\u00e9todo compute</li> </ul> <p>Buenas Pr\u00e1cticas</p> <ol> <li> <p>Nombra los m\u00e9todos con prefijo <code>_compute_</code>:    </p><pre><code>def _compute_total(self):\ndef _compute_codigo(self):\n</code></pre><p></p> </li> <li> <p>Usa <code>@api.depends</code> siempre que sea posible:</p> <ul> <li>Mejora el rendimiento</li> <li>Hace el c\u00f3digo m\u00e1s mantenible</li> <li>Evita c\u00e1lculos innecesarios</li> </ul> </li> <li> <p>Maneja casos nulos o vac\u00edos:    </p><pre><code>if sprint.fecha_ini and sprint.duracion:\n    # c\u00e1lculo\nelse:\n    # valor por defecto\n</code></pre><p></p> </li> <li> <p>Almacena solo cuando sea necesario:</p> <ul> <li>Solo usa <code>store=True</code> si necesitas b\u00fasquedas/filtros</li> <li>Considera el espacio en disco</li> </ul> </li> <li> <p>Documenta la l\u00f3gica compleja:    </p><pre><code>def _compute_total(self):\n    \"\"\"Calcula el total sumando precio * cantidad para cada l\u00ednea\"\"\"\n    for record in self:\n        # ...\n</code></pre><p></p> </li> </ol>"},{"location":"6_3_campos_computados/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora se aplicar\u00e1n campos computados en el proyecto del restaurante.</p>"},{"location":"6_3_campos_computados/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>A\u00f1adir tres campos computados al modelo Plato y uno al modelo Men\u00fa:</p> <ol> <li>C\u00f3digo de plato (sin almacenar)</li> <li>Precio con IVA (sin almacenar)</li> <li>Precio final (almacenado, con descuento opcional)</li> <li>Precio total del men\u00fa (almacenado)</li> </ol>"},{"location":"6_3_campos_computados/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Campo computado sin almacenamiento: C\u00f3digo del plato</p> <p>En el modelo Plato, crea un campo <code>codigo</code> de tipo <code>Char</code> con <code>compute=\"_get_codigo\"</code>.</p> <p>El m\u00e9todo debe generar un c\u00f3digo basado en:  </p> <ul> <li>Si no tiene categor\u00eda: <code>PLT_&lt;id&gt;</code></li> <li>Si tiene categor\u00eda: <code>&lt;CATEGOR\u00cdA&gt;_&lt;id&gt;</code> (primeras 3 letras en may\u00fasculas)</li> </ul> <p>Pistas:</p> <ul> <li>Itera sobre <code>self</code> en el m\u00e9todo</li> <li>Usa <code>plato.categoria[:3].upper()</code> para obtener las primeras 3 letras en may\u00fasculas</li> <li>Usa <code>plato.id</code> como identificador \u00fanico</li> </ul> </li> <li> <p>Campo computado sin almacenamiento: Precio con IVA</p> <p>En el modelo Plato, crea un campo <code>precio_con_iva</code> de tipo <code>Float</code> con <code>compute=\"_compute_precio_con_iva\"</code>.</p> <p>El m\u00e9todo debe calcular el precio con un IVA del 10% (multiplica por 1.10).</p> <p>Pistas:</p> <ul> <li>Verifica que <code>plato.precio</code> existe antes de operar</li> <li>Si no existe precio, asigna 0.0</li> </ul> </li> <li> <p>A\u00f1adir campo descuento al modelo Plato</p> <p>A\u00f1ade un campo <code>descuento</code> de tipo <code>Float</code> con <code>string=\"Descuento (%)\"</code>.</p> <p>Este campo ser\u00e1 editable manualmente por el usuario (no computado).</p> </li> <li> <p>Campo computado con almacenamiento: Precio final</p> <p>En el modelo Plato, crea un campo <code>precio_final</code> de tipo <code>Float</code> que:</p> <ul> <li>Sea computado (<code>compute=...</code>)</li> <li>Se almacene en BD (<code>store=True</code>)</li> <li>Dependa de <code>precio</code> y <code>descuento</code> (usa <code>@api.depends</code>)</li> </ul> <p>El m\u00e9todo debe:</p> <ul> <li>Si hay descuento: aplicarlo al precio (restando el porcentaje)</li> <li>Si no hay descuento: usar el precio original</li> </ul> <p>Pistas:</p> <ul> <li>Convierte el porcentaje a decimal: <code>descuento / 100.0</code></li> <li>F\u00f3rmula: <code>precio * (1 - descuento_decimal)</code></li> <li>Maneja el caso donde no hay precio definido</li> </ul> </li> <li> <p>Campo computado en Men\u00fa: Precio total</p> <p>En el modelo Men\u00fa, crea un campo <code>precio_total</code> de tipo <code>Float</code> que:</p> <ul> <li>Sea computado</li> <li>Se almacene en BD</li> <li>Dependa de los platos del men\u00fa y su precio_final</li> </ul> <p>El m\u00e9todo debe sumar el <code>precio_final</code> de todos los platos del men\u00fa.</p> <p>Pistas:</p> <ul> <li>Usa <code>@api.depends('platos', 'platos.precio_final')</code></li> <li>Usa la funci\u00f3n <code>sum()</code> de Python</li> <li>Itera sobre <code>self</code> para cada men\u00fa</li> <li>Recuerda que <code>platos</code> es una relaci\u00f3n One2many</li> </ul> <p>C\u00e1lculos de la suma</p> <pre><code># Suma el precio_final de todos los platos relacionados\n# La funci\u00f3n map() extrae los valores y sum() los agrega.\nprecios = menu.platos_ids.mapped('precio_final')\nmenu.precio_total = sum(precios)\n</code></pre> </li> <li> <p>Actualizar vistas para mostrar los campos computados</p> <p>Modifica las vistas XML para incluir los nuevos campos:</p> <p>Vista de Plato (list): A\u00f1ade <code>codigo</code>, <code>precio_con_iva</code> y <code>precio_final</code></p> <p>Vista de Plato (form): Organiza todos los campos de precio en el formulario</p> <p>Vista de Men\u00fa (form): A\u00f1ade el campo <code>precio_total</code></p> <p>Pistas:</p> <ul> <li>Los campos computados se a\u00f1aden como cualquier otro campo</li> <li>Decide qu\u00e9 campos mostrar en lista vs formulario</li> </ul> </li> </ol>"},{"location":"6_3_campos_computados/#verificaciones-y-resultado-esperado","title":"Verificaciones y Resultado Esperado","text":"<p>Comprueba que:</p> <ul> <li>El c\u00f3digo del plato se genera autom\u00e1ticamente seg\u00fan su categor\u00eda</li> <li>El precio con IVA se calcula correctamente (sin almacenarse en BD)</li> <li>El precio final aplica el descuento correctamente (y s\u00ed se almacena en BD)</li> <li>El precio total del men\u00fa suma todos sus platos</li> <li>Al cambiar el descuento de un plato, se recalcula el precio final</li> <li>Al a\u00f1adir/quitar platos de un men\u00fa, se actualiza su precio total</li> </ul> <p>Sugerencia Datos de prueba</p> <p>Plato 1: Pizza Margarita</p> <ul> <li>Precio: 10\u20ac</li> <li>Descuento: 10%</li> <li>C\u00f3digo esperado: <code>PRI_&lt;id&gt;</code> (si categor\u00eda es \"principal\")</li> <li>Precio con IVA: 11\u20ac</li> <li>Precio final: 9\u20ac</li> </ul> <p>Plato 2: Ensalada C\u00e9sar</p> <ul> <li>Precio: 8\u20ac</li> <li>Descuento: 0%</li> <li>C\u00f3digo esperado: <code>ENT_&lt;id&gt;</code> (si categor\u00eda es \"entrante\")</li> <li>Precio con IVA: 8.8\u20ac</li> <li>Precio final: 8\u20ac</li> </ul> <p>Men\u00fa del D\u00eda:</p> <ul> <li>Contiene: Pizza Margarita + Ensalada C\u00e9sar</li> <li>Precio total esperado: 17\u20ac (9 + 8)</li> </ul> <p>Luego verifica:</p> <ul> <li>\u00bfSe generan los c\u00f3digos correctamente seg\u00fan categor\u00eda?</li> <li>\u00bfEl precio con IVA es el 110% del precio original?</li> <li>\u00bfEl precio final aplica correctamente el descuento?</li> <li>\u00bfEl precio total del men\u00fa es la suma de sus platos?</li> </ul>"},{"location":"6_4_excepciones_logs/","title":"Excepciones y mensajes de log","text":""},{"location":"6_4_excepciones_logs/#excepciones-y-mensajes-de-log","title":"Excepciones y Mensajes de Log","text":"<p>En este apartado abordaremos el manejo de excepciones y la gesti\u00f3n de mensajes de log en Odoo, aspectos fundamentales para garantizar la robustez y mantenibilidad del c\u00f3digo. Aprenderemos a lanzar excepciones de manera controlada y a registrar informaci\u00f3n relevante en el log, utilizando los distintos niveles de severidad que ofrece el framework.</p>"},{"location":"6_4_excepciones_logs/#manejar-excepciones","title":"Manejar Excepciones","text":"<p>El manejo adecuado de excepciones permite:</p> <ul> <li>Proporcionar mensajes claros al usuario cuando algo va mal</li> <li>Evitar que la aplicaci\u00f3n se comporte de forma inesperada</li> <li>Facilitar la depuraci\u00f3n durante el desarrollo</li> <li>Mantener la integridad de los datos</li> <li>Mejorar la experiencia de usuario</li> </ul> <p>Sin manejo de excepciones: </p><pre><code>Error interno del servidor\nTraceback (most recent call last):\n  File \"/usr/lib/python3/...\", line 1234, in method\n    result = object.field.name\nAttributeError: 'NoneType' object has no attribute 'name'\n</code></pre><p></p> <p>Con manejo de excepciones: </p><pre><code>Validaci\u00f3n fallida\nDebe asignar un sprint antes de guardar la tarea.\n</code></pre><p></p>"},{"location":"6_4_excepciones_logs/#excepciones-en-odoo","title":"Excepciones en Odoo","text":"<p>Odoo proporciona excepciones espec\u00edficas para diferentes situaciones. Para m\u00e1s informaci\u00f3n, consulta la documentaci\u00f3n oficial sobre gesti\u00f3n de errores.</p>"},{"location":"6_4_excepciones_logs/#tipos-de-excepciones-principales","title":"Tipos de Excepciones Principales","text":"<p>En el desarrollo de m\u00f3dulos de Odoo, el manejo de errores no se limita a detener la ejecuci\u00f3n del c\u00f3digo. El framework utiliza excepciones espec\u00edficas definidas en <code>odoo.exceptions</code> para gestionar la integridad de la base de datos (mediante rollbacks autom\u00e1ticos) y la comunicaci\u00f3n con la interfaz de usuario.</p> <p>Utilizar la excepci\u00f3n correcta garantiza que el usuario reciba un mensaje claro y que el sistema se comporte de manera previsible seg\u00fan los est\u00e1ndares de Odoo.</p> Excepci\u00f3n Impacto en la Interfaz (UI) Caso de Uso Correcto <code>ValidationError</code> Ventana emergente de error de validaci\u00f3n. Reglas de negocio estrictas. Ej: \"La fecha de fin no puede ser anterior a la de inicio\". Se usa mucho con <code>@api.constrains</code>. <code>UserError</code> Ventana emergente de advertencia. Acciones il\u00f3gicas del usuario. Ej: Intentar cancelar una factura que ya est\u00e1 pagada o confirmar un pedido sin productos. <code>AccessError</code> Mensaje de restricci\u00f3n de seguridad. Permisos y ACLs. Ej: Un usuario intenta modificar un registro de un departamento al que no pertenece. <code>RedirectWarning</code> Ventana con un bot\u00f3n de acci\u00f3n. Errores con soluci\u00f3n guiada. Ej: \"No has configurado una cuenta de ingresos. [Ir a configuraci\u00f3n]\". <code>MissingError</code> Mensaje de registro no encontrado. Registros eliminados. Cuando el c\u00f3digo intenta acceder a un ID que ya no existe en la base de datos. <p>Notas sobre los diferentes tipos de excepciones</p> <ul> <li>Diferencia entre <code>ValidationError</code> y <code>UserError</code>: Aunque visualmente son similares, <code>ValidationError</code> se lanza autom\u00e1ticamente al intentar guardar un registro que no cumple los requisitos (normalmente mediante restricciones de Python), mientras que <code>UserError</code> se suele lanzar dentro de botones o m\u00e9todos de acci\u00f3n.</li> <li>La excepci\u00f3n <code>Warning</code> (Obsoleta): En versiones modernas de Odoo (v13+), se prefiere el uso de <code>UserError</code> en lugar de <code>Warning</code>, ya que esta \u00faltima ha sido marcada para desaparecer en el n\u00facleo del framework.</li> </ul>"},{"location":"6_4_excepciones_logs/#importar-excepciones","title":"Importar Excepciones","text":"<p>Primero, importa las excepciones necesarias al inicio de <code>models.py</code>:</p> <pre><code>from odoo import models, fields, api\nfrom odoo.exceptions import ValidationError, UserError\n</code></pre>"},{"location":"6_4_excepciones_logs/#ejemplo-practico-validacion-en-campo-computado","title":"Ejemplo Pr\u00e1ctico: Validaci\u00f3n en Campo Computado","text":"<p>Vamos a mejorar el m\u00e9todo <code>_get_codigo</code> del modelo de Tareas para manejar correctamente los errores.</p>"},{"location":"6_4_excepciones_logs/#sin-manejo-de-excepciones-problematico","title":"Sin Manejo de Excepciones (Problem\u00e1tico)","text":"<pre><code>def _get_codigo(self):\n    for tarea in self:\n        # Si no hay sprint, esto fallar\u00e1 con un error cr\u00edptico\n        tarea.codigo = str(tarea.sprint.nombre).upper() + \"_\" + str(tarea.id)\n</code></pre> <p>Problema: Si <code>tarea.sprint</code> es <code>None</code> (no hay sprint asignado), obtendremos un error poco claro.</p>"},{"location":"6_4_excepciones_logs/#con-manejo-de-excepciones-correcto","title":"Con Manejo de Excepciones (Correcto)","text":"<pre><code>def _get_codigo(self):\n    for tarea in self:\n        try:\n            # Generamos el c\u00f3digo\n            tarea.codigo = str(tarea.sprint.nombre).upper() + \"_\" + str(tarea.id)\n\n        except Exception as e:\n            raise ValidationError(f\"Error al generar el c\u00f3digo: {str(e)}\")\n</code></pre> Mensaje de excepci\u00f3n por validaci\u00f3n <p>Ventajas:</p> <ul> <li>Mensaje claro al usuario</li> <li>Control expl\u00edcito del flujo de errores</li> <li>F\u00e1cil de depurar</li> </ul>"},{"location":"6_4_excepciones_logs/#provocar-un-error-para-pruebas","title":"Provocar un Error para Pruebas","text":"<p>Vamos a provocar un error en nuestro c\u00f3digo, para ver como funciona esta gesti\u00f3n de excepciones.</p> <p>Vamos a modificar el c\u00e1lculo de la fecha final de y vamos poner mal el nombre del campo. En el c\u00f3digo inicial</p> <pre><code>@api.depends('fecha_ini', 'duracion')\ndef _compute_fecha_fin(self):\n    for sprint in self:\n        if sprint.fecha_ini and sprint.duracion and sprint.duracion &gt; 0:\n            sprint.fecha_fin = sprint.fecha_ini + timedelta(days=sprint.duracion)\n        else:\n            sprint.fecha_fin = sprint.fecha_ini\n</code></pre> <p>cambiamos cualquier variablem para ver c\u00f3mo reacciona e incluimos el bloque <code>try-excetp</code></p> <pre><code>@api.depends('fecha_ini', 'duracion')\ndef _compute_fecha_fin(self):\n    for sprint in self:\n        try:\n            if sprint.fecha_ini and sprint.duracion and sprint.duracion &gt; 0:\n                sprint.fecha_fin = sprint.fecha_inicial + timedelta(days=sprint.duracion)\n            else:\n                sprint.fecha_fin = sprint.fecha_inicial #campo err\u00f3neo\n        except Exception as e:            \n            raise ValidationError(f\"Error al generar el c\u00f3digo: {str(e)}\")\n            # raise UserError(f\"Error al generar el c\u00f3digo: {str(e)}\")\n</code></pre> <p>Esto provocar\u00e1 un error que ser\u00e1 capturado por el <code>except</code> y mostrado al usuario de forma controlada.</p> Mensaje de excepci\u00f3n capturando un error"},{"location":"6_4_excepciones_logs/#validaciones-con-decorador-apiconstrains","title":"Validaciones con Decorador <code>@api.constrains</code>","text":"<p>Otra forma de validar datos es usando el decorador <code>@api.constrains</code>, que se ejecuta autom\u00e1ticamente cuando cambian ciertos campos.</p>"},{"location":"6_4_excepciones_logs/#ejemplo-validar-fechas-de-sprint","title":"Ejemplo: Validar Fechas de Sprint","text":"<pre><code>@api.constrains('fecha_ini', 'fecha_fin')\ndef _check_fechas(self):\n    for sprint in self:\n        if sprint.fecha_fin and sprint.fecha_ini:\n            if sprint.fecha_fin &lt; sprint.fecha_ini:\n                raise ValidationError(\n                    \"La fecha de fin no puede ser anterior a la fecha de inicio.\"\n                )\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Se ejecuta autom\u00e1ticamente al guardar</li> <li>Solo cuando cambian los campos especificados</li> <li>Lanza <code>ValidationError</code> si algo est\u00e1 mal</li> </ul>"},{"location":"6_4_excepciones_logs/#ejemplo-validar-precio-positivo","title":"Ejemplo: Validar Precio Positivo","text":"<pre><code>@api.constrains('precio')\ndef _check_precio(self):\n    for plato in self:\n        if plato.precio and plato.precio &lt; 0:\n            raise ValidationError(\"El precio debe ser mayor o igual a cero.\")\n</code></pre>"},{"location":"6_4_excepciones_logs/#mensajes-de-log","title":"Mensajes de Log","text":"<p>El registro de mensajes en el log es esencial para el seguimiento y diagn\u00f3stico de la aplicaci\u00f3n. Odoo utiliza el m\u00f3dulo est\u00e1ndar de Python <code>logging</code>.</p>"},{"location":"6_4_excepciones_logs/#niveles-de-log","title":"Niveles de Log","text":"Nivel Uso Cu\u00e1ndo Usarlo DEBUG Informaci\u00f3n detallada Depuraci\u00f3n durante desarrollo INFO Mensajes informativos Eventos importantes del flujo normal WARNING Advertencias Situaciones anormales pero no cr\u00edticas ERROR Errores Fallos que impiden completar una operaci\u00f3n CRITICAL Errores cr\u00edticos Fallos graves que pueden detener el sistema"},{"location":"6_4_excepciones_logs/#configurar-el-logger","title":"Configurar el Logger","text":"<p>Al inicio del archivo <code>models.py</code>, despu\u00e9s de las importaciones:</p> <pre><code>from odoo import models, fields, api\nfrom odoo.exceptions import ValidationError\nimport logging\n\n_logger = logging.getLogger(__name__)\n</code></pre> <p>Explicaci\u00f3n:</p> <ul> <li><code>logging.getLogger(__name__)</code>: Crea un logger con el nombre del m\u00f3dulo actual</li> <li><code>_logger</code>: Variable para acceder al logger en todo el archivo</li> <li>Permite identificar f\u00e1cilmente de d\u00f3nde provienen los mensajes</li> </ul>"},{"location":"6_4_excepciones_logs/#usar-el-logger","title":"Usar el Logger","text":"<pre><code>def _get_codigo(self):\n    _logger.info(\"Iniciando generaci\u00f3n de c\u00f3digos de tareas\")\n\n    for tarea in self:\n        try:\n            if not tarea.sprint:\n                _logger.warning(f\"Tarea {tarea.id} sin sprint asignado\")\n                tarea.codigo = \"TSK_\" + str(tarea.id)\n\n            else:\n                # Si tiene sprint, usamos su nombre\n                tarea.codigo = str(tarea.sprint.name).upper() + \"_\" + str(tarea.id)\n\n            _logger.debug(f\"C\u00f3digo generado: {tarea.codigo}\")\n\n        except Exception as e:\n            _logger.error(f\"Error generando c\u00f3digo para tarea {tarea.id}: {str(e)}\")\n            raise ValidationError(f\"Error al generar el c\u00f3digo: {str(e)}\")\n</code></pre> <p>Por cierto, ejecutando al anterior c\u00f3digo y revisando los logs, veremos que constantemente estamos cambiando el c\u00f3digo de la tarea, lo cual no parece muy eficiente y por lo tanto deber\u00edamos poner remedio, por ejemplo indicando que solo se calcular\u00e1 el c\u00f3digo en caso de que el cambie el sprint asociado. As\u00ed a\u00f1adimos la siguiente linea con un <code>@api.depends</code>:</p> <pre><code>    @api.depends('sprint', 'sprint.name')   # solo se ejecuta si cambia el sprint.\n    def _get_codigo(self):\n        ....\n</code></pre> <p>Compute &amp; Depends en la Creaci\u00f3n (Create)</p> <p>Odoo ejecuta todos los m\u00e9todos <code>compute</code> durante la creaci\u00f3n de un registro, incluso si los campos del <code>@api.depends</code> no han cambiado o est\u00e1n vac\u00edos. Esto lo hace para dar un valor inicial al campo.</p> <p>As\u00ed pues, lo que sucede en el m\u00e9todo anterior con el campo <code>id</code> de propia tarea es que antes de guardar, el <code>id</code> es un \"Virtual ID\" (ej. <code>NewId_1</code>). El compute se ejecuta para mostrar una previsualizaci\u00f3n, y al al Guardar (Flush) Odoo asigna el ID real de la base de datos y vuelve a ejecutar el <code>compute</code> autom\u00e1ticamente antes de hacer el commit final.</p> <p>O sea, Odoo gestiona la creaci\u00f3n como un evento especial. El <code>depends</code> solo sirve para actualizaciones futuras de registros que ya existen.</p>"},{"location":"6_4_excepciones_logs/#configurar-nivel-de-log","title":"Configurar Nivel de Log","text":"<p>Por defecto, Odoo solo muestra mensajes de nivel <code>INFO</code> o superior. Para ver mensajes <code>DEBUG</code>, modifica el archivo <code>odoo.conf</code>:</p> <pre><code>[options]\nlog_level = debug\n</code></pre> <p>Despu\u00e9s de modificar el archivo, reinicia el servidor:</p> <pre><code>docker compose restart odoo_dev_dam\n</code></pre>"},{"location":"6_4_excepciones_logs/#ver-los-logs","title":"Ver los Logs","text":"<p>Los logs se muestran en la consola o en archivos seg\u00fan tu configuraci\u00f3n:</p> <p>Ver logs en tiempo real: </p><pre><code>docker logs odoo_dev_dam -f\n</code></pre><p></p> <p>Filtrar logs de tu m\u00f3dulo: </p><pre><code>docker logs odoo_dev_sge -f 2&gt;&amp;1 | grep --line-buffered DEBUG | grep \"gestion_tareas\"\n</code></pre><p></p> <p>Filtrado de salida de docker</p> <p>Para filtrar logs de un contenedor en tiempo real de forma efectiva, la estructura ideal es:</p> <p><code>docker logs &lt;contenedor&gt; -f 2&gt;&amp;1 | grep --line-buffered \"FILTRO1\" | grep \"FILTRO2\"</code></p> <p>donde:</p> <ul> <li> <p><code>2&gt;&amp;1</code> (Redirecci\u00f3n de stderr a stdout):</p> <ul> <li>Docker y muchas aplicaciones (como Odoo/Python) env\u00edan los mensajes de log y errores al flujo de Error Est\u00e1ndar (stderr), mientras que <code>grep</code> solo analiza la Salida Est\u00e1ndar (stdout) por defecto.</li> <li>Este comando une ambos flujos para que <code>grep</code> pueda \"leerlo\" todo.</li> </ul> </li> <li> <p><code>--line-buffered</code>:</p> <ul> <li>Por defecto, cuando <code>grep</code> detecta que su salida va hacia una tuber\u00eda (<code>|</code>), espera a llenar un b\u00fafer de memoria (unos 4KB) antes de soltar los datos. Esto causa un retraso o \"congelamiento\" aparente.</li> <li>Esta bandera fuerza a <code>grep</code> a imprimir cada l\u00ednea en el momento exacto en que la encuentra, permitiendo el monitoreo en tiempo real.</li> </ul> </li> <li> <p>Encadenamiento de <code>grep</code>:</p> <ul> <li>Al usar varios <code>| grep</code>, act\u00faan como un operador l\u00f3gico AND. Solo se mostrar\u00e1n las l\u00edneas que contengan estrictamente todos los t\u00e9rminos buscados.</li> </ul> </li> </ul>"},{"location":"6_4_excepciones_logs/#ejemplo-de-salida-de-logs","title":"Ejemplo de Salida de Logs","text":"<pre><code>2026-01-08 18:12:45,816 1 DEBUG odoo odoo.addons.gestion_tareas_sergio.models.models: C\u00f3digo generado: SPRINT SEMANA 1_2 \n2026-01-08 18:21:04,123 1 DEBUG odoo odoo.service.model: call gestion_tareas_sergio.tareas_sergio(4,).web_read(specification={'codigo': {}, 'name': {}, 'descripcion': {}, 'sprint': {'fields': {'display_name': {}}}, 'fecha_creacion': {}, 'fecha_ini': {}, 'fecha_fin': {}, 'finalizado': {}, 'rel_tecnologias': {'fields': {'display_name': {}}}, 'display_name': {}}) \n2026-01-08 18:21:04,129 1 DEBUG odoo odoo.addons.gestion_tareas_sergio.models.models: C\u00f3digo generado: SPRINT SEMANA 1_4 \n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>Usa Excepciones Espec\u00edficas</p> <pre><code># Mal\nraise Exception(\"Error\")\n\n# Bien\nraise ValidationError(\"La fecha de fin debe ser posterior a la fecha de inicio\")\n</code></pre> <p>Mensajes Claros y \u00datiles</p> <pre><code># Mal\nraise ValidationError(\"Error en los datos\")\n\n# Bien\nraise ValidationError(\n    f\"El sprint '{sprint.nombre}' ya ha finalizado. \"\n    \"No se pueden a\u00f1adir tareas a sprints finalizados.\"\n)\n</code></pre> <p>Registra Informaci\u00f3n Relevante</p> <pre><code># Registra antes de operaciones importantes\n_logger.info(f\"Creando sprint: {sprint.nombre}, duraci\u00f3n: {sprint.duracion} d\u00edas\")\n\n# Registra advertencias ante situaciones anormales\nif not tarea.descripcion:\n    _logger.warning(f\"Tarea {tarea.id} creada sin descripci\u00f3n\")\n\n# Registra errores con contexto\n_logger.error(f\"Fallo al calcular fecha_fin para sprint {sprint.id}: {str(e)}\")\n</code></pre> <p>No Registres Informaci\u00f3n Sensible</p> <pre><code># Mal - expone contrase\u00f1as\n_logger.info(f\"Usuario login: {user.login}, password: {user.password}\")\n\n# Bien\n_logger.info(f\"Usuario login exitoso: {user.login}\")\n</code></pre> <p>Usa el Nivel Apropiado</p> <pre><code># DEBUG - solo en desarrollo\n_logger.debug(f\"Valor de variable x: {x}\")\n\n# INFO - eventos normales importantes\n_logger.info(\"M\u00f3dulo inicializado correctamente\")\n\n# WARNING - situaci\u00f3n anormal pero no cr\u00edtica\n_logger.warning(\"Base de datos sin datos de demo\")\n\n# ERROR - operaci\u00f3n fallida\n_logger.error(\"No se pudo conectar al servidor externo\")\n</code></pre> <p>Validaciones Comunes</p> <p>Validar Campos Obligatorios</p> <pre><code>@api.constrains('nombre')\ndef _check_nombre(self):\n    for record in self:\n        if not record.nombre or not record.nombre.strip():\n            raise ValidationError(\"El nombre no puede estar vac\u00edo\")\n</code></pre> <p>Validar Rangos Num\u00e9ricos</p> <pre><code>@api.constrains('duracion')\ndef _check_duracion(self):\n    for sprint in self:\n        if sprint.duracion and (sprint.duracion &lt; 1 or sprint.duracion &gt; 30):\n            raise ValidationError(\n                \"La duraci\u00f3n del sprint debe estar entre 1 y 30 d\u00edas\"\n            )\n</code></pre> <p>Validar Unicidad</p> <pre><code>@api.constrains('nombre')\ndef _check_nombre_unico(self):\n    for sprint in self:\n        duplicado = self.search([\n            ('nombre', '=', sprint.nombre),\n            ('id', '!=', sprint.id)\n        ])\n        if duplicado:\n            raise ValidationError(\n                f\"Ya existe un sprint con el nombre '{sprint.nombre}'\"\n            )\n</code></pre>"},{"location":"6_4_excepciones_logs/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora aplicar\u00e1s validaciones y logging al proyecto del restaurante.</p>"},{"location":"6_4_excepciones_logs/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>A\u00f1adir\u00e1s validaciones para asegurar la integridad de los datos y agregar\u00e1s mensajes de log para facilitar la depuraci\u00f3n y el seguimiento de operaciones.</p> <p>Implementar\u00e1s: - Validaciones de campos obligatorios - Validaciones de rangos num\u00e9ricos - Manejo de excepciones en campos computados - Logging de operaciones importantes</p>"},{"location":"6_4_excepciones_logs/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Importar excepciones y logging</p> <p>Al inicio de <code>models.py</code>: </p><pre><code>from odoo.exceptions import ValidationError, UserError\nimport logging\n\n_logger = logging.getLogger(__name__)\n</code></pre><p></p> </li> <li> <p>Validar que el precio sea positivo</p> <p>En el modelo Plato, crea un m\u00e9todo con <code>@api.constrains('precio')</code> que:</p> <ul> <li>Verifique que el precio sea mayor o igual a 0</li> <li>Lance <code>ValidationError</code> si no cumple</li> </ul> <p>Pistas:</p> <ul> <li>El mensaje debe ser claro para el usuario</li> <li>Recuerda iterar sobre <code>self</code></li> </ul> </li> <li> <p>Validar que el tiempo de preparaci\u00f3n sea razonable</p> <p>En el modelo Plato, valida que <code>tiempo_preparacion</code>:</p> <ul> <li>Si existe, est\u00e9 entre 1 y 240 minutos (4 horas)</li> <li>Lance <code>ValidationError</code> con mensaje descriptivo</li> </ul> </li> <li> <p>Validar fechas del men\u00fa</p> <p>En el modelo Men\u00fa, valida que:</p> <ul> <li>Si existe <code>fecha_fin</code>, sea posterior a <code>fecha_inicio</code></li> <li>Use <code>@api.constrains</code> con ambos campos</li> </ul> <p>Pista: Compara fechas con operadores <code>&lt;</code> y <code>&gt;</code></p> </li> <li> <p>A\u00f1adir manejo de excepciones al campo computado <code>codigo</code></p> <p>Modifica el m\u00e9todo <code>_get_codigo</code> del modelo Plato:</p> <ul> <li>Envu\u00e9lvelo en un bloque <code>try-except</code></li> <li>Verifica que la categor\u00eda existe antes de usarla</li> <li>Lanza <code>ValidationError</code> si algo falla</li> </ul> <p>Pista: Usa <code>if not plato.categoria</code> para verificar</p> </li> <li> <p>A\u00f1adir logging a operaciones importantes</p> <p>En el modelo Plato, a\u00f1ade logs en momentos clave:</p> <ul> <li><code>_logger.debug()</code> al generar c\u00f3digos</li> <li><code>_logger.info()</code> cuando se validan precios correctamente</li> <li><code>_logger.warning()</code> si un plato no tiene categor\u00eda</li> <li><code>_logger.error()</code> cuando falla una operaci\u00f3n</li> </ul> </li> <li> <p>Validar que un men\u00fa tenga al menos un plato</p> <p>En el modelo Men\u00fa, crea una validaci\u00f3n que:</p> <ul> <li>Verifique que el men\u00fa tenga al menos un plato cuando est\u00e9 activo</li> <li>Use <code>@api.constrains('platos', 'activo')</code></li> <li>Lance <code>ValidationError</code> si est\u00e1 activo sin platos</li> </ul> <p>Pista: Usa <code>len(menu.platos)</code> para contar platos</p> </li> <li> <p>Configurar nivel de log en debug</p> <p>En <code>data/odoo_config/odoo.conf</code>, a\u00f1ade o modifica: </p><pre><code>log_level = debug\n</code></pre><p></p> </li> <li> <p>Probar las validaciones</p> <p>Intenta crear:</p> <ul> <li>Un plato con precio negativo (debe fallar)</li> <li>Un plato con tiempo de preparaci\u00f3n de 300 minutos (debe fallar)</li> <li>Un men\u00fa con fecha_fin anterior a fecha_inicio (debe fallar)</li> <li>Un men\u00fa activo sin platos (debe fallar)</li> </ul> </li> <li> <p>Ver los logs generados</p> <p>Ejecuta: </p><pre><code>docker logs odoo_dev_dam -f | grep \"restaurante\"\n</code></pre><p></p> <p>Verifica que aparecen tus mensajes de log.</p> </li> </ol>"},{"location":"6_4_excepciones_logs/#verificaciones-y-resultado-esperado","title":"Verificaciones y Resultado Esperado","text":"<p>Comprueba que:</p> <ul> <li>No puedes guardar un plato con precio negativo</li> <li>No puedes guardar un plato con tiempo de preparaci\u00f3n fuera del rango</li> <li>No puedes guardar un men\u00fa con fechas inconsistentes</li> <li>No puedes activar un men\u00fa sin platos</li> <li>Los mensajes de error son claros y \u00fatiles para el usuario</li> <li>Los logs muestran informaci\u00f3n relevante de las operaciones</li> </ul> <p>Pruebas sugeridas:</p> <ol> <li>Intenta crear un plato con precio -5\u20ac \u2192 Debe mostrar error de validaci\u00f3n</li> <li>Intenta crear un plato con tiempo de preparaci\u00f3n de 500 minutos \u2192 Error</li> <li>Crea un men\u00fa con fecha_fin antes de fecha_inicio \u2192 Error</li> <li>Activa un men\u00fa vac\u00edo \u2192 Error</li> <li>Verifica que en los logs aparece informaci\u00f3n de cada operaci\u00f3n</li> </ol>"},{"location":"6_5_campos_computados_relacionales/","title":"Campos computados relacionales","text":""},{"location":"6_5_campos_computados_relacionales/#campos-computados-relacionales","title":"Campos Computados Relacionales","text":"<p>En este apartado abordaremos el desarrollo de campos computados relacionales en Odoo, es decir, campos cuyo valor se calcula autom\u00e1ticamente bas\u00e1ndose en informaci\u00f3n de modelos relacionados.</p> <p>Los campos computados relacionales son fundamentales cuando necesitamos que ciertos datos se mantengan actualizados autom\u00e1ticamente en funci\u00f3n de la informaci\u00f3n de otros modelos. Por ejemplo, permiten que un campo refleje siempre el estado m\u00e1s reciente de una relaci\u00f3n, sin necesidad de intervenci\u00f3n manual.</p>"},{"location":"6_5_campos_computados_relacionales/#concepto-de-campo-computado-relacional","title":"Concepto de Campo Computado Relacional","text":"<p>Un campo computado relacional es aquel que:</p> <ul> <li>Se calcula autom\u00e1ticamente mediante c\u00f3digo Python</li> <li>Su valor depende de datos de modelos relacionados</li> <li>Puede ser de tipo Many2one, One2many o Many2many</li> <li>Actualiza su valor cuando cambian los datos relacionados</li> </ul> <p>Ventajas:</p> <ul> <li>Automatiza la gesti\u00f3n de relaciones complejas</li> <li>Reduce errores manuales</li> <li>Mantiene la coherencia de los datos</li> <li>Simplifica la l\u00f3gica de negocio</li> <li>Mejora la experiencia de usuario</li> </ul>"},{"location":"6_5_campos_computados_relacionales/#contexto-ampliacion-del-modelo","title":"Contexto: Ampliaci\u00f3n del Modelo","text":"<p>Hasta ahora, nuestro m\u00f3dulo cuenta con:</p> <p>Modelos existentes:</p> <ul> <li>Tarea</li> <li>Sprint</li> <li>Tecnolog\u00eda</li> </ul> <p>Relaciones existentes:</p> <ul> <li>Tarea \u2192 Sprint (Many2one)</li> <li>Sprint \u2192 Tareas (One2many)</li> <li>Tarea \u2194 Tecnolog\u00eda (Many2many)</li> </ul> <p>Ahora vamos a ampliar el modelo siguiendo la metodolog\u00eda Scrum:</p> <p>Metodolog\u00eda \u00c1gil Scrum</p> <p>En la metodolog\u00eda Scrum, un proyecto se organiza en ciclos cortos llamados sprints, durante los cuales se desarrollan incrementos funcionales del producto. El trabajo se descompone en historias de usuario, que representan funcionalidades desde la perspectiva del usuario final. Cada historia de usuario se divide en tareas m\u00e1s peque\u00f1as que son asignadas al equipo durante el sprint.</p> <p>De este modo, Scrum facilita la planificaci\u00f3n iterativa, la adaptaci\u00f3n continua y la entrega incremental de valor.</p> <p>M\u00e1s info: Flowlu: Gu\u00eda para Proyectos \u00c1giles</p>"},{"location":"6_5_campos_computados_relacionales/#nuevos-modelos-y-relaciones","title":"Nuevos Modelos y Relaciones","text":"<p>Vamos a a\u00f1adir dos nuevos modelos:</p>"},{"location":"6_5_campos_computados_relacionales/#modelo-proyecto","title":"Modelo Proyecto","text":"<p>Representa un proyecto de software.</p> <p>Campos:</p> <ul> <li><code>nombre</code>: Nombre del proyecto</li> <li><code>descripcion</code>: Descripci\u00f3n del proyecto</li> <li><code>historias</code>: Relaci\u00f3n One2many con historias de usuario. \"Cada historia tiene un proyecto, pero un proyecto tiene muchas historias.\"</li> </ul> <p>Relaci\u00f3n con Historias: </p><pre><code>Proyecto (1) ----&lt; Historias (N)\n</code></pre><p></p>"},{"location":"6_5_campos_computados_relacionales/#modelo-historia-de-usuario","title":"Modelo Historia de Usuario","text":"<p>Representa una funcionalidad desde la perspectiva del usuario.</p> <p>Campos:</p> <ul> <li><code>nombre</code>: Nombre de la historia</li> <li><code>descripcion</code>: Descripci\u00f3n detallada</li> <li><code>proyecto</code>: Relaci\u00f3n Many2one con proyecto. \"Un proyecto tiene muchas historias y cada historia tiene un proyecto\"</li> <li><code>tareas</code>: Relaci\u00f3n One2many con tareas. \"Una historia tiene muchos tareas y cada tarea tiene un proyecto\"</li> </ul> <p>Relaciones: </p><pre><code>Proyecto (1) ----&lt; Historia (N) ----&lt; Tarea (N)\n</code></pre><p></p>"},{"location":"6_5_campos_computados_relacionales/#modificacion-del-modelo-tarea","title":"Modificaci\u00f3n del Modelo Tarea","text":"<p>A\u00f1adimos una nueva relaci\u00f3n:</p> <ul> <li><code>historia</code>: Relaci\u00f3n Many2one con historia de usuario. \"Una tarea pertenece a una historia de usuario y una historia tiene muchas tareas\"</li> </ul>"},{"location":"6_5_campos_computados_relacionales/#modificacion-del-modelo-sprint","title":"Modificaci\u00f3n del Modelo Sprint","text":"<p>A\u00f1adimos una nueva relaci\u00f3n:</p> <ul> <li><code>proyecto</code>: Relaci\u00f3n Many2one con proyecto. \"Un proyecto se divide en varios Sprints\"</li> </ul>"},{"location":"6_5_campos_computados_relacionales/#implementacion-de-los-nuevos-modelos","title":"Implementaci\u00f3n de los Nuevos Modelos","text":"models.py - Nuevos modelos <pre><code># PROYECTO\nclass proyectos_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.proyectos_sergio'\n    _description = 'Modelo de Proyectos'\n\n    name = fields.Char(\n        string=\"Nombre\", \n        required=True, \n        help=\"Nombre del proyecto\")\n\n    descripcion = fields.Text(\n        string=\"Descripci\u00f3n\", \n        help=\"Descripci\u00f3n del proyecto\")\n\n    historias = fields.One2many(\n        'gestion_tareas_sergio.historias_sergio', \n        'proyecto', \n        string='Historias de Usuario')\n\n# HISTORIA DE USUARIO\nclass historias_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.historias_sergio'\n    _description = 'Modelo de Historias de Usuario'\n\n    name = fields.Char(\n        string=\"Nombre\", \n        required=True, \n        help=\"Nombre de la historia\")\n\n    descripcion = fields.Text(\n        string=\"Descripci\u00f3n\", \n        help=\"Descripci\u00f3n de la historia\")\n\n    proyecto = fields.Many2one(\n        'gestion_tareas_sergio.proyectos_sergio', \n        string='Proyecto')\n\n    tareas = fields.One2many(\n        'gestion_tareas_sergio.tareas_sergio', \n        'historia', \n        string='Tareas')\n\n# TAREA (modificaci\u00f3n)\nclass tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n    # ... campos existentes ...\n\n    historia = fields.Many2one(\n        'gestion_tareas_sergio.historias_sergio', \n        string='Historia de Usuario')\n\n# SPRINT (modificacion)\nclass sprints_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.sprints_sergio'\n    # ... campos existentes ...\n\n    proyecto = fields.Many2one(\n        'gestion_tareas_sergio.proyectos_sergio', \n        string=\"Proyecto\")    \n</code></pre> <p>Recuerda : Relaci\u00f3n One2many</p> <p>Cuando defines una relaci\u00f3n One2many en un modelo, el segundo par\u00e1metro debe ser el nombre del campo Many2one en el modelo relacionado. Por ejemplo: </p><pre><code># En Proyecto\nhistorias = fields.One2many('historias_sergio', 'proyecto', ...)\n# Significa: busca en el modelo historias_sergio un campo llamado 'proyecto'\n</code></pre><p></p>"},{"location":"6_5_campos_computados_relacionales/#configuracion-adicional","title":"Configuraci\u00f3n Adicional","text":""},{"location":"6_5_campos_computados_relacionales/#permisos-de-seguridad","title":"Permisos de Seguridad","text":"<p>A\u00f1ade en <code>security/ir.model.access.csv</code> las l\u00edneas necesarias para permite acceso a los nuevos modelos.</p> security/ir.model.access.csv - Nuevos modelos. Intenta hacerlo sin mirar <pre><code>access_proyectos,acceso_proyectos,model_gestion_tareas_sergio_proyectos_sergio,base.group_user,1,1,1,1\naccess_historias,acceso_historias,model_gestion_tareas_sergio_historias_sergio,base.group_user,1,1,1,1\n</code></pre>"},{"location":"6_5_campos_computados_relacionales/#vistas-y-menus","title":"Vistas y Men\u00fas","text":"<p>A\u00f1ade en <code>views/views.xml</code> los men\u00fas y acciones necesarios:</p> views/views.xml - Nuevos men\u00fas. Intenta hacerlo sin mirar <p></p><pre><code>&lt;!-- Actions para los nuevos modelos --&gt;\n&lt;record model=\"ir.actions.act_window\" id=\"gestion_tareas_sergio.proyectos_action_window\"&gt;\n    &lt;field name=\"name\"&gt;Proyectos&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;gestion_tareas_sergio.proyectos_sergio&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n&lt;/record&gt;\n\n&lt;record model=\"ir.actions.act_window\" id=\"gestion_tareas_sergio.historias_action_window\"&gt;\n    &lt;field name=\"name\"&gt;Historias de Usuario&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;gestion_tareas_sergio.historias_sergio&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n&lt;/record&gt;\n\n\n&lt;!-- Men\u00fas --&gt;\n&lt;!-- Nuevas Categorias --&gt;\n&lt;menuitem name=\"Proyectos\" \n          id=\"gestion_tareas_sergio.proyectos\" \n          parent=\"gestion_tareas_sergio.menu_root\" \n          sequence=\"10\"/&gt;\n&lt;menuitem name=\"Historias\" \n          id=\"gestion_tareas_sergio.historias\" \n          parent=\"gestion_tareas_sergio.menu_root\" \n          sequence=\"20\"/&gt;\n&lt;!-- Nuevas acciones --&gt;\n&lt;menuitem name=\"Listado\" \n          id=\"gestion_tareas_sergio.proyectos_list\" \n          parent=\"gestion_tareas_sergio.proyectos\"\n          action=\"gestion_tareas_sergio.proyectos_action_window\"/&gt;\n&lt;menuitem name=\"Listado\" \n          id=\"gestion_tareas_sergio.historias_list\" \n          parent=\"gestion_tareas_sergio.historias\"\n          action=\"gestion_tareas_sergio.historias_action_window\"/&gt;\n</code></pre> Observa que en los <code>&lt;menuitem&gt;</code> se ha introducido un valor para <code>sequence</code> para asegurar el orden correcto<p></p>"},{"location":"6_5_campos_computados_relacionales/#campo-computado-relacional-many2one","title":"Campo Computado Relacional Many2one","text":"<p>Supongamos que en las tareas queremos asignar autom\u00e1ticamente el spring activo, pero bas\u00e1ndonos en el proyecto de su historia de usuario</p> <p>Esto lo implementaremos mediante un campo al que llamaremos <code>spring_computado</code> en el modelo tarea, que  Ahora implementaremos un campo computado que asigna autom\u00e1ticamente una tarea al sprint activo, bas\u00e1ndose en el proyecto de su historia de usuario.</p> <p>Objetivo: Queremos que cada tarea se asigne autom\u00e1ticamente al sprint que:</p> <ul> <li>Pertenece al mismo proyecto que la historia de usuario</li> <li>Est\u00e1 actualmente abierto (fecha de fin posterior a hoy)</li> </ul> <p>Recapitulando vamos a obtener las siguientes relaciones:</p> <pre><code>PROYECTO (1) \n   \u2514\u2500\u2500&lt; HISTORIA (N) \n          \u2514\u2500\u2500&lt; TAREA (N)\n                 \u251c\u2500\u2500&lt; SPRINT (Computado/Relacionado)\n                 \u2514\u2500\u2500&lt; TECNOLOG\u00cdAS (M:N)\n</code></pre> <p>Implementaci\u00f3n</p> <pre><code>from datetime import datetime\n\nclass tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n    # ... campos existentes ...\n\n\n    # Quitamos la anterior relaci\u00f3n\n    # sprint = fields.Many2one(\n    #     'gestion_tareas_sergio.sprints_sergio', \n    #     string='Sprint relacionado', \n    #     ondelete='set null', \n    #     help='Sprint al que pertenece esta tarea')\n\n    # Lo hacemos computado\n    sprint = fields.Many2one(\n        'gestion_tareas_sergio.sprints_sergio', \n        string='Sprint Activo', \n        compute='_compute_sprint', \n        store=True)    \n\n    @api.depends('historia', 'historia.proyecto')\n    def _compute_sprint(self):\n        for tarea in self:\n            tarea.sprint = False\n\n            # Verificar que la tarea tiene historia y proyecto\n            if tarea.historia and tarea.historia.proyecto:\n                # Buscar sprints del proyecto\n                sprints = self.env['gestion_tareas_sergio.sprints_sergio'].search([\n                    ('proyecto.id', '=', tarea.historia.proyecto.id)\n                ])\n\n                # Buscar el sprint activo (fecha_fin &gt; ahora) \n                # de entre todos los sprints asociados al proyecto\n                # en teor\u00eda solo hay un sprint activo, por eso es el que no ha vencido\n                for sprint in sprints:\n                    if (isinstance(sprint.fecha_fin, datetime) and \n                            sprint.fecha_ini &lt;= datetime.now() and   \n                            sprint.fecha_fin &gt; datetime.now()):\n                        tarea.sprint = sprint.id\n                        break\n</code></pre> <p>Cuidado, debemos importar la funci\u00f3n datetime en el m\u00f3dulo datetime</p> <p>Explicaci\u00f3n Detallada</p> <p>1. Definici\u00f3n del campo: </p><pre><code>sprint = fields.Many2one(\n    'gestion_tareas_sergio.sprints_sergio',  # Modelo destino\n    compute='_compute_sprint',                 # M\u00e9todo que lo calcula\n    store=True)                                # Se almacena en BD\n</code></pre><p></p> <p>2. Decorador de dependencias: </p><pre><code>@api.depends('historia', 'historia.proyecto')\n</code></pre><p></p> <ul> <li>Se recalcula cuando cambia <code>historia</code></li> <li>O cuando cambia el <code>proyecto</code> de la <code>historia</code></li> <li>Uso de notaci\u00f3n punto para dependencias anidadas</li> </ul> <p>3. L\u00f3gica del m\u00e9todo:</p> <ul> <li>Itera sobre todas las tareas</li> <li>Inicializa el sprint a <code>False</code></li> <li>Verifica que tenga historia y proyecto</li> <li>Busca todos los sprints del proyecto</li> <li>Asigna el primer sprint que est\u00e9 activo (fecha_fin &gt; ahora &gt;= fecha_ini)</li> </ul> <p>4. B\u00fasqueda con <code>self.env</code>: </p><pre><code>sprints = self.env['modelo'].search([dominio])\n</code></pre><p></p> <ul> <li><code>self.env</code>: Acceso al entorno de Odoo</li> <li><code>search()</code>: Busca registros que cumplan el dominio</li> <li>Dominio: lista de tuplas (campo, operador, valor)</li> </ul>"},{"location":"6_5_campos_computados_relacionales/#campo-computado-relacional-many2many","title":"Campo Computado Relacional Many2many","text":"<p>Ahora implementaremos un campo que <code>tecnolog\u00edas</code> en las historias de usuario que recopilar\u00e1 autom\u00e1ticamente todas las tecnolog\u00edas utilizadas en las tareas asociadas a una historia de usuario.</p> <p>Objetivo: Queremos que cada historia de usuario muestre autom\u00e1ticamente:</p> <ul> <li>Todas las tecnolog\u00edas de todas sus tareas</li> <li>Sin duplicados</li> <li>Actualizado autom\u00e1ticamente</li> </ul> <p>Implementaci\u00f3n</p> <pre><code>class historias_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.historias_sergio'\n    # ... campos existentes ...\n\n    tecnologias = fields.Many2many(\n        \"gestion_tareas_sergio.tecnologias_sergio\", \n        compute=\"_compute_tecnologias\", \n        string=\"Tecnolog\u00edas Utilizadas\")\n\n    @api.depends('tareas', 'tareas.rel_tecnologias')\n    def _compute_tecnologias(self):\n        for historia in self:\n            tecnologias_acumuladas = self.env['gestion_tareas_sergio.tecnologias_sergio']\n\n            # Recorrer todas las tareas de la historia\n            for tarea in historia.tareas:\n                # Sumar (concatenar) tecnolog\u00edas de cada tarea\n                tecnologias_acumuladas = tecnologias_acumuladas + tarea.rel_tecnologias\n\n            # Asignar el resultado\n            historia.tecnologias = tecnologias_acumuladas\n</code></pre> <p>Explicaci\u00f3n Detallada</p> <p>1. Definici\u00f3n del campo: </p><pre><code>tecnologias = fields.Many2many(\n    \"gestion_tareas_sergio.tecnologias_sergio\",\n    compute=\"_compute_tecnologias\")\n</code></pre><p></p> <ul> <li>No lleva <code>store=True</code> porque es Many2many computado</li> <li>Se recalcula din\u00e1micamente</li> </ul> <p>2. Dependencias anidadas: </p><pre><code>@api.depends('tareas', 'tareas.rel_tecnologias')\n</code></pre><p></p> <ul> <li>Se recalcula cuando cambian las tareas</li> <li>O cuando cambian las tecnolog\u00edas de cualquier tarea</li> </ul> <p>3. L\u00f3gica del m\u00e9todo:</p> <ul> <li>Inicializa un recordset vac\u00edo de tecnolog\u00edas</li> <li>Itera sobre todas las tareas de la historia</li> <li>Suma (concatena) las tecnolog\u00edas de cada tarea</li> <li>Asigna el resultado final</li> </ul> <p>4. Concatenaci\u00f3n de recordsets:</p> <pre><code>recordset1 + recordset2  # Uni\u00f3n\n</code></pre> <ul> <li>Los recordsets en Odoo se pueden sumar</li> <li>Autom\u00e1ticamente elimina duplicados</li> <li>Mantiene el orden</li> </ul>"},{"location":"6_5_campos_computados_relacionales/#campos-related-relacionados-no-computados","title":"Campos Related (Relacionados No Computados)","text":"<p>A veces necesitamos mostrar un campo que ya existe en un modelo relacionado, sin duplicar datos ni calcular nada.</p> <p>Supongamos que en la tarea, donde hemos seleccionado la historia que esta implementando, queremos mostrar el proyecto al que esta asociada dicha historia y por tanto la tarea, pero:</p> <ul> <li>La tarea no tiene relaci\u00f3n directa con proyecto</li> <li>La tarea \u2192 historia \u2192 proyecto</li> <li>No queremos duplicar la relaci\u00f3n en BD</li> </ul> <p>Y la soluci\u00f3n: Campo Related</p> <p>Implementaci\u00f3n</p> <pre><code>class tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n    # ... campos existentes ...\n\n    historia = fields.Many2one('gestion_tareas_sergio.historias_sergio', string='Historia')\n\n    proyecto = fields.Many2one(\n        'gestion_tareas_sergio.proyectos_sergio',\n        string='Proyecto',\n        related='historia.proyecto',\n        readonly=True)\n</code></pre> <p>Ventajas del Campo Related:</p> <ul> <li>No requiere c\u00f3digo Python</li> <li>No se almacena en BD (no duplica datos)</li> <li>Se actualiza autom\u00e1ticamente</li> <li>Sintaxis muy simple</li> </ul> <p>Limitaciones del Campo Related:</p> <ul> <li>Solo lectura (generalmente)</li> <li>No puede tener l\u00f3gica personalizada</li> <li>Solo sigue cadenas de relaciones existentes</li> </ul> <p>Sintaxis: </p><pre><code>campo = fields.Tipo(\n    related='campo_relacion.campo_destino',\n    readonly=True)\n</code></pre><p></p> <p>Uso en Vistas</p> <p>Simplemente a\u00f1\u00e1delo a la vista como cualquier otro campo:</p> <pre><code>&lt;field name=\"proyecto\"/&gt;\n</code></pre> Campo related mostrando el proyecto autom\u00e1ticamente <p>Cuando selecciones una historia de usuario, el campo proyecto se actualizar\u00e1 autom\u00e1ticamente sin que el usuario pueda modificarlo.</p>"},{"location":"6_5_campos_computados_relacionales/#resumen-de-conceptos","title":"Resumen de Conceptos","text":"<p>Tipos de Campos Relacionales: </p> Tipo Almacenado Requiere C\u00f3digo Uso Relacional simple S\u00ed No Relaci\u00f3n directa entre modelos Computado relacional Opcional S\u00ed C\u00e1lculo basado en otros modelos Related No No Mostrar campo de modelo relacionado <p>Cu\u00e1ndo Usar Cada Tipo: </p> <p>Campo relacional simple (Many2one, One2many, Many2many):</p> <ul> <li>Relaci\u00f3n directa entre modelos</li> <li>El usuario establece manualmente la relaci\u00f3n</li> </ul> <p>Campo computado relacional:</p> <ul> <li>La relaci\u00f3n se determina autom\u00e1ticamente</li> <li>Basada en l\u00f3gica de negocio compleja</li> <li>Ejemplo: Asignar sprint seg\u00fan fechas y proyecto</li> </ul> <p>Campo related:</p> <ul> <li>Mostrar informaci\u00f3n de modelo relacionado</li> <li>Sin duplicar datos</li> <li>Solo lectura</li> <li>Ejemplo: Mostrar proyecto desde tarea\u2192historia\u2192proyecto</li> </ul> <p>Buenas Pr\u00e1cticas</p> <p>1. Dependencias Completas</p> <pre><code># Mal - falta dependencia anidada\n@api.depends('historia')\n\n# Bien - incluye dependencia anidada\n@api.depends('historia', 'historia.proyecto')\n</code></pre> <p>2. Inicializar Siempre</p> <pre><code>def _compute_campo(self):\n    for record in self:\n        record.campo = False  # Inicializar antes de calcular\n        # ... l\u00f3gica de c\u00e1lculo\n</code></pre> <p>3. Verificar Existencia</p> <pre><code>if tarea.historia and tarea.historia.proyecto:\n    # Ahora es seguro acceder a proyecto\n</code></pre> <p>4. Usar <code>self.env</code> para B\u00fasquedas</p> <pre><code># Buscar en otro modelo\nregistros = self.env['nombre.modelo'].search([dominio])\n</code></pre> <p>5. Store Solo Cuando Sea Necesario</p> <pre><code># Con store - para b\u00fasquedas y filtros\ncampo = fields.Many2one(..., compute='...', store=True)\n\n# Sin store - para c\u00e1lculos simples\ncampo = fields.Many2many(..., compute='...')\n</code></pre>"},{"location":"6_5_campos_computados_relacionales/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora ampliar\u00e1s el proyecto del restaurante con nuevos modelos y campos computados relacionales.</p>"},{"location":"6_5_campos_computados_relacionales/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>Vamos a expandir el modelo a\u00f1adiendo:</p> <ul> <li>Categor\u00edas de Platos: Para organizar los platos (Entrantes, Principales, Postres)</li> <li>Chefs: Personas que preparan los platos</li> <li>Campos computados que relacionen estos nuevos modelos</li> </ul> <p>Implementar\u00e1s:</p> <ul> <li>Campo computado Many2one: Asignar chef especializado seg\u00fan categor\u00eda</li> <li>Campo computado Many2many: Ingredientes usados en una categor\u00eda</li> <li>Campo related: Mostrar categor\u00eda desde men\u00fa\u2192platos\u2192categor\u00eda</li> </ul>"},{"location":"6_5_campos_computados_relacionales/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Crear modelo Categor\u00eda</p> <p>Campos necesarios:</p> <ul> <li><code>nombre</code>: Char, obligatorio</li> <li><code>descripcion</code>: Text</li> <li><code>platos</code>: One2many a platos</li> </ul> <p>Pistas:</p> <ul> <li>El campo One2many necesita el nombre del campo Many2one inverso</li> <li>Ejemplo: <code>fields.One2many('modelo.plato', 'categoria', ...)</code></li> </ul> </li> <li> <p>Crear modelo Chef</p> <p>Campos necesarios:</p> <ul> <li><code>nombre</code>: Char, obligatorio</li> <li><code>especialidad</code>: Many2one a Categor\u00eda</li> <li><code>platos_asignados</code>: One2many a platos</li> </ul> <p>Pistas:</p> <ul> <li>La especialidad indica en qu\u00e9 tipo de platos es experto el chef</li> </ul> </li> <li> <p>Modificar modelo Plato</p> <p>A\u00f1adir campos:</p> <ul> <li><code>categoria</code>: Many2one a Categor\u00eda (reemplaza el Selection)</li> <li><code>chef</code>: Many2one a Chef</li> </ul> <p>Pistas:</p> <ul> <li>Recuerda actualizar las vistas para usar el nuevo campo</li> </ul> </li> <li> <p>Actualizar permisos</p> <p>A\u00f1ade en <code>ir.model.access.csv</code>:</p> <pre><code>access_categoria,acceso_categoria,model_..._categoria,base.group_user,1,1,1,1\naccess_chef,acceso_chef,model_..._chef,base.group_user,1,1,1,1\n</code></pre> </li> <li> <p>Crear vistas y men\u00fas para los nuevos modelos</p> <p>Estructura sugerida: </p><pre><code>Gesti\u00f3n Restaurante\n\u251c\u2500\u2500 Men\u00fa\n\u2502   \u251c\u2500\u2500 Platos\n\u2502   \u251c\u2500\u2500 Men\u00fas\n\u2502   \u251c\u2500\u2500 Ingredientes\n\u2502   \u251c\u2500\u2500 Categor\u00edas\n\u2502   \u2514\u2500\u2500 Chefs\n</code></pre><p></p> </li> <li> <p>Actualizar vista de Plato</p> <p>A\u00f1ade los nuevos campos:</p> <ul> <li><code>categoria</code> (en lugar del Selection anterior)</li> <li><code>chef_especializado</code></li> </ul> <p>Elimina el campo <code>categoria</code> tipo Selection si lo ten\u00edas.</p> </li> <li> <p>Campo computado Many2one: Asignar chef autom\u00e1ticamente</p> <p>En el modelo Plato, crea un campo <code>chef_especializado</code> que:</p> <ul> <li>Sea de tipo Many2one a Chef</li> <li>Se compute con m\u00e9todo <code>_compute_chef_especializado</code></li> <li>Se almacene en BD (<code>store=True</code>)</li> <li>Dependa del campo <code>categoria</code></li> </ul> <p>La l\u00f3gica debe:</p> <ul> <li>Buscar un chef cuya especialidad coincida con la categor\u00eda del plato</li> <li>Asignar el primer chef encontrado</li> </ul> <p>Pistas:</p> <ul> <li>Usa <code>self.env['modelo.chef'].search([dominio], limit=1)</code></li> <li>Dominio: <code>[('especialidad', '=', plato.categoria.id)]</code></li> <li><code>limit=1</code>, porque al ser una relaci\u00f3n Many2one, solo necesitamos un chef (en caso se haber m\u00e1s), as\u00ed que solo seleccionamos el primero.</li> <li>No olvides verificar que existe categor\u00eda</li> </ul> </li> <li> <p>Campo computado Many2many: Ingredientes por categor\u00eda</p> <p>En el modelo Categor\u00eda, crea un campo <code>ingredientes_comunes</code> que:</p> <ul> <li>Sea de tipo Many2many a Ingrediente</li> <li>Se compute con m\u00e9todo <code>_compute_ingredientes_comunes</code></li> <li>Muestre todos los ingredientes usados en platos de esa categor\u00eda</li> </ul> <p>La l\u00f3gica debe:</p> <ul> <li>Iterar sobre todos los platos de la categor\u00eda</li> <li>Acumular todos los ingredientes</li> </ul> <p>Pistas:</p> <ul> <li>Inicializa un recordset vac\u00edo: <code>self.env['modelo.ingrediente']</code></li> <li>Suma recordsets: <code>acumulado = acumulado + plato.rel_ingredientes</code></li> <li>Depende de: <code>@api.depends('platos', 'platos.rel_ingredientes')</code></li> </ul> </li> <li> <p>Campo related: Especialidad del chef desde Plato</p> <p>En el modelo Plato, a\u00f1ade un campo <code>especialidad_chef</code> que:</p> <ul> <li>Use <code>related</code> para mostrar las categor\u00edas de todos los platos del men\u00fa</li> <li>Sea readonly</li> </ul> <p>Pistas:</p> <ul> <li>Debes obtener la especialidad del chef</li> </ul> </li> <li> <p>Probar el comportamiento</p> <ul> <li>Crea categor\u00edas: \"Entrantes\", \"Principales\", \"Postres\"</li> <li>Crea chefs con especialidades</li> <li>Crea platos con categor\u00edas</li> <li>Verifica que se asigna el chef autom\u00e1ticamente</li> <li>Verifica que las categor\u00edas muestran sus ingredientes comunes</li> </ul> </li> </ol>"},{"location":"6_5_campos_computados_relacionales/#verificaciones-y-resultado-esperado","title":"Verificaciones y Resultado Esperado","text":"<p>Comprueba que:</p> <ul> <li>Al asignar una categor\u00eda a un plato, se asigna autom\u00e1ticamente un chef especializado</li> <li>Las categor\u00edas muestran todos los ingredientes usados en sus platos</li> <li>Desde un men\u00fa puedes ver las categor\u00edas de todos sus platos (campo related)</li> <li>Los campos computados se actualizan cuando cambian los datos relacionados</li> </ul> <p>Datos de prueba sugeridos</p> <p>Crea estos datos para probar:</p> <p>Categor\u00edas:</p> <ol> <li>Entrantes</li> <li>Principales</li> <li>Postres</li> </ol> <p>Chefs:</p> <ol> <li>Juan - Especialidad: Entrantes</li> <li>Mar\u00eda - Especialidad: Principales</li> <li>Pedro - Especialidad: Postres</li> </ol> <p>Platos:</p> <ol> <li>Ensalada C\u00e9sar - Categor\u00eda: Entrantes \u2192 Chef asignado: Juan</li> <li>Pizza Margarita - Categor\u00eda: Principales \u2192 Chef asignado: Mar\u00eda</li> <li>Tiramis\u00fa - Categor\u00eda: Postres \u2192 Chef asignado: Pedro</li> </ol> <p>Verifica que el chef se asigna autom\u00e1ticamente al seleccionar la categor\u00eda.</p>"},{"location":"6_6_campos_valores_defecto/","title":"Campos con valores por defecto","text":""},{"location":"6_6_campos_valores_defecto/#campos-con-valores-por-defecto","title":"Campos con Valores por Defecto","text":"<p>En este apartado abordaremos la creaci\u00f3n de campos con valores por defecto en Odoo, diferenci\u00e1ndolos de los campos computados y mostrando diversas formas de establecer estos valores iniciales.</p> <p>Un valor por defecto es el valor inicial que tendr\u00e1 un campo cuando se crea un nuevo registro.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Se asigna autom\u00e1ticamente al crear un registro</li> <li>El usuario puede modificarlo despu\u00e9s de la creaci\u00f3n</li> <li>Se calcula una sola vez (al crear el registro)</li> <li>Simplifica la entrada de datos</li> <li>Reduce errores de usuario</li> </ul> <p>Casos de uso comunes:</p> <ul> <li>Fechas actuales (fecha de creaci\u00f3n, fecha de alta)</li> <li>Valores booleanos (activo: True, disponible: True)</li> <li>N\u00fameros predeterminados (cantidad: 1, descuento: 0)</li> <li>Estados iniciales (estado: 'borrador')</li> </ul>"},{"location":"6_6_campos_valores_defecto/#diferencia-con-campos-computados","title":"Diferencia con Campos Computados","text":"<p>Es importante entender la diferencia entre campos con valores por defecto y campos computados:</p> Caracter\u00edstica Valor por Defecto Campo Computado Cu\u00e1ndo se calcula Solo al crear Cada vez que se lee o cambian dependencias Editable por usuario S\u00ed No (salvo que se programe) Par\u00e1metro usado <code>default=</code> <code>compute=</code> Almacenamiento Siempre Opcional (<code>store=True</code>) Uso t\u00edpico Valor inicial sugerido C\u00e1lculo autom\u00e1tico continuo <p>Ejemplo visual</p> <pre><code># Valor por defecto - usuario puede cambiar\ncantidad = fields.Integer(default=1)\n\n# Campo computado - se recalcula siempre\ntotal = fields.Float(compute='_compute_total')\n</code></pre>"},{"location":"6_6_campos_valores_defecto/#formas-de-definir-valores-por-defecto","title":"Formas de Definir Valores por Defecto","text":""},{"location":"6_6_campos_valores_defecto/#1-asignacion-directa-valores-estaticos","title":"1. Asignaci\u00f3n Directa (Valores Est\u00e1ticos)","text":"<p>La forma m\u00e1s simple es asignar directamente un valor al par\u00e1metro <code>default</code>:</p> <p>Ejemplo de asignaci\u00f3n de varios campos por defecto</p> <pre><code>class sprints_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.sprints_sergio'\n\n    duracion = fields.Integer(\n        string=\"Duraci\u00f3n (d\u00edas)\",\n        default=14,\n        help=\"Duraci\u00f3n en d\u00edas del sprint\")\n</code></pre> <p>Tipos de valores seg\u00fan el campo:</p> <p>Ejemplos de varios tipos de valores</p> <pre><code># Char / Text - entre comillas\nnombre = fields.Char(default=\"Sin t\u00edtulo\")\n\n# Integer / Float - n\u00fameros directos\ncantidad = fields.Integer(default=1)\nprecio = fields.Float(default=0.0)\n\n# Boolean - True o False\nactivo = fields.Boolean(default=True)\n\n# Date / Datetime - mejor usar funciones (ver siguiente secci\u00f3n)\n\n# Selection - uno de los valores definidos\nestado = fields.Selection(\n    [('borrador', 'Borrador'), ('activo', 'Activo')],\n    default='borrador')\n</code></pre> <p>Tipo de dato correcto</p> <p>El valor asignado a <code>default</code> debe coincidir con el tipo de dato del campo. Un error com\u00fan es poner <code>default=\"1\"</code> (string) en un campo Integer.</p>"},{"location":"6_6_campos_valores_defecto/#2-valores-calculados-con-funcion","title":"2. Valores Calculados con Funci\u00f3n","text":"<p>Para valores que requieren c\u00e1lculo, se define una funci\u00f3n y se pasa como valor por defecto:</p> <p>Ejemplo de calculo por defecto calculado. La hecha actual</p> <pre><code>from datetime import datetime\n\nclass tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n\n    # 1. Primero definimos la funci\u00f3n\n    def _get_fecha_actual(self):\n        return datetime.now()\n\n    # 2. Despu\u00e9s la usamos en el campo (SIN comillas)\n    fecha_creacion = fields.Datetime(\n        string=\"Fecha de Creaci\u00f3n\",\n        default=_get_fecha_actual)\n</code></pre> <p>Aspectos clave:</p> <ul> <li>La funci\u00f3n se define antes del campo</li> <li>Se pasa sin comillas (diferencia con <code>compute</code>)</li> <li>La funci\u00f3n recibe <code>self</code> como par\u00e1metro</li> <li>Se ejecuta una sola vez al crear el registro</li> <li>El usuario puede modificar el valor despu\u00e9s</li> </ul> <p>Ejemplo con L\u00f3gica M\u00e1s Compleja</p> <pre><code>def _get_codigo_siguiente(self):\n    \"\"\"Genera el siguiente c\u00f3digo secuencial\"\"\"\n    ultimo = self.search([], order='id desc', limit=1)\n    if ultimo:\n        return f\"TSK-{ultimo.id + 1:04d}\"\n    return \"TSK-0001\"\n\ncodigo = fields.Char(\n    string=\"C\u00f3digo\",\n    default=_get_codigo_siguiente)\n</code></pre>"},{"location":"6_6_campos_valores_defecto/#3-uso-de-funciones-lambda","title":"3. Uso de Funciones Lambda","text":"<p>Cuando la l\u00f3gica es sencilla, se puede usar una funci\u00f3n lambda directamente:</p> <p>Asignaci\u00f3n usando funcion lambda</p> <pre><code>from datetime import datetime\n\nclass tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n\n    fecha_creacion = fields.Datetime(\n        string=\"Fecha de Creaci\u00f3n\",\n        default=lambda self: datetime.now())\n</code></pre> <p>Ventajas de lambda:</p> <ul> <li>C\u00f3digo m\u00e1s conciso</li> <li>No necesitas definir funci\u00f3n aparte</li> <li>Ideal para l\u00f3gica simple</li> </ul> <p>Cu\u00e1ndo usar lambda vs funci\u00f3n normal:</p> <p>Uso de funci\u00f3n normal vs lambda</p> <pre><code># Lambda - l\u00f3gica simple (1 l\u00ednea)\nfecha = fields.Date(default=lambda self: fields.Date.today())\n\n# Funci\u00f3n normal - l\u00f3gica compleja (m\u00faltiples l\u00edneas)\ndef _get_valor_complejo(self):\n    if condicion:\n        return valor1\n    else:\n        return valor2\n\ncampo = fields.Char(default=_get_valor_complejo)\n</code></pre>"},{"location":"6_6_campos_valores_defecto/#4-valores-por-defecto-del-usuario-actual","title":"4. Valores por Defecto del Usuario Actual","text":"<p>Un caso com\u00fan es asignar el usuario actual como valor por defecto:</p> <p>Asignaci\u00f3n del usuario actual a la acci\u00f3n realizada</p> <pre><code>responsable = fields.Many2one(\n    'res.users',\n    string='Responsable',\n    default=lambda self: self.env.user.id)\n</code></pre> <p>Explicaci\u00f3n:</p> <ul> <li><code>self.env</code>: Entorno de Odoo</li> <li><code>self.env.user</code>: Usuario actual</li> <li>Se asigna autom\u00e1ticamente al crear el registro</li> </ul>"},{"location":"6_6_campos_valores_defecto/#5-valores-por-defecto-con-busquedas","title":"5. Valores por Defecto con B\u00fasquedas","text":"<p>Tambi\u00e9n puedes buscar registros existentes para usar como valor por defecto:</p> <p>Resultado de b\u00fasqueda como valor por defecto</p> <p>A\u00f1adimos al proyecto un campo para indicar si esta o no activo</p> <pre><code>activo = fields.Boolean(\n    string= \"Estado del proyecto\",\n    default = True\n)    \n</code></pre> <p>y ahora en la tarea calculamos el proyecto activo </p> <pre><code>def _get_proyecto_activo(self):\n    \"\"\"Retorna el proyecto marcado como activo\"\"\"\n    return self.env['gestion_tareas_sergio.proyectos_sergio'].search(\n        [('activo', '=', True)], \n        limit=1, order='create_date desc')\n\nproyecto = fields.Many2one(\n    'gestion_tareas_sergio.proyectos_sergio',\n    string='Proyecto',\n    default=_get_proyecto_activo)\n</code></pre> <ul> <li><code>create_date</code> es un campo propio de odoo donde tenemos la fecha de creaci\u00f3n del registro.</li> </ul>"},{"location":"6_6_campos_valores_defecto/#comparativa-default-vs-compute","title":"Comparativa: Default vs Compute","text":"<p>Veamos el siguiente ejemplo donde por una parte tenemos un valor por defecto en <code>fecha_alta</code> que se asigna la primera vez que se crea un registro y un campo computado <code>dias_activo</code> que se recalcula cada vez que se accede al un registro.</p> <p>Ejemplo Lado a Lado</p> <pre><code>class Ejemplo(models.Model):\n    _name = 'ejemplo'\n\n    # VALOR POR DEFECTO\n    # - Se asigna al crear\n    # - Usuario puede cambiar\n    # - Se calcula UNA vez\n    fecha_alta = fields.Date(\n        string=\"Fecha de Alta\",\n        default=lambda self: fields.Date.today())\n\n    # CAMPO COMPUTADO\n    # - Se recalcula siempre\n    # - Usuario NO puede cambiar\n    # - Depende de otros campos\n    dias_activo = fields.Integer(\n        string=\"D\u00edas Activo\",\n        compute='_compute_dias_activo')\n\n    @api.depends('fecha_alta')\n    def _compute_dias_activo(self):\n        for record in self:\n            if record.fecha_alta:\n                delta = fields.Date.today() - record.fecha_alta\n                record.dias_activo = delta.days\n            else:\n                record.dias_activo = 0\n</code></pre>"},{"location":"6_6_campos_valores_defecto/#visualizacion-en-vistas","title":"Visualizaci\u00f3n en Vistas","text":"<p>Para que el usuario vea el valor por defecto, simplemente a\u00f1ade el campo a la vista:</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"tareas_form\"&gt;\n    &lt;field name=\"name\"&gt;tareas.form&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;form&gt;\n            &lt;sheet&gt;\n                &lt;group&gt;\n                    &lt;field name=\"fecha_creacion\"/&gt;\n                    &lt;field name=\"responsable\"/&gt;\n                    &lt;field name=\"estado\"/&gt;\n                &lt;/group&gt;\n            &lt;/sheet&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Al crear un nuevo registro, estos campos aparecer\u00e1n pre-rellenados con sus valores por defecto.</p> Campos con valores por defecto pre-rellenados"},{"location":"6_6_campos_valores_defecto/#casos-de-uso-comunes","title":"Casos de Uso Comunes","text":"<p>1. Fecha Actual</p> <pre><code>fecha_creacion = fields.Date(\n    string=\"Fecha de Creaci\u00f3n\",\n    default=lambda self: fields.Date.today())\n\nfecha_hora_creacion = fields.Datetime(\n    string=\"Fecha y Hora de Creaci\u00f3n\",\n    default=lambda self: fields.Datetime.now())\n</code></pre> <p>2. Usuario Actual</p> <pre><code>creado_por = fields.Many2one(\n    'res.users',\n    string='Creado por',\n    default=lambda self: self.env.user.id\n    readonly=True)\n</code></pre> <p>3. Booleanos</p> <pre><code>activo = fields.Boolean(\n    string=\"Activo\",\n    default=True)\n\npublicado = fields.Boolean(\n    string=\"Publicado\",\n    default=False)\n</code></pre> <p>4. Estados Iniciales</p> <pre><code>estado = fields.Selection([\n    ('borrador', 'Borrador'),\n    ('revision', 'En Revisi\u00f3n'),\n    ('aprobado', 'Aprobado'),\n    ('rechazado', 'Rechazado')\n], default='borrador')\n</code></pre> <p>5. Valores Num\u00e9ricos</p> <pre><code>descuento = fields.Float(\n    string=\"Descuento (%)\",\n    default=0.0)\n\ncantidad = fields.Integer(\n    string=\"Cantidad\",\n    default=1)\n\nprioridad = fields.Selection([\n    ('1', 'Baja'),\n    ('2', 'Normal'),\n    ('3', 'Alta')\n], default='2')\n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>1. Usa el Tipo Correcto</p> <pre><code># Mal - tipo incorrecto\ncantidad = fields.Integer(default=\"1\")  # String en lugar de int\n\n# Bien\ncantidad = fields.Integer(default=1)\n</code></pre> <p>2. Funciones vs Lambda</p> <pre><code># Usa lambda para l\u00f3gica simple\nfecha = fields.Date(default=lambda self: fields.Date.today())\n\n# Usa funci\u00f3n para l\u00f3gica compleja\ndef _get_codigo(self):\n    # M\u00faltiples l\u00edneas de c\u00f3digo\n    # ...\n    return codigo\n\ncodigo = fields.Char(default=_get_codigo)\n</code></pre> <p>3. No Calcules Valores Caros</p> <pre><code># Mal - operaci\u00f3n costosa en valor por defecto\ndef _get_estadisticas_complejas(self):\n    # Consulta pesada a BD\n    # C\u00e1lculos complejos\n    return resultado\n\ncampo = fields.Char(default=_get_estadisticas_complejas)  # Lento\n\n# Bien - usa campo computado para c\u00e1lculos costosos\ncampo = fields.Char(compute='_compute_estadisticas')\n</code></pre> <p>4. Documenta Valores No Obvios</p> <pre><code>duracion = fields.Integer(\n    string=\"Duraci\u00f3n\",\n    default=14,\n    help=\"Duraci\u00f3n predeterminada del sprint en d\u00edas (2 semanas)\")\n</code></pre> <p>5. Considera la Zona Horaria</p> <pre><code># Para fechas con hora, considera la zona horaria del usuario\ndef _get_fecha_hora(self):\n    return fields.Datetime.now()  # UTC por defecto\n\n# O usa la zona horaria del usuario\ndef _get_fecha_hora_local(self):\n    from datetime import datetime\n    import pytz\n\n    tz = pytz.timezone(self.env.user.tz or 'UTC')\n    return datetime.now(tz)\n</code></pre> <p>Errores Comunes</p> <p>1. Pasar Funci\u00f3n con Par\u00e9ntesis</p> <pre><code># Mal - ejecuta la funci\u00f3n inmediatamente\nfecha = fields.Date(default=fields.Date.today())\n\n# Bien - pasa la funci\u00f3n sin ejecutar\nfecha = fields.Date(default=lambda self: fields.Date.today())\n</code></pre> <p>2. Usar Comillas con Funciones</p> <pre><code># Mal - esto es para compute, no para default\nfecha = fields.Date(default='_get_fecha')\n\n# Bien\nfecha = fields.Date(default=_get_fecha)\n# o\nfecha = fields.Date(default=lambda self: fields.Date.today())\n</code></pre> <p>3. Valores Mutables</p> <pre><code># Mal - lista mutable compartida entre instancias\nvalores = fields.Char(default=[])  # \u00a1Peligro!\n\n# Bien - usa lambda para crear nueva instancia\nvalores = fields.Char(default=lambda self: [])\n</code></pre>"},{"location":"6_6_campos_valores_defecto/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora a\u00f1adir\u00e1s valores por defecto \u00fatiles a tu proyecto del restaurante.</p>"},{"location":"6_6_campos_valores_defecto/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>A\u00f1adir\u00e1s valores por defecto a varios campos para mejorar la usabilidad:</p> <ul> <li>Fechas autom\u00e1ticas de creaci\u00f3n</li> <li>Estados iniciales predeterminados</li> <li>Valores num\u00e9ricos por defecto</li> <li>Usuario actual como responsable</li> </ul>"},{"location":"6_6_campos_valores_defecto/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Fecha de alta autom\u00e1tica en Platos</p> <p>A\u00f1ade un campo <code>fecha_alta</code> de tipo <code>Date</code> con valor por defecto de la fecha actual.</p> <p>Pistas:</p> <ul> <li>Usa <code>lambda self: fields.Date.today()</code></li> <li>O define una funci\u00f3n que retorne <code>fields.Date.today()</code></li> </ul> </li> <li> <p>Disponibilidad por defecto en Platos</p> <p>Modifica el campo <code>disponible</code> (Boolean) para que por defecto sea <code>True</code>.</p> <p>Pista: <code>default=True</code></p> </li> <li> <p>Descuento por defecto</p> <p>El campo <code>descuento</code> debe tener valor por defecto de 0.0.</p> <p>Pista: Usa valor num\u00e9rico directo</p> </li> <li> <p>Categor\u00eda por defecto para Platos</p> <p>Crea una funci\u00f3n que busque la categor\u00eda \"Sin Clasificar\" y la asigne por defecto.</p> <p>Pistas:</p> <ul> <li>Define funci\u00f3n <code>_get_categoria_defecto</code></li> <li>Usa <code>self.env['modelo.categoria'].search([('nombre', '=', 'Sin Clasificar')], limit=1)</code></li> <li>Primero crea la categor\u00eda \"Sin Clasificar\" para que exista</li> </ul> </li> <li> <p>Precio base por defecto</p> <p>El campo <code>precio</code> en Platos debe tener un valor m\u00ednimo sugerido de 5.0.</p> </li> <li> <p>Estado inicial de Men\u00fas</p> <p>El campo <code>activo</code> en Men\u00fas debe ser <code>False</code> por defecto (para que se active manualmente).</p> </li> <li> <p>Usuario creador en Men\u00fas</p> <p>A\u00f1ade un campo <code>creado_por</code> de tipo <code>Many2one</code> a <code>res.users</code> con valor por defecto del usuario actual.</p> <p>Haz que este campo no se pueda cambiar</p> <p>Pistas:</p> <ul> <li>funci\u00f3n lambda: <code>self.env.user</code></li> <li>Marca el campo como <code>readonly</code></li> </ul> </li> <li> <p>Duraci\u00f3n por defecto de disponibilidad de Men\u00fa</p> <p>Si a\u00f1ades un campo <code>dias_disponible</code> (Integer) a Men\u00fa, establece default=7 (una semana).</p> </li> <li> <p>Calcula autom\u00e1ticamente la fecha de finalizaci\u00f3n del men\u00fa</p> <p>A partir del campo anteior <code>dias_disponible</code> calcula de forma autom\u00e1tica el valor de <code>fecha_fin</code></p> </li> <li> <p>Actualizar vistas</p> <p>A\u00f1ade los nuevos campos a las vistas para que sean visible.</p> </li> </ol>"},{"location":"6_6_campos_valores_defecto/#verificaciones-y-resultado-esperado","title":"Verificaciones y Resultado Esperado","text":"<p>Comprueba que:</p> <ul> <li>Al crear un nuevo plato, la fecha de alta se rellena autom\u00e1ticamente con la fecha actual</li> <li>Al crear un nuevo plato, <code>disponible</code> est\u00e1 marcado como True</li> <li>Al crear un nuevo men\u00fa, aparece tu usuario en <code>creado_por</code></li> <li>Los valores num\u00e9ricos tienen sus valores por defecto correctos</li> <li>Puedes modificar todos estos valores despu\u00e9s de crearlos (no son readonly salvo <code>creado_por</code>)</li> </ul> <p>Pruebas sugeridas:</p> <ol> <li>Crea un nuevo plato sin tocar ning\u00fan campo</li> <li>Verifica que <code>fecha_alta</code>, <code>disponible</code>, <code>descuento</code> y <code>precio</code> tienen valores autom\u00e1ticos</li> <li>Modifica el precio - debe permitirte cambiarlo</li> <li>Crea un nuevo men\u00fa</li> <li>Verifica que <code>creado_por</code> muestra tu usuario y no puedes cambiarlo</li> </ol>"},{"location":"6_7_herencias_modelos_vistas/","title":"Herencias","text":""},{"location":"6_7_herencias_modelos_vistas/#herencias","title":"Herencias","text":"<p>La herencia es uno de los mecanismos m\u00e1s potentes de Odoo para extender funcionalidad existente sin modificar el c\u00f3digo original. Permite reutilizar y adaptar modelos, vistas y l\u00f3gica de negocio de m\u00f3dulos est\u00e1ndar, facilitando la evoluci\u00f3n y el mantenimiento de las aplicaciones desarrolladas sobre la plataforma.</p> <p>En este apartado veremos los principales tipos de herencia disponibles en Odoo y trabajaremos un ejemplo pr\u00e1ctico completo de herencia de clase, extendiendo el modelo de contactos para gestionar desarrolladores en nuestro sistema de proyectos.</p>"},{"location":"6_7_herencias_modelos_vistas/#tipos-de-herencia-en-odoo","title":"Tipos de Herencia en Odoo","text":"<p>Seg\u00fan la documentaci\u00f3n oficial de Odoo, existen varios tipos de herencia:</p> <p>Herencia de clase (cl\u00e1sica)</p> <p>Permite extender un modelo existente a\u00f1adiendo nuevos campos o m\u00e9todos, o sobrescribiendo los ya existentes. Los datos se almacenan en la misma tabla que el modelo original, y las vistas existentes pueden mostrar los nuevos campos a\u00f1adidos. Es el tipo de herencia m\u00e1s utilizado en Odoo.</p> <p>Herencia por prototipo</p> <p>Se crea un nuevo modelo que hereda los atributos del modelo original, pero los datos se almacenan en tablas diferentes. Este tipo de herencia es \u00fatil cuando se requiere crear variantes de un modelo base, manteniendo la independencia de los datos.</p> <p>Herencia por delegaci\u00f3n</p> <p>Se crea un nuevo modelo que contiene una relaci\u00f3n con el modelo original. Cada vez que se crea un registro en el modelo hijo, se crea tambi\u00e9n un registro asociado en el modelo padre, sincronizando los datos entre ambos. Este enfoque permite implementar herencia m\u00faltiple y mantener la separaci\u00f3n de datos en tablas distintas.</p> Tipos de herencia en Odoo <p>En Odoo, la herencia de clase es la m\u00e1s utilizada, ya que permite ampliar o adaptar modelos existentes a nuevas necesidades sin duplicar informaci\u00f3n ni perder compatibilidad con las vistas y funcionalidades ya implementadas.</p>"},{"location":"6_7_herencias_modelos_vistas/#situacion-actual-en-los-modelos-del-proyecto","title":"Situaci\u00f3n Actual en los Modelos del Proyecto","text":"<p>Actualmente, el m\u00f3dulo de gesti\u00f3n de proyectos cuenta con los siguientes modelos:</p> <ul> <li>Proyecto: Representa un proyecto y est\u00e1 relacionado con varias historias</li> <li>Historia: Cada historia puede contener varias tareas</li> <li>Tarea: Las tareas est\u00e1n asociadas a las tecnolog\u00edas necesarias para su desarrollo, pertenecen a una historia y se desarrollan en un sprint</li> <li>Sprint: Relacionado con las tareas que se desarrollan durante el mismo</li> <li>Tecnolog\u00eda: Representa las tecnolog\u00edas empleadas en las distintas tareas</li> </ul> <p>Elemento faltante: Hasta el momento, no se ha implementado ning\u00fan modelo para representar a las personas involucradas en el desarrollo (desarrolladores) ni a los clientes relacionados con los proyectos. Es momento de abordar este aspecto, pero ayud\u00e1ndonos de la herencia.</p>"},{"location":"6_7_herencias_modelos_vistas/#herencia-de-clase-en-odoo","title":"Herencia de Clase en Odoo","text":"<p>Odoo incluye un modelo nativo llamado <code>res.partner</code> que almacena todos los contactos del sistema: empleados, compa\u00f1\u00edas, clientes, proveedores, etc. Crear un modelo completamente nuevo para desarrolladores no tiene sentido, ya que un desarrollador es, en esencia, un tipo de contacto.</p> <p>La soluci\u00f3n \u00f3ptima es extender el modelo <code>res.partner</code> mediante herencia de clase, a\u00f1adiendo los campos y funcionalidades espec\u00edficas que necesitamos para gestionar desarrolladores.</p>"},{"location":"6_7_herencias_modelos_vistas/#implementacion-del-modelo","title":"Implementaci\u00f3n del Modelo","text":"<p>Para crear un modelo que represente a los desarrolladores y permita asociarles tecnolog\u00edas, se define una clase que hereda de <code>res.partner</code> utilizando el atributo <code>_inherit</code>. De este modo, cualquier campo a\u00f1adido en la nueva clase se incorporar\u00e1 directamente a la tabla de <code>res.partner</code>.</p> <p>Por ejemplo, para asociar tecnolog\u00edas a los desarrolladores, se a\u00f1ade un campo <code>Many2many</code> relacionado con el modelo de tecnolog\u00edas:</p> <p>models.py</p> <pre><code># DESARROLLADOR, Hereda de res.partner\nclass desarrollador_sergio(models.Model):\n    _name = 'res.partner'\n    _inherit = 'res.partner'                                    # Hereda toda la estructura de contactos\n\n    tecnologia_ids = fields.Many2many(\n        comodel_name='gestion_tareas_sergio.tecnologias_sergio',# Modelo destino\n        relation='rel_dev_tec',                                 # Tabla intermedia\n        column1='desarrollador_id',                             # Columna para esta clase\n        column2='tecnologia_id',                                # Columna para tecnolog\u00edas\n        string=\"Tecnolog\u00edas\"\n    )\n</code></pre> <p>models.py - Tecnolog\u00edas</p> <pre><code># TECNOLOGIAS   \nclass tecnologias_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tecnologias_sergio'\n    ....\n\n    # Nueva relaci\u00f3n con desarrolladorees\n    desarrolladores_ids = fields.Many2many(\n        comodel_name='res.partner',                             # Modelo destino\n        relation='rel_dev_tec',                                 # Tabla intermedia\n        column1='tecnologia_id',                                # Columna para tecnolog\u00edas\n        column2='desarrollador_id',                             # Columna para esta clase\n        string=\"Tecnolog\u00edas\")\n</code></pre> <p>Aspectos clave de la implementaci\u00f3n:</p> <ul> <li><code>_name</code>: No es imprescindible especificarlo al heredar, pero es com\u00fan incluirlo por claridad y h\u00e1bito</li> <li><code>_inherit</code>: Fundamental, indica el modelo del que heredamos (<code>res.partner</code>)</li> <li><code>tecnologia_ids</code>: Nuevo campo Many2many que se a\u00f1ade al modelo heredado</li> </ul> <p>Con esta implementaci\u00f3n, no se crea una nueva tabla para desarrolladores. El campo <code>tecnologias</code> se a\u00f1ade directamente a la tabla <code>res_partner</code> existente.</p> <p>Estructura Many2many en Odoo</p> <p>Para configurar un campo Many2many seguimos este esquema de 4 par\u00e1metros:</p> <pre><code>campo_ids = fields.Many2many(\n    'modelo.destino',      # 1. \u00bfCon qu\u00e9 modelo conecto?\n    'tabla_intermedia',    # 2. Nombre de la tabla f\u00edsica en la BD\n    'mi_id',               # 3. Mi ID en esa tabla\n    'su_id',               # 4. El ID del otro modelo en esa tabla\n    string=\"Etiqueta\"\n)\n</code></pre>"},{"location":"6_7_herencias_modelos_vistas/#verificacion-en-base-de-datos","title":"Verificaci\u00f3n en Base de Datos","text":"<p>Tras actualizar el m\u00f3dulo, podemos verificar que el nuevo campo se ha a\u00f1adido correctamente al modelo <code>res.partner</code>. Usa cualquiera de los m\u00e9todos descritos en el apartado Revisi\u00f3n de la base de datos del primer ejemplo.</p> <p>Desde el entorno de Odoo en modo desarrollo, ve a Ajustes \u2192 T\u00e9cnico \u2192 Estructura de la base de datos \u2192 Modelos y busca <code>res.partner</code>. Si buscas <code>desarrollador</code> no lo encontrar\u00e1s, ya que no es un modelo independiente.</p> Nuevo campo a\u00f1adido mediante herencia al modelo res.partner <p>El modelo <code>res.partner</code> contiene muchos campos adicionales de diferentes m\u00f3dulos instalados. Esto es precisamente la potencia de la herencia: m\u00faltiples m\u00f3dulos pueden extender el mismo modelo sin interferir entre s\u00ed.</p>"},{"location":"6_7_herencias_modelos_vistas/#acceso-mediante-menu","title":"Acceso Mediante Men\u00fa","text":"<p>Para facilitar el acceso a los desarrolladores desde nuestro m\u00f3dulo, creamos una acci\u00f3n y una opci\u00f3n de men\u00fa que apunten al modelo <code>res.partner</code>:</p> <p>views.xml</p> <pre><code>&lt;!-- Nueva acci\u00f3n --&gt;\n&lt;record model=\"ir.actions.act_window\" id=\"desarrolladores_action_window\"&gt;\n    &lt;field name=\"name\"&gt;Desarrolladores&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;res.partner&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n&lt;/record&gt;\n\n&lt;!-- Nuevo men\u00fa --&gt;\n&lt;menuitem name=\"Desarrolladores\" \n          id=\"gestion_tareas_sergio.gestion_desarrolladores\" \n          action=\"desarrolladores_action_window\"\n          parent=\"gestion_tareas_sergio.menu_root\" \n          sequence=\"50\"/&gt;\n</code></pre> <p>Con esta configuraci\u00f3n b\u00e1sica, al acceder al men\u00fa \"Desarrolladores\" veremos todos los contactos del sistema, no solo los desarrolladores. Necesitamos personalizar las vistas y a\u00f1adir filtros para mostrar \u00fanicamente los contactos que nos interesan.</p>"},{"location":"6_7_herencias_modelos_vistas/#herencia-y-modificacion-de-vistas","title":"Herencia y Modificaci\u00f3n de Vistas","text":"<p>Para visualizar correctamente los desarrolladores, debemos heredar y modificar las vistas existentes del modelo <code>res.partner</code>. Esto nos permite a\u00f1adir nuestros campos personalizados sin crear vistas desde cero.</p>"},{"location":"6_7_herencias_modelos_vistas/#heredar-el-formulario-de-contactos","title":"Heredar el Formulario de Contactos","text":"<p>Vamos a heredar el formulario de <code>res.partner</code> y a\u00f1adir una nueva pesta\u00f1a para mostrar el campo de tecnolog\u00edas. Usaremos <code>mode=\"primary\"</code> para crear una vista alternativa sin sobrescribir la original.</p> <p>En este punto es esencial comprender que por una parte estamos trabajando sobre un modelo que ya existe, por lo que debemos redefinir sus vistas y adaptarlas a nuestras necesidades y nunca tocar las vistas del modelo heredado.</p> <p>Por lo tanto, lo que debemos es separa por una parte la vista del listado y la vista del formulario para poder trabajar con ellas de forma independiente, y para ello necesitamos conocer c\u00f3mo se llaman estas vistas. Para ello, entrando en el modo desarrollador pulsamos sobre la <code>cucarachita</code> de la barra superior estando en el listado que queremos investigar y pulsamos sobre Vista: List</p> Acceso a la informaci\u00f3n de modelos y vistas <p>Ah\u00ed podemos comprobar las caracter\u00edsticas de este listado, especialmente los datos que m\u00e1s nos interesan:</p> <ol> <li>Nombre de la vista</li> <li>ID externo: Este se asociar\u00e1 a una nueva propiedad llamada <code>view_id</code> de la vista para indicar que se usa esa vista en concreto</li> </ol> Acceso a la informaci\u00f3n listado res.partner.list <p>y con estos datos, podemos a\u00f1adir en nuestro fichero <code>views.xml</code> un acceso explicito a la vista en concreto:</p> <p>views.xml</p> <p>A\u00f1adimos el siguiente c\u00f3digo para determinar que vamos a invocar el listado concreto\"</p> <pre><code>&lt;record model=\"ir.actions.act_window.view\" id=\"action_view_desarrollador_list\"&gt;\n    &lt;field name=\"sequence\" eval=\"1\"/&gt;\n    &lt;field name=\"view_mode\"&gt;list&lt;/field&gt;\n    &lt;field name=\"view_id\" ref=\"base.view_partner_tree\"/&gt;\n    &lt;field name=\"act_window_id\" ref=\"desarrolladores_action_window\"/&gt;\n&lt;/record&gt;\n</code></pre> <p>donde: </p> <ul> <li><code>sequence</code>: Orden de aplicaci\u00f3n (1 = primero)</li> <li><code>view_mode</code>: Tipo de vista (list)</li> <li><code>view_id</code>: Referencia a la vista de \u00e1rbol est\u00e1ndar de contactos</li> <li><code>act_window_id</code>: Enlace con la acci\u00f3n principal</li> </ul> <p>Ahora repetimos la misma operaci\u00f3n para el formulario. Debemos averiguar el <code>view_id</code> para indicar que cuando queremos mostrar un formulario, queremos mostrar ese en concreto. </p> Acceso a la informaci\u00f3n listado res.partner.form <p>views.xml</p> <pre><code>&lt;record model=\"ir.actions.act_window.view\" id=\"action_view_desarrollador_form\"&gt;\n  &lt;field name=\"sequence\" eval=\"2\"&gt;&lt;/field&gt;\n  &lt;field name=\"view_mode\"&gt;form&lt;/field&gt;\n  &lt;field name=\"view_id\" ref=\"base.view_partner_form\"&gt;&lt;/field&gt;\n  &lt;field name=\"act_window_id\" ref=\"gestion_tareas_sergio.desarrollador\"&gt;&lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Esto tiene sentido porque estamos indicando de forma explicita el formulario que se utiliza, en un primer paso a modo de prueba, utilizaremos el mismo que los contactos b\u00e1sicos de odoo, pero despu\u00e9s crearemos uno nuevo y le diremos que lo vamos a utilizar. Debemos tener en cuenta que hasta ahora para un modelo dado, ten\u00edamos una vista para el formulario y otra para la vista, pero ahora al heredar, para el mismo modelo tenemos varias vistas del formulario y debemos indicar el que nos interesa.</p> <p>Si probamos nuestra aplicaci\u00f3n, de momento no hay ning\u00fan cambio, pero ha llegado el momento de modificar el formulario, sin afectar al original. Para ello, como hemos hemos hecho siempre, definimos una nueva vista, que en este caso servir\u00e1 para modificar la vista del formulario de <code>res.partner</code>. </p> <p>Comenzamos reescribiendo como siempre, pero a\u00f1adiendo nuevas propiedades: </p> <ul> <li><code>inherit_it</code>: que nos indica de qu\u00e9 vista vamos a heredar</li> <li><code>mode</code>: que tendr\u00e1 el valor <code>primary</code> e indicar\u00e1 que vamos a hacer cambios que no van a afectar a la vista heredada, solo a la nueva vista que estamos definiendo.</li> </ul> <p>Adem\u00e1s tenemos que tener en cuenta que ahora el <code>action</code> que lanza el formulario es la nueva vista que estamos creando, en este caso <code>gestion_tareas_sergio_view_partner_form_inherit</code></p> <p>Recapitulemos con todo el c\u00f3digo completo para las vista de los desarrolladores.</p> <p>views.xml</p> <pre><code>&lt;!-- DESAROOLADORES - VISTAS --&gt;\n&lt;!-- FORMULARIO DESARROLLADORES --&gt;\n&lt;record id=\"gestion_tareas_sergio_view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n    &lt;field name=\"name\"&gt;res.partner.form.inherit.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n    &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n    &lt;field name=\"mode\"&gt;primary&lt;/field&gt; \n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;sheet&gt;\n            &lt;group&gt;\n            &lt;field name=\"tecnologia_ids\" widget=\"many2many_tags\"/&gt;\n            &lt;/group&gt;\n        &lt;/sheet&gt;\n    &lt;/field&gt; \n&lt;/record&gt;\n\n&lt;!-- ACTION GEN\u00c9RICA PARA FORM Y LIST --&gt;\n&lt;record model=\"ir.actions.act_window\" id=\"desarrolladores_action_window\"&gt;\n    &lt;field name=\"name\"&gt;Desarrolladores&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;res.partner&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n&lt;/record&gt;\n\n&lt;!-- ACTION ESPECIFICA PARA EL LISTADO --&gt;\n&lt;record model=\"ir.actions.act_window.view\" id=\"action_view_desarrollador_list\"&gt;\n    &lt;field name=\"sequence\" eval=\"1\"/&gt;\n    &lt;field name=\"view_mode\"&gt;list&lt;/field&gt;\n    &lt;field name=\"view_id\" ref=\"base.view_partner_tree\"/&gt;\n    &lt;field name=\"act_window_id\" ref=\"desarrolladores_action_window\"/&gt;\n&lt;/record&gt;\n\n&lt;!-- ACTION ESPECIFICA PARA EL FORMULARIO --&gt;\n&lt;record model=\"ir.actions.act_window.view\" id=\"action_view_desarrollador_form\"&gt;\n    &lt;field name=\"sequence\" eval=\"2\"/&gt;\n    &lt;field name=\"view_mode\"&gt;form&lt;/field&gt;\n    &lt;field name=\"view_id\" ref=\"gestion_tareas_sergio_view_partner_form_inherit\"/&gt;\n    &lt;field name=\"act_window_id\" ref=\"desarrolladores_action_window\"/&gt;\n&lt;/record&gt;\n</code></pre> <p>Elementos clave del c\u00f3digo:</p> <ul> <li><code>inherit_id</code>: Referencia la vista base que vamos a extender (<code>base.view_partner_form</code>)</li> <li><code>mode=\"primary\"</code>: Indica que es una vista alternativa, no una modificaci\u00f3n de la original</li> <li><code>xpath</code>: Expresi\u00f3n XPath que localiza d\u00f3nde insertar nuestro contenido</li> </ul> <p>Regenerar la base de datos si hay inconsistencias</p> <p>En ocasiones, al hacer tanto cambio podemos generar inconsistencias en la base de datos. </p> <p>Para ello lo mejor es renombrar las vistas o modelos que est\u00e1n generando esas inconsistencias y ejecutar el comando:</p> <pre><code>docker exec -u 0 -it odoo_dev_dam odoo -u gestion_tareas_sergio -d odoo --stop-after-init\n</code></pre> <p>Con esto, hemos puesto el campo al final del formulario, ahora el objetivo es ponerlo en el lugar espec\u00edfico que queramos.</p> <p>La localizaci\u00f3n de elementos dentro de la vista se realiza mediante expresiones XPath, que permiten ubicar el punto exacto donde insertar nuevos campos. Por ejemplo, para a\u00f1adir una nueva pesta\u00f1a despu\u00e9s de la \u00faltima existente, localizamos la p\u00e1gina con nombre <code>internal_notes</code> y a\u00f1adimos una nueva p\u00e1gina a continuaci\u00f3n.</p> <p>Antes de escribir el c\u00f3digo, necesitamos saber el nombre exacto de la vista a heredar. En modo desarrollador, accede al formulario est\u00e1ndar de contactos y consulta la informaci\u00f3n de la vista:</p> Acceso a la informaci\u00f3n de modelos y vistas <p>En la informaci\u00f3n de la vista encontrar\u00e1s el ID externo, que es el identificador que necesitamos para heredar:</p> ID externo de la vista a heredar: base.view_partner_form <p>Ahora ya podemos escribir de nuevo nuestra vista heredada, pero a\u00f1adiendo el campo en un lugar concreto:</p> <p>view.xml</p> <pre><code>&lt;record id=\"gestion_tareas_sergio_view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n    &lt;field name=\"name\"&gt;res.partner.form.inherit.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n    &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n    &lt;field name=\"mode\"&gt;primary&lt;/field&gt; \n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;xpath expr=\"//sheet/notebook/page[@name='internal_notes']\" position=\"after\"&gt;\n            &lt;page name=\"devs\" string=\"Datos Desarrollador\"&gt;\n                &lt;group&gt;\n                    &lt;group&gt;\n                        &lt;field name=\"tecnologia_ids\" widget=\"many2many_tags\"/&gt;\n                    &lt;/group&gt;\n                &lt;/group&gt;\n            &lt;/page&gt;\n        &lt;/xpath&gt;\n    &lt;/field&gt; \n&lt;/record&gt;\n</code></pre> <p>Elementos clave del c\u00f3digo:</p> <ul> <li><code>inherit_id</code>: Referencia la vista base que vamos a extender (<code>base.view_partner_form</code>)</li> <li><code>mode=\"primary\"</code>: Indica que es una vista alternativa, no una modificaci\u00f3n de la original</li> <li><code>xpath</code>: Expresi\u00f3n XPath que localiza d\u00f3nde insertar nuestro contenido</li> <li><code>position=\"after\"</code>: A\u00f1ade nuestra pesta\u00f1a despu\u00e9s del elemento localizado</li> </ul> <p>La expresi\u00f3n XPath <code>//sheet/notebook/page[@name='internal_notes']</code> busca la pesta\u00f1a de notas internas y nuestra nueva pesta\u00f1a se a\u00f1adir\u00e1 justo despu\u00e9s de ella.</p> Nueva pesta\u00f1a \"Desarrolladores\" a\u00f1adida al formulario de contactos"},{"location":"6_7_herencias_modelos_vistas/#filtrado-de-registros-solo-desarrolladores","title":"Filtrado de Registros: Solo Desarrolladores","text":"<p>Actualmente, al acceder al men\u00fa de desarrolladores vemos todos los contactos del sistema. Necesitamos una forma de identificar y filtrar \u00fanicamente los contactos que son desarrolladores.</p>"},{"location":"6_7_herencias_modelos_vistas/#campo-identificador-de-desarrolladores","title":"Campo Identificador de Desarrolladores","text":"<p>Para distinguir los desarrolladores del resto de contactos, a\u00f1adimos un campo booleano <code>es_desarrollador</code> al modelo heredado:</p> <p>models.py - desarrollador</p> <pre><code># DESARROLLADORES\nclass desarrollador(models.Model):\n    _name = 'res.partner'\n    _inherit = 'res.partner'\n\n    es_desarrollador = fields.Boolean(\n        string=\"Es Desarrollador\")\n\n    tecnologias = fields.Many2many(\n        'gestion_tareas_sergio.tecnologias_sergio',\n        relation='relacion_desarrollador_technologies',\n        column1='rel_desarrollador',\n        column2='rel_tecnologias',\n        string='Tecnolog\u00edas'\n    )\n</code></pre> <p>Ahora modificamos la vista para mostrar este campo en la pesta\u00f1a de desarrolladores:</p> <p>views.xml</p> <pre><code>&lt;record id=\"gestion_tareas_sergio_view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n    &lt;field name=\"name\"&gt;res.partner.form.inherit.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n    &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n    &lt;field name=\"mode\"&gt;primary&lt;/field&gt; \n    &lt;field name=\"arch\" type=\"xml\"&gt;\n      &lt;xpath expr=\"//sheet/notebook/page[@name='internal_notes']\" position=\"after\"&gt;\n          &lt;page name=\"devs\" string=\"Datos Desarrollador\"&gt;\n              &lt;group&gt;\n                  &lt;group&gt;\n                      &lt;field name=\"es_desarrollador\"/&gt;\n                      &lt;field name=\"tecnologia_ids\" widget=\"many2many_tags\"/&gt;\n                  &lt;/group&gt;\n              &lt;/group&gt;\n          &lt;/page&gt;\n      &lt;/xpath&gt;\n    &lt;/field&gt; \n&lt;/record&gt;\n</code></pre>"},{"location":"6_7_herencias_modelos_vistas/#filtrado-en-la-accion","title":"Filtrado en la Acci\u00f3n","text":"<p>Para mostrar \u00fanicamente los desarrolladores en nuestro men\u00fa, utilizamos dos atributos en la acci\u00f3n:</p> <p>Domain: Filtra los registros mostrados</p> <p>Context: Establece valores por defecto al crear nuevos registros</p> <p>views.xml</p> <pre><code>    &lt;record model=\"ir.actions.act_window\" id=\"desarrolladores_action_window\"&gt;\n        &lt;field name=\"name\"&gt;Desarrolladores&lt;/field&gt;\n        &lt;field name=\"res_model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n        &lt;field name=\"domain\"&gt;[('es_desarrollador', '=', True)]&lt;/field&gt;\n        &lt;field name=\"context\"&gt;{'default_es_desarrollador': True}&lt;/field&gt;        \n    &lt;/record&gt;\n</code></pre> <p>Detalles importantes de la sintaxis:</p> <ul> <li><code>domain</code>: Utiliza sintaxis de dominio de Odoo (lista de tuplas). El filtro <code>[('es_desarrollador', '=', True)]</code> se eval\u00faa en Python para mostrar solo registros donde este campo sea verdadero</li> <li><code>context</code>: Es un diccionario que se pasa al cliente web. El prefijo <code>default_</code> seguido del nombre del campo establece su valor por defecto al crear nuevos registros</li> </ul> <p>Con estos cambios:</p> <ul> <li>El listado mostrar\u00e1 \u00fanicamente desarrolladores</li> <li>Al crear un nuevo desarrollador, el campo <code>es_desarrollador</code> estar\u00e1 activado autom\u00e1ticamente</li> </ul>"},{"location":"6_7_herencias_modelos_vistas/#visibilidad-condicional-de-la-pestana","title":"Visibilidad Condicional de la Pesta\u00f1a","text":"<p>Para que la pesta\u00f1a de desarrollador solo sea visible cuando un contacto tiene marcado el campo <code>es_desarrollador</code>, utilizamos el atributo <code>invisible</code>:</p> <p>views.xml</p> <pre><code>    &lt;record id=\"gestion_tareas_sergio_view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;res.partner.form.inherit.tareas_sergio&lt;/field&gt;\n        &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n        &lt;field name=\"mode\"&gt;primary&lt;/field&gt; \n        &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;xpath expr=\"//sheet/notebook/page[@name='internal_notes']\" position=\"after\"&gt;\n            &lt;page name=\"devs\" \n                    string=\"Datos Desarrollador\"\n                    invisible=\"not es_desarrollador\"&gt;\n                &lt;group&gt;\n                    &lt;group&gt;\n                        &lt;field name=\"es_desarrollador\"/&gt;\n                        &lt;field name=\"tecnologia_ids\" widget=\"many2many_tags\"/&gt;\n                    &lt;/group&gt;\n                &lt;/group&gt;\n            &lt;/page&gt;\n        &lt;/xpath&gt;\n        &lt;/field&gt; \n    &lt;/record&gt;\n</code></pre> <p>El atributo <code>invisible</code> es una propiedad de las vistas que permite ocultar o mostrar elementos de la interfaz (campos, botones, pesta\u00f1as o grupos) de forma din\u00e1mica, bas\u00e1ndose en los valores de otros campos del modelo. En este caso tambi\u00e9n podr\u00eda ser <code>invisible=\"es_desarrollador == False\"</code></p> <p>Este \u00faltimo paso garantiza que la pesta\u00f1a solo se muestre para contactos que sean desarrolladores, mejorando la experiencia de usuario y evitando confusiones.</p>"},{"location":"6_7_herencias_modelos_vistas/#relacion-entre-tareas-y-desarrolladores","title":"Relaci\u00f3n Entre Tareas y Desarrolladores","text":"<p>Ahora que tenemos desarrolladores en nuestro sistema, estableceremos la relaci\u00f3n l\u00f3gica entre tareas y desarrolladores. Cada tarea ser\u00e1 realizada por un desarrollador, y cada desarrollador podr\u00e1 tener m\u00faltiples tareas asignadas.</p>"},{"location":"6_7_herencias_modelos_vistas/#anadir-relacion-many2one-en-tareas","title":"A\u00f1adir Relaci\u00f3n Many2one en Tareas","text":"<p>A\u00f1adimos un campo de relaci\u00f3n Many2one en el modelo de tareas para asociar cada tarea a un desarrollador:</p> <p>models.py - tareas</p> <pre><code>class tareas_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.tareas_sergio'\n    # ... campos existentes ...\n\n    desarrollador_ids = fields.Many2one(\n        'res.partner', \n        string='Desarrollador')\n</code></pre> <p>Dado que los desarrolladores son contactos (<code>res.partner</code>), la relaci\u00f3n se establece directamente con este modelo.</p>"},{"location":"6_7_herencias_modelos_vistas/#actualizar-vista-de-tareas","title":"Actualizar Vista de Tareas","text":"<p>A\u00f1adimos el nuevo campo en la vista de formulario de tareas:</p> <p>views.xml</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"tareas_form\"&gt;\n    &lt;field name=\"name\"&gt;gestion_tareas_sergio.tareas_sergio.form&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;form&gt;\n            &lt;sheet&gt;\n                &lt;group&gt;\n                    &lt;!-- campos existentes --&gt;\n                    &lt;field name=\"desarrollador_ids\"/&gt;\n                &lt;/group&gt;\n            &lt;/sheet&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Si pruebas ahora la aplicaci\u00f3n, ver\u00e1s que el campo funciona correctamente mostrando un desplegable con todos los contactos. Sin embargo, esto no es \u00f3ptimo: deber\u00edamos mostrar \u00fanicamente los contactos que son desarrolladores.</p>"},{"location":"6_7_herencias_modelos_vistas/#filtrar-solo-desarrolladores","title":"Filtrar Solo Desarrolladores","text":"<p>Para que el campo muestre \u00fanicamente desarrolladores y adem\u00e1s use nuestra vista personalizada al acceder al formulario, aplicamos <code>domain</code> y <code>context</code>:</p> <p>views.xml</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"tareas_form\"&gt;\n    &lt;field name=\"name\"&gt;gestion_tareas_sergio.tareas_sergio.form&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.tareas_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;form&gt;\n            &lt;sheet&gt;\n                &lt;group&gt;\n                    &lt;!-- campos existentes --&gt;\n                    &lt;field name=\"desarrollador_ids\" \n                            domain=\"[('es_desarrollador', '=', True)]\"\n                            context=\"{\n                                        'form_view_ref': 'gestion_tareas_sergio.gestion_tareas_sergio_view_partner_form_inherit',\n                                        'default_es_desarrollador': True\n                                    }\"/&gt;\n                &lt;/group&gt;\n            &lt;/sheet&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Mejoras aplicadas:</p> <ul> <li><code>domain</code>: Filtra el desplegable para mostrar solo contactos con <code>es_desarrollador = True</code></li> <li><code>context</code>: Especifica que al abrir el formulario desde este campo, se use la vista <code>desarrolladores_form</code><ul> <li>Observar que en <code>form_view_ref</code> se ha indicado la vista anteponiendo el nombre del proyecto <code>gestion_tareas_sergio</code> al nombre de la vista para indicar qu\u00e9 es esta en concreto, si no, usar\u00e1 la vista por defecto.</li> <li>Para asignar un valor por defecto se antepone <code>default_</code> al nombre del campo que se desea asignar por defecto, por eso tenemos <code>default_es_desarrollador</code>, porque el campos es <code>es_desarrollador</code>.</li> </ul> </li> </ul>"},{"location":"6_7_herencias_modelos_vistas/#ocultar-campo-es_desarrollador","title":"Ocultar Campo es_desarrollador","text":"<p>Una mejora adicional es hacer que el campo <code>es_desarrollador</code> no sea modificable desde el formulario. Si un usuario desmarca este campo, la pesta\u00f1a desaparecer\u00e1 autom\u00e1ticamente al dejar de ser desarrollador, lo cual puede resultar confuso.</p> <p>Podemos hacer el campo invisible:</p> <p>views.xml</p> <pre><code>    &lt;record id=\"gestion_tareas_sergio_view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;res.partner.form.inherit.tareas_sergio&lt;/field&gt;\n        &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n        &lt;field name=\"mode\"&gt;primary&lt;/field&gt; \n        &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;xpath expr=\"//sheet/notebook/page[@name='internal_notes']\" position=\"after\"&gt;\n            &lt;page name=\"devs\" \n                    string=\"Datos Desarrollador\"\n                    invisible=\"not es_desarrollador\"&gt;\n                &lt;group&gt;\n                    &lt;group&gt;\n                        &lt;!-- Opci\u00f3n 1: Solo lectura --&gt;\n                        &lt;!-- &lt;field name=\"es_desarrollador\" readonly=\"1\"/&gt; --&gt;\n\n                        &lt;!-- Opci\u00f3n 2: Invisible (recomendado) --&gt;\n                        &lt;field name=\"es_desarrollador\" invisible=\"1\"/&gt;\n                        &lt;field name=\"tecnologia_ids\" widget=\"many2many_tags\"/&gt;\n                    &lt;/group&gt;\n                &lt;/group&gt;\n            &lt;/page&gt;\n        &lt;/xpath&gt;\n        &lt;/field&gt; \n    &lt;/record&gt;\n</code></pre> <p>La opci\u00f3n <code>invisible=\"1\"</code> evita que el usuario pueda modificar el campo accidentalmente, manteniendo la coherencia del formulario. Tambi\u00e9n se puede poner <code>invisible=\"true\"</code></p>"},{"location":"6_7_herencias_modelos_vistas/#ocultar-campo-de-formulario-inicial","title":"Ocultar campo de formulario inicial","text":"<p>En muchas ocasiones, los contactos de tipo \"Empleado\" o \"Desarrollador\" no necesitan ver pesta\u00f1as contables o comerciales. Vamos a ocultar el campo Sitio Web y la pesta\u00f1a completa de Venta y Compra para dejar una ficha mucho m\u00e1s limpia.</p>"},{"location":"6_7_herencias_modelos_vistas/#codigo-xml-para-la-vista-heredada","title":"C\u00f3digo XML para la vista heredada:","text":"<p>views.xml</p> <pre><code>&lt;record id=\"gestion_tareas_sergio_view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;res.partner.form.inherit.tareas_sergio&lt;/field&gt;\n        &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n        &lt;field name=\"mode\"&gt;primary&lt;/field&gt; \n        &lt;field name=\"arch\" type=\"xml\"&gt;\n\n        &lt;xpath expr=\"//field[@name='website']\" position=\"attributes\"&gt;\n            &lt;attribute name=\"invisible\"&gt;1&lt;/attribute&gt;\n        &lt;/xpath&gt;\n\n        &lt;xpath expr=\"//page[@name='sales_purchases']\" position=\"attributes\"&gt;\n            &lt;attribute name=\"invisible\"&gt;1&lt;/attribute&gt;\n        &lt;/xpath&gt;\n\n        &lt;xpath expr=\"//sheet/notebook/page[@name='internal_notes']\" position=\"after\"&gt;\n            &lt;page name=\"devs\" \n                    string=\"Datos Desarrollador\"\n                    invisible=\"not es_desarrollador\"&gt;\n                &lt;group&gt;\n                    &lt;group&gt;\n                        &lt;field name=\"es_desarrollador\" invisible=\"1\"/&gt;\n                        &lt;field name=\"tecnologia_ids\" widget=\"many2many_tags\"/&gt;\n                    &lt;/group&gt;\n                &lt;/group&gt;\n            &lt;/page&gt;\n        &lt;/xpath&gt;\n        &lt;/field&gt; \n    &lt;/record&gt;\n</code></pre>"},{"location":"6_7_herencias_modelos_vistas/#asignacion-automatica-de-categoria","title":"Asignaci\u00f3n Autom\u00e1tica de Categor\u00eda","text":"<p>Como funcionalidad adicional, vamos a asignar autom\u00e1ticamente la etiqueta \"Desarrollador\" cuando marquemos un contacto como desarrollador. Las etiquetas (tags) son categor\u00edas predefinidas en Odoo que permiten clasificar contactos.</p> <p>Esto se implementa mediante un m\u00e9todo decorado con <code>@api.onchange</code>, que se ejecuta autom\u00e1ticamente cuando el usuario modifica el campo <code>es_desarrollador</code>:</p> <p>models.py</p> <pre><code># DESARROLLADOR, Hereda de res.partner\nclass desarrollador_sergio(models.Model):\n    _name = 'res.partner'\n    _inherit = 'res.partner'                                    # Hereda toda la estructura de contactos\n\n    es_desarrollador = fields.Boolean(\n        string=\"Es Desarrollador\")\n\n    tecnologia_ids = fields.Many2many(\n        comodel_name='gestion_tareas_sergio.tecnologias_sergio',# Modelo destino\n        relation='rel_dev_tec',                                 # Tabla intermedia\n        column1='desarrollador_id',                             # Columna para esta clase\n        column2='tecnologia_id',                                # Columna para tecnolog\u00edas\n        string=\"Tecnolog\u00edas\"\n    )\n\n\n    @api.onchange('es_desarrollador')\n    def _onchange_es_desarrollador(self):\n        # Buscar la categor\u00eda \"Desarrollador\"\n        categorias = self.env['res.partner.category'].search([('name', '=', 'Desarrollador')])\n\n        if len(categorias) &gt; 0:\n            # Si existe, usar la primera encontrada\n            category = categorias[0]\n        else:\n            # Si no existe, crearla\n            category = self.env['res.partner.category'].create({'name': 'Desarrollador'})\n\n        # Asignar la categor\u00eda al contacto\n        self.category_id = [(4, category.id)]\n</code></pre> <p>Explicaci\u00f3n del c\u00f3digo:</p> <ul> <li><code>@api.onchange('es_desarrollador')</code>: Ejecuta el m\u00e9todo cada vez que cambia el campo</li> <li><code>self.env['res.partner.category']</code>: Accede al modelo de categor\u00edas de contactos</li> <li><code>search([('name', '=', 'Desarrollador')])</code>: Busca una categor\u00eda con ese nombre</li> <li><code>create({'name': 'Desarrollador'})</code>: Crea la categor\u00eda si no existe</li> <li><code>[(4, category.id)]</code>: Sintaxis de Odoo para a\u00f1adir un registro a una relaci\u00f3n Many2many sin eliminar los existentes</li> </ul> <p>Con esta implementaci\u00f3n, al marcar un contacto como desarrollador, autom\u00e1ticamente se le asigna la etiqueta correspondiente, facilitando su identificaci\u00f3n y clasificaci\u00f3n en el sistema.</p>"},{"location":"6_7_herencias_modelos_vistas/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora aplicar\u00e1s la herencia de modelos y vistas en tu proyecto del restaurante.</p>"},{"location":"6_7_herencias_modelos_vistas/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>Vas a extender el modelo <code>res.partner</code> de Odoo para gestionar Camareros en tu restaurante. Los camareros son contactos del sistema con informaci\u00f3n espec\u00edfica adicional: turno de trabajo, secci\u00f3n asignada y men\u00fas que pueden recomendar.</p>"},{"location":"6_7_herencias_modelos_vistas/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Crear modelo Camarero heredando de res.partner</p> <p>Crea una clase que herede de <code>res.partner</code> con campos espec\u00edficos para camareros.</p> <p>Campos a a\u00f1adir:</p> <ul> <li><code>es_camarero</code>: Boolean para identificar camareros</li> <li><code>turno</code>: Selection con opciones ('ma\u00f1ana', 'tarde', 'noche')</li> <li><code>seccion</code>: Char para la zona asignada (terraza, sala, bar, etc.)</li> <li><code>menus_especialidad</code>: Many2many con tus men\u00fas</li> </ul> </li> <li> <p>Crear vista heredada del formulario de contactos</p> <p>Hereda <code>base.view_partner_form</code> y a\u00f1ade una pesta\u00f1a \"Camarero\" con los campos espec\u00edficos.</p> <p>Pistas:</p> <ul> <li>Averigua el ID de la vista base desde modo desarrollador</li> <li>Usa XPath para localizar donde insertar la pesta\u00f1a</li> <li>Usa <code>mode=\"primary\"</code> para vista alternativa</li> </ul> </li> <li> <p>Configurar acciones y men\u00fas</p> <p>Crea acci\u00f3n y men\u00fa para acceder a camareros, configurando vistas espec\u00edficas de lista y formulario.</p> <p>Pistas:</p> <ul> <li>Acci\u00f3n principal con <code>res.partner</code></li> <li>Dos acciones de vista: una para list, otra para form</li> <li>Men\u00fa que use la acci\u00f3n principal</li> </ul> </li> <li> <p>Filtrar solo camareros</p> <p>A\u00f1ade <code>domain</code> y <code>context</code> a la acci\u00f3n para mostrar y crear solo camareros.</p> <p>Sintaxis del filtro: <code>[('es_camarero', '=', True)]</code></p> </li> <li> <p>Hacer pesta\u00f1a visible solo para camareros</p> <p>Usa <code>invisible</code> en la pesta\u00f1a para ocultarla cuando no sea camarero.</p> </li> <li> <p>Ocultar campo es_camarero en formulario</p> <p>Haz el campo invisible para evitar que se modifique accidentalmente.</p> </li> <li> <p>Ocultar campos innecesarios</p> <p>Oculta la pesta\u00f1a de \"Contactos\" y el campo NIF de la ficha del camarero .</p> </li> <li> <p>Poner campo \"secci\u00f3n\" en la pantalla principal</p> <p>Pon el campo <code>Secci\u00f3n</code> debajo de Puesto de trabajo, donde antes estaba NIF.</p> </li> <li> <p>Asignaci\u00f3n autom\u00e1tica de categor\u00eda</p> <p>Implementa <code>@api.onchange</code> para asignar etiqueta \"Camarero\" autom\u00e1ticamente.</p> </li> </ol>"},{"location":"6_7_herencias_modelos_vistas/#verificaciones","title":"Verificaciones","text":"<p>Comprueba que:</p> <ul> <li>Aparece men\u00fa \"Camareros\" en tu aplicaci\u00f3n</li> <li>Solo se muestran contactos marcados como camareros</li> <li>Al crear camarero, el campo <code>es_camarero</code> est\u00e1 marcado por defecto</li> <li>La pesta\u00f1a \"Camarero\" aparece solo en camareros</li> <li>El campo <code>seccion</code> aparece en la pantalla principal de usuarios.</li> <li>Puedes asignar turno, secci\u00f3n y men\u00fas de especialidad</li> </ul> <p>Datos de Prueba</p> <p>Camarero 1: Juan L\u00f3pez - Turno: Ma\u00f1ana, Secci\u00f3n: Terraza</p> <p>Camarero 2: Mar\u00eda Garc\u00eda - Turno: Tarde, Secci\u00f3n: Sala Principal</p> <p>Camarero 3: Pedro Mart\u00ednez - Turno: Noche, Secci\u00f3n: Bar</p> <p>Contacto Normal: Cliente Prueba - NO camarero (verificar que no aparece la pesta\u00f1a)</p>"},{"location":"6_8_mejorando_vistas/","title":"Mejorando vistas","text":""},{"location":"6_8_mejorando_vistas/#mejorando-vistas","title":"Mejorando Vistas","text":"<p>Hasta ahora hemos trabajado principalmente con vistas de formulario, dejando que Odoo genere autom\u00e1ticamente las vistas de lista (tree) por defecto. En este apartado aprenderemos a personalizar estas vistas para mejorar la experiencia de usuario, a\u00f1adiendo caracter\u00edsticas como colores condicionales, campos calculados visibles, sumatorios y otras funcionalidades que har\u00e1n nuestras listas m\u00e1s informativas y \u00fatiles.</p>"},{"location":"6_8_mejorando_vistas/#vistas-lista-en-odoo","title":"Vistas Lista en Odoo","text":"<p>La vista lista (anteriormente llamada tree) es la vista m\u00e1s com\u00fan en Odoo, mostrando m\u00faltiples registros en formato tabular. Por defecto, cuando no definimos una vista lista personalizada, Odoo genera una autom\u00e1ticamente mostrando el campo <code>name</code> y algunos campos b\u00e1sicos del modelo.</p> <p>En nuestro m\u00f3dulo de gesti\u00f3n de tareas, hemos creado varios modelos pero apenas hemos personalizado sus vistas lista. Por ejemplo, si revisamos el c\u00f3digo hasta ahora, encontraremos que la mayor\u00eda de vistas que hemos definido son de tipo formulario, y las listas son las que Odoo genera por defecto.</p> <p>Estas vistas predeterminadas funcionan, pero son muy b\u00e1sicas y no aprovechan todas las posibilidades que Odoo ofrece para hacer las listas m\u00e1s informativas y funcionales.</p>"},{"location":"6_8_mejorando_vistas/#situacion-actual-de-nuestras-vistas","title":"Situaci\u00f3n Actual de Nuestras Vistas","text":"<p>Actualmente, nuestro m\u00f3dulo muestra varias vistas lista generadas autom\u00e1ticamente. Por ejemplo:</p> <ul> <li>Sprints: Muestra solo el nombre por defecto</li> <li>Tareas: Tiene una vista lista b\u00e1sica que definimos al principio</li> <li>Tecnolog\u00edas: Vista autom\u00e1tica con nombre y descripci\u00f3n</li> </ul> <p>Si queremos mejorar la experiencia de usuario y hacer que estas listas sean m\u00e1s \u00fatiles, necesitamos personalizarlas. Vamos a empezar con el modelo Sprint, que es perfecto para demostrar las diferentes t\u00e9cnicas de personalizaci\u00f3n.</p>"},{"location":"6_8_mejorando_vistas/#crear-una-vista-lista-personalizada","title":"Crear una Vista Lista Personalizada","text":"<p>Para personalizar una vista lista, debemos definir un registro en el modelo <code>ir.ui.view</code> igual que hacemos con las vistas de formulario. La estructura b\u00e1sica es muy similar, cambiando el tipo de vista de <code>form</code> a <code>list</code>.</p> <p>Vamos a crear una vista lista completa para el modelo Sprint. En tu archivo <code>views.xml</code>:</p> <p>views.xml</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"sprints_list\"&gt;\n    &lt;field name=\"name\"&gt;gestion_tareas_sergio.sprints_sergio.list&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.sprints_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;list&gt;\n            &lt;field name=\"name\"/&gt;\n            &lt;field name=\"descripcion\"/&gt;\n            &lt;field name=\"duracion\"/&gt;\n            &lt;field name=\"fecha_ini\"/&gt;\n            &lt;field name=\"fecha_fin\"/&gt;\n        &lt;/list&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Elementos de la definici\u00f3n:</p> <ul> <li><code>id</code>: Identificador \u00fanico de la vista, en este caso <code>sprints_list</code></li> <li><code>name</code>: Nombre descriptivo de la vista</li> <li><code>model</code>: El modelo al que aplica esta vista</li> <li><code>arch</code>: La arquitectura XML que define la estructura de la vista</li> <li><code>&lt;list&gt;</code>: Etiqueta principal que indica que es una vista de tipo lista</li> <li><code>&lt;field&gt;</code>: Cada campo que queremos mostrar como columna</li> </ul> <p>Una vez definida y actualizado el m\u00f3dulo, veremos que la lista de sprints muestra todas las columnas especificadas. Si tienes sprints creados con fechas y duraciones, ver\u00e1s c\u00f3mo los campos computados como <code>fecha_fin</code> se muestran correctamente calculados.</p>"},{"location":"6_8_mejorando_vistas/#decoraciones-condicionales","title":"Decoraciones Condicionales","text":"<p>Una de las caracter\u00edsticas m\u00e1s \u00fatiles de las vistas lista es la posibilidad de aplicar colores y estilos condicionales a las filas seg\u00fan los valores de sus campos. Esto se hace mediante el atributo <code>decoration</code> en la etiqueta <code>&lt;list&gt;</code>.</p>"},{"location":"6_8_mejorando_vistas/#tipos-de-decoraciones-disponibles","title":"Tipos de Decoraciones Disponibles","text":"<p>Odoo proporciona varios tipos de decoraciones predefinidas:</p> Decoraci\u00f3n Color/Estilo Uso t\u00edpico <code>decoration-bf</code> Negrita Resaltar registros importantes <code>decoration-it</code> Cursiva Registros secundarios o notas <code>decoration-danger</code> Rojo Errores, alertas cr\u00edticas <code>decoration-warning</code> Naranja/Amarillo Advertencias, atenci\u00f3n requerida <code>decoration-success</code> Verde \u00c9xito, completado <code>decoration-info</code> Azul Informaci\u00f3n, en proceso <code>decoration-muted</code> Gris Inactivo, archivado <code>decoration-primary</code> Azul oscuro Principal, destacado"},{"location":"6_8_mejorando_vistas/#aplicar-decoracion-simple","title":"Aplicar Decoraci\u00f3n Simple","text":"<p>Por ejemplo, para resaltar en amarillo los sprints con exactamente 15 d\u00edas de duraci\u00f3n:</p> <p>views.xml - Decorador simple por campo duraci\u00f3n</p> <pre><code>&lt;list decoration-warning=\"duracion == 15\"&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"descripcion\"/&gt;\n    &lt;field name=\"duracion\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n    &lt;field name=\"fecha_fin\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>La condici\u00f3n <code>duracion == 15</code> se eval\u00faa para cada registro. Si es verdadera, se aplica el estilo de advertencia (color amarillo/naranja).</p>"},{"location":"6_8_mejorando_vistas/#multiples-decoraciones","title":"M\u00faltiples Decoraciones","text":"<p>Podemos aplicar varias decoraciones a la vez. Por ejemplo, resaltar en rojo sprints muy cortos y en verde los de duraci\u00f3n est\u00e1ndar:</p> <p>views.xml - Decoraci\u00f3n multiple dependiendo de valor de campos duraci\u00f3n</p> <pre><code>&lt;list decoration-danger=\"duracion &amp;lt; 7\" \n    decoration-success=\"duracion == 14\"&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"descripcion\"/&gt;\n    &lt;field name=\"duracion\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n    &lt;field name=\"fecha_fin\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Nota importante sobre el orden</p> <p>Si un registro cumple m\u00faltiples condiciones, se aplicar\u00e1 la \u00faltima decoraci\u00f3n que coincida. En el ejemplo anterior, un sprint de 14 d\u00edas se mostrar\u00e1 en verde aunque tambi\u00e9n cumpla otras condiciones.</p> <p>Pero adem\u00e1s por encima de esta regla tenemos que hay un orden de prioridad interno que tiene Odoo para las decoraciones CSS.</p> <p>El motor de Odoo aplica las clases CSS en un orden espec\u00edfico. La prioridad (de mayor a mayor importancia) es la siguiente:</p> <ul> <li>danger (Rojo) - M\u00e1xima prioridad.</li> <li>warning (Naranja)</li> <li>success (Verde)</li> <li>info (Azul)</li> <li>muted (Gris) - Menor prioridad.</li> </ul> <p>Si queremos que una decoraci\u00f3n se cumpla siempre entonces la condici\u00f3n ser\u00e1 <code>=\"1\"</code> (igual a 1 con comillas)</p>"},{"location":"6_8_mejorando_vistas/#uso-de-operadores-en-condiciones","title":"Uso de Operadores en Condiciones","text":"<p>Al escribir condiciones dentro de atributos XML, debemos tener cuidado con ciertos caracteres especiales que tienen significado en XML.</p>"},{"location":"6_8_mejorando_vistas/#operadores-de-comparacion","title":"Operadores de Comparaci\u00f3n","text":"Operador Python En XML Significado <code>&lt;</code> <code>&amp;lt;</code> Menor que <code>&lt;=</code> <code>&amp;lt;=</code> Menor o igual <code>&gt;</code> <code>&amp;gt;</code> Mayor que <code>&gt;=</code> <code>&amp;gt;=</code> Mayor o igual <code>==</code> <code>==</code> Igual <code>!=</code> <code>!=</code> Diferente"},{"location":"6_8_mejorando_vistas/#ejemplo-con-operadores","title":"Ejemplo con Operadores","text":"<p>Para resaltar sprints con duraci\u00f3n menor a 15 d\u00edas:</p> <p>views.xml</p> <pre><code>&lt;list decoration-warning=\"duracion &amp;lt; 15\"&gt;\n    &lt;!-- campos --&gt;\n&lt;/list&gt;\n</code></pre>"},{"location":"6_8_mejorando_vistas/#operadores-logicos","title":"Operadores L\u00f3gicos","text":"<p>Tambi\u00e9n podemos combinar condiciones con operadores l\u00f3gicos:</p> <p>views.xml</p> <pre><code>&lt;!-- Sprints cortos que ya han comenzado --&gt;\n&lt;list decoration-warning=\"duracion &amp;lt; 10 and fecha_ini &amp;lt;= current_date\"&gt;\n    &lt;!-- campos --&gt;\n&lt;/list&gt;\n</code></pre> <p>Operadores l\u00f3gicos disponibles:</p> <ul> <li><code>and</code>: Ambas condiciones deben cumplirse</li> <li><code>or</code>: Al menos una condici\u00f3n debe cumplirse</li> <li><code>not</code>: Niega la condici\u00f3n</li> </ul>"},{"location":"6_8_mejorando_vistas/#campo-computado-para-estado-activo","title":"Campo Computado para Estado Activo","text":"<p>Para hacer decoraciones m\u00e1s \u00fatiles, podemos crear un campo computado que determine si un sprint est\u00e1 actualmente en curso. Esto nos permite resaltar visualmente los sprints activos.</p>"},{"location":"6_8_mejorando_vistas/#definir-el-campo-en-el-modelo","title":"Definir el Campo en el Modelo","text":"<p>En <code>models.py</code>, a\u00f1adimos un campo booleano computado:</p> <p>models.py - A\u00f1adiendo campo <code>activo</code></p> <pre><code>from datetime import date\n\nclass sprints_sergio(models.Model):\n    _name = 'gestion_tareas_sergio.sprints_sergio'\n    # ... campos existentes ...\n\n    activo = fields.Boolean(\n        compute='_compute_activo',\n        string='En Curso',\n        help='Indica si el sprint est\u00e1 actualmente en curso'\n    )\n\n    @api.depends('fecha_ini', 'fecha_fin')\n    def _compute_activo(self):\n        hoy = date.today()\n        for sprint in self:\n            if sprint.fecha_ini and sprint.fecha_fin:\n                # Sprint activo si hoy est\u00e1 entre fecha inicio y fin\n                fecha_ini_date = sprint.fecha_ini.date() if hasattr(sprint.fecha_ini, 'date') else sprint.fecha_ini\n                fecha_fin_date = sprint.fecha_fin.date() if hasattr(sprint.fecha_fin, 'date') else sprint.fecha_fin\n                sprint.activo = fecha_ini_date &lt;= hoy &lt;= fecha_fin_date\n            else:\n                sprint.activo = False\n</code></pre> <p>Explicaci\u00f3n del c\u00f3digo:</p> <ul> <li><code>activo</code>: Campo booleano que se calcula autom\u00e1ticamente</li> <li><code>@api.depends('fecha_ini', 'fecha_fin')</code>: Se recalcula cuando cambian estas fechas</li> <li><code>hoy = date.today()</code>: Obtiene la fecha actual</li> <li>La condici\u00f3n <code>fecha_ini &lt;= hoy &lt;= fecha_fin</code> verifica si hoy est\u00e1 dentro del periodo del sprint</li> <li>Manejamos conversi\u00f3n de <code>Datetime</code> a <code>date</code> si es necesario</li> </ul>"},{"location":"6_8_mejorando_vistas/#usar-el-campo-en-la-vista","title":"Usar el Campo en la Vista","text":"<p>Ahora podemos usar este campo para aplicar decoraciones, incluso si no lo mostramos como columna:</p> <p>views.xml</p> <pre><code>&lt;list decoration-info=\"activo == True\"&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"duracion\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n    &lt;field name=\"fecha_fin\"/&gt;\n    &lt;field name=\"activo\" invisible=\"1\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Aspectos importantes:</p> <ul> <li><code>decoration-info=\"activo == True\"</code>: Aplica color azul a sprints activos</li> <li><code>&lt;field name=\"activo\" invisible=\"1\"/&gt;</code>: Incluimos el campo en la vista pero lo ocultamos</li> <li>Aunque invisible, el campo se carga y puede usarse en condiciones</li> </ul> <p>Con esto, los sprints en curso se resaltar\u00e1n en azul, facilitando su identificaci\u00f3n visual.</p>"},{"location":"6_8_mejorando_vistas/#combinar-multiples-decoraciones","title":"Combinar M\u00faltiples Decoraciones","text":"<p>Podemos aplicar diferentes decoraciones seg\u00fan el estado del sprint para crear una vista muy informativa:</p> <p>views.xml</p> <pre><code>&lt;list decoration-info=\"activo == True\"\n    decoration-muted=\"fecha_fin &amp;lt; current_date\"\n    decoration-success=\"duracion == 14\"&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"descripcion\"/&gt;\n    &lt;field name=\"duracion\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n    &lt;field name=\"fecha_fin\"/&gt;\n    &lt;field name=\"activo\" invisible=\"1\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Esta configuraci\u00f3n:</p> <ul> <li>Azul: Sprints en curso (activos)</li> <li>Gris: Sprints finalizados</li> <li>Verde: Sprints con duraci\u00f3n est\u00e1ndar de 14 d\u00edas</li> </ul> <p>Recuerda</p> <p>El orden de evaluaci\u00f3n es importante. Si un sprint cumple m\u00faltiples condiciones, se aplicar\u00e1 la \u00faltima que coincida.</p>"},{"location":"6_8_mejorando_vistas/#vistas-lista-editables","title":"Vistas Lista Editables","text":"<p>Odoo permite hacer las vistas lista editables, permitiendo modificar registros directamente desde la lista sin abrir el formulario. Esto se hace a\u00f1adiendo el atributo <code>editable</code> a la etiqueta <code>&lt;list&gt;</code>.</p>"},{"location":"6_8_mejorando_vistas/#sintaxis","title":"Sintaxis","text":"<pre><code>&lt;list editable=\"top\"&gt;\n    &lt;!-- campos --&gt;\n&lt;/list&gt;\n</code></pre> <p>o</p> <pre><code>&lt;list editable=\"bottom\"&gt;\n    &lt;!-- campos --&gt;\n&lt;/list&gt;\n</code></pre> <p>Diferencia entre top y bottom:</p> <ul> <li><code>editable=\"top\"</code>: Nuevos registros aparecen al principio de la lista</li> <li><code>editable=\"bottom\"</code>: Nuevos registros aparecen al final de la lista</li> </ul>"},{"location":"6_8_mejorando_vistas/#ejemplo-con-sprints","title":"Ejemplo con Sprints","text":"<p>views.xml</p> <pre><code>&lt;list editable=\"top\"&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"duracion\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n&lt;/list&gt;\n</code></pre>"},{"location":"6_8_mejorando_vistas/#consideraciones-sobre-vistas-editables","title":"Consideraciones sobre Vistas Editables","text":"<p>Ventajas:</p> <ul> <li>Edici\u00f3n r\u00e1pida sin abrir formularios</li> <li>\u00datil para listas de configuraci\u00f3n o cat\u00e1logos simples</li> <li>Mejora la productividad en tareas repetitivas</li> </ul> <p>Desventajas:</p> <ul> <li>Solo se pueden editar campos visibles en la lista</li> <li>No permite usar widgets complejos del formulario</li> <li>Pierde funcionalidad de validaciones complejas</li> <li>No recomendable para modelos con muchos campos o l\u00f3gica compleja</li> </ul> <p>Recomendaci\u00f3n: Usa vistas editables solo para modelos muy simples o listas de configuraci\u00f3n. Para modelos complejos como tareas o sprints, es mejor mantener la edici\u00f3n mediante formularios.</p>"},{"location":"6_8_mejorando_vistas/#sumatorios-en-columnas","title":"Sumatorios en Columnas","text":"<p>Otra funcionalidad muy \u00fatil es mostrar sumatorios al pie de las columnas num\u00e9ricas. Esto es especialmente pr\u00e1ctico para campos como duraciones, presupuestos, cantidades, etc.</p>"},{"location":"6_8_mejorando_vistas/#anadir-un-sumatorio","title":"A\u00f1adir un Sumatorio","text":"<p>Para mostrar el total de d\u00edas programados en todos los sprints:</p> <p>views.xml</p> <pre><code>&lt;list&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"duracion\" sum=\"Total d\u00edas\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n    &lt;field name=\"fecha_fin\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>El atributo <code>sum=\"Total d\u00edas\"</code> hace que:</p> <ul> <li>Se sume autom\u00e1ticamente el valor de todos los registros visibles</li> <li>Se muestre el total al pie de la columna con la etiqueta \"Total d\u00edas\"</li> </ul>"},{"location":"6_8_mejorando_vistas/#multiples-sumatorios","title":"M\u00faltiples Sumatorios","text":"<p>Podemos a\u00f1adir sumatorios a varias columnas:</p> <p>views.xml</p> <pre><code>&lt;list&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"duracion\" sum=\"Total d\u00edas\"/&gt;\n    &lt;field name=\"numero_tareas\" sum=\"Total tareas\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n&lt;/list&gt;\n</code></pre>"},{"location":"6_8_mejorando_vistas/#otros-atributos-de-agregacion","title":"Otros Atributos de Agregaci\u00f3n","text":"<p>Adem\u00e1s de <code>sum</code>, Odoo soporta otros tipos de agregaci\u00f3n:</p> <ul> <li><code>sum</code>: Suma de valores</li> <li><code>avg</code>: Promedio</li> <li><code>min</code>: Valor m\u00ednimo</li> <li><code>max</code>: Valor m\u00e1ximo</li> </ul> <p>views.xml - Ejemplo con promedio</p> <pre><code>&lt;field name=\"duracion\" avg=\"Promedio\"/&gt;\n</code></pre> <p>Nota</p> <p>Los sumatorios solo aplican a los registros visibles en la lista seg\u00fan los filtros activos. Si tienes 100 sprints pero solo muestras 10 filtrados, el sumatorio ser\u00e1 de esos 10.</p> <p>Para tus apuntes de clase, puedes definir un Widget en Odoo de la siguiente manera:</p>"},{"location":"6_8_mejorando_vistas/#anadienteo-widgets-a-nuestras-vistas","title":"A\u00f1adienteo Widgets a nuestras vistas","text":"<p>Un Widget es un componente de la interfaz de usuario que define c\u00f3mo se visualiza y c\u00f3mo se interact\u00faa con un campo espec\u00edfico en la pantalla.</p> <p>Por defecto, Odoo renderiza los campos seg\u00fan su tipo (un <code>Integer</code> como un n\u00famero, un <code>Char</code> como texto plano). Sin embargo, al usar un widget, transformamos esa representaci\u00f3n t\u00e9cnica en una herramienta visual funcional.</p>"},{"location":"6_8_mejorando_vistas/#widgets-en-la-vista-listado-tree-list","title":"Widgets en la Vista Listado (<code>tree</code> / <code>list</code>)","text":"<p>En las listas, los widgets suelen ser pasivos o de visualizaci\u00f3n r\u00e1pida. Su objetivo es facilitar la lectura de datos sin tener que entrar en el registro.</p> <ul> <li>Funci\u00f3n: Cambian la est\u00e9tica o a\u00f1aden un icono.</li> <li>Ejemplos comunes:</li> </ul> Widget Tipo de campo Descripci\u00f3n breve Ejemplo Visual (Representaci\u00f3n) <code>badge</code> Selection / Char Encapsula el texto en un \u00f3valo coloreado. <code>[ Borrador ]</code> (Etiqueta azul) <code>many2many_tags</code> Many2many Muestra relaciones como etiquetas de colores. <code>( Urgente ) ( Odoo ) ( Dev )</code> <code>priority</code> Integer / Selection Transforma el valor en estrellas doradas. <code>\u2b50 \u2b50 \u2b50 \u2729 \u2729</code> <code>progressbar</code> Integer / Float Muestra una barra de carga rellena. <code>[\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591] 60%</code> <code>boolean_toggle</code> Boolean Sustituye el check por un interruptor. <code>( \u25cb\u2501\u2501\u2501\u2501) / (\u2501\u2501\u2501\u2501\u25cf )</code> <code>boolean_favorite</code> Boolean Muestra una estrella de \"favorito\". <code>\u2b50 (Rellena) / \u2729 (Vac\u00eda)</code> <code>handle</code> Integer Icono para arrastrar y reordenar filas. <code>\u2630</code> (Icono de tres rayas) <code>image</code> Binary Muestra la miniatura de la imagen subida. <code>[ \ud83d\udcf7 Miniatura ]</code> <code>url</code> Char Convierte el texto en un enlace azul. <code>www.odoo.com</code> (Subrayado) <code>email</code> Char Enlace directo para enviar correo. <code>\ud83d\udce8 usuario@mail.com</code> <code>phone</code> Char Enlace para realizar llamadas (Tel/Skype). <code>\ud83d\udcde +34 600...</code> <code>remaining_days</code> Date / Datetime Muestra cu\u00e1nto falta para una fecha. \"En 5 d\u00edas\" o \"Hace 2 d\u00edas\" <p>views.xml</p> <pre><code>&lt;list decoration-info=\"activo == True\"\n    decoration-muted=\"fecha_fin &amp;lt; current_date\"\n    decoration-success=\"duracion == 14\"&gt;\n    &lt;field name=\"name\"/&gt;\n    &lt;field name=\"descripcion\"/&gt;\n    &lt;field name=\"duracion\"/&gt;\n    &lt;field name=\"fecha_ini\"/&gt;\n    &lt;field name=\"fecha_fin\"/&gt;\n    &lt;field name=\"activo\" widget=\"boolean_toggle\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>En los m\u00f3dulos que vienen con Odoo encontrar\u00e1s excelentes ejemplos de vistas lista avanzadas, especialmente en m\u00f3dulos como Ventas, Compras e Inventario.</p> <p>Para saber los widgets que tenemos en nuestro odoo</p> <pre><code>docker exec -it odoo_dev_dam ls /usr/lib/python3/dist-packages/odoo/addons/web/static/src/views/fields\n</code></pre>"},{"location":"6_8_mejorando_vistas/#widgets-en-la-vista-formulario-form","title":"Widgets en la Vista Formulario (<code>form</code>)","text":"<p>En los formularios, los widgets son mucho m\u00e1s interactivos. No solo muestran el dato, sino que cambian la forma en que el usuario introduce la informaci\u00f3n.</p> <p>Ejemplos comunes:</p> <ul> <li><code>widget=\"status_bar\"</code>: Crea la flecha de flujo de trabajo en la parte superior del formulario.</li> <li><code>widget=\"image\"</code>: Permite previsualizar, subir o borrar una foto.</li> <li><code>widget=\"selection\"</code>: Convierte un campo relacional en un men\u00fa desplegable simple (quitando las opciones de \"Crear y editar\").</li> <li><code>widget=\"url\"</code>: Convierte un texto en un enlace clickeable.</li> </ul> <p>Diferencia decoraciones y widgets</p> <p>Mientras que las decoraciones (<code>decoration-X</code>) cambian el color de la fila o campo seg\u00fan condiciones, el widget cambia la estructura y el comportamiento del control web.</p>"},{"location":"6_8_mejorando_vistas/#vista-lista-completa-y-mejorada","title":"Vista Lista Completa y Mejorada","text":"<p>Juntando todas las t\u00e9cnicas vistas, aqu\u00ed tienes una vista lista completa y funcional para Sprints:</p> <p>views.xml</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"sprints_list\"&gt;\n    &lt;field name=\"name\"&gt;gestion_tareas_sergio.sprints_sergio.list&lt;/field&gt;\n    &lt;field name=\"model\"&gt;gestion_tareas_sergio.sprints_sergio&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;list decoration-info=\"activo == True\"\n            decoration-muted=\"fecha_fin &amp;lt; current_date()\"\n            decoration-warning=\"duracion &amp;lt; 7\"\n            decoration-success=\"duracion == 14\"&gt;\n            &lt;field name=\"bane\"/&gt;\n            &lt;field name=\"descripcion\"/&gt;\n            &lt;field name=\"duracion\" sum=\"Total d\u00edas\" avg=\"Promedio\"/&gt;\n            &lt;field name=\"fecha_ini\"/&gt;\n            &lt;field name=\"fecha_fin\"/&gt;\n            &lt;field name=\"activo\" widget=\"boolean_toggle\"/&gt;\n        &lt;/list&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Esta vista:</p> <ul> <li>Resalta en azul los sprints activos</li> <li>Muestra en gris los sprints finalizados</li> <li>Alerta en amarillo sobre sprints muy cortos (menos de 7 d\u00edas)</li> <li>Destaca en verde sprints de duraci\u00f3n est\u00e1ndar (14 d\u00edas)</li> <li>Muestra el total y promedio de d\u00edas planificados</li> <li>Incluye el campo activo para condiciones pero lo oculta</li> </ul> <p>Buenas Pr\u00e1cticas para Vistas Lista</p> <p>Al dise\u00f1ar vistas lista personalizadas, ten en cuenta estas recomendaciones:</p> <p>Selecci\u00f3n de campos:</p> <ul> <li>Muestra solo campos relevantes para identificar registros</li> <li>Evita columnas muy anchas (como Text) que rompen el dise\u00f1o</li> <li>Prioriza campos que el usuario usa para buscar o filtrar</li> </ul> <p>Uso de decoraciones:</p> <ul> <li>No abuses de los colores, pueden saturar visualmente</li> <li>Usa colores con significado consistente (rojo=problema, verde=ok)</li> <li>Las decoraciones m\u00e1s importantes deben ir al final para que prevalezcan</li> </ul> <p>Sumatorios:</p> <ul> <li>\u00dasalos solo en campos donde el total tenga sentido</li> <li>No sumes campos que representan promedios o porcentajes</li> <li>Considera si el sumatorio es de todos los registros o solo los filtrados</li> </ul> <p>Campos invisibles:</p> <ul> <li>Incluye campos necesarios para condiciones aunque no se muestren</li> <li>Usa <code>invisible=\"1\"</code> en lugar de no incluirlos para poder usarlos en decoraciones</li> </ul> <p>Vistas editables:</p> <ul> <li>\u00dasalas solo para modelos muy simples</li> <li>Si el formulario tiene l\u00f3gica compleja, no uses editable</li> <li>Considera que limitas la validaci\u00f3n y experiencia de usuario</li> </ul>"},{"location":"6_8_mejorando_vistas/#recursos-adicionales","title":"Recursos Adicionales","text":"<p>Para profundizar en la personalizaci\u00f3n de vistas, consulta:</p> <ul> <li>Documentaci\u00f3n oficial de vistas</li> <li>Gu\u00eda de vistas lista</li> <li>C\u00f3digo fuente de m\u00f3dulos est\u00e1ndar de Odoo para ver ejemplos reales</li> </ul>"},{"location":"6_8_mejorando_vistas/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora mejorar\u00e1s las vistas lista de tu proyecto del restaurante aplicando las t\u00e9cnicas de decoraciones, sumatorios y campos computados.</p>"},{"location":"6_8_mejorando_vistas/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>Vas a personalizar las vistas lista de Platos, Men\u00fas e Ingredientes, a\u00f1adiendo decoraciones condicionales basadas en su estado, sumatorios de precios y campos computados que faciliten la identificaci\u00f3n visual de informaci\u00f3n importante.</p>"},{"location":"6_8_mejorando_vistas/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Crear vista lista personalizada para Platos</p> <p>Define una vista lista mostrando: nombre, categor\u00eda, precio, precio_final, disponible.</p> <p>Pistas:</p> <ul> <li>ID sugerido: <code>platos_list</code></li> <li>Incluye todos los campos que usar\u00e1s en decoraciones</li> </ul> </li> <li> <p>A\u00f1adir decoraciones a la vista de Platos</p> <p>Aplica diferentes colores seg\u00fan el estado del plato:</p> <ul> <li>Gris para platos no disponibles (<code>decoration-muted</code>)</li> <li>Verde para platos con descuento (<code>decoration-success</code>)</li> <li>Naranja para platos caros (&gt;20\u20ac) usando un campo computado</li> </ul> <p>Pistas:</p> <ul> <li>Para platos caros, crea primero un campo booleano <code>es_caro</code> computado</li> <li>Recuerda incluir campos invisibles si solo los necesitas para condiciones</li> </ul> </li> <li> <p>A\u00f1adir sumatorio de precios</p> <p>Muestra el total de ingresos potenciales al pie de la columna <code>precio_final</code>.</p> <p>Pistas:</p> <ul> <li>Usa atributo <code>sum=\"Total ingresos\"</code> en el campo</li> <li>Esto suma todos los registros visibles en la lista</li> </ul> </li> <li> <p>Crear vista lista para Men\u00fas con decoraciones</p> <p>Personaliza la vista de men\u00fas mostrando: nombre, fecha_inicio, fecha_fin, activo, precio_total.</p> <p>Aplica decoraciones:</p> <ul> <li>Azul para men\u00fas activos</li> <li>Gris para men\u00fas finalizados (fecha_fin pasada)</li> <li>Naranja para men\u00fas pr\u00f3ximos a vencer (menos de 3 d\u00edas)</li> </ul> <p>Pistas:</p> <ul> <li>Para men\u00fas pr\u00f3ximos a vencer, necesitas un campo computado <code>proximo_vencimiento</code></li> <li>Usa <code>current_date</code> para comparar con fecha actual</li> <li>A\u00f1ade sumatorio al campo <code>precio_total</code></li> </ul> </li> <li> <p>Crear vista lista para Ingredientes</p> <p>Personaliza la vista mostrando: nombre, es_alergeno, descripcion.</p> <p>Aplica decoraci\u00f3n roja a ingredientes alergenos.</p> <p>Pistas:</p> <ul> <li>Usa <code>decoration-danger=\"es_alergeno == True\"</code></li> <li>Esta identificaci\u00f3n visual es cr\u00edtica para seguridad alimentaria</li> </ul> </li> <li> <p>Experimentar con vista editable (opcional)</p> <p>Prueba hacer la vista de ingredientes editable a\u00f1adiendo <code>editable=\"top\"</code> al tag <code>&lt;list&gt;</code>.</p> <p>Eval\u00faa si te resulta m\u00e1s c\u00f3modo para este modelo simple.</p> </li> </ol>"},{"location":"6_8_mejorando_vistas/#verificaciones","title":"Verificaciones","text":"<p>Comprueba que:</p> <ul> <li>Los platos se muestran con colores seg\u00fan disponibilidad, descuento y precio</li> <li>Se muestra el total de ingresos al pie de la lista de platos</li> <li>Los men\u00fas se colorean seg\u00fan su estado (activo, finalizado, pr\u00f3ximo a vencer)</li> <li>Se muestra el total de precios de men\u00fas</li> <li>Los ingredientes alergenos destacan en rojo</li> <li>Los sumatorios se calculan correctamente</li> </ul> <p>Datos de Prueba</p> <p>Platos:</p> <ul> <li>Ensalada C\u00e9sar (8\u20ac, disponible) \u2192 Normal</li> <li>Solomillo Wellington (35\u20ac, disponible) \u2192 Naranja (caro)</li> <li>Pizza Margarita (12\u20ac, 10% descuento) \u2192 Verde</li> <li>Paella (18\u20ac, NO disponible) \u2192 Gris</li> </ul> <p>Men\u00fas:</p> <ul> <li>Men\u00fa del D\u00eda (activo, vence en 5 d\u00edas) \u2192 Azul</li> <li>Men\u00fa San Valent\u00edn (activo, vence ma\u00f1ana) \u2192 Naranja</li> <li>Men\u00fa Navidad (fecha pasada) \u2192 Gris</li> </ul> <p>Ingredientes:</p> <ul> <li>Tomate \u2192 Normal</li> <li>Gluten (alergeno) \u2192 Rojo</li> <li>Huevo (alergeno) \u2192 Rojo</li> </ul>"},{"location":"6_9_datos_demo/","title":"Datos de demostraci\u00f3n","text":""},{"location":"6_9_datos_demo/#datos-de-demostracion","title":"Datos de Demostraci\u00f3n","text":"<p>Cuando desarrollamos un m\u00f3dulo, es muy \u00fatil contar con datos de ejemplo que permitan probar la funcionalidad sin tener que crearlos manualmente cada vez. Los datos de demostraci\u00f3n son registros predefinidos que se cargan autom\u00e1ticamente al instalar un m\u00f3dulo, facilitando las pruebas, las presentaciones y el aprendizaje del sistema.</p> <p>En este apartado aprenderemos a crear datos de demostraci\u00f3n para nuestro m\u00f3dulo de gesti\u00f3n de tareas, incluyendo tanto la creaci\u00f3n manual de registros simples como la generaci\u00f3n autom\u00e1tica de grandes vol\u00famenes de datos mediante scripts.</p>"},{"location":"6_9_datos_demo/#que-son-los-datos-de-demostracion","title":"\u00bfQu\u00e9 son los Datos de Demostraci\u00f3n?","text":"<p>Los datos de demostraci\u00f3n (demo data) son registros de ejemplo que se cargan autom\u00e1ticamente cuando:</p> <ul> <li>Se instala un m\u00f3dulo por primera vez</li> <li>La base de datos fue creada con la opci\u00f3n \"Load demonstration data\" activada</li> </ul> <p>Estos datos son especialmente \u00fatiles para:</p> <ul> <li>Desarrolladores: Probar funcionalidades sin crear datos manualmente</li> <li>Formaci\u00f3n: Proporcionar ejemplos realistas a los alumnos</li> <li>Presentaciones: Demostrar el m\u00f3dulo con datos representativos</li> <li>Testing: Verificar que todo funciona correctamente</li> </ul> <p>A diferencia de los datos de producci\u00f3n, los datos de demostraci\u00f3n son opcionales y pueden omitirse en instalaciones reales simplemente no marcando la casilla correspondiente al crear la base de datos.</p>"},{"location":"6_9_datos_demo/#configuracion-inicial-base-de-datos-con-datos-demo","title":"Configuraci\u00f3n Inicial: Base de Datos con Datos Demo","text":"<p>Para que los datos de demostraci\u00f3n se carguen, la base de datos debe crearse con la opci\u00f3n correspondiente activada.</p>"},{"location":"6_9_datos_demo/#crear-base-de-datos-con-datos-demo","title":"Crear Base de Datos con Datos Demo","text":"<p>Al crear una nueva base de datos en Odoo (por ejemplo, accediendo a <code>http://localhost:8069/web/database/manager</code>):</p> <ul> <li>Completa los datos b\u00e1sicos (nombre, contrase\u00f1a, etc.)</li> <li>Marca la casilla \"Load demonstration data\"</li> <li>Crea la base de datos</li> </ul> Opci\u00f3n para cargar datos de demostraci\u00f3n al crear la base de datos <p>Importante: Opci\u00f3n al crear la base de datos</p> <p>La opci\u00f3n de datos de demostraci\u00f3n solo est\u00e1 disponible al crear la base de datos, no puede activarse despu\u00e9s. Si tu base de datos actual no tiene esta opci\u00f3n activada, deber\u00e1s crear una nueva base de datos para poder usar datos demo.</p>"},{"location":"6_9_datos_demo/#verificar-si-tu-base-de-datos-tiene-datos-demo-activos","title":"Verificar si tu Base de Datos Tiene Datos Demo Activos","text":"<p>Para comprobar si tu base de datos actual tiene los datos demo activados:</p> <ul> <li>Instala cualquier m\u00f3dulo est\u00e1ndar de Odoo (por ejemplo, Ventas)</li> <li>Si se cargan autom\u00e1ticamente clientes, productos, etc., la opci\u00f3n est\u00e1 activa</li> <li>Si el m\u00f3dulo se instala vac\u00edo, la opci\u00f3n no est\u00e1 activa</li> </ul>"},{"location":"6_9_datos_demo/#estructura-de-archivos-para-datos-demo","title":"Estructura de Archivos para Datos Demo","text":"<p>Los datos de demostraci\u00f3n se definen en archivos XML dentro de una carpeta espec\u00edfica del m\u00f3dulo.</p>"},{"location":"6_9_datos_demo/#estructura-recomendada","title":"Estructura Recomendada","text":"<pre><code>gestion_tareas_sergio/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 __manifest__.py\n\u251c\u2500\u2500 models/\n\u251c\u2500\u2500 views/\n\u251c\u2500\u2500 security/\n\u2514\u2500\u2500 demo/\n    \u251c\u2500\u2500 demo.xml              # Datos demo b\u00e1sicos\n    \u251c\u2500\u2500 desarrolladores.xml   # Desarrolladores de ejemplo\n    \u251c\u2500\u2500 proyectos.xml         # Proyectos de ejemplo\n    \u2514\u2500\u2500 sprints.xml           # Sprints de ejemplo\n</code></pre>"},{"location":"6_9_datos_demo/#configurar-el-manifest","title":"Configurar el Manifest","text":"<p>En el archivo <code>__manifest__.py</code>, existe una secci\u00f3n espec\u00edfica para datos de demostraci\u00f3n:</p> <pre><code>{\n    'name': 'Gesti\u00f3n de Tareas',\n    # ... otros campos ...\n\n    'data': [\n        'security/ir.model.access.csv',\n        'views/views.xml',\n        'views/templates.xml',\n    ],\n\n    'demo': [\n        'demo/demo.xml',\n        'demo/desarrolladores.xml',\n        'demo/proyectos.xml',\n        'demo/sprints.xml',\n    ],\n}\n</code></pre> <p>La clave <code>demo</code> especifica qu\u00e9 archivos contienen datos de demostraci\u00f3n. Estos archivos solo se cargar\u00e1n si la base de datos tiene los datos demo activados.</p>"},{"location":"6_9_datos_demo/#crear-datos-demo-manualmente","title":"Crear Datos Demo Manualmente","text":"<p>Para cantidades peque\u00f1as de datos, podemos crear los registros manualmente en archivos XML.</p>"},{"location":"6_9_datos_demo/#estructura-basica-de-un-archivo-demo","title":"Estructura B\u00e1sica de un Archivo Demo","text":"<p>Un archivo de datos demo tiene la siguiente estructura:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n        &lt;!-- Aqu\u00ed van los registros --&gt;\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"6_9_datos_demo/#ejemplo-crear-desarrolladores-de-demo","title":"Ejemplo: Crear Desarrolladores de Demo","text":"<p>Vamos a crear algunos desarrolladores de ejemplo. En <code>demo/desarrolladores.xml</code>:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n        &lt;!-- Desarrollador 1 --&gt;\n        &lt;record id=\"desarrollador_juan\" model=\"res.partner\"&gt;\n            &lt;field name=\"name\"&gt;Juan P\u00e9rez&lt;/field&gt;\n            &lt;field name=\"es_desarrollador\"&gt;True&lt;/field&gt;\n            &lt;field name=\"email\"&gt;juan.perez@example.com&lt;/field&gt;\n            &lt;field name=\"phone\"&gt;+34 600 123 456&lt;/field&gt;\n        &lt;/record&gt;\n\n        &lt;!-- Desarrollador 2 --&gt;\n        &lt;record id=\"desarrollador_maria\" model=\"res.partner\"&gt;\n            &lt;field name=\"name\"&gt;Mar\u00eda Garc\u00eda&lt;/field&gt;\n            &lt;field name=\"es_desarrollador\"&gt;True&lt;/field&gt;\n            &lt;field name=\"email\"&gt;maria.garcia@example.com&lt;/field&gt;\n            &lt;field name=\"phone\"&gt;+34 600 234 567&lt;/field&gt;\n        &lt;/record&gt;\n\n        &lt;!-- Desarrollador 3 --&gt;\n        &lt;record id=\"desarrollador_pedro\" model=\"res.partner\"&gt;\n            &lt;field name=\"name\"&gt;Pedro L\u00f3pez&lt;/field&gt;\n            &lt;field name=\"es_desarrollador\"&gt;True&lt;/field&gt;\n            &lt;field name=\"email\"&gt;pedro.lopez@example.com&lt;/field&gt;\n            &lt;field name=\"phone\"&gt;+34 600 345 678&lt;/field&gt;\n        &lt;/record&gt;\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Elementos clave:</p> <ul> <li><code>&lt;record id=\"...\" model=\"...\"&gt;</code>: Define un registro con un ID \u00fanico</li> <li><code>id</code>: Identificador \u00fanico del registro (se usa para referenciar desde otros registros)</li> <li><code>model</code>: Modelo en el que se crea el registro</li> <li><code>&lt;field name=\"...\"&gt;</code>: Cada campo del modelo con su valor</li> </ul>"},{"location":"6_9_datos_demo/#ejemplo-crear-proyectos-con-relaciones","title":"Ejemplo: Crear Proyectos con Relaciones","text":"<p>Los datos demo pueden tener relaciones entre s\u00ed. En <code>demo/proyectos.xml</code>:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n        &lt;record id=\"proyecto_tienda_online\" model=\"gestion_tareas_sergio.proyectos_sergio\"&gt;\n            &lt;field name=\"nombre\"&gt;Tienda Online&lt;/field&gt;\n            &lt;field name=\"descripcion\"&gt;Desarrollo de e-commerce con carrito de compra&lt;/field&gt;\n        &lt;/record&gt;\n\n        &lt;record id=\"proyecto_app_movil\" model=\"gestion_tareas_sergio.proyectos_sergio\"&gt;\n            &lt;field name=\"nombre\"&gt;App M\u00f3vil&lt;/field&gt;\n            &lt;field name=\"descripcion\"&gt;Aplicaci\u00f3n m\u00f3vil para gesti\u00f3n de pedidos&lt;/field&gt;\n        &lt;/record&gt;\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"6_9_datos_demo/#ejemplo-crear-sprints-referenciando-proyectos","title":"Ejemplo: Crear Sprints Referenciando Proyectos","text":"<p>En <code>demo/sprints.xml</code>:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n        &lt;record id=\"sprint_1_tienda\" model=\"gestion_tareas_sergio.sprints_sergio\"&gt;\n            &lt;field name=\"nombre\"&gt;Sprint 1 - Backend&lt;/field&gt;\n            &lt;field name=\"descripcion\"&gt;Desarrollo de la API REST&lt;/field&gt;\n            &lt;field name=\"duracion\"&gt;14&lt;/field&gt;\n            &lt;field name=\"fecha_ini\"&gt;2024-01-15 09:00:00&lt;/field&gt;\n            &lt;field name=\"proyecto\" ref=\"proyecto_tienda_online\"/&gt;\n        &lt;/record&gt;\n\n        &lt;record id=\"sprint_2_tienda\" model=\"gestion_tareas_sergio.sprints_sergio\"&gt;\n            &lt;field name=\"nombre\"&gt;Sprint 2 - Frontend&lt;/field&gt;\n            &lt;field name=\"descripcion\"&gt;Desarrollo de la interfaz de usuario&lt;/field&gt;\n            &lt;field name=\"duracion\"&gt;14&lt;/field&gt;\n            &lt;field name=\"fecha_ini\"&gt;2024-01-29 09:00:00&lt;/field&gt;\n            &lt;field name=\"proyecto\" ref=\"proyecto_tienda_online\"/&gt;\n        &lt;/record&gt;\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Nota sobre relaciones:</p> <ul> <li><code>ref=\"proyecto_tienda_online\"</code>: Referencia el ID del proyecto creado anteriormente</li> <li>Odoo resuelve autom\u00e1ticamente estas referencias al cargar los datos</li> </ul>"},{"location":"6_9_datos_demo/#ejemplo-relaciones-many2many","title":"Ejemplo: Relaciones Many2many","text":"<p>Para campos Many2many, usamos una sintaxis especial:</p> <pre><code>&lt;record id=\"tarea_login\" model=\"gestion_tareas_sergio.tareas_sergio\"&gt;\n    &lt;field name=\"nombre\"&gt;Implementar login de usuarios&lt;/field&gt;\n    &lt;field name=\"descripcion\"&gt;Sistema de autenticaci\u00f3n con JWT&lt;/field&gt;\n    &lt;field name=\"sprint\" ref=\"sprint_1_tienda\"/&gt;\n    &lt;field name=\"desarrollador_mo\" ref=\"desarrollador_juan\"/&gt;\n    &lt;field name=\"rel_tecnologias\" eval=\"[(6, 0, [ref('tecnologia_python'), ref('tecnologia_jwt')])]\"/&gt;\n&lt;/record&gt;\n</code></pre> <p>La sintaxis <code>eval=\"[(6, 0, [...])]\"</code> es espec\u00edfica de Odoo:</p> <ul> <li><code>6</code>: Comando para \"reemplazar todos los registros relacionados\"</li> <li><code>0</code>: No usado en este comando</li> <li><code>[ref('id1'), ref('id2')]</code>: Lista de IDs a relacionar</li> </ul>"},{"location":"6_9_datos_demo/#generacion-automatica-de-datos-demo","title":"Generaci\u00f3n Autom\u00e1tica de Datos Demo","text":"<p>Cuando necesitamos crear muchos registros (por ejemplo, 50 desarrolladores o 100 tareas), crear los archivos XML manualmente es tedioso y propenso a errores. En estos casos, usamos scripts para generar los datos autom\u00e1ticamente.</p>"},{"location":"6_9_datos_demo/#herramienta-mockaroo","title":"Herramienta: Mockaroo","text":"<p>Mockaroo es una herramienta web gratuita que genera datos aleatorios realistas en varios formatos.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Genera datos en CSV, JSON, SQL, XML, etc.</li> <li>M\u00faltiples tipos de datos: nombres, emails, tel\u00e9fonos, direcciones, etc.</li> <li>Permite patrones personalizados con expresiones regulares</li> <li>Puede generar hasta 1000 registros en la versi\u00f3n gratuita</li> </ul>"},{"location":"6_9_datos_demo/#paso-1-configurar-campos-en-mockaroo","title":"Paso 1: Configurar Campos en Mockaroo","text":"<p>Vamos a generar 50 desarrolladores con datos realistas.</p> <p>Configuraci\u00f3n en Mockaroo:</p> Campo Tipo Opciones id Row Number Desde 1 name Full Name - email Email Address - phone Phone Formato espa\u00f1ol ciudad City - <p>Configuraci\u00f3n adicional:</p> <ul> <li>N\u00famero de filas: 50</li> <li>Formato: CSV</li> <li>Sin encabezados (desmarca \"include header row\")</li> </ul> <p>Descarga el archivo como <code>desarrolladores.csv</code>.</p>"},{"location":"6_9_datos_demo/#paso-2-script-python-para-convertir-csv-a-xml","title":"Paso 2: Script Python para Convertir CSV a XML","text":"<p>Creamos un script que lee el CSV y genera el archivo XML correspondiente. Crea un archivo <code>scripts/generar_demo.py</code>:</p> <pre><code>import csv\nimport os\n\ndef escribir_texto(texto, archivo):\n    \"\"\"Escribe texto en un archivo (modo append)\"\"\"\n    with open(archivo, 'a', encoding='utf-8') as f:\n        f.write(texto)\n\ndef generar_desarrollador(fila, archivo):\n    \"\"\"Genera un registro XML para un desarrollador\"\"\"\n    id_dev, nombre, email, telefono, ciudad = fila\n\n    xml = f'''\n    &lt;record id=\"desarrollador_demo_{id_dev}\" model=\"res.partner\"&gt;\n        &lt;field name=\"name\"&gt;{nombre}&lt;/field&gt;\n        &lt;field name=\"es_desarrollador\"&gt;True&lt;/field&gt;\n        &lt;field name=\"email\"&gt;{email}&lt;/field&gt;\n        &lt;field name=\"phone\"&gt;{telefono}&lt;/field&gt;\n        &lt;field name=\"city\"&gt;{ciudad}&lt;/field&gt;\n    &lt;/record&gt;\n'''\n    escribir_texto(xml, archivo)\n\ndef generar_xml_desarrolladores(archivo_csv, archivo_xml):\n    \"\"\"Genera archivo XML completo desde CSV\"\"\"\n\n    # Eliminar archivo XML si existe\n    if os.path.exists(archivo_xml):\n        os.remove(archivo_xml)\n\n    # Escribir cabecera XML\n    escribir_texto('&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\\n', archivo_xml)\n    escribir_texto('&lt;odoo&gt;\\n    &lt;data&gt;\\n', archivo_xml)\n\n    # Leer CSV y generar registros\n    with open(archivo_csv, 'r', encoding='utf-8') as csv_file:\n        lector = csv.reader(csv_file)\n        for fila in lector:\n            if fila:  # Ignorar l\u00edneas vac\u00edas\n                generar_desarrollador(fila, archivo_xml)\n\n    # Escribir cierre XML\n    escribir_texto('    &lt;/data&gt;\\n&lt;/odoo&gt;\\n', archivo_xml)\n\n    print(f\"\u2713 Archivo generado: {archivo_xml}\")\n\n# Ejecutar el script\nif __name__ == \"__main__\":\n    generar_xml_desarrolladores(\n        'scripts/desarrolladores.csv',\n        'demo/desarrolladores.xml'\n    )\n</code></pre> <p>Explicaci\u00f3n del script:</p> <ul> <li><code>escribir_texto()</code>: Funci\u00f3n auxiliar para escribir en archivos</li> <li><code>generar_desarrollador()</code>: Genera el XML de un registro individual</li> <li><code>generar_xml_desarrolladores()</code>: Funci\u00f3n principal que:<ul> <li>Borra el archivo destino si existe</li> <li>Escribe la cabecera XML</li> <li>Lee cada fila del CSV</li> <li>Genera un registro por cada fila</li> <li>Escribe el cierre XML</li> </ul> </li> </ul>"},{"location":"6_9_datos_demo/#paso-3-ejecutar-el-script","title":"Paso 3: Ejecutar el Script","text":"<p>Desde la ra\u00edz de tu m\u00f3dulo:</p> <pre><code>cd gestion_tareas_sergio\npython scripts/generar_demo.py\n</code></pre> <p>Esto generar\u00e1 el archivo <code>demo/desarrolladores.xml</code> con 50 desarrolladores.</p>"},{"location":"6_9_datos_demo/#paso-4-verificar-el-archivo-generado","title":"Paso 4: Verificar el Archivo Generado","text":"<p>Abre <code>demo/desarrolladores.xml</code> y verifica que tiene la estructura correcta:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n        &lt;record id=\"desarrollador_demo_1\" model=\"res.partner\"&gt;\n            &lt;field name=\"name\"&gt;Juan Carlos Rodr\u00edguez&lt;/field&gt;\n            &lt;field name=\"es_desarrollador\"&gt;True&lt;/field&gt;\n            &lt;field name=\"email\"&gt;jc.rodriguez@example.com&lt;/field&gt;\n            &lt;field name=\"phone\"&gt;+34 612 345 678&lt;/field&gt;\n            &lt;field name=\"city\"&gt;Madrid&lt;/field&gt;\n        &lt;/record&gt;\n\n        &lt;!-- ... m\u00e1s registros ... --&gt;\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"6_9_datos_demo/#paso-5-anadir-al-manifest","title":"Paso 5: A\u00f1adir al Manifest","text":"<p>A\u00f1ade el nuevo archivo en el <code>__manifest__.py</code>:</p> <pre><code>'demo': [\n    'demo/demo.xml',\n    'demo/desarrolladores.xml',  # &lt;- A\u00f1adido\n],\n</code></pre>"},{"location":"6_9_datos_demo/#cargar-los-datos-demo","title":"Cargar los Datos Demo","text":"<p>Para que Odoo cargue los datos de demostraci\u00f3n:</p>"},{"location":"6_9_datos_demo/#opcion-1-nueva-instalacion","title":"Opci\u00f3n 1: Nueva Instalaci\u00f3n","text":"<p>Si a\u00fan no has instalado el m\u00f3dulo:</p> <ul> <li>Actualiza la lista de m\u00f3dulos</li> <li>Instala tu m\u00f3dulo</li> <li>Los datos demo se cargar\u00e1n autom\u00e1ticamente</li> </ul>"},{"location":"6_9_datos_demo/#opcion-2-modulo-ya-instalado","title":"Opci\u00f3n 2: M\u00f3dulo Ya Instalado","text":"<p>Si el m\u00f3dulo ya est\u00e1 instalado, los datos demo no se cargar\u00e1n autom\u00e1ticamente al actualizar. Debes:</p> <p>M\u00e9todo 1: Desinstalar y reinstalar</p> <ul> <li>Desinstala el m\u00f3dulo completamente</li> <li>Reinicia el servidor Odoo: <code>docker compose restart odoo_dev_dam</code></li> <li>Reinstala el m\u00f3dulo</li> </ul> <p>M\u00e9todo 2: Forzar carga desde l\u00ednea de comandos</p> <pre><code>docker exec -it odoo_dev_dam odoo -d nombre_bd -u gestion_tareas_sergio --load-language=es_ES\n</code></pre> <p>Datos Demo se Cargan Una Vez</p> <p>Los datos demo solo se cargan durante la instalaci\u00f3n del m\u00f3dulo. Si modificas los archivos demo despu\u00e9s de instalar, necesitas desinstalar y reinstalar el m\u00f3dulo para ver los cambios.</p>"},{"location":"6_9_datos_demo/#buenas-practicas-para-datos-demo","title":"Buenas Pr\u00e1cticas para Datos Demo","text":""},{"location":"6_9_datos_demo/#organizacion-de-archivos","title":"Organizaci\u00f3n de Archivos","text":"<p>Estructura tus datos demo de forma l\u00f3gica:</p> <pre><code>demo/\n\u251c\u2500\u2500 01_desarrolladores.xml    # Contactos base\n\u251c\u2500\u2500 02_tecnologias.xml         # Tecnolog\u00edas (sin dependencias)\n\u251c\u2500\u2500 03_proyectos.xml           # Proyectos\n\u251c\u2500\u2500 04_sprints.xml             # Sprints (dependen de proyectos)\n\u2514\u2500\u2500 05_tareas.xml              # Tareas (dependen de sprints y desarrolladores)\n</code></pre> <p>El orden en el manifest debe respetar las dependencias:</p> <pre><code>'demo': [\n    'demo/01_desarrolladores.xml',\n    'demo/02_tecnologias.xml',\n    'demo/03_proyectos.xml',\n    'demo/04_sprints.xml',\n    'demo/05_tareas.xml',\n],\n</code></pre>"},{"location":"6_9_datos_demo/#ids-descriptivos","title":"IDs Descriptivos","text":"<p>Usa IDs descriptivos que faciliten referencias:</p> <pre><code>&lt;!-- Mal --&gt;\n&lt;record id=\"rec1\" model=\"...\"&gt;\n\n&lt;!-- Bien --&gt;\n&lt;record id=\"proyecto_tienda_online\" model=\"...\"&gt;\n</code></pre>"},{"location":"6_9_datos_demo/#datos-realistas","title":"Datos Realistas","text":"<p>Usa datos que parezcan reales:</p> <ul> <li>Nombres completos, no \"Test 1\", \"Test 2\"</li> <li>Emails con dominios v\u00e1lidos</li> <li>Fechas coherentes (sprints pasados, actuales y futuros)</li> <li>Descripciones con sentido</li> </ul>"},{"location":"6_9_datos_demo/#cantidad-apropiada","title":"Cantidad Apropiada","text":"<p>No exageres con la cantidad de datos:</p> <ul> <li>10-20 registros por modelo suele ser suficiente</li> <li>Suficiente para probar, pero no abrumador</li> <li>Considera el rendimiento al cargar</li> </ul>"},{"location":"6_9_datos_demo/#documentacion","title":"Documentaci\u00f3n","text":"<p>Documenta el prop\u00f3sito de los datos demo en un README:</p> <pre><code># Datos de Demostraci\u00f3n\n\nEste m\u00f3dulo incluye datos demo para facilitar las pruebas:\n\n- 20 desarrolladores con datos completos\n- 5 proyectos de diferentes tipos\n- 15 sprints distribuidos en los proyectos\n- 50 tareas asignadas a desarrolladores\n- 10 tecnolog\u00edas comunes\n\nPara usar los datos demo, crea la base de datos con\nla opci\u00f3n \"Load demonstration data\" activada.\n</code></pre>"},{"location":"6_9_datos_demo/#solucion-de-problemas-comunes","title":"Soluci\u00f3n de Problemas Comunes","text":""},{"location":"6_9_datos_demo/#los-datos-demo-no-se-cargan","title":"Los datos demo no se cargan","text":"<p>Causas posibles:</p> <ul> <li>Base de datos creada sin la opci\u00f3n \"Load demonstration data\"</li> <li>Errores en la sintaxis XML</li> <li>Referencias a IDs que no existen</li> <li>M\u00f3dulo ya instalado (los datos demo solo se cargan en la instalaci\u00f3n)</li> </ul> <p>Soluci\u00f3n:</p> <ul> <li>Verifica los logs de Odoo: <code>docker logs odoo_dev_dam -f</code></li> <li>Comprueba la sintaxis XML</li> <li>Desinstala y reinstala el m\u00f3dulo</li> </ul>"},{"location":"6_9_datos_demo/#error-external-id-not-found","title":"Error: \"External ID not found\"","text":"<p>Causa: Intentas referenciar un ID que no existe o no se ha cargado a\u00fan.</p> <p>Soluci\u00f3n:</p> <ul> <li>Verifica que el ID existe en alg\u00fan archivo demo</li> <li>Asegura el orden correcto en el manifest (dependencias primero)</li> <li>Comprueba que no hay errores tipogr\u00e1ficos en los IDs</li> </ul>"},{"location":"6_9_datos_demo/#los-datos-se-duplican","title":"Los datos se duplican","text":"<p>Causa: Los IDs no son \u00fanicos o est\u00e1s cargando el mismo archivo varias veces.</p> <p>Soluci\u00f3n:</p> <ul> <li>Asegura que cada <code>id</code> es \u00fanico en todo el m\u00f3dulo</li> <li>Verifica que no tienes el mismo archivo listado dos veces en el manifest</li> </ul>"},{"location":"6_9_datos_demo/#errores-de-campos-requeridos","title":"Errores de campos requeridos","text":"<p>Causa: Faltan campos obligatorios en los registros.</p> <p>Soluci\u00f3n:</p> <ul> <li>Revisa la definici\u00f3n del modelo para ver campos con <code>required=True</code></li> <li>A\u00f1ade esos campos en los datos demo</li> </ul>"},{"location":"6_9_datos_demo/#tu-turno-gestor-de-restaurante","title":"\ud83e\udde9 Tu Turno: Gestor de Restaurante","text":"<p>Ahora crear\u00e1s datos de demostraci\u00f3n completos para tu proyecto del restaurante.</p>"},{"location":"6_9_datos_demo/#objetivos-y-contexto","title":"Objetivos y Contexto","text":"<p>Vas a crear datos demo que incluyan platos, men\u00fas, ingredientes, camareros y otras entidades de tu restaurante. Esto te permitir\u00e1 probar f\u00e1cilmente todas las funcionalidades sin tener que crear datos manualmente cada vez que reinstales el m\u00f3dulo.</p> <p>Crear\u00e1s tanto datos simples manualmente como datos masivos usando scripts de generaci\u00f3n autom\u00e1tica.</p>"},{"location":"6_9_datos_demo/#pasos-a-realizar","title":"Pasos a Realizar","text":"<ol> <li> <p>Verificar que tu base de datos tiene datos demo activos</p> <p>Si no los tiene, crea una nueva base de datos marcando \"Load demonstration data\".</p> <p>Pistas:</p> <ul> <li>Accede al gestor de bases de datos</li> <li>Crea una nueva base de datos o verifica la actual instalando un m\u00f3dulo est\u00e1ndar</li> </ul> </li> <li> <p>Crear estructura de carpetas para datos demo</p> <p>Crea una carpeta <code>demo/</code> en tu m\u00f3dulo si no existe.</p> <p>Estructura sugerida:</p> <pre><code>demo/\n\u251c\u2500\u2500 01_categorias.xml\n\u251c\u2500\u2500 02_ingredientes.xml\n\u251c\u2500\u2500 03_platos.xml\n\u251c\u2500\u2500 04_menus.xml\n\u2514\u2500\u2500 05_camareros.xml\n</code></pre> </li> <li> <p>Crear datos demo de categor\u00edas manualmente</p> <p>En <code>demo/01_categorias.xml</code>, crea 4-5 categor\u00edas de platos.</p> <p>Pistas:</p> <ul> <li>Categor\u00edas sugeridas: Entrantes, Principales, Postres, Bebidas</li> <li>Usa IDs descriptivos como <code>categoria_entrantes</code></li> <li>Incluye nombre y descripci\u00f3n</li> </ul> </li> <li> <p>Crear datos demo de ingredientes manualmente</p> <p>En <code>demo/02_ingredientes.xml</code>, crea 15-20 ingredientes comunes.</p> <p>Pistas:</p> <ul> <li>Incluye alergenos y no alergenos</li> <li>Ejemplos: Tomate, Gluten, Huevo, Leche, Lechuga, etc.</li> <li>Marca correctamente el campo <code>es_alergeno</code></li> <li>Usa IDs como <code>ingrediente_tomate</code>, <code>ingrediente_gluten</code></li> </ul> </li> <li> <p>Crear script para generar platos masivamente</p> <p>Crea <code>scripts/generar_demo_platos.py</code> que genere 30-40 platos desde un CSV.</p> <p>Pistas:</p> <ul> <li>Campos CSV: id, nombre, descripcion, precio, tiempo_preparacion, categoria_id</li> <li>Usa Mockaroo para generar nombres de platos creativos</li> <li>Precios entre 5 y 35 euros</li> <li>Tiempos de preparaci\u00f3n entre 10 y 60 minutos</li> <li>Asigna categor\u00edas usando <code>ref()</code></li> </ul> </li> <li> <p>Configurar Mockaroo para platos</p> <p>Configuraci\u00f3n sugerida:</p> Campo Tipo Opciones id Row Number 1-40 nombre Custom List Lista de nombres de platos descripcion Sentences 1-2 oraciones precio Number Min: 5, Max: 35, Decimales: 2 tiempo Number Min: 10, Max: 60 categoria Number Min: 1, Max: 4 <p>Descarga como CSV sin encabezados.</p> </li> <li> <p>Ejecutar el script de generaci\u00f3n de platos</p> <p>Ejecuta tu script para generar <code>demo/03_platos.xml</code>.</p> <p>Pistas:</p> <ul> <li>Verifica que el XML generado tiene la estructura correcta</li> <li>Comprueba que las referencias a categor\u00edas son v\u00e1lidas</li> <li>El script debe ser similar al ejemplo de desarrolladores</li> </ul> </li> <li> <p>Crear relaciones Many2many entre platos e ingredientes</p> <p>Modifica el script de platos para a\u00f1adir ingredientes aleatorios.</p> <p>Pistas:</p> <ul> <li>Cada plato deber\u00eda tener 3-6 ingredientes</li> <li>Usa la sintaxis: <code>eval=\"[(6, 0, [ref('ingrediente_1'), ref('ingrediente_2')])]\"</code></li> <li>Genera combinaciones aleatorias pero l\u00f3gicas (no mezcles todo con todo)</li> </ul> </li> <li> <p>Crear datos demo de men\u00fas manualmente</p> <p>En <code>demo/04_menus.xml</code>, crea 5-6 men\u00fas con diferentes caracter\u00edsticas.</p> <p>Pistas:</p> <ul> <li>Men\u00fas: Men\u00fa del D\u00eda, Men\u00fa Fin de Semana, Men\u00fa Degustaci\u00f3n, etc.</li> <li>Incluye men\u00fas con diferentes estados: activos, finalizados, pr\u00f3ximos</li> <li>Asigna 3-5 platos a cada men\u00fa</li> <li>Usa fechas realistas (algunos actuales, otros pasados, otros futuros)</li> </ul> </li> <li> <p>Crear datos demo de camareros usando script</p> <p>Similar al script de desarrolladores, genera 15-20 camareros.</p> <p>Pistas:</p> <ul> <li>Usa Mockaroo para generar nombres, emails, tel\u00e9fonos</li> <li>Campos adicionales: turno (ma\u00f1ana/tarde/noche), seccion</li> <li>Asigna turnos de forma equilibrada</li> <li>Secciones: Terraza, Sala Principal, Bar, VIP</li> </ul> </li> <li> <p>Relacionar camareros con men\u00fas de especialidad</p> <p>Modifica el script de camareros para asignar 1-3 men\u00fas a cada uno.</p> <p>Pistas:</p> <ul> <li>No todos los camareros necesitan men\u00fas de especialidad</li> <li>Usa relaci\u00f3n Many2many similar a platos-ingredientes</li> </ul> </li> <li> <p>A\u00f1adir todos los archivos al manifest</p> <p>Actualiza <code>__manifest__.py</code> con todos los archivos demo en orden correcto.</p> <pre><code>'demo': [\n    'demo/01_categorias.xml',\n    'demo/02_ingredientes.xml',\n    'demo/03_platos.xml',\n    'demo/04_menus.xml',\n    'demo/05_camareros.xml',\n],\n</code></pre> <p>El orden es importante por las dependencias.</p> </li> <li> <p>Probar la carga de datos demo</p> <p>Desinstala tu m\u00f3dulo completamente, reinicia el servidor y reinstala.</p> <p>Pistas:</p> <ul> <li>Antes de reinstalar, verifica que no hay errores en los XMLs</li> <li>Observa los logs durante la instalaci\u00f3n: <code>docker logs odoo_dev_dam -f</code></li> <li>Si hay errores, corr\u00edgelos y vuelve a intentar</li> </ul> </li> <li> <p>Verificar las relaciones</p> <p>Comprueba que todas las relaciones se cargaron correctamente.</p> <p>Verifica:</p> <ul> <li>Platos tienen ingredientes asignados</li> <li>Men\u00fas tienen platos asignados</li> <li>Camareros tienen men\u00fas de especialidad</li> <li>Las categor\u00edas de platos son correctas</li> </ul> </li> <li> <p>Crear datos adicionales opcionales (avanzado)</p> <p>Si has creado otros modelos (Pedidos, Mesas, etc.), genera datos demo para ellos.</p> <p>Pistas:</p> <ul> <li>Pedidos: Relaciona con camareros y men\u00fas</li> <li>Mesas: Asigna n\u00fameros y estados</li> <li>Usa el mismo enfoque de scripts para cantidades grandes</li> </ul> </li> </ol>"},{"location":"6_9_datos_demo/#verificaciones-y-resultado-esperado","title":"Verificaciones y Resultado Esperado","text":"<p>Comprueba que:</p> <ul> <li>Al instalar el m\u00f3dulo, se cargan autom\u00e1ticamente todos los datos</li> <li>Tienes 4-5 categor\u00edas de platos</li> <li>Tienes 15-20 ingredientes (algunos marcados como alergenos)</li> <li>Tienes 30-40 platos con categor\u00edas, precios y tiempos asignados</li> <li>Los platos tienen ingredientes relacionados</li> <li>Tienes 5-6 men\u00fas con diferentes estados y fechas</li> <li>Los men\u00fas tienen platos asignados</li> <li>Tienes 15-20 camareros con turnos y secciones</li> <li>Algunos camareros tienen men\u00fas de especialidad</li> <li>No hay errores en los logs de Odoo</li> <li>Las vistas lista muestran los datos correctamente con las decoraciones</li> </ul> <p>Estructura Final Esperada</p> <p>Despu\u00e9s de instalar el m\u00f3dulo con datos demo:</p> <p>Categor\u00edas: 4 categor\u00edas b\u00e1sicas</p> <p>Ingredientes: 20 ingredientes variados</p> <ul> <li>8 alergenos: Gluten, Huevo, Leche, Frutos secos, Soja, Pescado, Marisco, Mostaza</li> <li>12 no alergenos: Tomate, Lechuga, Cebolla, Aceite, etc.</li> </ul> <p>Platos: 40 platos distribuidos</p> <ul> <li>10 Entrantes</li> <li>15 Principales</li> <li>10 Postres</li> <li>5 Bebidas</li> <li>Cada uno con 3-6 ingredientes</li> </ul> <p>Men\u00fas: 6 men\u00fas variados</p> <ul> <li>2 activos (fechas actuales)</li> <li>2 finalizados (fechas pasadas)</li> <li>2 futuros (fechas pr\u00f3ximas)</li> <li>Cada uno con 3-5 platos</li> </ul> <p>Camareros: 20 camareros</p> <ul> <li>Distribuidos equitativamente en 3 turnos</li> <li>4 secciones diferentes</li> <li>60% con men\u00fas de especialidad asignados</li> </ul>"},{"location":"6_9_datos_demo/#pruebas-adicionales-recomendadas","title":"Pruebas Adicionales Recomendadas","text":"<ol> <li> <p>Desinstalaci\u00f3n limpia: Desinstala el m\u00f3dulo y verifica que los datos demo se eliminan</p> </li> <li> <p>Reinstalaci\u00f3n: Reinstala y verifica que los datos se cargan de nuevo correctamente</p> </li> <li> <p>Referencias: Abre varios registros y verifica que las relaciones funcionan (plato \u2192 ingredientes, men\u00fa \u2192 platos, etc.)</p> </li> <li> <p>Decoraciones: Verifica que las decoraciones de las vistas lista funcionan con los datos demo</p> </li> <li> <p>Filtros: Prueba los filtros en las vistas (solo disponibles, solo alergenos, etc.)</p> </li> <li> <p>Scripts: Modifica el CSV, regenera el XML con el script y verifica que los cambios se aplican</p> </li> <li> <p>Base de datos sin demo: Crea una base de datos SIN datos demo, instala tu m\u00f3dulo y verifica que no se cargan los datos (el m\u00f3dulo funciona pero vac\u00edo)</p> </li> </ol> <p>Con estos datos demo completos, tendr\u00e1s un restaurante totalmente funcional y listo para demostrar o probar todas las caracter\u00edsticas de tu m\u00f3dulo.</p>"},{"location":"7_1_introduccion_odoo/","title":"Introducci\u00f3n a Odoo","text":""},{"location":"7_1_introduccion_odoo/#introduccion-a-odoo","title":"Introducci\u00f3n a Odoo","text":"<p>Odoo es un framework de desarrollo de aplicaciones empresariales de c\u00f3digo abierto que utiliza Python y PostgreSQL. Su dise\u00f1o modular permite crear aplicaciones de negocio completas mediante la extensi\u00f3n y personalizaci\u00f3n de m\u00f3dulos existentes, evitando tener que desarrollar todo desde cero.</p> <p>En este cap\u00edtulo conocer\u00e1s la arquitectura de Odoo, entender\u00e1s c\u00f3mo funciona el ORM (Object-Relational Mapping) y aprender\u00e1s a crear y estructurar m\u00f3dulos correctamente. Estos conceptos son fundamentales para el desarrollo en Odoo, ya que todo lo que construyas se basar\u00e1 en esta base.</p>"},{"location":"7_1_introduccion_odoo/#arquitectura-de-odoo","title":"Arquitectura de Odoo","text":"<p>Odoo sigue el patr\u00f3n de dise\u00f1o Modelo-Vista-Controlador (MVC), separando la l\u00f3gica de negocio, la presentaci\u00f3n y el control de flujo en componentes independientes.</p>"},{"location":"7_1_introduccion_odoo/#componentes-principales","title":"Componentes Principales","text":"<p>Modelo (Model)</p> <p>Representa la estructura de datos y la l\u00f3gica de negocio. Los modelos se definen como clases Python que el ORM mapea autom\u00e1ticamente a tablas PostgreSQL. Cada modelo define:</p> <ul> <li>Campos de datos (nombre, tipo, restricciones)</li> <li>Relaciones con otros modelos</li> <li>M\u00e9todos de negocio</li> <li>Validaciones y restricciones</li> </ul> <p>Vista (View)</p> <p>Define c\u00f3mo se presenta la informaci\u00f3n al usuario. Las vistas se declaran en archivos XML y pueden ser de varios tipos: formularios, listas, kanban, calendarios, gr\u00e1ficos, etc. Las vistas son independientes de los modelos, permitiendo m\u00faltiples formas de visualizar los mismos datos.</p> <p>Controlador (Controller)</p> <p>Gestiona la interacci\u00f3n entre el modelo y la vista. En Odoo, el controlador incluye:</p> <ul> <li>M\u00e9todos del ORM (create, read, update, delete)</li> <li>Decoradores que modifican el comportamiento (@api.depends, @api.onchange, etc.)</li> <li>Controladores web para rutas HTTP personalizadas</li> <li>L\u00f3gica de negocio en m\u00e9todos Python</li> </ul> Arquitectura MVC y ORM en Odoo"},{"location":"7_1_introduccion_odoo/#flujo-de-trabajo","title":"Flujo de Trabajo","text":"<p>Cuando un usuario interact\u00faa con Odoo:</p> <ol> <li>El cliente web (JavaScript) env\u00eda una petici\u00f3n al servidor</li> <li>El servidor Odoo procesa la petici\u00f3n a trav\u00e9s del controlador</li> <li>El ORM traduce las operaciones Python a consultas SQL</li> <li>PostgreSQL ejecuta las consultas y devuelve resultados</li> <li>El ORM convierte los resultados en objetos Python</li> <li>El servidor procesa los datos y renderiza la vista correspondiente</li> <li>El cliente recibe y muestra la informaci\u00f3n al usuario</li> </ol> <p>Este flujo permite desarrollar aplicaciones sin escribir SQL directamente, simplificando enormemente el desarrollo y mantenimiento.</p>"},{"location":"7_1_introduccion_odoo/#orm-object-relational-mapping","title":"ORM: Object-Relational Mapping","text":"<p>El ORM es una de las caracter\u00edsticas m\u00e1s potentes de Odoo. Act\u00faa como una capa de abstracci\u00f3n entre Python y PostgreSQL, permitiendo trabajar con datos como si fueran objetos Python en lugar de tablas y filas.</p>"},{"location":"7_1_introduccion_odoo/#por-que-es-importante-el-orm","title":"\u00bfPor Qu\u00e9 es Importante el ORM?","text":"<p>Sin ORM (SQL directo):</p> <pre><code>SELECT p.name, p.email, c.name as country \nFROM res_partner p \nLEFT JOIN res_country c ON p.country_id = c.id \nWHERE p.is_company = true AND p.customer = true;\n</code></pre> <p>Con ORM (Python):</p> <pre><code>partners = self.env['res.partner'].search([\n    ('is_company', '=', True),\n    ('customer', '=', True)\n])\nfor partner in partners:\n    print(partner.name, partner.email, partner.country_id.name)\n</code></pre> <p>El c\u00f3digo con ORM es:</p> <ul> <li>M\u00e1s legible y mantenible</li> <li>Menos propenso a errores</li> <li>Independiente del motor de base de datos</li> <li>Autom\u00e1ticamente seguro contra SQL injection</li> <li>Gestiona autom\u00e1ticamente las relaciones entre tablas</li> </ul>"},{"location":"7_1_introduccion_odoo/#funcionalidades-del-orm","title":"Funcionalidades del ORM","text":"<p>El ORM de Odoo proporciona:</p> <p>Mapeo autom\u00e1tico de tablas</p> <p>Cada modelo Python se convierte en una tabla PostgreSQL sin necesidad de crear las tablas manualmente. Los cambios en el modelo se reflejan autom\u00e1ticamente en la base de datos al actualizar el m\u00f3dulo.</p> <p>Operaciones CRUD simplificadas</p> <ul> <li><code>create()</code>: Crear registros</li> <li><code>search()</code>: Buscar y leer registros</li> <li><code>write()</code>: Actualizar registros</li> <li><code>unlink()</code>: Eliminar registros</li> </ul> <p>Gesti\u00f3n autom\u00e1tica de relaciones</p> <p>Los campos Many2one, One2many y Many2many se traducen autom\u00e1ticamente en claves for\u00e1neas y tablas intermedias, sin necesidad de gestionarlas manualmente.</p> <p>Validaciones y restricciones</p> <p>Define validaciones en Python que el ORM ejecuta autom\u00e1ticamente antes de guardar datos, asegurando la integridad sin triggers SQL.</p> <p>Ejemplo b\u00e1sico de un modelo:</p> <pre><code>from odoo import models, fields, api\nfrom odoo.exceptions import ValidationError\n\nclass Producto(models.Model):\n    _name = 'mi.producto'\n    _description = 'Modelo de ejemplo de producto'\n\n    nombre = fields.Char(string='Nombre', required=True)\n    precio = fields.Float(string='Precio', required=True)\n    descripcion = fields.Text(string='Descripci\u00f3n')\n    fecha_alta = fields.Date(string='Fecha de Alta', default=fields.Date.today)\n    activo = fields.Boolean(string='Activo', default=True)\n\n    @api.constrains('precio')\n    def _check_precio(self):\n        for producto in self:\n            if producto.precio &lt; 0:\n                raise ValidationError('El precio no puede ser negativo.')\n</code></pre> <p>En este ejemplo:</p> <ul> <li>El modelo <code>mi.producto</code> se convierte en la tabla <code>mi_producto</code></li> <li>Los campos se crean autom\u00e1ticamente con los tipos correctos</li> <li>La validaci\u00f3n se ejecuta autom\u00e1ticamente antes de guardar</li> <li>El ORM gestiona todo el ciclo de vida del dato</li> </ul>"},{"location":"7_1_introduccion_odoo/#estructura-de-un-modulo","title":"Estructura de un M\u00f3dulo","text":"<p>Todo el desarrollo en Odoo se realiza mediante m\u00f3dulos. Un m\u00f3dulo es un paquete Python con una estructura espec\u00edfica que Odoo puede cargar e integrar en el sistema.</p>"},{"location":"7_1_introduccion_odoo/#componentes-de-un-modulo","title":"Componentes de un M\u00f3dulo","text":"<p>Un m\u00f3dulo t\u00edpico tiene esta estructura:</p> <pre><code>mi_modulo/\n\u251c\u2500\u2500 __init__.py              # Importa los paquetes del m\u00f3dulo\n\u251c\u2500\u2500 __manifest__.py          # Define metadatos y dependencias\n\u251c\u2500\u2500 models/                  # Modelos (l\u00f3gica de negocio)\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 mi_modelo.py\n\u251c\u2500\u2500 views/                   # Vistas XML\n\u2502   \u251c\u2500\u2500 mi_modelo_views.xml\n\u2502   \u2514\u2500\u2500 menu.xml\n\u251c\u2500\u2500 security/                # Permisos y grupos\n\u2502   \u2514\u2500\u2500 ir.model.access.csv\n\u251c\u2500\u2500 data/                    # Datos iniciales\n\u2502   \u2514\u2500\u2500 datos_iniciales.xml\n\u251c\u2500\u2500 demo/                    # Datos de demostraci\u00f3n\n\u2502   \u2514\u2500\u2500 demo_data.xml\n\u251c\u2500\u2500 static/                  # Archivos est\u00e1ticos\n\u2502   \u2514\u2500\u2500 description/\n\u2502       \u2514\u2500\u2500 icon.png\n\u2514\u2500\u2500 controllers/             # Controladores web (opcional)\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 main.py\n</code></pre>"},{"location":"7_1_introduccion_odoo/#archivos-fundamentales","title":"Archivos Fundamentales","text":""},{"location":"7_1_introduccion_odoo/#__init__py","title":"<code>__init__.py</code>","text":"<p>Archivo Python que inicializa el m\u00f3dulo importando los paquetes necesarios:</p> <p>__init_.py</p> <pre><code># -*- coding: utf-8 -*-\n\nfrom . import models\nfrom . import controllers\n</code></pre>"},{"location":"7_1_introduccion_odoo/#__manifest__py","title":"<code>__manifest__.py</code>","text":"<p>Archivo Python que define los metadatos del m\u00f3dulo:</p> <p>manifest.py</p> <pre><code># -*- coding: utf-8 -*-\n{\n    'name': 'Mi M\u00f3dulo',\n    'version': '18.0.1.0.0',\n    'category': 'Custom',\n    'summary': 'Breve descripci\u00f3n del m\u00f3dulo',\n    'description': \"\"\"\n        Descripci\u00f3n detallada del m\u00f3dulo.\n        Puede ocupar varias l\u00edneas.\n    \"\"\",\n    'author': 'Tu Nombre',\n    'website': 'https://www.ejemplo.com',\n    'license': 'LGPL-3',\n    'depends': [\n        'base',\n        'sale',\n    ],\n    'data': [\n        'security/ir.model.access.csv',\n        'views/mi_modelo_views.xml',\n        'views/menu.xml',\n        'data/datos_iniciales.xml',\n    ],\n    'demo': [\n        'demo/demo_data.xml',\n    ],\n    'installable': True,\n    'application': True,\n    'auto_install': False,\n}\n</code></pre> <p>Campos importantes del manifest:</p> Campo Descripci\u00f3n <code>name</code> Nombre del m\u00f3dulo (visible en interfaz) <code>version</code> Versi\u00f3n en formato <code>{odoo}.{mayor}.{menor}.{patch}</code> <code>depends</code> Lista de m\u00f3dulos requeridos <code>data</code> Archivos XML/CSV a cargar al instalar <code>demo</code> Datos de demostraci\u00f3n (opcionales) <code>installable</code> Si est\u00e1 disponible para instalaci\u00f3n <code>application</code> Si aparece como aplicaci\u00f3n principal <code>auto_install</code> Si se instala autom\u00e1ticamente"},{"location":"7_1_introduccion_odoo/#ubicacion-de-modulos","title":"Ubicaci\u00f3n de M\u00f3dulos","text":"<p>Los m\u00f3dulos deben estar en directorios especificados en la configuraci\u00f3n de Odoo mediante el par\u00e1metro <code>--addons-path</code> o en el archivo de configuraci\u00f3n:</p> <pre><code>[options]\naddons_path = /ruta/addons,/ruta/mi_modulo,/ruta/extra-addons\n</code></pre> <p>Odoo busca m\u00f3dulos en todos los directorios especificados. Puedes tener m\u00faltiples directorios para organizar m\u00f3dulos est\u00e1ndar, personalizados y de terceros.</p>"},{"location":"7_1_introduccion_odoo/#crear-modulos-con-scaffold","title":"Crear M\u00f3dulos con Scaffold","text":"<p>Odoo proporciona el comando <code>scaffold</code> para generar la estructura b\u00e1sica de un m\u00f3dulo autom\u00e1ticamente, evitando tener que crear todos los archivos manualmente.</p>"},{"location":"7_1_introduccion_odoo/#sintaxis-basica","title":"Sintaxis B\u00e1sica","text":"<pre><code>odoo scaffold nombre_modulo /ruta/donde/crear\n</code></pre> <p>Por ejemplo, para crear un m\u00f3dulo en el directorio de addons:</p> <pre><code>odoo scaffold mi_gestion /mnt/extra-addons\n</code></pre> <p>Esto genera una estructura completa con:</p> <ul> <li>Archivos <code>__init__.py</code> y <code>__manifest__.py</code> configurados</li> <li>Carpetas <code>models</code>, <code>views</code>, <code>security</code>, <code>controllers</code>, <code>demo</code></li> <li>Ejemplos de modelo, vista y controlador</li> <li>Archivo de permisos b\u00e1sico</li> </ul>"},{"location":"7_1_introduccion_odoo/#plantillas-de-scaffold","title":"Plantillas de Scaffold","text":"<p>Odoo incluye plantillas predefinidas en el directorio de instalaci\u00f3n, normalmente en <code>cli/templates/</code>. Las plantillas usan el motor Jinja2 para generar c\u00f3digo din\u00e1mico.</p> Plantillas incluidas en Odoo para scaffold <p>Plantillas disponibles:</p> <ul> <li><code>default</code>: M\u00f3dulo est\u00e1ndar con modelo, vista y controlador de ejemplo</li> <li><code>theme</code>: Para crear temas de sitio web</li> </ul> <p>Puedes especificar la plantilla con el par\u00e1metro <code>-t</code>:</p> <pre><code>odoo scaffold mi_modulo /ruta/addons -t default\n</code></pre>"},{"location":"7_1_introduccion_odoo/#personalizar-plantillas","title":"Personalizar Plantillas","text":"<p>Si siempre creas m\u00f3dulos con la misma estructura (tu logo, copyright, estructura espec\u00edfica), puedes crear tu propia plantilla:</p> <ol> <li>Copia el directorio <code>default</code> a uno nuevo (ej: <code>mi_plantilla</code>)</li> <li>Modifica los archivos seg\u00fan tus necesidades</li> <li>\u00dasala al crear m\u00f3dulos:</li> </ol> <pre><code>odoo scaffold mi_modulo /ruta/addons -t mi_plantilla\n</code></pre>"},{"location":"7_1_introduccion_odoo/#despues-del-scaffold","title":"Despu\u00e9s del Scaffold","text":"<p>Una vez generado el m\u00f3dulo:</p> <ol> <li> <p>Ajusta permisos si trabajas con Docker o entornos multi-usuario:    </p><pre><code>chmod -R 777 /ruta/mi_modulo\n</code></pre><p></p> </li> <li> <p>Personaliza el manifest con informaci\u00f3n real del m\u00f3dulo</p> </li> <li> <p>Reinicia Odoo para que detecte el nuevo m\u00f3dulo:    </p><pre><code>docker compose restart odoo\n</code></pre><p></p> </li> <li> <p>Actualiza la lista de aplicaciones en Odoo (Modo desarrollador \u2192 Apps \u2192 Update Apps List)</p> </li> <li> <p>Instala el m\u00f3dulo desde la interfaz</p> </li> </ol>"},{"location":"7_1_introduccion_odoo/#tipos-de-modelos-en-odoo","title":"Tipos de Modelos en Odoo","text":"<p>Odoo proporciona tres tipos base de modelos seg\u00fan el prop\u00f3sito y persistencia de los datos:</p>"},{"location":"7_1_introduccion_odoo/#modelsmodel","title":"models.Model","text":"<p>Modelos persistentes que representan tablas reales en PostgreSQL. Los datos se guardan permanentemente en la base de datos.</p> <p>ejemplo</p> <pre><code>class Cliente(models.Model):\n    _name = 'mi.cliente'\n    _description = 'Clientes de la empresa'\n\n    nombre = fields.Char(required=True)\n    email = fields.Char()\n</code></pre> <p>Uso t\u00edpico: Entidades de negocio principales (clientes, productos, pedidos, facturas, etc.)</p>"},{"location":"7_1_introduccion_odoo/#modelstransientmodel","title":"models.TransientModel","text":"<p>Modelos temporales para datos que solo necesitan existir durante una sesi\u00f3n. Los registros se eliminan autom\u00e1ticamente despu\u00e9s de cierto tiempo (por defecto 7 d\u00edas).</p> <p>ejemplo</p> <pre><code>class AsistenteExportacion(models.TransientModel):\n    _name = 'mi.asistente.exportacion'\n    _description = 'Asistente para exportar datos'\n\n    formato = fields.Selection([('csv', 'CSV'), ('xlsx', 'Excel')])\n    fecha_desde = fields.Date()\n</code></pre> <p>Uso t\u00edpico: Wizards (asistentes), formularios temporales, di\u00e1logos de configuraci\u00f3n</p>"},{"location":"7_1_introduccion_odoo/#modelsabstractmodel","title":"models.AbstractModel","text":"<p>Modelos abstractos que no crean tabla en la base de datos. Se usan como plantillas para que otros modelos hereden funcionalidad com\u00fan.</p> <p>ejemplo</p> <pre><code>class ModeloConTimestamp(models.AbstractModel):\n    _name = 'mi.modelo.timestamp'\n    _description = 'Modelo base con campos de auditor\u00eda'\n\n    fecha_creacion = fields.Datetime(default=fields.Datetime.now)\n    usuario_creacion = fields.Many2one('res.users', default=lambda self: self.env.user)\n</code></pre> <p>Uso t\u00edpico: Definir funcionalidades reutilizables sin duplicar c\u00f3digo</p>"},{"location":"7_1_introduccion_odoo/#comparativa-de-tipos-de-modelos","title":"Comparativa de Tipos de Modelos","text":"Caracter\u00edstica Model TransientModel AbstractModel Crea tabla en BD S\u00ed S\u00ed No Persistencia Permanente Temporal No aplica Eliminaci\u00f3n autom\u00e1tica No S\u00ed (configurable) No aplica Uso principal Datos reales Wizards/Di\u00e1logos Funcionalidad compartida Heredable S\u00ed S\u00ed S\u00ed Ejemplo Productos, Clientes Asistente de importaci\u00f3n Modelo base con auditor\u00eda"},{"location":"7_1_introduccion_odoo/#campos-reservados-del-orm","title":"Campos Reservados del ORM","text":"<p>Odoo crea autom\u00e1ticamente ciertos campos en todos los modelos que heredan de <code>models.Model</code>. Estos campos proporcionan funcionalidades est\u00e1ndar y trazabilidad.</p>"},{"location":"7_1_introduccion_odoo/#campos-automaticos","title":"Campos Autom\u00e1ticos","text":"<p>id</p> <p>Clave primaria autoincremental generada por PostgreSQL. \u00danico para cada registro en su tabla.</p> <pre><code># Acceder al ID de un registro\nprint(registro.id)  # 42\n</code></pre> <p>create_date</p> <p>Fecha y hora de creaci\u00f3n del registro (tipo Datetime). Se establece autom\u00e1ticamente al crear.</p> <p>create_uid</p> <p>Referencia (Many2one) al usuario que cre\u00f3 el registro. Apunta al modelo <code>res.users</code>.</p> <pre><code>print(registro.create_uid.name)  # \"Administrator\"\n</code></pre> <p>write_date</p> <p>Fecha y hora de la \u00faltima modificaci\u00f3n del registro. Se actualiza autom\u00e1ticamente en cada <code>write()</code>.</p> <p>write_uid</p> <p>Referencia al usuario que realiz\u00f3 la \u00faltima modificaci\u00f3n.</p>"},{"location":"7_1_introduccion_odoo/#campos-especiales-opcionales","title":"Campos Especiales Opcionales","text":"<p>Algunos campos tienen comportamiento especial si los defines en tu modelo:</p> <p>name</p> <p>Campo usado como identificador visible del registro. Si existe, Odoo lo usa:</p> <ul> <li>En referencias Many2one (muestra el name en lugar del ID)</li> <li>Como t\u00edtulo en formularios</li> <li>En b\u00fasquedas por defecto</li> </ul> <pre><code>nombre = fields.Char(string='Nombre', required=True)\n</code></pre> <p>Si no defines un campo <code>name</code>, puedes especificar cu\u00e1l usar con <code>_rec_name</code>:</p> <pre><code>_rec_name = 'codigo'\ncodigo = fields.Char(string='C\u00f3digo')\n</code></pre> <p>active</p> <p>Campo booleano que permite archivar registros sin eliminarlos. Si existe:</p> <ul> <li>Los registros con <code>active=False</code> no aparecen en b\u00fasquedas por defecto</li> <li>Aparece un bot\u00f3n \"Archivar/Desarchivar\" en la interfaz</li> </ul> <pre><code>active = fields.Boolean(string='Activo', default=True)\n</code></pre> <p>sequence</p> <p>Campo entero para ordenar manualmente los registros. \u00datil en listas donde el usuario quiere controlar el orden.</p> <pre><code>sequence = fields.Integer(string='Secuencia', default=10)\n\n# Especificar orden por defecto en el modelo\n_order = 'sequence, name'\n</code></pre>"},{"location":"7_1_introduccion_odoo/#inspeccionar-modelos-en-odoo","title":"Inspeccionar Modelos en Odoo","text":"<p>Cuando desarrollas en Odoo, es \u00fatil poder inspeccionar los modelos existentes, sus campos y relaciones. Esto te ayuda a entender la estructura del sistema y aprovechar modelos est\u00e1ndar.</p>"},{"location":"7_1_introduccion_odoo/#desde-la-interfaz-modo-desarrollador","title":"Desde la Interfaz (Modo Desarrollador)","text":"<p>Activa el modo desarrollador desde Ajustes \u2192 Activar modo desarrollador. Luego:</p> <p>Ver todos los modelos:</p> <ol> <li>Ve a Ajustes \u2192 T\u00e9cnico \u2192 Estructura de la base de datos \u2192 Modelos</li> <li>Busca el modelo por nombre (ej: <code>res.partner</code>)</li> <li>Haz clic para ver sus detalles</li> </ol> <p>Informaci\u00f3n disponible:</p> <ul> <li>Lista completa de campos y sus tipos</li> <li>Relaciones con otros modelos</li> <li>M\u00f3dulos que extienden el modelo</li> <li>Vistas asociadas</li> <li>Permisos configurados</li> </ul> <p>Ver External IDs:</p> <p>Los identificadores externos son cruciales para referenciar registros en XML:</p> <ol> <li>Ve a Ajustes \u2192 T\u00e9cnico \u2192 Secuencias e identificadores \u2192 Identificadores externos</li> <li>Filtra por modelo o busca por Complete ID</li> </ol> <p>Ver metadatos de un registro:</p> <p>En cualquier formulario (modo desarrollador):</p> <ol> <li>Haz clic en el icono de \"bug\" (depuraci\u00f3n)</li> <li>Selecciona \"Ver metadatos\"</li> <li>Ver\u00e1s: ID, External ID, usuario de creaci\u00f3n, fechas, etc.</li> </ol>"},{"location":"7_1_introduccion_odoo/#desde-postgresql","title":"Desde PostgreSQL","text":"<p>Puedes conectarte directamente a la base de datos para inspeccionar tablas:</p> <p>ejemplo</p> <pre><code># Entrar en el contenedor de PostgreSQL\ndocker exec -it postgres_container bash\n\n# Conectar a la base de datos\npsql -U odoo -d nombre_base_datos\n\n# Ver todas las tablas\n\\dt\n\n# Ver estructura de una tabla\n\\d nombre_tabla\n\n# Buscar tablas por patr\u00f3n\n\\dt *partner*\n\n# Ver los campos de un modelo\nSELECT column_name, data_type \nFROM information_schema.columns \nWHERE table_name = 'res_partner';\n</code></pre>"},{"location":"7_1_introduccion_odoo/#desde-python-shell","title":"Desde Python Shell","text":"<p>Odoo incluye un shell interactivo para ejecutar c\u00f3digo Python directamente:</p> <pre><code># Iniciar shell de Odoo\nodoo shell -d nombre_base_datos\n\n# O si usas Docker\ndocker exec -it odoo_container odoo shell -d nombre_base_datos\n</code></pre> <p>Ejemplos de uso en el shell</p> <pre><code># Acceder a un modelo\nPartner = env['res.partner']\n\n# Buscar registros\npartners = Partner.search([('is_company', '=', True)])\n\n# Ver campos de un modelo\nPartner._fields.keys()\n\n# Ver informaci\u00f3n de un campo espec\u00edfico\nPartner._fields['name']\n\n# Buscar un registro por External ID\nenv.ref('base.main_partner')\n\n# Hacer cambios persistentes\nenv.cr.commit()\n</code></pre> <p>Cambios en el Shell</p> <p>Los cambios realizados en el shell no son persistentes hasta que ejecutes <code>env.cr.commit()</code>. Esto previene cambios accidentales en producci\u00f3n.</p> <p>Buenas Pr\u00e1cticas</p> <p>Al desarrollar m\u00f3dulos en Odoo, sigue estas recomendaciones:</p> <p>Nomenclatura de m\u00f3dulos</p> <ul> <li>Usa min\u00fasculas y guiones bajos: <code>mi_modulo_gestion</code></li> <li>Nombre descriptivo del prop\u00f3sito</li> <li>Evita nombres gen\u00e9ricos que puedan colisionar</li> </ul> <p>Nomenclatura de modelos</p> <ul> <li>Usa el prefijo del m\u00f3dulo: <code>mi_modulo.cliente</code></li> <li>Nombre en singular: <code>product.product</code> no <code>product.products</code></li> <li>Usa puntos para separar: <code>mi_modulo.sub_categoria</code></li> </ul> <p>Estructura de archivos</p> <ul> <li>Organiza por tipo: models/, views/, controllers/</li> <li>Un archivo por modelo en modelos complejos</li> <li>Nombra archivos descriptivamente: <code>cliente.py</code>, <code>cliente_views.xml</code></li> </ul> <p>Dependencias</p> <ul> <li>Declara todas las dependencias en el manifest</li> <li>No dependas de m\u00f3dulos opcionales sin validar</li> <li>Mant\u00e9n las dependencias al m\u00ednimo necesario</li> </ul> <p>Documentaci\u00f3n</p> <ul> <li>A\u00f1ade docstrings a modelos y m\u00e9todos complejos</li> <li>Documenta campos no obvios con el atributo <code>help</code></li> <li>Mant\u00e9n actualizado el manifest con descripci\u00f3n clara</li> </ul> <p>Versionado</p> <ul> <li>Sigue el formato <code>{odoo_version}.{major}.{minor}.{patch}</code></li> <li>Incrementa la versi\u00f3n en cada actualizaci\u00f3n</li> <li>Documenta cambios importantes en el README</li> </ul> <p>Testing</p> <ul> <li>Usa datos de demo para pruebas</li> <li>No mezcles datos de demo con datos necesarios</li> <li>Valida que el m\u00f3dulo se desinstala limpiamente</li> </ul>"},{"location":"7_2_desarrollo_de_modelos/","title":"Desarrollo de Modelos","text":""},{"location":"7_2_desarrollo_de_modelos/#desarrollo-de-modelos","title":"Desarrollo de Modelos","text":"<p>Los modelos son el coraz\u00f3n de cualquier aplicaci\u00f3n Odoo. Definen la estructura de datos, las relaciones entre entidades y las reglas de negocio que garantizan la integridad de la informaci\u00f3n. En este cap\u00edtulo aprender\u00e1s a crear modelos robustos, desde los campos m\u00e1s simples hasta las validaciones m\u00e1s complejas.</p> <p>Un modelo bien dise\u00f1ado facilita el desarrollo de vistas, simplifica el mantenimiento y asegura que los datos se mantengan consistentes a lo largo del tiempo. Dominar los modelos es esencial para desarrollar aplicaciones empresariales de calidad en Odoo.</p>"},{"location":"7_2_desarrollo_de_modelos/#definicion-basica-de-un-modelo","title":"Definici\u00f3n B\u00e1sica de un Modelo","text":"<p>Todo modelo en Odoo es una clase Python que hereda de <code>models.Model</code> y se declara con ciertos atributos obligatorios.</p> <p>Estructura M\u00ednima</p> <pre><code>from odoo import models, fields, api\n\nclass MiModelo(models.Model):\n    _name = 'mi.modulo.mimodelo'\n    _description = 'Descripci\u00f3n del modelo'\n\n    nombre = fields.Char(string='Nombre', required=True)\n</code></pre> <p>Atributos fundamentales:</p> <ul> <li><code>_name</code>: Identificador \u00fanico del modelo (obligatorio). Se convierte en el nombre de la tabla</li> <li><code>_description</code>: Descripci\u00f3n legible del modelo (recomendado para accesibilidad)</li> </ul>"},{"location":"7_2_desarrollo_de_modelos/#atributos-adicionales-del-modelo","title":"Atributos Adicionales del Modelo","text":"<p>Odoo proporciona varios atributos para configurar el comportamiento del modelo:</p> <p>_order</p> <p>Define el orden por defecto de los registros en b\u00fasquedas y listas:</p> <p>ejemplo</p> <pre><code>_order = 'nombre, fecha_creacion desc'\n</code></pre> <p>Puedes especificar varios campos separados por comas. Usa <code>desc</code> para orden descendente.</p> <p>_rec_name</p> <p>Especifica qu\u00e9 campo usar como identificador visible si no tienes un campo <code>name</code>:</p> <p>ejemplo</p> <pre><code>_rec_name = 'codigo'\ncodigo = fields.Char(string='C\u00f3digo')\n</code></pre> <p>_sql_constraints</p> <p>Define restricciones a nivel de base de datos:</p> <p>ejemplo</p> <pre><code>_sql_constraints = [\n    ('nombre_unico', 'unique(nombre)', 'El nombre debe ser \u00fanico'),\n    ('codigo_unico', 'unique(codigo)', 'Ya existe un registro con ese c\u00f3digo'),\n]\n</code></pre> <p>_inherit</p> <p>Para extender modelos existentes (se ver\u00e1 en detalle en el cap\u00edtulo de Herencia):</p> <p>ejemplo</p> <pre><code>_inherit = 'res.partner'  # Extiende el modelo de contactos\n</code></pre> <p>Ejemplo Completo</p> <pre><code>from odoo import models, fields, api\nfrom odoo.exceptions import ValidationError\n\nclass Producto(models.Model):\n    _name = 'inventario.producto'\n    _description = 'Productos del inventario'\n    _order = 'codigo, nombre'\n    _rec_name = 'codigo'\n\n    _sql_constraints = [\n        ('codigo_unico', 'unique(codigo)', 'El c\u00f3digo de producto debe ser \u00fanico'),\n    ]\n\n    codigo = fields.Char(string='C\u00f3digo', required=True, index=True)\n    nombre = fields.Char(string='Nombre', required=True)\n    descripcion = fields.Text(string='Descripci\u00f3n')\n    precio = fields.Float(string='Precio', digits=(10, 2))\n    activo = fields.Boolean(string='Activo', default=True)\n\n    @api.constrains('precio')\n    def _check_precio(self):\n        for producto in self:\n            if producto.precio &lt; 0:\n                raise ValidationError('El precio no puede ser negativo')\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#tipos-de-campos-basicos","title":"Tipos de Campos B\u00e1sicos","text":"<p>Odoo proporciona diversos tipos de campos para representar diferentes tipos de datos. Todos los campos se definen en el namespace <code>fields</code>.</p>"},{"location":"7_2_desarrollo_de_modelos/#campos-de-texto","title":"Campos de Texto","text":"<p>Char</p> <p>Texto corto de una sola l\u00ednea. Usa el atributo <code>size</code> para limitar la longitud:</p> <p>ejemplo</p> <pre><code>nombre = fields.Char(string='Nombre', size=100, required=True)\nemail = fields.Char(string='Email', size=255)\ncodigo_postal = fields.Char(string='C\u00f3digo Postal', size=10)\n</code></pre> <p>Text</p> <p>Texto largo multil\u00ednea sin l\u00edmite de caracteres:</p> <p>ejemplo</p> <pre><code>descripcion = fields.Text(string='Descripci\u00f3n')\nnotas = fields.Text(string='Notas internas')\n</code></pre> <p>Html</p> <p>Texto enriquecido con formato HTML. El cliente web proporciona un editor WYSIWYG:</p> <p>ejemplo</p> <pre><code>contenido = fields.Html(string='Contenido de la p\u00e1gina')\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#campos-numericos","title":"Campos Num\u00e9ricos","text":"<p>Integer</p> <p>N\u00fameros enteros:</p> <p>ejemplo</p> <pre><code>cantidad = fields.Integer(string='Cantidad', default=0)\nstock = fields.Integer(string='Stock disponible')\n</code></pre> <p>Float</p> <p>N\u00fameros decimales. Usa <code>digits=(total, decimales)</code> para precisi\u00f3n:</p> <p>ejemplo</p> <pre><code>precio = fields.Float(string='Precio', digits=(10, 2))  # 10 d\u00edgitos totales, 2 decimales\npeso = fields.Float(string='Peso (kg)', digits=(8, 3))\n</code></pre> <p>Monetary</p> <p>N\u00famero decimal optimizado para importes monetarios. Requiere un campo de moneda asociado:</p> <p>ejemplo</p> <pre><code>moneda_id = fields.Many2one('res.currency', string='Moneda')\nprecio = fields.Monetary(string='Precio', currency_field='moneda_id')\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#campos-de-fecha-y-hora","title":"Campos de Fecha y Hora","text":"<p>Date</p> <p>Solo fecha, sin hora:</p> <p>ejemplo</p> <pre><code>fecha_nacimiento = fields.Date(string='Fecha de Nacimiento')\nfecha_alta = fields.Date(string='Fecha de Alta', default=fields.Date.today)\n</code></pre> <p>Datetime</p> <p>Fecha y hora completas:</p> <p>ejemplo</p> <pre><code>fecha_creacion = fields.Datetime(string='Fecha de Creaci\u00f3n', default=fields.Datetime.now)\nfecha_inicio = fields.Datetime(string='Fecha de Inicio')\n</code></pre> <p>Valores por defecto con fechas</p> <p>No uses <code>default=fields.Date.today()</code> (con par\u00e9ntesis) porque ejecutar\u00eda la funci\u00f3n al cargar el m\u00f3dulo. Usa <code>default=fields.Date.today</code> (sin par\u00e9ntesis) o una lambda: <code>default=lambda self: fields.Date.today()</code></p>"},{"location":"7_2_desarrollo_de_modelos/#campos-booleanos","title":"Campos Booleanos","text":"<p>Boolean</p> <p>Valores verdadero/falso:</p> <p>ejemplo</p> <pre><code>activo = fields.Boolean(string='Activo', default=True)\nes_cliente = fields.Boolean(string='Es Cliente')\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#campos-de-seleccion","title":"Campos de Selecci\u00f3n","text":"<p>Selection</p> <p>Lista cerrada de opciones. Puede definirse como lista de tuplas o funci\u00f3n:</p> <p>ejemplo</p> <pre><code># Con lista de tuplas\nestado = fields.Selection([\n    ('borrador', 'Borrador'),\n    ('confirmado', 'Confirmado'),\n    ('enviado', 'Enviado'),\n    ('entregado', 'Entregado'),\n], string='Estado', default='borrador')\n\n# Con funci\u00f3n\ntipo = fields.Selection(selection='_get_tipos', string='Tipo')\n\n@api.model\ndef _get_tipos(self):\n    return [\n        ('tipo1', 'Tipo 1'),\n        ('tipo2', 'Tipo 2'),\n    ]\n</code></pre> <p>Usar una funci\u00f3n es \u00fatil cuando las opciones dependen de datos din\u00e1micos o configuraciones.</p>"},{"location":"7_2_desarrollo_de_modelos/#campos-binarios","title":"Campos Binarios","text":"<p>Binary</p> <p>Almacena archivos binarios codificados en base64:</p> <p>ejemplo</p> <pre><code>archivo_adjunto = fields.Binary(string='Archivo')\n</code></pre> <p>Image</p> <p>Especializaci\u00f3n de Binary para im\u00e1genes. Permite redimensionamiento autom\u00e1tico:</p> <p>ejemplo</p> <pre><code>imagen = fields.Image(string='Imagen', max_width=1024, max_height=1024)\nimagen_128 = fields.Image(string='Imagen peque\u00f1a', max_width=128, max_height=128)\n</code></pre> <p>Odoo genera autom\u00e1ticamente miniaturas si especificas diferentes tama\u00f1os.</p>"},{"location":"7_2_desarrollo_de_modelos/#atributos-comunes-de-campos","title":"Atributos Comunes de Campos","text":"<p>Todos los campos pueden tener estos atributos:</p> Atributo Tipo Descripci\u00f3n <code>string</code> str Etiqueta visible en la interfaz <code>required</code> bool Si el campo es obligatorio <code>readonly</code> bool Si el campo es de solo lectura <code>help</code> str Texto de ayuda al pasar el cursor <code>index</code> bool Crea \u00edndice en la base de datos <code>default</code> valor/funci\u00f3n Valor por defecto <code>copy</code> bool Si se copia al duplicar el registro <code>groups</code> str Grupos que pueden ver el campo <p>Ejemplo con varios atributos:</p> <p>ejemplo</p> <pre><code>nombre = fields.Char(\n    string='Nombre Completo',\n    required=True,\n    index=True,\n    help='Nombre y apellidos del contacto',\n    copy=False,\n    groups='base.group_user',\n)\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#campos-relacionales","title":"Campos Relacionales","text":"<p>Las relaciones entre modelos son fundamentales en Odoo. Permiten conectar entidades y navegar entre ellas de forma natural.</p>"},{"location":"7_2_desarrollo_de_modelos/#many2one-muchos-a-uno","title":"Many2one (Muchos a Uno)","text":"<p>Representa una relaci\u00f3n donde muchos registros del modelo actual apuntan a un registro de otro modelo.</p> <p>Ejemplo: Muchas tareas pertenecen a un proyecto.</p> <p>ejemplo</p> <pre><code>proyecto_id = fields.Many2one(\n    'proyecto.proyecto',           # Modelo relacionado\n    string='Proyecto',\n    ondelete='restrict',           # Comportamiento al eliminar\n    index=True,\n)\n</code></pre> <p>Opciones de <code>ondelete</code>:</p> <ul> <li><code>restrict</code>: Impide eliminar si hay registros relacionados (por defecto)</li> <li><code>cascade</code>: Elimina tambi\u00e9n los registros relacionados</li> <li><code>set null</code>: Pone el campo a NULL al eliminar el relacionado</li> </ul> <p>Uso en c\u00f3digo:</p> <p>ejemplo</p> <pre><code># Acceder al registro relacionado\nprint(tarea.proyecto_id.nombre)\n\n# Asignar una relaci\u00f3n\ntarea.proyecto_id = proyecto_obj\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#one2many-uno-a-muchos","title":"One2many (Uno a Muchos)","text":"<p>Representa la relaci\u00f3n inversa de Many2one. Un registro tiene muchos registros relacionados.</p> <p>Ejemplo: Un proyecto tiene muchas tareas.</p> <p>ejemplo</p> <pre><code># En el modelo Proyecto\ntarea_ids = fields.One2many(\n    'proyecto.tarea',              # Modelo relacionado\n    'proyecto_id',                 # Campo Many2one inverso\n    string='Tareas',\n)\n</code></pre> <p>El segundo par\u00e1metro (<code>proyecto_id</code>) debe ser el nombre exacto del campo Many2one en el modelo relacionado.</p> <p>Uso en c\u00f3digo:</p> <p>ejemplo</p> <pre><code># Acceder a los registros relacionados\nfor tarea in proyecto.tarea_ids:\n    print(tarea.nombre)\n\n# A\u00f1adir un registro\nproyecto.tarea_ids = [(4, tarea.id)]  # Vincula una tarea existente\nproyecto.tarea_ids = [(0, 0, {'nombre': 'Nueva tarea'})]  # Crea y vincula\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#many2many-muchos-a-muchos","title":"Many2many (Muchos a Muchos)","text":"<p>Representa una relaci\u00f3n donde m\u00faltiples registros de un modelo se relacionan con m\u00faltiples registros de otro modelo.</p> <p>Ejemplo: Un producto puede tener m\u00faltiples etiquetas y una etiqueta puede estar en m\u00faltiples productos.</p> <p>ejemplo</p> <pre><code>etiqueta_ids = fields.Many2many(\n    'producto.etiqueta',           # Modelo relacionado\n    'producto_etiqueta_rel',       # Tabla intermedia (opcional)\n    'producto_id',                 # Columna de este modelo (opcional)\n    'etiqueta_id',                 # Columna del otro modelo (opcional)\n    string='Etiquetas',\n)\n</code></pre> <p>Si no especificas los par\u00e1metros opcionales, Odoo genera nombres autom\u00e1ticamente.</p> <p>Cu\u00e1ndo especificar tabla intermedia:</p> <ul> <li>Cuando hay m\u00faltiples relaciones Many2many entre los mismos modelos</li> <li>Cuando quieres un nombre espec\u00edfico para la tabla</li> <li>Cuando el modelo se relaciona consigo mismo</li> </ul> <p>Uso en c\u00f3digo:</p> <p>ejemplo</p> <pre><code># Acceder a los registros relacionados\nfor etiqueta in producto.etiqueta_ids:\n    print(etiqueta.nombre)\n\n# Asignar m\u00faltiples registros\nproducto.etiqueta_ids = [(6, 0, [etiqueta1.id, etiqueta2.id])]\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#comandos-para-relaciones-x2many","title":"Comandos para Relaciones X2many","text":"<p>Odoo usa una sintaxis especial para modificar relaciones One2many y Many2many:</p> Comando Sintaxis Acci\u00f3n Crear y vincular <code>(0, 0, {valores})</code> Crea un nuevo registro y lo vincula Actualizar <code>(1, id, {valores})</code> Actualiza un registro ya vinculado Desvincular y eliminar <code>(2, id, 0)</code> Desvincula y elimina el registro Desvincular <code>(3, id, 0)</code> Desvincula sin eliminar Vincular <code>(4, id, 0)</code> Vincula un registro existente Desvincular todos <code>(5, 0, 0)</code> Desvincula todos los registros Reemplazar <code>(6, 0, [ids])</code> Reemplaza todos con la lista de IDs <p>Ejemplos pr\u00e1cticos:</p> <p>ejemplo</p> <pre><code># Crear y vincular una nueva tarea\nproyecto.tarea_ids = [(0, 0, {'nombre': 'Nueva tarea', 'descripcion': 'Descripci\u00f3n'})]\n\n# Vincular tareas existentes\nproyecto.tarea_ids = [(4, tarea1.id), (4, tarea2.id)]\n\n# Reemplazar todas las tareas\nproyecto.tarea_ids = [(6, 0, [tarea1.id, tarea2.id, tarea3.id])]\n\n# Desvincular y eliminar una tarea\nproyecto.tarea_ids = [(2, tarea_a_eliminar.id, 0)]\n\n# Desvincular todas las tareas\nproyecto.tarea_ids = [(5, 0, 0)]\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#related-campos-relacionados","title":"Related (Campos Relacionados)","text":"<p>Un campo Related es un atajo para acceder a un campo de un modelo relacionado sin escribir c\u00f3digo Python.</p> <p>ejemplo</p> <pre><code># En lugar de acceder con c\u00f3digo...\nproyecto_nombre = proyecto_id.nombre\n\n# Puedes definir un campo related\nproyecto_nombre = fields.Char(\n    string='Nombre del Proyecto',\n    related='proyecto_id.nombre',\n    readonly=True,\n    store=False,\n)\n</code></pre> <p>Ventajas de Related:</p> <ul> <li>Simplifica b\u00fasquedas y filtros en vistas</li> <li>Evita c\u00f3digo Python repetitivo</li> <li>Permite usar el campo en domains y groupby</li> </ul> <p>Par\u00e1metro <code>store</code>:</p> <ul> <li><code>store=False</code> (por defecto): No ocupa espacio en BD, se calcula siempre</li> <li><code>store=True</code>: Se guarda en BD, m\u00e1s r\u00e1pido pero ocupa espacio</li> </ul>"},{"location":"7_2_desarrollo_de_modelos/#reference-referencia","title":"Reference (Referencia)","text":"<p>Un campo Reference permite apuntar a registros de diferentes modelos:</p> <p>ejemplo</p> <pre><code>documento_ref = fields.Reference(\n    selection='_get_modelos_documento',\n    string='Documento Relacionado',\n)\n\n@api.model\ndef _get_modelos_documento(self):\n    return [\n        ('proyecto.proyecto', 'Proyecto'),\n        ('proyecto.tarea', 'Tarea'),\n        ('res.partner', 'Contacto'),\n    ]\n</code></pre> <p>Es menos com\u00fan que los otros campos relacionales, pero \u00fatil para relaciones polim\u00f3rficas.</p>"},{"location":"7_2_desarrollo_de_modelos/#campos-computados","title":"Campos Computados","text":"<p>Los campos computados son aquellos cuyo valor se calcula autom\u00e1ticamente mediante una funci\u00f3n Python en lugar de ser introducido por el usuario.</p>"},{"location":"7_2_desarrollo_de_modelos/#sintaxis-basica","title":"Sintaxis B\u00e1sica","text":"<p>ejemplo</p> <pre><code># Campo computado\ntotal = fields.Float(string='Total', compute='_compute_total')\n\n# M\u00e9todo que lo calcula\n@api.depends('precio', 'cantidad')\ndef _compute_total(self):\n    for record in self:\n        record.total = record.precio * record.cantidad\n</code></pre> <p>Elementos clave:</p> <ul> <li><code>compute</code>: Nombre del m\u00e9todo que calcula el valor</li> <li><code>@api.depends()</code>: Lista de campos de los que depende el c\u00e1lculo</li> <li>El m\u00e9todo debe iterar sobre <code>self</code> (es un recordset)</li> </ul>"},{"location":"7_2_desarrollo_de_modelos/#almacenamiento-de-campos-computados","title":"Almacenamiento de Campos Computados","text":"<p>Sin almacenamiento (<code>store=False</code>, por defecto):</p> <ul> <li>Se calcula cada vez que se lee el campo</li> <li>No ocupa espacio en base de datos</li> <li>No se puede buscar ni filtrar por \u00e9l</li> <li>Ideal para c\u00e1lculos r\u00e1pidos</li> </ul> <p>Con almacenamiento (<code>store=True</code>):</p> <p>ejemplo</p> <pre><code>total = fields.Float(string='Total', compute='_compute_total', store=True)\n</code></pre> <ul> <li>Se guarda en la base de datos</li> <li>Solo se recalcula cuando cambian las dependencias</li> <li>Permite b\u00fasquedas y filtros</li> <li>Ideal para c\u00e1lculos costosos o campos usados en reportes</li> </ul>"},{"location":"7_2_desarrollo_de_modelos/#campos-computados-con-tipos-relacionales","title":"Campos Computados con Tipos Relacionales","text":"<p>Los campos computados pueden ser de cualquier tipo, incluyendo relacionales:</p> <p>Many2one computado:</p> <p>ejemplo</p> <pre><code>proyecto_activo_id = fields.Many2one(\n    'proyecto.proyecto',\n    compute='_compute_proyecto_activo',\n    string='Proyecto Activo',\n)\n\n@api.depends('usuario_id')\ndef _compute_proyecto_activo(self):\n    for record in self:\n        # Buscar el proyecto activo del usuario\n        proyecto = self.env['proyecto.proyecto'].search([\n            ('usuario_id', '=', record.usuario_id.id),\n            ('activo', '=', True)\n        ], limit=1)\n        record.proyecto_activo_id = proyecto.id if proyecto else False\n</code></pre> <p>Many2many computado:</p> <p>ejemplo</p> <pre><code>tecnologias_ids = fields.Many2many(\n    'proyecto.tecnologia',\n    compute='_compute_tecnologias',\n    string='Tecnolog\u00edas Usadas',\n)\n\n@api.depends('tarea_ids', 'tarea_ids.tecnologia_ids')\ndef _compute_tecnologias(self):\n    for proyecto in self:\n        # Recopilar todas las tecnolog\u00edas de todas las tareas\n        tecnologias = self.env['proyecto.tecnologia']\n        for tarea in proyecto.tarea_ids:\n            tecnologias |= tarea.tecnologia_ids\n        proyecto.tecnologias_ids = tecnologias\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#campos-computados-editables","title":"Campos Computados Editables","text":"<p>Por defecto, los campos computados son de solo lectura. Para hacerlos editables, define una funci\u00f3n inversa:</p> <p>ejemplo</p> <pre><code>nombre_completo = fields.Char(\n    compute='_compute_nombre_completo',\n    inverse='_inverse_nombre_completo',\n    store=True,\n)\n\n@api.depends('nombre', 'apellidos')\ndef _compute_nombre_completo(self):\n    for record in self:\n        record.nombre_completo = f\"{record.nombre} {record.apellidos}\"\n\ndef _inverse_nombre_completo(self):\n    for record in self:\n        if record.nombre_completo:\n            partes = record.nombre_completo.split(' ', 1)\n            record.nombre = partes[0]\n            record.apellidos = partes[1] if len(partes) &gt; 1 else ''\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#busquedas-en-campos-computados","title":"B\u00fasquedas en Campos Computados","text":"<p>Para permitir b\u00fasquedas en campos computados no almacenados, define un m\u00e9todo de b\u00fasqueda:</p> <p>ejemplo</p> <pre><code>edad = fields.Integer(compute='_compute_edad', search='_search_edad')\n\n@api.depends('fecha_nacimiento')\ndef _compute_edad(self):\n    hoy = fields.Date.today()\n    for record in self:\n        if record.fecha_nacimiento:\n            record.edad = (hoy - record.fecha_nacimiento).days // 365\n        else:\n            record.edad = 0\n\ndef _search_edad(self, operator, value):\n    # Convertir b\u00fasqueda de edad en b\u00fasqueda de fecha_nacimiento\n    hoy = fields.Date.today()\n    fecha_limite = hoy - timedelta(days=value * 365)\n\n    if operator == '=':\n        # Edad exacta es complejo, aproximamos con rango\n        return [('fecha_nacimiento', '&gt;=', fecha_limite - timedelta(days=365)),\n                ('fecha_nacimiento', '&lt;', fecha_limite)]\n    elif operator == '&gt;':\n        return [('fecha_nacimiento', '&lt;', fecha_limite)]\n    elif operator == '&lt;':\n        return [('fecha_nacimiento', '&gt;', fecha_limite)]\n    # ... otros operadores\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#valores-por-defecto","title":"Valores por Defecto","text":"<p>Los valores por defecto se asignan autom\u00e1ticamente al crear nuevos registros. Pueden ser est\u00e1ticos o calculados din\u00e1micamente.</p>"},{"location":"7_2_desarrollo_de_modelos/#valores-estaticos","title":"Valores Est\u00e1ticos","text":"<p>ejemplo</p> <pre><code>activo = fields.Boolean(default=True)\ncantidad = fields.Integer(default=1)\nestado = fields.Selection([...], default='borrador')\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#valores-calculados-con-funcion","title":"Valores Calculados con Funci\u00f3n","text":"<p>ejemplo</p> <pre><code>fecha_alta = fields.Date(default=lambda self: fields.Date.today())\nusuario_id = fields.Many2one('res.users', default=lambda self: self.env.user)\n</code></pre> <p>Funciones vs Lambdas para valores por defecto</p> <pre><code># \u274c INCORRECTO - ejecuta al cargar el m\u00f3dulo\nfecha = fields.Date(default=fields.Date.today())\n\n# \u2705 CORRECTO - ejecuta al crear el registro\nfecha = fields.Date(default=lambda self: fields.Date.today())\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#funcion-de-valor-por-defecto-compleja","title":"Funci\u00f3n de Valor por Defecto Compleja","text":"<p>ejemplo</p> <pre><code>def _default_codigo(self):\n    # Generar c\u00f3digo secuencial\n    ultimo = self.search([], order='id desc', limit=1)\n    if ultimo and ultimo.codigo:\n        numero = int(ultimo.codigo.split('-')[1]) + 1\n        return f\"PROD-{numero:05d}\"\n    return \"PROD-00001\"\n\ncodigo = fields.Char(default=_default_codigo)\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#metodo-default_get","title":"M\u00e9todo default_get","text":"<p>Para valores por defecto complejos o que dependen del contexto:</p> <p>ejemplo</p> <pre><code>@api.model\ndef default_get(self, fields_list):\n    defaults = super(MiModelo, self).default_get(fields_list)\n\n    # Valor por defecto seg\u00fan contexto\n    if self._context.get('desde_proyecto'):\n        proyecto_id = self._context.get('proyecto_id')\n        defaults['proyecto_id'] = proyecto_id\n\n    return defaults\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#restricciones-y-validaciones","title":"Restricciones y Validaciones","text":"<p>Las restricciones aseguran la integridad de los datos. Odoo proporciona dos tipos: restricciones Python y restricciones SQL.</p>"},{"location":"7_2_desarrollo_de_modelos/#restricciones-python-apiconstrains","title":"Restricciones Python (@api.constrains)","text":"<p>Se ejecutan en Python antes de guardar y permiten l\u00f3gica compleja:</p> <p>ejemplo</p> <pre><code>from odoo.exceptions import ValidationError\n\n@api.constrains('edad')\ndef _check_edad(self):\n    for record in self:\n        if record.edad &lt; 0:\n            raise ValidationError('La edad no puede ser negativa')\n        if record.edad &gt; 150:\n            raise ValidationError('La edad no puede superar 150 a\u00f1os')\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Se ejecutan solo cuando cambian los campos especificados</li> <li>Permiten l\u00f3gica compleja y acceso a otros modelos</li> <li>Mensajes de error personalizados en cualquier idioma</li> <li>Se ejecutan en el servidor, no en la base de datos</li> </ul> <p>Validar m\u00faltiples campos:</p> <p>ejemplo</p> <pre><code>@api.constrains('fecha_inicio', 'fecha_fin')\ndef _check_fechas(self):\n    for record in self:\n        if record.fecha_fin and record.fecha_inicio:\n            if record.fecha_fin &lt; record.fecha_inicio:\n                raise ValidationError(\n                    'La fecha de fin no puede ser anterior a la fecha de inicio'\n                )\n</code></pre> <p>Validaciones complejas:</p> <p>ejemplo</p> <pre><code>@api.constrains('precio', 'precio_coste')\ndef _check_margenes(self):\n    for record in self:\n        if record.precio_coste and record.precio:\n            margen = ((record.precio - record.precio_coste) / record.precio) * 100\n            if margen &lt; 10:\n                raise ValidationError(\n                    f'El margen ({margen:.1f}%) es inferior al m\u00ednimo (10%)'\n                )\n</code></pre>"},{"location":"7_2_desarrollo_de_modelos/#restricciones-sql-_sql_constraints","title":"Restricciones SQL (_sql_constraints)","text":"<p>Se implementan directamente en PostgreSQL y son m\u00e1s eficientes:</p> <p>ejemplo</p> <pre><code>_sql_constraints = [\n    ('nombre_unico', \n     'unique(nombre)', \n     'Ya existe un registro con ese nombre'),\n\n    ('codigo_unico', \n     'unique(codigo)', \n     'El c\u00f3digo debe ser \u00fanico'),\n\n    ('precio_positivo', \n     'CHECK(precio &gt;= 0)', \n     'El precio no puede ser negativo'),\n]\n</code></pre> <p>Sintaxis: <code>('nombre_restriccion', 'sql_constraint', 'mensaje_error')</code></p> <p>Tipos comunes:</p> <ul> <li><code>unique(campo)</code>: Unicidad</li> <li><code>unique(campo1, campo2)</code>: Unicidad compuesta</li> <li><code>CHECK(condicion)</code>: Condici\u00f3n personalizada</li> </ul>"},{"location":"7_2_desarrollo_de_modelos/#comparativa-python-vs-sql","title":"Comparativa: Python vs SQL","text":"Aspecto Python (@api.constrains) SQL (_sql_constraints) Rendimiento M\u00e1s lento M\u00e1s r\u00e1pido Complejidad L\u00f3gica compleja L\u00f3gica simple Acceso a otros modelos S\u00ed No Mensaje personalizado Muy flexible Limitado Garant\u00eda BD No (solo en Odoo) S\u00ed (nivel BD) Uso t\u00edpico Validaciones de negocio Unicidad, rangos <p>Recomendaci\u00f3n: Usa SQL para restricciones simples y cr\u00edticas (unicidad, no nulos). Usa Python para validaciones de negocio complejas.</p> <p>Buenas Pr\u00e1cticas</p> <p>Al desarrollar modelos, sigue estas recomendaciones:</p> <p>Nomenclatura</p> <ul> <li>Nombres de modelo en min\u00fasculas con puntos: <code>mi_modulo.mi_modelo</code></li> <li>Nombres de campos en min\u00fasculas con guiones bajos: <code>fecha_inicio</code></li> <li>Sufijos para campos relacionales: <code>_id</code> (Many2one), <code>_ids</code> (X2many)</li> <li>Nombres descriptivos: <code>cliente_id</code> mejor que <code>c_id</code></li> </ul> <p>Organizaci\u00f3n de campos</p> <p>ejemplo</p> <pre><code>class MiModelo(models.Model):\n    _name = 'mi.modelo'\n\n    # 1. Campos b\u00e1sicos primero\n    nombre = fields.Char()\n    descripcion = fields.Text()\n\n    # 2. Campos num\u00e9ricos\n    cantidad = fields.Integer()\n    precio = fields.Float()\n\n    # 3. Campos de fecha\n    fecha_inicio = fields.Date()\n\n    # 4. Campos booleanos y selection\n    activo = fields.Boolean()\n    estado = fields.Selection()\n\n    # 5. Campos relacionales\n    cliente_id = fields.Many2one()\n    linea_ids = fields.One2many()\n\n    # 6. Campos computados al final\n    total = fields.Float(compute='_compute_total')\n</code></pre> <p>Documentaci\u00f3n</p> <ul> <li>Usa <code>string</code> descriptivo en todos los campos</li> <li>A\u00f1ade <code>help</code> en campos no obvios</li> <li>Documenta <code>_description</code> del modelo</li> <li>Comenta l\u00f3gica compleja en m\u00e9todos</li> </ul> <p>\u00cdndices</p> <ul> <li>A\u00f1ade <code>index=True</code> a campos usados frecuentemente en b\u00fasquedas</li> <li>Campos Many2one ya tienen \u00edndice por defecto</li> <li>No abuses de \u00edndices (ralentizan escrituras)</li> </ul> <p>Valores por defecto</p> <ul> <li>Establece valores por defecto sensatos</li> <li>Usa funciones lambda para valores din\u00e1micos</li> <li>No uses valores por defecto en campos relacionales obligatorios</li> </ul> <p>Restricciones</p> <ul> <li>Usa SQL para restricciones simples y cr\u00edticas</li> <li>Usa Python para l\u00f3gica de negocio compleja</li> <li>Mensajes de error claros y \u00fatiles para el usuario</li> <li>Valida solo lo necesario (evita validaciones redundantes)</li> </ul> <p>Campos computados</p> <ul> <li>Usa <code>store=True</code> solo cuando sea necesario</li> <li>Declara todas las dependencias en <code>@api.depends</code></li> <li>Itera siempre sobre <code>self</code> en m\u00e9todos compute</li> <li>Inicializa el campo al principio del bucle</li> </ul>"},{"location":"7_3_desarrollo_de_vistas/","title":"Desarrollo de Vistas","text":""},{"location":"7_3_desarrollo_de_vistas/#desarrollo-de-vistas","title":"Desarrollo de Vistas","text":"<p>Las vistas definen c\u00f3mo se presenta la informaci\u00f3n al usuario en Odoo. Son la cara visible de tus modelos, permitiendo visualizar, crear y modificar datos de forma intuitiva. Dominar las vistas es esencial para crear aplicaciones empresariales con interfaces de usuario efectivas y agradables.</p> <p>En este cap\u00edtulo aprender\u00e1s a crear y personalizar los diferentes tipos de vistas que Odoo ofrece: formularios, listas, kanban, calendarios, gr\u00e1ficos y m\u00e1s. Cada tipo de vista tiene sus propias caracter\u00edsticas y casos de uso espec\u00edficos.</p>"},{"location":"7_3_desarrollo_de_vistas/#conceptos-fundamentales","title":"Conceptos Fundamentales","text":"<p>Las vistas son archivos XML que describen c\u00f3mo mostrar los datos de un modelo. Se almacenan en el modelo <code>ir.ui.view</code> de la base de datos y se cargan al instalar o actualizar el m\u00f3dulo.</p>"},{"location":"7_3_desarrollo_de_vistas/#estructura-basica-de-una-vista","title":"Estructura B\u00e1sica de una Vista","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"vista_form_mi_modelo\"&gt;\n    &lt;field name=\"name\"&gt;mi.modelo.form&lt;/field&gt;\n    &lt;field name=\"model\"&gt;mi.modelo&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;!-- Contenido de la vista --&gt;\n        &lt;form&gt;\n            &lt;field name=\"nombre\"/&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Elementos clave:</p> <ul> <li><code>&lt;record&gt;</code>: Define un registro en <code>ir.ui.view</code></li> <li><code>id</code>: Identificador \u00fanico XML para referenciar la vista</li> <li><code>name</code>: Nombre descriptivo de la vista</li> <li><code>model</code>: Modelo al que pertenece la vista</li> <li><code>arch</code>: Arquitectura XML que define la estructura</li> </ul>"},{"location":"7_3_desarrollo_de_vistas/#tipos-de-vistas","title":"Tipos de Vistas","text":"<p>Odoo proporciona varios tipos de vistas para diferentes prop\u00f3sitos:</p> Tipo Uso Principal Etiqueta XML Form Crear/editar un registro <code>&lt;form&gt;</code> List Mostrar m\u00faltiples registros en tabla <code>&lt;list&gt;</code> Kanban Vista de tarjetas estilo tablero <code>&lt;kanban&gt;</code> Search Filtros y b\u00fasquedas <code>&lt;search&gt;</code> Calendar Vista de calendario <code>&lt;calendar&gt;</code> Graph Gr\u00e1ficos y estad\u00edsticas <code>&lt;graph&gt;</code> Pivot Tabla din\u00e1mica de an\u00e1lisis <code>&lt;pivot&gt;</code> Activity Gesti\u00f3n de actividades <code>&lt;activity&gt;</code>"},{"location":"7_3_desarrollo_de_vistas/#prioridad-de-vistas","title":"Prioridad de Vistas","text":"<p>Si existen m\u00faltiples vistas del mismo tipo para un modelo, Odoo usa la de mayor prioridad (menor n\u00famero = mayor prioridad):</p> <p>ejemplo</p> <pre><code>&lt;field name=\"priority\" eval=\"1\"/&gt;  &lt;!-- Alta prioridad --&gt;\n&lt;field name=\"priority\" eval=\"16\"/&gt; &lt;!-- Baja prioridad (por defecto) --&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#vistas-por-defecto","title":"Vistas por Defecto","text":"<p>Si no defines vistas para un modelo, Odoo genera autom\u00e1ticamente vistas b\u00e1sicas:</p> <ul> <li>Vista list con el campo <code>name</code> (o <code>_rec_name</code>)</li> <li>Vista form con todos los campos en un grupo simple</li> </ul> <p>Aunque funcionales, estas vistas gen\u00e9ricas suelen ser inadecuadas para uso real.</p>"},{"location":"7_3_desarrollo_de_vistas/#vistas-form-formulario","title":"Vistas Form (Formulario)","text":"<p>Las vistas form permiten visualizar y editar un \u00fanico registro. Son las m\u00e1s complejas y personalizables.</p>"},{"location":"7_3_desarrollo_de_vistas/#estructura-basica","title":"Estructura B\u00e1sica","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"producto_form\"&gt;\n    &lt;field name=\"name\"&gt;producto.form&lt;/field&gt;\n    &lt;field name=\"model\"&gt;mi.producto&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;form&gt;\n            &lt;sheet&gt;\n                &lt;group&gt;\n                    &lt;field name=\"nombre\"/&gt;\n                    &lt;field name=\"precio\"/&gt;\n                &lt;/group&gt;\n            &lt;/sheet&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#elementos-estructurales","title":"Elementos Estructurales","text":"<p>sheet</p> <p>Contenedor principal que limita el ancho del formulario y proporciona el estilo visual est\u00e1ndar:</p> <p>ejemplo</p> <pre><code>&lt;form&gt;\n    &lt;sheet&gt;\n        &lt;!-- Contenido del formulario --&gt;\n    &lt;/sheet&gt;\n&lt;/form&gt;\n</code></pre> <p>header</p> <p>Zona superior del formulario para botones de acci\u00f3n y barra de estado:</p> <p>ejemplo</p> <pre><code>&lt;form&gt;\n    &lt;header&gt;\n        &lt;button name=\"action_confirmar\" string=\"Confirmar\" type=\"object\" class=\"oe_highlight\"/&gt;\n        &lt;button name=\"action_cancelar\" string=\"Cancelar\" type=\"object\"/&gt;\n        &lt;field name=\"estado\" widget=\"statusbar\" statusbar_visible=\"borrador,confirmado,enviado\"/&gt;\n    &lt;/header&gt;\n    &lt;sheet&gt;\n        &lt;!-- Contenido --&gt;\n    &lt;/sheet&gt;\n&lt;/form&gt;\n</code></pre> <p>group</p> <p>Organiza campos en columnas. Por defecto crea dos columnas:</p> <p>ejemplo</p> <pre><code>&lt;group&gt;\n    &lt;field name=\"nombre\"/&gt;      &lt;!-- Columna 1 --&gt;\n    &lt;field name=\"precio\"/&gt;      &lt;!-- Columna 1 --&gt;\n    &lt;field name=\"descripcion\"/&gt; &lt;!-- Columna 1 --&gt;\n&lt;/group&gt;\n</code></pre> <p>Crear m\u00faltiples columnas expl\u00edcitamente:</p> <p>ejemplo</p> <pre><code>&lt;group&gt;\n    &lt;group string=\"Informaci\u00f3n B\u00e1sica\"&gt;\n        &lt;field name=\"nombre\"/&gt;\n        &lt;field name=\"codigo\"/&gt;\n    &lt;/group&gt;\n    &lt;group string=\"Precios\"&gt;\n        &lt;field name=\"precio\"/&gt;\n        &lt;field name=\"coste\"/&gt;\n    &lt;/group&gt;\n&lt;/group&gt;\n</code></pre> <p>notebook y page</p> <p>Pesta\u00f1as para organizar mucha informaci\u00f3n:</p> <p>ejemplo</p> <pre><code>&lt;notebook&gt;\n    &lt;page string=\"Informaci\u00f3n General\"&gt;\n        &lt;group&gt;\n            &lt;field name=\"nombre\"/&gt;\n        &lt;/group&gt;\n    &lt;/page&gt;\n    &lt;page string=\"Descripci\u00f3n\"&gt;\n        &lt;field name=\"descripcion\"/&gt;\n    &lt;/page&gt;\n    &lt;page string=\"Notas Internas\"&gt;\n        &lt;field name=\"notas\"/&gt;\n    &lt;/page&gt;\n&lt;/notebook&gt;\n</code></pre> <p>separator</p> <p>L\u00ednea separadora con texto opcional:</p> <p>ejemplo</p> <pre><code>&lt;separator string=\"Informaci\u00f3n Adicional\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#botones-en-formularios","title":"Botones en Formularios","text":"<p>Los botones ejecutan acciones cuando el usuario hace clic:</p> <p>ejemplo</p> <pre><code>&lt;button name=\"metodo_python\" \n        string=\"Ejecutar\" \n        type=\"object\" \n        class=\"oe_highlight\"\n        confirm=\"\u00bfEst\u00e1s seguro?\"/&gt;\n</code></pre> <p>Atributos de botones:</p> <ul> <li><code>name</code>: Nombre del m\u00e9todo a ejecutar o ID de la acci\u00f3n</li> <li><code>string</code>: Texto del bot\u00f3n</li> <li><code>type</code>: Tipo de acci\u00f3n</li> <li><code>object</code>: Llama a un m\u00e9todo del modelo</li> <li><code>action</code>: Abre una acci\u00f3n (ventana, reporte, etc.)</li> <li><code>class</code>: Clases CSS para estilo</li> <li><code>oe_highlight</code>: Bot\u00f3n principal (azul)</li> <li><code>btn-primary</code>: Bot\u00f3n importante</li> <li><code>btn-secondary</code>: Bot\u00f3n secundario</li> <li><code>confirm</code>: Mensaje de confirmaci\u00f3n antes de ejecutar</li> <li><code>icon</code>: Icono Font Awesome (ej: <code>fa-check</code>)</li> </ul> <p>Botones con iconos:</p> <p>ejemplo</p> <pre><code>&lt;button name=\"action_archivar\" type=\"object\" icon=\"fa-archive\"/&gt;\n&lt;button name=\"action_imprimir\" type=\"object\" icon=\"fa-print\" string=\"Imprimir\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#smart-buttons","title":"Smart Buttons","text":"<p>Botones especiales que muestran informaci\u00f3n resumida y permiten navegar a registros relacionados:</p> <p>ejemplo</p> <pre><code>&lt;div class=\"oe_button_box\" name=\"button_box\"&gt;\n    &lt;button type=\"object\" \n            name=\"action_ver_tareas\" \n            class=\"oe_stat_button\" \n            icon=\"fa-tasks\"&gt;\n        &lt;field name=\"tarea_count\" widget=\"statinfo\" string=\"Tareas\"/&gt;\n    &lt;/button&gt;\n    &lt;button type=\"object\" \n            name=\"action_ver_facturas\" \n            class=\"oe_stat_button\" \n            icon=\"fa-file-text-o\"&gt;\n        &lt;div class=\"o_field_widget o_stat_info\"&gt;\n            &lt;span class=\"o_stat_value\"&gt;\n                &lt;field name=\"factura_count\"/&gt;\n            &lt;/span&gt;\n            &lt;span class=\"o_stat_text\"&gt;Facturas&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/button&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#campos-en-formularios","title":"Campos en Formularios","text":"<p>Campos simples:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"nombre\"/&gt;\n&lt;field name=\"precio\" widget=\"monetary\"/&gt;\n&lt;field name=\"descripcion\" placeholder=\"Describe el producto...\"/&gt;\n</code></pre> <p>Campos con opciones:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"imagen\" widget=\"image\" class=\"oe_avatar\"/&gt;\n&lt;field name=\"cliente_id\" options=\"{'no_create': True, 'no_open': True}\"/&gt;\n&lt;field name=\"etiquetas\" widget=\"many2many_tags\" options=\"{'color_field': 'color'}\"/&gt;\n</code></pre> <p>Campos invisibles:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"campo_interno\" invisible=\"1\"/&gt;\n</code></pre> <p>\u00datil para campos necesarios en l\u00f3gica pero que no deben mostrarse.</p>"},{"location":"7_3_desarrollo_de_vistas/#visibilidad-condicional","title":"Visibilidad Condicional","text":"<p>Mostrar u ocultar elementos seg\u00fan valores de otros campos:</p> <p>Con invisible:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"es_empresa\" invisible=\"1\"/&gt;\n&lt;field name=\"nombre_empresa\" invisible=\"es_empresa == False\"/&gt;\n</code></pre> <p>Con readonly:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"precio\" readonly=\"estado != 'borrador'\"/&gt;\n</code></pre> <p>Con required:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"nif\" required=\"es_empresa == True\"/&gt;\n</code></pre> <p>M\u00faltiples condiciones:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"campo\" \n       invisible=\"estado in ['cancelado', 'finalizado']\"\n       readonly=\"estado == 'confirmado'\"\n       required=\"tipo == 'especial'\"/&gt;\n</code></pre> <p>Operadores disponibles:</p> <ul> <li>Comparaci\u00f3n: <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li> <li>L\u00f3gicos: <code>and</code>, <code>or</code>, <code>not</code></li> <li>Pertenencia: <code>in</code>, <code>not in</code></li> </ul>"},{"location":"7_3_desarrollo_de_vistas/#formularios-dinamicos","title":"Formularios Din\u00e1micos","text":"<p>Mostrar solo en modo edici\u00f3n o lectura:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"campo_editable\" class=\"oe_edit_only\"/&gt;\n&lt;field name=\"campo_readonly\" class=\"oe_read_only\"/&gt;\n</code></pre> <p>Grupos condicionales:</p> <p>ejemplo</p> <pre><code>&lt;group invisible=\"tipo == 'servicio'\"&gt;\n    &lt;field name=\"peso\"/&gt;\n    &lt;field name=\"volumen\"/&gt;\n&lt;/group&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#ejemplo-completo-de-formulario","title":"Ejemplo Completo de Formulario","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"producto_form_completo\"&gt;\n    &lt;field name=\"name\"&gt;producto.form.completo&lt;/field&gt;\n    &lt;field name=\"model\"&gt;inventario.producto&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;form&gt;\n            &lt;header&gt;\n                &lt;button name=\"action_publicar\" \n                        string=\"Publicar\" \n                        type=\"object\" \n                        class=\"oe_highlight\"\n                        invisible=\"estado != 'borrador'\"/&gt;\n                &lt;button name=\"action_archivar\" \n                        string=\"Archivar\" \n                        type=\"object\"\n                        invisible=\"estado == 'archivado'\"/&gt;\n                &lt;field name=\"estado\" widget=\"statusbar\" \n                       statusbar_visible=\"borrador,publicado\"/&gt;\n            &lt;/header&gt;\n\n            &lt;sheet&gt;\n                &lt;div class=\"oe_button_box\" name=\"button_box\"&gt;\n                    &lt;button type=\"object\" name=\"action_ver_ventas\" \n                            class=\"oe_stat_button\" icon=\"fa-shopping-cart\"&gt;\n                        &lt;field name=\"venta_count\" widget=\"statinfo\" string=\"Ventas\"/&gt;\n                    &lt;/button&gt;\n                &lt;/div&gt;\n\n                &lt;field name=\"imagen\" widget=\"image\" class=\"oe_avatar\"/&gt;\n\n                &lt;div class=\"oe_title\"&gt;\n                    &lt;label for=\"nombre\" class=\"oe_edit_only\"/&gt;\n                    &lt;h1&gt;&lt;field name=\"nombre\" placeholder=\"Nombre del producto\"/&gt;&lt;/h1&gt;\n                &lt;/div&gt;\n\n                &lt;group&gt;\n                    &lt;group string=\"Informaci\u00f3n General\"&gt;\n                        &lt;field name=\"codigo\"/&gt;\n                        &lt;field name=\"categoria_id\"/&gt;\n                        &lt;field name=\"activo\"/&gt;\n                    &lt;/group&gt;\n                    &lt;group string=\"Precios e Inventario\"&gt;\n                        &lt;field name=\"precio\" widget=\"monetary\"/&gt;\n                        &lt;field name=\"coste\" widget=\"monetary\"/&gt;\n                        &lt;field name=\"stock\"/&gt;\n                    &lt;/group&gt;\n                &lt;/group&gt;\n\n                &lt;notebook&gt;\n                    &lt;page string=\"Descripci\u00f3n\"&gt;\n                        &lt;field name=\"descripcion\" placeholder=\"Describe el producto...\"/&gt;\n                    &lt;/page&gt;\n                    &lt;page string=\"Ventas\" invisible=\"venta_count == 0\"&gt;\n                        &lt;field name=\"venta_ids\"&gt;\n                            &lt;list&gt;\n                                &lt;field name=\"fecha\"/&gt;\n                                &lt;field name=\"cliente_id\"/&gt;\n                                &lt;field name=\"cantidad\"/&gt;\n                                &lt;field name=\"total\"/&gt;\n                            &lt;/list&gt;\n                        &lt;/field&gt;\n                    &lt;/page&gt;\n                    &lt;page string=\"Notas Internas\"&gt;\n                        &lt;field name=\"notas\"/&gt;\n                    &lt;/page&gt;\n                &lt;/notebook&gt;\n            &lt;/sheet&gt;\n\n            &lt;div class=\"oe_chatter\"&gt;\n                &lt;field name=\"message_follower_ids\"/&gt;\n                &lt;field name=\"message_ids\"/&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#vistas-list-lista","title":"Vistas List (Lista)","text":"<p>Las vistas list muestran m\u00faltiples registros en formato tabla. Son ideales para visualizar y comparar informaci\u00f3n.</p>"},{"location":"7_3_desarrollo_de_vistas/#estructura-basica_1","title":"Estructura B\u00e1sica","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"producto_list\"&gt;\n    &lt;field name=\"name\"&gt;producto.list&lt;/field&gt;\n    &lt;field name=\"model\"&gt;inventario.producto&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;list&gt;\n            &lt;field name=\"codigo\"/&gt;\n            &lt;field name=\"nombre\"/&gt;\n            &lt;field name=\"precio\"/&gt;\n            &lt;field name=\"stock\"/&gt;\n        &lt;/list&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#decoraciones-condicionales","title":"Decoraciones Condicionales","text":"<p>Aplicar colores a filas seg\u00fan condiciones:</p> <p>ejemplo</p> <pre><code>&lt;list decoration-danger=\"stock == 0\"\n      decoration-warning=\"stock &amp;lt; 10\"\n      decoration-success=\"stock &amp;gt; 100\"&gt;\n    &lt;field name=\"nombre\"/&gt;\n    &lt;field name=\"stock\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Decoraciones disponibles:</p> <ul> <li><code>decoration-bf</code>: Negrita</li> <li><code>decoration-it</code>: Cursiva</li> <li><code>decoration-danger</code>: Rojo (alertas)</li> <li><code>decoration-warning</code>: Naranja (advertencias)</li> <li><code>decoration-success</code>: Verde (\u00e9xito)</li> <li><code>decoration-info</code>: Azul (informaci\u00f3n)</li> <li><code>decoration-muted</code>: Gris (inactivo)</li> <li><code>decoration-primary</code>: Morado (principal)</li> </ul>"},{"location":"7_3_desarrollo_de_vistas/#campos-en-listas","title":"Campos en Listas","text":"<p>Campo invisible:</p> <p>\u00datil para usarlo en decoraciones sin mostrarlo:</p> <p>ejemplo</p> <pre><code>&lt;list decoration-danger=\"activo == False\"&gt;\n    &lt;field name=\"activo\" invisible=\"1\"/&gt;\n    &lt;field name=\"nombre\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Campos opcionales:</p> <p>Permiten al usuario mostrar/ocultar columnas:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"descripcion\" optional=\"hide\"/&gt;\n&lt;field name=\"notas\" optional=\"show\"/&gt;\n</code></pre> <p>Campos con widgets:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"progreso\" widget=\"progressbar\"/&gt;\n&lt;field name=\"prioridad\" widget=\"priority\"/&gt;\n&lt;field name=\"estado\" widget=\"badge\"/&gt;\n&lt;field name=\"etiquetas\" widget=\"many2many_tags\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#botones-en-listas","title":"Botones en Listas","text":"<p>ejemplo</p> <pre><code>&lt;list&gt;\n    &lt;field name=\"nombre\"/&gt;\n    &lt;button name=\"action_publicar\" \n            string=\"Publicar\" \n            type=\"object\" \n            icon=\"fa-check\"\n            invisible=\"estado != 'borrador'\"/&gt;\n&lt;/list&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#sumatorios-y-agregaciones","title":"Sumatorios y Agregaciones","text":"<p>Mostrar totales al pie de las columnas:</p> <p>ejemplo</p> <pre><code>&lt;list&gt;\n    &lt;field name=\"nombre\"/&gt;\n    &lt;field name=\"cantidad\" sum=\"Total\"/&gt;\n    &lt;field name=\"precio\" avg=\"Promedio\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Funciones disponibles: <code>sum</code>, <code>avg</code>, <code>min</code>, <code>max</code></p>"},{"location":"7_3_desarrollo_de_vistas/#listas-editables","title":"Listas Editables","text":"<p>Permitir edici\u00f3n directa sin abrir formulario:</p> <p>ejemplo</p> <pre><code>&lt;list editable=\"top\"&gt;  &lt;!-- o \"bottom\" --&gt;\n    &lt;field name=\"nombre\"/&gt;\n    &lt;field name=\"cantidad\"/&gt;\n&lt;/list&gt;\n</code></pre> <p>Consideraciones:</p> <ul> <li>Solo campos visibles son editables</li> <li>\u00datil para listas simples de configuraci\u00f3n</li> <li>No recomendable para modelos complejos</li> </ul>"},{"location":"7_3_desarrollo_de_vistas/#orden-por-defecto","title":"Orden por Defecto","text":"<p>ejemplo</p> <pre><code>&lt;list default_order=\"nombre, fecha desc\"&gt;\n    &lt;field name=\"nombre\"/&gt;\n    &lt;field name=\"fecha\"/&gt;\n&lt;/list&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#agrupacion-por-defecto","title":"Agrupaci\u00f3n por Defecto","text":"<p>ejemplo</p> <pre><code>&lt;list default_group_by=\"categoria_id\"&gt;\n    &lt;field name=\"categoria_id\" invisible=\"1\"/&gt;\n    &lt;field name=\"nombre\"/&gt;\n&lt;/list&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#ejemplo-completo-de-lista","title":"Ejemplo Completo de Lista","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"producto_list_completo\"&gt;\n    &lt;field name=\"name\"&gt;producto.list.completo&lt;/field&gt;\n    &lt;field name=\"model\"&gt;inventario.producto&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;list decoration-muted=\"activo == False\"\n              decoration-warning=\"stock &amp;lt; stock_minimo\"\n              decoration-danger=\"stock == 0\"\n              default_order=\"nombre\"&gt;\n            &lt;field name=\"activo\" invisible=\"1\"/&gt;\n            &lt;field name=\"stock_minimo\" invisible=\"1\"/&gt;\n\n            &lt;field name=\"codigo\"/&gt;\n            &lt;field name=\"nombre\"/&gt;\n            &lt;field name=\"categoria_id\"/&gt;\n            &lt;field name=\"precio\" widget=\"monetary\"/&gt;\n            &lt;field name=\"stock\" sum=\"Total Stock\"/&gt;\n            &lt;field name=\"estado\" widget=\"badge\" \n                   decoration-success=\"estado == 'publicado'\"\n                   decoration-info=\"estado == 'borrador'\"/&gt;\n\n            &lt;button name=\"action_publicar\" \n                    type=\"object\" \n                    icon=\"fa-check\" \n                    string=\"Publicar\"\n                    invisible=\"estado != 'borrador'\"/&gt;\n        &lt;/list&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#vistas-kanban","title":"Vistas Kanban","text":"<p>Las vistas kanban muestran registros como tarjetas, ideal para flujos de trabajo visuales estilo tablero.</p>"},{"location":"7_3_desarrollo_de_vistas/#estructura-basica_2","title":"Estructura B\u00e1sica","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"tarea_kanban\"&gt;\n    &lt;field name=\"name\"&gt;tarea.kanban&lt;/field&gt;\n    &lt;field name=\"model\"&gt;proyecto.tarea&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;kanban default_group_by=\"etapa_id\"&gt;\n            &lt;field name=\"nombre\"/&gt;\n            &lt;field name=\"prioridad\"/&gt;\n            &lt;templates&gt;\n                &lt;t t-name=\"kanban-box\"&gt;\n                    &lt;div class=\"oe_kanban_card\"&gt;\n                        &lt;div class=\"oe_kanban_content\"&gt;\n                            &lt;h4&gt;&lt;field name=\"nombre\"/&gt;&lt;/h4&gt;\n                            &lt;p&gt;&lt;field name=\"descripcion\"/&gt;&lt;/p&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/t&gt;\n            &lt;/templates&gt;\n        &lt;/kanban&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#elementos-kanban","title":"Elementos Kanban","text":"<p>Campos fuera de templates:</p> <p>Deben declararse antes de <code>&lt;templates&gt;</code> para estar disponibles en el template:</p> <p>ejemplo</p> <pre><code>&lt;kanban&gt;\n    &lt;field name=\"nombre\"/&gt;\n    &lt;field name=\"prioridad\"/&gt;\n    &lt;field name=\"color\"/&gt;\n    &lt;templates&gt;\n        &lt;!-- Usar campos aqu\u00ed --&gt;\n    &lt;/templates&gt;\n&lt;/kanban&gt;\n</code></pre> <p>Template kanban-box:</p> <p>Define c\u00f3mo se ve cada tarjeta:</p> <p>ejemplo</p> <pre><code>&lt;templates&gt;\n    &lt;t t-name=\"kanban-box\"&gt;\n        &lt;div class=\"oe_kanban_card\" t-att-style=\"kanban_color(record.color.raw_value)\"&gt;\n            &lt;div class=\"oe_kanban_content\"&gt;\n                &lt;!-- Contenido de la tarjeta --&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/t&gt;\n&lt;/templates&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#acciones-en-tarjetas","title":"Acciones en Tarjetas","text":"<p>ejemplo</p> <pre><code>&lt;t t-name=\"kanban-box\"&gt;\n    &lt;div class=\"oe_kanban_card\"&gt;\n        &lt;!-- Abrir formulario al hacer clic en el nombre --&gt;\n        &lt;h4&gt;&lt;a type=\"open\"&gt;&lt;field name=\"nombre\"/&gt;&lt;/a&gt;&lt;/h4&gt;\n\n        &lt;!-- Editar inline --&gt;\n        &lt;a type=\"edit\"&gt;Editar&lt;/a&gt;\n\n        &lt;!-- Eliminar --&gt;\n        &lt;a type=\"delete\"&gt;Eliminar&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/t&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#kanban-con-imagenes","title":"Kanban con Im\u00e1genes","text":"<p>ejemplo</p> <pre><code>&lt;t t-name=\"kanban-box\"&gt;\n    &lt;div class=\"oe_kanban_card oe_kanban_global_click\"&gt;\n        &lt;div class=\"o_kanban_image\"&gt;\n            &lt;img t-att-src=\"kanban_image('producto.producto', 'imagen', record.id.raw_value)\"/&gt;\n        &lt;/div&gt;\n        &lt;div class=\"oe_kanban_details\"&gt;\n            &lt;strong&gt;&lt;field name=\"nombre\"/&gt;&lt;/strong&gt;\n            &lt;ul&gt;\n                &lt;li&gt;Precio: &lt;field name=\"precio\"/&gt;&lt;/li&gt;\n                &lt;li&gt;Stock: &lt;field name=\"stock\"/&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/t&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#colores-en-kanban","title":"Colores en Kanban","text":"<p>ejemplo</p> <pre><code>&lt;kanban&gt;\n    &lt;field name=\"color\"/&gt;\n    &lt;templates&gt;\n        &lt;t t-name=\"kanban-box\"&gt;\n            &lt;div class=\"oe_kanban_card\" t-attf-class=\"oe_kanban_color_#{record.color.raw_value}\"&gt;\n                &lt;!-- Contenido --&gt;\n            &lt;/div&gt;\n        &lt;/t&gt;\n    &lt;/templates&gt;\n&lt;/kanban&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#menu-dropdown-en-tarjetas","title":"Men\u00fa Dropdown en Tarjetas","text":"<p>ejemplo</p> <pre><code>&lt;div class=\"oe_kanban_card\"&gt;\n    &lt;div class=\"oe_dropdown_kanban dropdown\"&gt;\n        &lt;a class=\"dropdown-toggle o-no-caret btn\" data-bs-toggle=\"dropdown\" href=\"#\"&gt;\n            &lt;span class=\"fa fa-ellipsis-v\"/&gt;\n        &lt;/a&gt;\n        &lt;div class=\"dropdown-menu\" role=\"menu\"&gt;\n            &lt;a type=\"edit\" role=\"menuitem\" class=\"dropdown-item\"&gt;Editar&lt;/a&gt;\n            &lt;a type=\"delete\" role=\"menuitem\" class=\"dropdown-item\"&gt;Eliminar&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;!-- Resto del contenido --&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#vistas-search-busqueda","title":"Vistas Search (B\u00fasqueda)","text":"<p>Las vistas search definen filtros y opciones de b\u00fasqueda disponibles en otras vistas.</p>"},{"location":"7_3_desarrollo_de_vistas/#estructura-basica_3","title":"Estructura B\u00e1sica","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"producto_search\"&gt;\n    &lt;field name=\"name\"&gt;producto.search&lt;/field&gt;\n    &lt;field name=\"model\"&gt;inventario.producto&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;search&gt;\n            &lt;field name=\"nombre\"/&gt;\n            &lt;field name=\"codigo\"/&gt;\n            &lt;field name=\"categoria_id\"/&gt;\n        &lt;/search&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#campos-de-busqueda","title":"Campos de B\u00fasqueda","text":"<p>B\u00fasqueda simple:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"nombre\"/&gt;\n</code></pre> <p>B\u00fasqueda con dominio personalizado:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"nombre_o_codigo\" \n       string=\"Nombre o C\u00f3digo\"\n       filter_domain=\"['|', ('nombre', 'ilike', self), ('codigo', 'ilike', self)]\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#filtros-predefinidos","title":"Filtros Predefinidos","text":"<p>ejemplo</p> <pre><code>&lt;search&gt;\n    &lt;field name=\"nombre\"/&gt;\n\n    &lt;!-- Filtros booleanos --&gt;\n    &lt;filter name=\"activos\" string=\"Activos\" domain=\"[('activo', '=', True)]\"/&gt;\n    &lt;filter name=\"sin_stock\" string=\"Sin Stock\" domain=\"[('stock', '=', 0)]\"/&gt;\n\n    &lt;!-- Separador visual --&gt;\n    &lt;separator/&gt;\n\n    &lt;!-- Filtros con dominio complejo --&gt;\n    &lt;filter name=\"precio_alto\" string=\"Precio Alto\" domain=\"[('precio', '&amp;gt;', 100)]\"/&gt;\n\n    &lt;!-- Agrupaci\u00f3n --&gt;\n    &lt;group expand=\"0\" string=\"Agrupar por\"&gt;\n        &lt;filter name=\"group_categoria\" string=\"Categor\u00eda\" context=\"{'group_by': 'categoria_id'}\"/&gt;\n        &lt;filter name=\"group_estado\" string=\"Estado\" context=\"{'group_by': 'estado'}\"/&gt;\n    &lt;/group&gt;\n&lt;/search&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#filtros-por-fecha","title":"Filtros por Fecha","text":"<p>ejemplo</p> <pre><code>&lt;filter name=\"mes_actual\" string=\"Este Mes\"\n        domain=\"[('fecha', '&amp;gt;=', (context_today() - relativedelta(months=1)).strftime('%Y-%m-01')),\n                 ('fecha', '&amp;lt;', (context_today() + relativedelta(months=1)).strftime('%Y-%m-01'))]\"/&gt;\n\n&lt;filter name=\"este_a\u00f1o\" string=\"Este A\u00f1o\"\n        domain=\"[('fecha', '&amp;gt;=', context_today().strftime('%Y-01-01'))]\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#agrupacion-por-fechas","title":"Agrupaci\u00f3n por Fechas","text":"<p>ejemplo</p> <pre><code>&lt;group expand=\"0\" string=\"Agrupar por\"&gt;\n    &lt;filter name=\"group_fecha_mes\" string=\"Mes\" context=\"{'group_by': 'fecha:month'}\"/&gt;\n    &lt;filter name=\"group_fecha_a\u00f1o\" string=\"A\u00f1o\" context=\"{'group_by': 'fecha:year'}\"/&gt;\n&lt;/group&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#vistas-calendar","title":"Vistas Calendar","text":"<p>Muestran registros en un calendario bas\u00e1ndose en campos de fecha.</p> <p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"evento_calendar\"&gt;\n    &lt;field name=\"name\"&gt;evento.calendar&lt;/field&gt;\n    &lt;field name=\"model\"&gt;agenda.evento&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;calendar date_start=\"fecha_inicio\" \n                  date_stop=\"fecha_fin\"\n                  color=\"usuario_id\"\n                  mode=\"month\"&gt;\n            &lt;field name=\"nombre\"/&gt;\n            &lt;field name=\"descripcion\"/&gt;\n        &lt;/calendar&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Atributos principales:</p> <ul> <li><code>date_start</code>: Campo de fecha/hora de inicio (obligatorio)</li> <li><code>date_stop</code>: Campo de fecha/hora de fin (opcional)</li> <li><code>date_delay</code>: Duraci\u00f3n en horas (alternativa a date_stop)</li> <li><code>color</code>: Campo para colorear eventos</li> <li><code>mode</code>: Vista inicial (day, week, month)</li> </ul>"},{"location":"7_3_desarrollo_de_vistas/#vistas-graph","title":"Vistas Graph","text":"<p>Muestran datos agregados en gr\u00e1ficos.</p> <p>ejemplo</p> <pre><code>&lt;record model=\"ir.ui.view\" id=\"venta_graph\"&gt;\n    &lt;field name=\"name\"&gt;venta.graph&lt;/field&gt;\n    &lt;field name=\"model\"&gt;venta.venta&lt;/field&gt;\n    &lt;field name=\"arch\" type=\"xml\"&gt;\n        &lt;graph type=\"bar\" stacked=\"True\"&gt;\n            &lt;field name=\"fecha\" type=\"row\" interval=\"month\"/&gt;\n            &lt;field name=\"categoria_id\" type=\"col\"/&gt;\n            &lt;field name=\"total\" type=\"measure\"/&gt;\n        &lt;/graph&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Tipos de gr\u00e1fico:</p> <ul> <li><code>bar</code>: Barras</li> <li><code>line</code>: L\u00edneas</li> <li><code>pie</code>: Circular</li> </ul> <p>Tipos de campo:</p> <ul> <li><code>row</code>: Eje X o agrupaci\u00f3n principal</li> <li><code>col</code>: Series o sub-agrupaci\u00f3n</li> <li><code>measure</code>: Valores a medir (sum, avg, min, max, count)</li> </ul>"},{"location":"7_3_desarrollo_de_vistas/#widgets-especiales","title":"Widgets Especiales","text":"<p>Los widgets cambian c\u00f3mo se muestra un campo sin cambiar su tipo.</p>"},{"location":"7_3_desarrollo_de_vistas/#widgets-para-integerfloat","title":"Widgets para Integer/Float","text":"<p>ejemplo</p> <pre><code>&lt;field name=\"porcentaje\" widget=\"percentpie\"/&gt;\n&lt;field name=\"progreso\" widget=\"progressbar\"/&gt;\n&lt;field name=\"horas\" widget=\"float_time\"/&gt;\n&lt;field name=\"cantidad\" widget=\"integer\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#widgets-para-chartext","title":"Widgets para Char/Text","text":"<p>ejemplo</p> <pre><code>&lt;field name=\"email\" widget=\"email\"/&gt;\n&lt;field name=\"url\" widget=\"url\"/&gt;\n&lt;field name=\"telefono\" widget=\"phone\"/&gt;\n&lt;field name=\"contenido\" widget=\"html\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#widgets-para-many2one","title":"Widgets para Many2one","text":"<p>ejemplo</p> <pre><code>&lt;field name=\"usuario_id\" widget=\"many2one_avatar\"/&gt;\n&lt;field name=\"pais_id\" widget=\"many2one\" options=\"{'no_create': True, 'no_open': True}\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#widgets-para-many2many","title":"Widgets para Many2many","text":"<p>ejemplo</p> <pre><code>&lt;field name=\"etiquetas\" widget=\"many2many_tags\" options=\"{'color_field': 'color'}\"/&gt;\n&lt;field name=\"habilidades\" widget=\"many2many_checkboxes\"/&gt;\n&lt;field name=\"adjuntos\" widget=\"many2many_binary\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#widgets-para-boolean","title":"Widgets para Boolean","text":"<p>ejemplo</p> <pre><code>&lt;field name=\"activo\" widget=\"boolean_toggle\"/&gt;\n</code></pre>"},{"location":"7_3_desarrollo_de_vistas/#widgets-para-image","title":"Widgets para Image","text":"<p>ejemplo</p> <pre><code>&lt;field name=\"foto\" widget=\"image\" options=\"{'size': [100, 100]}\"/&gt;\n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>Organizaci\u00f3n de vistas</p> <ul> <li>Un archivo XML por modelo</li> <li>Nombrar archivos descriptivamente: <code>producto_views.xml</code></li> <li>Orden: search, list, form, kanban, otras</li> <li>Comentar vistas complejas</li> </ul> <p>Rendimiento</p> <ul> <li>No incluir campos no necesarios en list</li> <li>Usar <code>invisible=\"1\"</code> en lugar de ocultar con CSS</li> <li>Limitar campos computados en vistas list</li> <li>Usar paginaci\u00f3n por defecto en listas largas</li> </ul> <p>Usabilidad</p> <ul> <li>Campos importantes primero en formularios</li> <li>Agrupar campos relacionados</li> <li>Usar pesta\u00f1as para evitar formularios muy largos</li> <li>Proporcionar valores por defecto sensatos</li> <li>Mensajes de ayuda (<code>help</code>) en campos complejos</li> </ul> <p>Dise\u00f1o</p> <ul> <li>Mantener consistencia con vistas est\u00e1ndar de Odoo</li> <li>Usar decoraciones con moderaci\u00f3n</li> <li>Smart buttons para navegaci\u00f3n entre registros</li> <li>Botones de acci\u00f3n en header del formulario</li> </ul>"},{"location":"7_4_navegacion_e_interaccion/","title":"Navegaci\u00f3n e Interacci\u00f3n","text":""},{"location":"7_4_navegacion_e_interaccion/#navegacion-e-interaccion","title":"Navegaci\u00f3n e Interacci\u00f3n","text":"<p>La navegaci\u00f3n en Odoo se construye mediante la interacci\u00f3n de varios elementos: archivos de datos XML que cargan informaci\u00f3n inicial, acciones que definen qu\u00e9 mostrar y c\u00f3mo, men\u00fas que organizan la aplicaci\u00f3n, y el contexto que transporta informaci\u00f3n entre vistas. Dominar estos conceptos es esencial para crear aplicaciones intuitivas y bien estructuradas.</p> <p>En este cap\u00edtulo aprender\u00e1s a cargar datos iniciales, crear acciones para abrir vistas, estructurar men\u00fas de navegaci\u00f3n y usar el contexto y los dominios para filtrar y personalizar el comportamiento de tu aplicaci\u00f3n.</p>"},{"location":"7_4_navegacion_e_interaccion/#archivos-de-datos-xml","title":"Archivos de Datos XML","text":"<p>Los archivos de datos XML permiten cargar informaci\u00f3n en la base de datos al instalar o actualizar un m\u00f3dulo. Pueden contener datos de configuraci\u00f3n, registros de demostraci\u00f3n, o incluso formar parte de la estructura de vistas y men\u00fas.</p>"},{"location":"7_4_navegacion_e_interaccion/#estructura-basica","title":"Estructura B\u00e1sica","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;record model=\"nombre.modelo\" id=\"identificador_registro\"&gt;\n        &lt;field name=\"nombre_campo\"&gt;valor&lt;/field&gt;\n        &lt;field name=\"otro_campo\"&gt;otro valor&lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Elementos clave:</p> <ul> <li><code>&lt;odoo&gt;</code>: Contenedor principal de todos los registros</li> <li><code>&lt;record&gt;</code>: Define un registro a insertar/actualizar</li> <li><code>model</code>: Modelo donde se crear\u00e1 el registro</li> <li><code>id</code>: Identificador externo \u00fanico (External ID)</li> <li><code>&lt;field&gt;</code>: Define el valor de un campo</li> </ul> <p>Ejemplo Pr\u00e1ctico</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;record model=\"producto.categoria\" id=\"categoria_electronica\"&gt;\n        &lt;field name=\"name\"&gt;Electr\u00f3nica&lt;/field&gt;\n        &lt;field name=\"descripcion\"&gt;Productos electr\u00f3nicos y tecnolog\u00eda&lt;/field&gt;\n        &lt;field name=\"activo\" eval=\"True\"/&gt;\n    &lt;/record&gt;\n\n    &lt;record model=\"mi.producto\" id=\"producto_laptop\"&gt;\n        &lt;field name=\"nombre\"&gt;Laptop Dell XPS&lt;/field&gt;\n        &lt;field name=\"codigo\"&gt;LAPTOP-001&lt;/field&gt;\n        &lt;field name=\"precio\" eval=\"1299.99\"/&gt;\n        &lt;field name=\"categoria_id\" ref=\"categoria_electronica\"/&gt;\n        &lt;field name=\"activo\" eval=\"True\"/&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#external-ids-identificadores-externos","title":"External IDs (Identificadores Externos)","text":"<p>Los External IDs permiten referenciar registros de forma estable entre diferentes m\u00f3dulos e instalaciones. Odoo los almacena en el modelo <code>ir.model.data</code>.</p> <p>Formato completo: <code>modulo.identificador</code></p> <p>Ejemplo</p> <pre><code>&lt;!-- Definir un External ID --&gt;\n&lt;record model=\"res.partner\" id=\"partner_ejemplo\"&gt;\n    &lt;field name=\"name\"&gt;Mi Empresa&lt;/field&gt;\n&lt;/record&gt;\n\n&lt;!-- Referenciar desde otro m\u00f3dulo --&gt;\n&lt;record model=\"otra.tabla\" id=\"otro_registro\"&gt;\n    &lt;field name=\"partner_id\" ref=\"mi_modulo.partner_ejemplo\"/&gt;\n&lt;/record&gt;\n</code></pre> <p>Convenci\u00f3n de nomenclatura</p> <p>Usa prefijos descriptivos para los External IDs:</p> <ul> <li><code>view_</code>: para vistas</li> <li><code>action_</code>: para acciones</li> <li><code>menu_</code>: para men\u00fas</li> <li><code>data_</code>: para datos</li> <li><code>demo_</code>: para datos de demostraci\u00f3n</li> </ul>"},{"location":"7_4_navegacion_e_interaccion/#referenciar-registros-con-ref","title":"Referenciar Registros con ref","text":"<p>Para referenciar un registro existente por su External ID: </p><pre><code>&lt;field name=\"usuario_id\" ref=\"base.user_admin\"/&gt;\n&lt;field name=\"pais_id\" ref=\"base.es\"/&gt;\n&lt;field name=\"empresa_id\" ref=\"base.main_company\"/&gt;\n</code></pre><p></p> <p>Si no especificas el m\u00f3dulo, Odoo busca en el m\u00f3dulo actual: </p><pre><code>&lt;!-- Busca en mi_modulo.categoria_electronica --&gt;\n&lt;field name=\"categoria_id\" ref=\"categoria_electronica\"/&gt;\n</code></pre><p></p>"},{"location":"7_4_navegacion_e_interaccion/#usar-eval-para-expresiones","title":"Usar <code>eval</code> para Expresiones","text":"<p>El atributo <code>eval</code> permite ejecutar expresiones Python:</p> <p>Ejemplo</p> <pre><code>&lt;!-- Valores booleanos --&gt;\n&lt;field name=\"activo\" eval=\"True\"/&gt;\n&lt;field name=\"archivado\" eval=\"False\"/&gt;\n\n&lt;!-- N\u00fameros --&gt;\n&lt;field name=\"cantidad\" eval=\"10\"/&gt;\n&lt;field name=\"precio\" eval=\"99.99\"/&gt;\n\n&lt;!-- Fechas --&gt;\n&lt;field name=\"fecha_actual\" eval=\"datetime.now()\"/&gt;\n&lt;field name=\"ayer\" eval=\"(datetime.now() - timedelta(days=1))\"/&gt;\n&lt;field name=\"fecha_fija\" eval=\"datetime(2024, 1, 15)\"/&gt;\n\n&lt;!-- Referenciar con eval (equivalente a ref) --&gt;\n&lt;field name=\"categoria_id\" eval=\"ref('categoria_electronica')\"/&gt;\n\n&lt;!-- Acceder a propiedades del registro referenciado --&gt;\n&lt;field name=\"precio_categoria\" eval=\"ref('categoria_electronica').precio_base\"/&gt;\n</code></pre> <p>Importaciones en eval</p> <p>Las expresiones <code>eval</code> tienen acceso a:</p> <ul> <li><code>datetime</code>, <code>timedelta</code> de Python</li> <li><code>ref()</code> para buscar External IDs</li> <li><code>obj()</code> para acceder al entorno actual</li> </ul> <p>Pero no a otros m\u00f3dulos o funciones personalizadas.</p>"},{"location":"7_4_navegacion_e_interaccion/#campos-relacionales-en-xml","title":"Campos Relacionales en XML","text":"<p>Many2one</p> <pre><code>&lt;field name=\"categoria_id\" ref=\"categoria_electronica\"/&gt;\n&lt;!-- o con eval --&gt;\n&lt;field name=\"categoria_id\" eval=\"ref('categoria_electronica')\"/&gt;\n</code></pre> <p>Many2many - Usando tuplas de comandos:</p> <pre><code>&lt;!-- Vincular registros existentes --&gt;\n&lt;field name=\"etiqueta_ids\" eval=\"[(6, 0, [ref('etiqueta_nuevo'), ref('etiqueta_oferta')])]\"/&gt;\n\n&lt;!-- Crear y vincular nuevos registros --&gt;\n&lt;field name=\"etiqueta_ids\" eval=\"[(0, 0, {'name': 'Destacado', 'color': 5})]\"/&gt;\n</code></pre> <p>One2many</p> <pre><code>&lt;field name=\"linea_ids\" eval=\"[\n    (0, 0, {'producto_id': ref('producto_laptop'), 'cantidad': 2, 'precio': 1299.99}),\n    (0, 0, {'producto_id': ref('producto_mouse'), 'cantidad': 1, 'precio': 29.99})\n]\"/&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#comandos-para-campos-x2many","title":"Comandos para Campos X2many","text":"Comando Sintaxis Descripci\u00f3n Crear y vincular <code>(0, 0, {valores})</code> Crea un nuevo registro y lo vincula Actualizar <code>(1, id, {valores})</code> Actualiza un registro vinculado Desvincular y eliminar <code>(2, id, 0)</code> Desvincula y elimina Desvincular <code>(3, id, 0)</code> Desvincula sin eliminar Vincular <code>(4, id, 0)</code> Vincula un registro existente Desvincular todos <code>(5, 0, 0)</code> Desvincula todos Reemplazar <code>(6, 0, [ids])</code> Reemplaza con lista de IDs"},{"location":"7_4_navegacion_e_interaccion/#campos-binary-e-image","title":"Campos Binary e Image","text":"<p>Con archivo local</p> <pre><code>&lt;field name=\"imagen\" type=\"base64\" file=\"mi_modulo/static/img/producto.jpg\"/&gt;\n&lt;field name=\"icono\" type=\"base64\" file=\"mi_modulo/static/description/icon.png\"/&gt;\n</code></pre> <p>La ruta es relativa al directorio ra\u00edz del m\u00f3dulo.</p> <p>Con base64 directo</p> <pre><code>&lt;field name=\"imagen\"&gt;iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk...&lt;/field&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#eliminar-registros","title":"Eliminar Registros","text":"<p>Para eliminar registros al actualizar el m\u00f3dulo:</p> <p>ejemplo</p> <pre><code>&lt;!-- Por External ID --&gt;\n&lt;delete model=\"mi.modelo\" id=\"registro_a_eliminar\"/&gt;\n\n&lt;!-- Por b\u00fasqueda --&gt;\n&lt;delete model=\"mi.modelo\" search=\"[('nombre', '=', 'Obsoleto')]\"/&gt;\n</code></pre> <p>Cuidado con delete</p> <p>Eliminar registros en datos puede romper dependencias. \u00dasalo principalmente en datos de demostraci\u00f3n, no en datos de producci\u00f3n.</p>"},{"location":"7_4_navegacion_e_interaccion/#organizar-archivos-de-datos","title":"Organizar Archivos de Datos","text":"<p>Estructura recomendada: </p><pre><code>mi_modulo/\n\u251c\u2500\u2500 data/\n\u2502   \u251c\u2500\u2500 categorias_data.xml      # Datos base necesarios\n\u2502   \u251c\u2500\u2500 configuracion_data.xml   # Configuraci\u00f3n por defecto\n\u2502   \u2514\u2500\u2500 secuencias_data.xml      # Secuencias\n\u251c\u2500\u2500 demo/\n\u2502   \u251c\u2500\u2500 productos_demo.xml       # Datos de demostraci\u00f3n\n\u2502   \u2514\u2500\u2500 clientes_demo.xml\n\u2514\u2500\u2500 security/\n    \u2514\u2500\u2500 ir.model.access.csv      # Permisos\n</code></pre><p></p> <p>En el manifest: </p><pre><code>'data': [\n    'security/ir.model.access.csv',\n    'data/categorias_data.xml',\n    'data/configuracion_data.xml',\n    'views/menu.xml',\n    'views/producto_views.xml',\n],\n'demo': [\n    'demo/productos_demo.xml',\n    'demo/clientes_demo.xml',\n],\n</code></pre><p></p> <p>Orden de carga</p> <p>Los archivos se cargan en el orden declarado en el manifest. Aseg\u00farate de que:</p> <ol> <li>Primero se cargan permisos (security)</li> <li>Luego datos base (data)</li> <li>Despu\u00e9s vistas y men\u00fas (views)</li> <li>Finalmente demos (demo)</li> </ol>"},{"location":"7_4_navegacion_e_interaccion/#acciones","title":"Acciones","text":"<p>Las acciones definen qu\u00e9 debe hacer Odoo cuando el usuario interact\u00faa con men\u00fas, botones o enlaces. Son el puente entre la interfaz y la funcionalidad.</p>"},{"location":"7_4_navegacion_e_interaccion/#tipos-de-acciones","title":"Tipos de Acciones","text":"<p>Odoo proporciona varios tipos de acciones seg\u00fan el prop\u00f3sito:</p> Tipo Modelo Uso Principal Window <code>ir.actions.act_window</code> Abrir vistas de modelos Server <code>ir.actions.server</code> Ejecutar c\u00f3digo Python Report <code>ir.actions.report</code> Generar reportes PDF URL <code>ir.actions.act_url</code> Abrir URLs Client <code>ir.actions.client</code> Acciones del cliente web"},{"location":"7_4_navegacion_e_interaccion/#acciones-window-ventana","title":"Acciones Window (Ventana)","text":"<p>Son las m\u00e1s comunes. Abren una o varias vistas de un modelo.</p> <p>Ejemplo b\u00e1sico</p> <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"action_producto_list\"&gt;\n    &lt;field name=\"name\"&gt;Productos&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;mi.producto&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Atributos principales:</p> Atributo Descripci\u00f3n <code>name</code> Nombre visible de la acci\u00f3n <code>res_model</code> Modelo a mostrar <code>view_mode</code> Tipos de vista disponibles (separados por coma) <code>view_id</code> Vista espec\u00edfica a usar (opcional) <code>domain</code> Filtro de registros <code>context</code> Contexto a pasar a las vistas <code>target</code> D\u00f3nde abrir (current, new, fullscreen) <code>limit</code> Registros por p\u00e1gina <p>Ejemplo completo</p> <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"action_producto_activos\"&gt;\n    &lt;field name=\"name\"&gt;Productos Activos&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;mi.producto&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form,kanban&lt;/field&gt;\n    &lt;field name=\"domain\"&gt;[('activo', '=', True)]&lt;/field&gt;\n    &lt;field name=\"context\"&gt;{\n        'default_activo': True,\n        'search_default_categoria': 1\n    }&lt;/field&gt;\n    &lt;field name=\"limit\"&gt;80&lt;/field&gt;\n    &lt;field name=\"help\" type=\"html\"&gt;\n        &lt;p class=\"o_view_nocontent_smiling_face\"&gt;\n            \u00a1Crea tu primer producto!\n        &lt;/p&gt;\n        &lt;p&gt;\n            Haz clic en \"Nuevo\" para a\u00f1adir un producto al inventario.\n        &lt;/p&gt;\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#especificar-vista-concreta","title":"Especificar Vista Concreta","text":"<p>Por External ID</p> <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"action_producto_form\"&gt;\n    &lt;field name=\"name\"&gt;Nuevo Producto&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;mi.producto&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;form&lt;/field&gt;\n    &lt;field name=\"view_id\" ref=\"producto_form_simplificado\"/&gt;\n    &lt;field name=\"target\"&gt;new&lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>Con view_ids (m\u00faltiples vistas espec\u00edficas)\"</p> <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"action_producto_custom\"&gt;\n    &lt;field name=\"name\"&gt;Productos&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;mi.producto&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n    &lt;field name=\"view_ids\" eval=\"[\n        (5, 0, 0),\n        (0, 0, {'view_mode': 'list', 'view_id': ref('producto_list_custom')}),\n        (0, 0, {'view_mode': 'form', 'view_id': ref('producto_form_custom')})\n    ]\"/&gt;\n&lt;/record&gt;\n</code></pre> <p>Atributo target</p> <ul> <li><code>current</code>: Abre en la ventana actual (por defecto)</li> <li><code>new</code>: Abre en un di\u00e1logo modal</li> <li><code>fullscreen</code>: Abre en pantalla completa</li> <li><code>inline</code>: Incrusta la vista en el contexto actual</li> </ul>"},{"location":"7_4_navegacion_e_interaccion/#acciones-desde-codigo-python","title":"Acciones desde C\u00f3digo Python","text":"<p>Las acciones tambi\u00e9n pueden devolverse desde m\u00e9todos Python:</p> <p>ejemplo</p> <pre><code>def action_abrir_tareas(self):\n    return {\n        'type': 'ir.actions.act_window',\n        'name': 'Tareas del Proyecto',\n        'res_model': 'proyecto.tarea',\n        'view_mode': 'list,form',\n        'domain': [('proyecto_id', '=', self.id)],\n        'context': {\n            'default_proyecto_id': self.id,\n            'default_usuario_id': self.env.user.id,\n        },\n        'target': 'current',\n    }\n</code></pre> <p>Abrir un registro espec\u00edfico:</p> <p>ejemplo</p> <pre><code>def action_ver_factura(self):\n    return {\n        'type': 'ir.actions.act_window',\n        'name': 'Factura',\n        'res_model': 'account.move',\n        'res_id': self.factura_id.id,  # ID del registro a abrir\n        'view_mode': 'form',\n        'target': 'current',\n    }\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#acciones-server","title":"Acciones Server","text":"<p>Ejecutan c\u00f3digo Python del lado del servidor. \u00datiles para automatizaciones y botones que ejecutan l\u00f3gica compleja.</p> <p>ejemplo</p> <pre><code>&lt;record model=\"ir.actions.server\" id=\"action_recalcular_precios\"&gt;\n    &lt;field name=\"name\"&gt;Recalcular Precios&lt;/field&gt;\n    &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n    &lt;field name=\"state\"&gt;code&lt;/field&gt;\n    &lt;field name=\"code\"&gt;\n        for record in records:\n            record.precio = record.coste * 1.30\n    &lt;/field&gt;\n&lt;/record&gt;\n</code></pre> <p>!!!example \"ejemplo\u00b7Tipos de acciones server (<code>state</code>):</p> <ul> <li><code>code</code>: Ejecuta c\u00f3digo Python</li> <li><code>object_create</code>: Crea un registro</li> <li><code>object_write</code>: Modifica registros</li> <li><code>multi</code>: Ejecuta m\u00faltiples acciones</li> </ul> <p>Variables disponibles en el c\u00f3digo:</p> <ul> <li><code>records</code>: Recordset con los registros seleccionados</li> <li><code>env</code>: Entorno de Odoo</li> <li><code>model</code>: Modelo actual</li> <li><code>datetime</code>, <code>time</code>, <code>date</code>: M\u00f3dulos de Python</li> </ul>"},{"location":"7_4_navegacion_e_interaccion/#acciones-url","title":"Acciones URL","text":"<p>Abren una URL externa o interna:</p> <p>ejemplo</p> <pre><code>&lt;record model=\"ir.actions.act_url\" id=\"action_documentacion\"&gt;\n    &lt;field name=\"name\"&gt;Ver Documentaci\u00f3n&lt;/field&gt;\n    &lt;field name=\"url\"&gt;https://www.odoo.com/documentation&lt;/field&gt;\n    &lt;field name=\"target\"&gt;new&lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#menus","title":"Men\u00fas","text":"<p>Los men\u00fas estructuran la navegaci\u00f3n de tu aplicaci\u00f3n. Odoo organiza los men\u00fas en una jerarqu\u00eda de tres niveles.</p>"},{"location":"7_4_navegacion_e_interaccion/#estructura-de-menus","title":"Estructura de Men\u00fas","text":"<p>Niveles de men\u00fa:</p> <ol> <li>Nivel 1: Aplicaci\u00f3n principal (barra superior)</li> <li>Nivel 2: Secciones dentro de la aplicaci\u00f3n (lateral izquierdo)</li> <li>Nivel 3: Opciones espec\u00edficas que abren acciones</li> </ol> <p>ejemplo niveles menu</p> <pre><code>&lt;!-- Nivel 1: Aplicaci\u00f3n principal --&gt;\n&lt;menuitem id=\"menu_inventario_root\" \n          name=\"Inventario\"\n          sequence=\"10\"/&gt;\n\n&lt;!-- Nivel 2: Secci\u00f3n --&gt;\n&lt;menuitem id=\"menu_inventario_productos\" \n          name=\"Productos\"\n          parent=\"menu_inventario_root\"\n          sequence=\"10\"/&gt;\n\n&lt;!-- Nivel 3: Acci\u00f3n --&gt;\n&lt;menuitem id=\"menu_producto_list\" \n          name=\"Todos los Productos\"\n          parent=\"menu_inventario_productos\"\n          action=\"action_producto_list\"\n          sequence=\"10\"/&gt;\n</code></pre> <p>Sintaxis de menuitem</p> <pre><code>&lt;menuitem id=\"identificador_unico\"\n          name=\"Nombre Visible\"\n          parent=\"id_menu_padre\"\n          action=\"id_accion\"\n          sequence=\"10\"\n          groups=\"grupo1,grupo2\"\n          web_icon=\"mi_modulo,static/description/icon.png\"/&gt;\n</code></pre> <p>Atributos principales:</p> Atributo Descripci\u00f3n <code>id</code> Identificador \u00fanico del men\u00fa <code>name</code> Texto visible del men\u00fa <code>parent</code> ID del men\u00fa padre (sin parent = nivel 1) <code>action</code> Acci\u00f3n a ejecutar al hacer clic <code>sequence</code> Orden de aparici\u00f3n (menor = primero) <code>groups</code> Grupos que pueden ver el men\u00fa <code>web_icon</code> Icono para aplicaciones de nivel 1 <p>Crear Men\u00fa Completo</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;!-- Acci\u00f3n --&gt;\n    &lt;record model=\"ir.actions.act_window\" id=\"action_producto_list\"&gt;\n        &lt;field name=\"name\"&gt;Productos&lt;/field&gt;\n        &lt;field name=\"res_model\"&gt;mi.producto&lt;/field&gt;\n        &lt;field name=\"view_mode\"&gt;list,form,kanban&lt;/field&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Men\u00fa nivel 1 --&gt;\n    &lt;menuitem id=\"menu_inventario_root\"\n              name=\"Inventario\"\n              sequence=\"10\"\n              web_icon=\"mi_modulo,static/description/icon.png\"/&gt;\n\n    &lt;!-- Men\u00fa nivel 2 --&gt;\n    &lt;menuitem id=\"menu_inventario_productos\"\n              name=\"Productos\"\n              parent=\"menu_inventario_root\"\n              sequence=\"10\"/&gt;\n\n    &lt;!-- Men\u00fa nivel 3 con acci\u00f3n --&gt;\n    &lt;menuitem id=\"menu_producto_list\"\n              name=\"Todos los Productos\"\n              parent=\"menu_inventario_productos\"\n              action=\"action_producto_list\"\n              sequence=\"10\"/&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#organizar-menus","title":"Organizar Men\u00fas","text":"<p>Por m\u00f3dulo: </p><pre><code>mi_modulo/\n\u2514\u2500\u2500 views/\n    \u251c\u2500\u2500 menu.xml              # Todos los men\u00fas\n    \u251c\u2500\u2500 producto_views.xml    # Vistas y acciones de productos\n    \u2514\u2500\u2500 categoria_views.xml   # Vistas y acciones de categor\u00edas\n</code></pre><p></p> <p>En el manifest: </p><pre><code>'data': [\n    'views/producto_views.xml',\n    'views/categoria_views.xml',\n    'views/menu.xml',  # Cargar men\u00fas al final\n],\n</code></pre><p></p>"},{"location":"7_4_navegacion_e_interaccion/#iconos-para-aplicaciones","title":"Iconos para Aplicaciones","text":"<p>Para men\u00fas de nivel 1, puedes especificar un icono: </p><pre><code>&lt;menuitem id=\"menu_mi_app\"\n          name=\"Mi Aplicaci\u00f3n\"\n          web_icon=\"mi_modulo,static/description/icon.png\"/&gt;\n</code></pre><p></p> <p>El archivo debe estar en <code>mi_modulo/static/description/icon.png</code> con tama\u00f1o recomendado de 256x256px.</p>"},{"location":"7_4_navegacion_e_interaccion/#contexto","title":"Contexto","text":"<p>El contexto es un diccionario Python que transporta informaci\u00f3n entre vistas, m\u00e9todos y acciones. Es fundamental para personalizar el comportamiento de Odoo.</p>"},{"location":"7_4_navegacion_e_interaccion/#acceder-al-contexto","title":"Acceder al Contexto","text":"<p>En Python: </p><pre><code># Leer todo el contexto\ncontexto = self.env.context\nprint(contexto)\n\n# Leer un valor espec\u00edfico\nidioma = self.env.context.get('lang')\nmodo = self.env.context.get('modo_especial', False)\n</code></pre><p></p> <p>En XML (vistas): </p><pre><code>&lt;field name=\"campo\" invisible=\"context.get('ocultar_campo', False)\"/&gt;\n</code></pre><p></p>"},{"location":"7_4_navegacion_e_interaccion/#valores-comunes-del-contexto","title":"Valores Comunes del Contexto","text":"<p>Odoo incluye autom\u00e1ticamente ciertos valores:</p> Clave Descripci\u00f3n <code>lang</code> Idioma del usuario (ej: 'es_ES') <code>tz</code> Zona horaria del usuario <code>uid</code> ID del usuario actual <code>active_id</code> ID del registro activo <code>active_ids</code> IDs de registros seleccionados <code>active_model</code> Modelo del registro activo"},{"location":"7_4_navegacion_e_interaccion/#pasar-contexto-en-acciones","title":"Pasar Contexto en Acciones","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"action_tareas_usuario\"&gt;\n    &lt;field name=\"name\"&gt;Mis Tareas&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;proyecto.tarea&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n    &lt;field name=\"context\"&gt;{\n        'default_usuario_id': uid,\n        'search_default_abiertas': 1,\n        'ocultar_campo_interno': True\n    }&lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#valores-por-defecto-con-contexto","title":"Valores por Defecto con Contexto","text":"<p>Prefijo <code>default_</code> establece valores por defecto en formularios:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"context\"&gt;{\n    'default_activo': True,\n    'default_categoria_id': active_id,\n    'default_fecha': context_today()\n}&lt;/field&gt;\n</code></pre> <p>En botones:</p> <pre><code>&lt;button name=\"%(action_crear_tarea)d\" \n        type=\"action\" \n        string=\"Crear Tarea\"\n        context=\"{'default_proyecto_id': active_id, 'default_usuario_id': uid}\"/&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#filtros-por-defecto-con-contexto","title":"Filtros por Defecto con Contexto","text":"<p>Prefijo <code>search_default_</code> activa filtros de b\u00fasqueda autom\u00e1ticamente:</p> <p>ejemplo</p> <pre><code>&lt;field name=\"context\"&gt;{\n    'search_default_activos': 1,\n    'search_default_categoria': 1\n}&lt;/field&gt;\n</code></pre> <p>Esto activa los filtros con <code>name=\"activos\"</code> y <code>name=\"categoria\"</code> en la vista search.</p>"},{"location":"7_4_navegacion_e_interaccion/#modificar-contexto-en-python","title":"Modificar Contexto en Python","text":"<p>ejemplo</p> <pre><code># A\u00f1adir valores al contexto\nnuevo_contexto = dict(self.env.context, clave_nueva='valor')\nself = self.with_context(nuevo_contexto)\n\n# O directamente\nself = self.with_context(clave_nueva='valor', otra_clave='otro_valor')\n\n# Crear contexto limpio\nself = self.with_context({})\n</code></pre> <p>Ejemplo pr\u00e1ctico:</p> <pre><code>def action_duplicar_sin_copiar_ventas(self):\n    # Duplicar producto pero sin copiar las ventas asociadas\n    return {\n        'type': 'ir.actions.act_window',\n        'name': 'Duplicar Producto',\n        'res_model': 'mi.producto',\n        'view_mode': 'form',\n        'context': dict(self.env.context, no_copiar_ventas=True),\n        'target': 'new',\n    }\n\n@api.returns('self', lambda value: value.id)\ndef copy(self, default=None):\n    # Si el contexto tiene no_copiar_ventas, no copiar las ventas\n    if self.env.context.get('no_copiar_ventas'):\n        default = dict(default or {})\n        default['venta_ids'] = []\n    return super(Producto, self).copy(default)\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#dominios-domains","title":"Dominios (Domains)","text":"<p>Los dominios son filtros que limitan los registros visibles o seleccionables. Se escriben como listas de tuplas con operadores de comparaci\u00f3n.</p>"},{"location":"7_4_navegacion_e_interaccion/#sintaxis-basica","title":"Sintaxis B\u00e1sica","text":"<pre><code>[('campo', 'operador', 'valor')]\n</code></pre> <p>Ejemplo</p> <pre><code>[('activo', '=', True)]  # Registros activos\n[('precio', '&gt;', 100)]    # Precio mayor a 100\n[('nombre', 'ilike', 'laptop')]  # Nombre contiene \"laptop\"\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#operadores-de-comparacion","title":"Operadores de Comparaci\u00f3n","text":"Operador Descripci\u00f3n Ejemplo <code>=</code> Igual <code>('estado', '=', 'abierto')</code> <code>!=</code> Diferente <code>('estado', '!=', 'cancelado')</code> <code>&gt;</code> Mayor que <code>('precio', '&gt;', 100)</code> <code>&gt;=</code> Mayor o igual <code>('stock', '&gt;=', 10)</code> <code>&lt;</code> Menor que <code>('edad', '&lt;', 18)</code> <code>&lt;=</code> Menor o igual <code>('descuento', '&lt;=', 0.5)</code> <code>in</code> En lista <code>('estado', 'in', ['borrador', 'confirmado'])</code> <code>not in</code> No en lista <code>('tipo', 'not in', ['temporal', 'prueba'])</code> <code>like</code> Coincide (case-sensitive) <code>('codigo', 'like', 'PROD%')</code> <code>ilike</code> Coincide (case-insensitive) <code>('nombre', 'ilike', '%laptop%')</code> <code>=like</code> Patr\u00f3n SQL <code>('email', '=like', '%@gmail.com')</code> <code>=ilike</code> Patr\u00f3n SQL (insensitive) <code>('email', '=ilike', '%@gmail.com')</code>"},{"location":"7_4_navegacion_e_interaccion/#operadores-logicos","title":"Operadores L\u00f3gicos","text":"<p>AND (por defecto):</p> <pre><code>[('activo', '=', True), ('precio', '&gt;', 100)]\n# Registros activos Y con precio &gt; 100\n</code></pre> <p>OR:</p> <pre><code>['|', ('estado', '=', 'borrador'), ('estado', '=', 'confirmado')]\n# Registros en estado borrador O confirmado\n</code></pre> <p>NOT:</p> <pre><code>['!', ('archivado', '=', True)]\n# Registros NO archivados\n</code></pre> <p>Combinar operadores:</p> <pre><code>[\n    '|',  # OR principal\n        ('estado', '=', 'urgente'),\n        '&amp;',  # AND anidado\n            ('prioridad', '&gt;', 5),\n            ('fecha_limite', '&lt;=', '2024-12-31')\n]\n# (urgente) O (prioridad &gt; 5 Y fecha_limite &lt;= 2024-12-31)\n</code></pre> <p>Prefijo de operadores l\u00f3gicos</p> <p>Los operadores <code>|</code>, <code>&amp;</code>, <code>!</code> se colocan ANTES de los elementos que afectan: - <code>|</code> afecta a los 2 siguientes elementos - <code>&amp;</code> afecta a los 2 siguientes elementos - <code>!</code> afecta al siguiente elemento</p>"},{"location":"7_4_navegacion_e_interaccion/#dominios-en-acciones","title":"Dominios en Acciones","text":"<p>ejemplo</p> <pre><code>&lt;record model=\"ir.actions.act_window\" id=\"action_productos_activos\"&gt;\n    &lt;field name=\"name\"&gt;Productos Activos&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;mi.producto&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;list,form&lt;/field&gt;\n    &lt;field name=\"domain\"&gt;[('activo', '=', True), ('stock', '&gt;', 0)]&lt;/field&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#dominios-en-campos-relacionales","title":"Dominios en Campos Relacionales","text":"<p>Limitar las opciones disponibles en campos Many2one o Many2many:</p> <p>ejemplo</p> <pre><code>&lt;!-- En la vista --&gt;\n&lt;field name=\"categoria_id\" domain=\"[('tipo', '=', 'producto')]\"/&gt;\n&lt;field name=\"cliente_id\" domain=\"[('is_company', '=', False), ('customer', '=', True)]\"/&gt;\n</code></pre> <p>En el modelo:</p> <pre><code>categoria_id = fields.Many2one(\n    'producto.categoria',\n    domain=[('tipo', '=', 'producto')]\n)\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#dominios-dinamicos","title":"Dominios Din\u00e1micos","text":"<p>Usar valores de otros campos en el dominio:</p> <p>ejemplo</p> <p>```xml  </p> <p> </p> <p>Con m\u00faltiples condiciones:</p> <pre><code>&lt;field name=\"es_empresa\" invisible=\"1\"/&gt;\n&lt;field name=\"pais_id\" invisible=\"1\"/&gt;\n&lt;field name=\"contacto_id\" domain=\"[\n    ('is_company', '=', es_empresa),\n    ('country_id', '=', pais_id),\n    ('active', '=', True)\n]\"/&gt;\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#dominios-con-contexto","title":"Dominios con Contexto","text":"<p>Usar valores del contexto en dominios: </p><pre><code>&lt;field name=\"producto_id\" domain=\"[('id', 'in', context.get('producto_ids', []))]\"/&gt;\n</code></pre><p></p> <p>En Python:</p> <pre><code>def _compute_productos_disponibles(self):\n    productos_ids = self.categoria_id.producto_ids.ids\n    return [('id', 'in', productos_ids)]\n\nproducto_id = fields.Many2one(\n    'mi.producto',\n    domain=_compute_productos_disponibles\n)\n</code></pre>"},{"location":"7_4_navegacion_e_interaccion/#dominios-en-busquedas","title":"Dominios en B\u00fasquedas","text":"<p>ejemplo de dominios de b\u00fasquedas</p> <pre><code># Buscar productos activos con stock\nproductos = self.env['mi.producto'].search([\n    ('activo', '=', True),\n    ('stock', '&gt;', 0)\n])\n\n# Con OR\nproductos = self.env['mi.producto'].search([\n    '|',\n    ('categoria_id.name', '=', 'Electr\u00f3nica'),\n    ('categoria_id.name', '=', 'Inform\u00e1tica')\n])\n\n# Con l\u00edmite\nultimos_10 = self.env['mi.producto'].search([], limit=10, order='create_date desc')\n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>Archivos de datos</p> <ul> <li>Separa datos de configuraci\u00f3n de datos de demo</li> <li>Usa External IDs descriptivos y \u00fanicos</li> <li>Carga datos en orden l\u00f3gico (dependencias primero)</li> <li>Documenta datos complejos con comentarios XML</li> </ul> <p>Acciones</p> <ul> <li>Nombra acciones descriptivamente: <code>action_producto_activos</code></li> <li>Establece l\u00edmites razonables (80-100 registros)</li> <li>A\u00f1ade mensajes de ayuda cuando la vista est\u00e9 vac\u00eda</li> <li>Usa target=\"new\" para formularios temporales/wizards</li> </ul> <p>Men\u00fas</p> <ul> <li>Estructura jer\u00e1rquica l\u00f3gica (no m\u00e1s de 3 niveles)</li> <li>Secuencias coherentes (10, 20, 30... para facilitar reordenar)</li> <li>Nombres de men\u00fa claros y concisos</li> <li>Agrupa funcionalidades relacionadas</li> </ul> <p>Contexto</p> <ul> <li>No abuses del contexto (solo informaci\u00f3n necesaria)</li> <li>Usa prefijos est\u00e1ndar: <code>default_</code>, <code>search_default_</code></li> <li>Documenta claves personalizadas del contexto</li> <li>Limpia el contexto cuando sea necesario</li> </ul> <p>Dominios</p> <ul> <li>Mant\u00e9n dominios simples y legibles</li> <li>Documenta l\u00f3gica compleja con comentarios</li> <li>Usa dominios din\u00e1micos en lugar de c\u00f3digo Python cuando sea posible</li> <li>Valida que los campos usados existan en el modelo</li> </ul>"},{"location":"7_5_logica_negocio/","title":"L\u00f3gica de Negocio","text":""},{"location":"7_5_logica_negocio/#logica-de-negocio","title":"L\u00f3gica de Negocio","text":"<p>La l\u00f3gica de negocio es el coraz\u00f3n de cualquier aplicaci\u00f3n Odoo. Es donde defines c\u00f3mo se comportan tus modelos, c\u00f3mo responden a las acciones del usuario y c\u00f3mo interact\u00faan entre s\u00ed. El ORM de Odoo proporciona una API potente y elegante que permite escribir c\u00f3digo Python que se traduce autom\u00e1ticamente en operaciones de base de datos.</p> <p>En este cap\u00edtulo aprender\u00e1s a dominar la API del ORM, entender c\u00f3mo funcionan los recordsets, usar decoradores para controlar el comportamiento de tus m\u00e9todos, y trabajar con fechas y excepciones de forma eficiente.</p>"},{"location":"7_5_logica_negocio/#api-del-orm","title":"API del ORM","text":"<p>El ORM (Object-Relational Mapping) de Odoo proporciona m\u00e9todos para interactuar con la base de datos sin escribir SQL. Todo el c\u00f3digo se escribe en Python y el ORM se encarga de traducirlo a consultas SQL eficientes.</p>"},{"location":"7_5_logica_negocio/#el-entorno-environment","title":"El Entorno (Environment)","text":"<p>El entorno (<code>env</code>) es el punto de acceso a todo el sistema Odoo desde Python. Contiene:</p> <ul> <li>Acceso a todos los modelos</li> <li>Informaci\u00f3n del usuario actual</li> <li>El cursor de base de datos</li> <li>El contexto actual</li> <li><pre><code># Acceder a un modelo\nPartner = self.env['res.partner']\n\n# Informaci\u00f3n del usuario actual\nusuario_actual = self.env.user\nprint(usuario_actual.name)  # \"Administrator\"\n\n# Acceder al contexto\nidioma = self.env.context.get('lang')  # 'es_ES'\n\n# Acceder a la empresa actual\nempresa = self.env.company\n</code></pre></li> </ul>"},{"location":"7_5_logica_negocio/#recordsets","title":"Recordsets","text":"<p>Un recordset es una colecci\u00f3n ordenada de registros de un mismo modelo. Es similar a una lista de Python pero con capacidades especiales del ORM.</p> <p>Caracter\u00edsticas de los recordsets:</p> <ul> <li>Son iterables</li> <li>No tienen elementos duplicados</li> <li>Soportan operaciones de conjuntos</li> <li>Permiten acceder a campos cuando son singletons</li> </ul> <p>Trabajar con recordsets</p> <pre><code># Crear un recordset vac\u00edo\nproductos = self.env['mi.producto']\n\n# Buscar productos (devuelve un recordset)\nproductos = self.env['mi.producto'].search([('activo', '=', True)])\n\n# Iterar sobre recordsets\nfor producto in productos:\n    print(producto.nombre)  # producto es un singleton\n\n# Acceder al primer elemento\nprimer_producto = productos[0]  # singleton\n\n# Longitud\ncantidad = len(productos)\n\n# Verificar si est\u00e1 vac\u00edo\nif productos:\n    print(\"Hay productos\")\n\n# IDs de los registros\nids = productos.ids  # [1, 2, 3, 4]\n</code></pre>"},{"location":"7_5_logica_negocio/#singletons","title":"Singletons","text":"<p>Un singleton es un recordset con exactamente un registro. La mayor\u00eda de operaciones sobre campos solo funcionan en singletons.</p> <p>Singleton vs Recordset</p> <pre><code># Recordset con m\u00faltiples registros\nproductos = self.env['mi.producto'].search([])\nprint(productos)  # mi.producto(1, 2, 3, 4, 5)\n\n# Error: no puedes acceder a campos en recordsets m\u00faltiples\n# print(productos.nombre)  # \u00a1Error!\n\n# Iterar para obtener singletons\nfor producto in productos:\n    print(producto)  # mi.producto(1), luego mi.producto(2), etc.\n    print(producto.nombre)  # Ahora s\u00ed funciona\n\n# Asegurar que es singleton\nproducto = productos[0]  # Obtener el primero\nproducto.ensure_one()  # Lanza error si no es singleton\nprint(producto.nombre)  # Funciona\n</code></pre>"},{"location":"7_5_logica_negocio/#operaciones-con-conjuntos","title":"Operaciones con Conjuntos","text":"<p>Los recordsets soportan operaciones matem\u00e1ticas de conjuntos:</p> <p>Operaciones de conjuntos</p> <pre><code>productos1 = self.env['mi.producto'].search([('categoria_id', '=', 1)])\nproductos2 = self.env['mi.producto'].search([('precio', '&gt;', 100)])\n\n# Uni\u00f3n (|)\ntodos = productos1 | productos2\n\n# Intersecci\u00f3n (&amp;)\ncomunes = productos1 &amp; productos2\n\n# Diferencia (-)\nsolo_cat1 = productos1 - productos2\n\n# Verificar pertenencia\nif producto in productos1:\n    print(\"El producto est\u00e1 en la categor\u00eda 1\")\n\n# Concatenar (mantiene orden, permite duplicados temporalmente)\nconcatenados = productos1 + productos2\n</code></pre>"},{"location":"7_5_logica_negocio/#metodos-crud","title":"M\u00e9todos CRUD","text":"<p>CRUD son las operaciones b\u00e1sicas: Create, Read, Update, Delete. El ORM proporciona m\u00e9todos espec\u00edficos para cada una.</p>"},{"location":"7_5_logica_negocio/#search-buscar-registros","title":"search() - Buscar Registros","text":"<p>Busca registros que cumplan un dominio y devuelve un recordset.</p> <p>M\u00e9todo search()</p> <pre><code># B\u00fasqueda simple\nproductos = self.env['mi.producto'].search([('activo', '=', True)])\n\n# Con l\u00edmite\nultimos_5 = self.env['mi.producto'].search([], limit=5, order='create_date desc')\n\n# Con offset (paginaci\u00f3n)\npagina_2 = self.env['mi.producto'].search([], limit=10, offset=10)\n\n# Solo contar\ncantidad = self.env['mi.producto'].search_count([('activo', '=', True)])\n\n# Ordenar\nordenados = self.env['mi.producto'].search(\n    [('categoria_id', '=', 1)],\n    order='nombre asc, precio desc'\n)\n</code></pre> <p>Par\u00e1metros de search():</p> Par\u00e1metro Tipo Descripci\u00f3n <code>args</code> list Dominio de b\u00fasqueda <code>offset</code> int N\u00famero de resultados a saltar <code>limit</code> int N\u00famero m\u00e1ximo de resultados <code>order</code> str Campos de ordenaci\u00f3n <code>count</code> bool Solo devuelve el n\u00famero de registros"},{"location":"7_5_logica_negocio/#create-crear-registros","title":"create() - Crear Registros","text":"<p>Crea un nuevo registro con los valores especificados.</p> <p>M\u00e9todo create()</p> <pre><code># Crear un registro\nproducto = self.env['mi.producto'].create({\n    'nombre': 'Laptop Dell',\n    'codigo': 'LAP-001',\n    'precio': 1299.99,\n    'activo': True,\n})\nprint(producto.id)  # 42\n\n# Crear m\u00faltiples registros\nproductos = self.env['mi.producto'].create([\n    {'nombre': 'Producto 1', 'precio': 10.0},\n    {'nombre': 'Producto 2', 'precio': 20.0},\n    {'nombre': 'Producto 3', 'precio': 30.0},\n])\nprint(productos.ids)  # [43, 44, 45]\n\n# Con relaciones Many2one\nproducto = self.env['mi.producto'].create({\n    'nombre': 'Mouse',\n    'categoria_id': categoria.id,  # ID de un registro existente\n    'proveedor_id': self.env.ref('mi_modulo.proveedor_principal').id,\n})\n\n# Con relaciones Many2many\nproducto = self.env['mi.producto'].create({\n    'nombre': 'Teclado',\n    'etiqueta_ids': [(6, 0, [etiqueta1.id, etiqueta2.id])],\n})\n</code></pre>"},{"location":"7_5_logica_negocio/#write-actualizar-registros","title":"write() - Actualizar Registros","text":"<p>Actualiza los campos de todos los registros en el recordset.</p> <p>M\u00e9todo write()</p> <pre><code># Actualizar un registro\nproducto = self.env['mi.producto'].browse(42)\nproducto.write({\n    'precio': 1199.99,\n    'activo': True,\n})\n\n# Actualizar m\u00faltiples registros\nproductos = self.env['mi.producto'].search([('categoria_id', '=', 1)])\nproductos.write({\n    'descuento': 0.10,\n})\n\n# Asignaci\u00f3n directa (m\u00e1s Pyth\u00f3nico)\nproducto.precio = 1199.99\nproducto.activo = True\n\n# Para Many2many\nproducto.etiqueta_ids = [(6, 0, [id1, id2, id3])]\n# O m\u00e1s simple\nproducto.etiqueta_ids = etiquetas  # recordset\n</code></pre>"},{"location":"7_5_logica_negocio/#browse-obtener-registros-por-id","title":"browse() - Obtener Registros por ID","text":"<p>Crea un recordset a partir de una lista de IDs.</p> <p>M\u00e9todo browse()</p> <pre><code># Un solo ID\nproducto = self.env['mi.producto'].browse(42)\n\n# M\u00faltiples IDs\nproductos = self.env['mi.producto'].browse([1, 2, 3, 4, 5])\n\n# Desde el contexto\nproducto_id = self.env.context.get('producto_activo_id')\nif producto_id:\n    producto = self.env['mi.producto'].browse(producto_id)\n\n# Verificar existencia\nproducto = self.env['mi.producto'].browse(42)\nif producto.exists():\n    print(producto.nombre)\n</code></pre>"},{"location":"7_5_logica_negocio/#unlink-eliminar-registros","title":"unlink() - Eliminar Registros","text":"<p>Elimina los registros del recordset de la base de datos.</p> <p>M\u00e9todo unlink()</p> <pre><code># Eliminar un registro\nproducto = self.env['mi.producto'].browse(42)\nproducto.unlink()\n\n# Eliminar m\u00faltiples registros\nproductos = self.env['mi.producto'].search([('activo', '=', False)])\nproductos.unlink()\n\n# Con verificaci\u00f3n\nif producto.exists():\n    producto.unlink()\n</code></pre> <p>Precauci\u00f3n con unlink()</p> <ul> <li>No se puede deshacer</li> <li>Puede fallar si hay restricciones de integridad</li> <li>Dispara los m\u00e9todos de eliminaci\u00f3n en cascada si est\u00e1n definidos</li> </ul>"},{"location":"7_5_logica_negocio/#ref-buscar-por-external-id","title":"ref() - Buscar por External ID","text":"<p>Obtiene un registro usando su identificador externo.</p> <p>M\u00e9todo ref()</p> <pre><code># Buscar por External ID\nusuario_admin = self.env.ref('base.user_admin')\nprint(usuario_admin.name)  # \"Administrator\"\n\n# Con m\u00f3dulo expl\u00edcito\ncategoria = self.env.ref('mi_modulo.categoria_electronica')\n\n# Con raise_if_not_found=False (no lanza error si no existe)\nregistro = self.env.ref('mi_modulo.registro_opcional', raise_if_not_found=False)\nif registro:\n    print(registro.name)\n</code></pre>"},{"location":"7_5_logica_negocio/#programacion-funcional-en-el-orm","title":"Programaci\u00f3n Funcional en el ORM","text":"<p>Odoo proporciona m\u00e9todos inspirados en programaci\u00f3n funcional para trabajar con recordsets de forma elegante y eficiente.</p>"},{"location":"7_5_logica_negocio/#filtered-filtrar-recordsets","title":"filtered() - Filtrar Recordsets","text":"<p>Filtra un recordset devolviendo solo los registros que cumplen una condici\u00f3n.</p> <p>M\u00e9todo filtered()</p> <pre><code>productos = self.env['mi.producto'].search([])\n\n# Con funci\u00f3n lambda\nactivos = productos.filtered(lambda p: p.activo)\ncaros = productos.filtered(lambda p: p.precio &gt; 1000)\n\n# Con expresi\u00f3n de cadena (acceso a campos relacionados)\ncon_stock = productos.filtered('stock')\ncategoria_especifica = productos.filtered(lambda p: p.categoria_id.nombre == 'Electr\u00f3nica')\n\n# Condiciones m\u00faltiples\nproductos_validos = productos.filtered(\n    lambda p: p.activo and p.stock &gt; 0 and p.precio &gt; 0\n)\n\n# Con campo relacional\nproductos_empresa = productos.filtered('categoria_id.empresa_id')\n</code></pre>"},{"location":"7_5_logica_negocio/#mapped-transformar-recordsets","title":"mapped() - Transformar Recordsets","text":"<p>Aplica una funci\u00f3n a cada registro y devuelve una lista o recordset con los resultados.</p> <p>M\u00e9todo mapped()</p> <pre><code>productos = self.env['mi.producto'].search([])\n\n# Obtener lista de nombres\nnombres = productos.mapped('nombre')\n# ['Laptop', 'Mouse', 'Teclado']\n\n# Obtener lista de precios\nprecios = productos.mapped('precio')\n# [1299.99, 29.99, 89.99]\n\n# Acceder a campos relacionados (devuelve recordset)\ncategorias = productos.mapped('categoria_id')\n# producto.categoria(1, 2, 3) - sin duplicados\n\n# Cadena de relaciones\nempresas = productos.mapped('categoria_id.empresa_id')\n\n# Con funci\u00f3n lambda (devuelve lista)\nprecios_con_iva = productos.mapped(lambda p: p.precio * 1.21)\n\n# C\u00e1lculos complejos\nmargenes = productos.mapped(lambda p: (p.precio - p.coste) / p.precio * 100)\n</code></pre>"},{"location":"7_5_logica_negocio/#sorted-ordenar-recordsets","title":"sorted() - Ordenar Recordsets","text":"<p>Ordena un recordset seg\u00fan una funci\u00f3n de ordenaci\u00f3n.</p> <p>M\u00e9todo sorted()</p> <pre><code>productos = self.env['mi.producto'].search([])\n\n# Ordenar por campo simple\npor_nombre = productos.sorted(key=lambda p: p.nombre)\npor_precio = productos.sorted(key=lambda p: p.precio)\n\n# Orden descendente\nmas_caros = productos.sorted(key=lambda p: p.precio, reverse=True)\n\n# Ordenar por m\u00faltiples criterios\nordenados = productos.sorted(key=lambda p: (p.categoria_id.nombre, -p.precio))\n\n# Ordenar por campo relacional\npor_categoria = productos.sorted(key=lambda p: p.categoria_id.sequence)\n\n# Sin clave (usa el _order del modelo)\nordenados_default = productos.sorted()\n</code></pre>"},{"location":"7_5_logica_negocio/#decoradores-del-orm","title":"Decoradores del ORM","text":"<p>Los decoradores modifican c\u00f3mo se ejecutan los m\u00e9todos en Odoo. Son fundamentales para definir el comportamiento correcto de campos computados, validaciones y respuestas a cambios.</p>"},{"location":"7_5_logica_negocio/#apidepends-dependencias-de-campos-computados","title":"@api.depends() - Dependencias de Campos Computados","text":"<p>Especifica de qu\u00e9 campos depende un campo computado. El m\u00e9todo se ejecuta autom\u00e1ticamente cuando cambian las dependencias.</p> <p>Decorador @api.depends</p> <pre><code>from odoo import models, fields, api\n\nclass Producto(models.Model):\n    _name = 'mi.producto'\n\n    precio = fields.Float('Precio')\n    cantidad = fields.Integer('Cantidad')\n    descuento = fields.Float('Descuento %')\n\n    total = fields.Float('Total', compute='_compute_total', store=True)\n\n    @api.depends('precio', 'cantidad', 'descuento')\n    def _compute_total(self):\n        for record in self:\n            subtotal = record.precio * record.cantidad\n            record.total = subtotal * (1 - record.descuento / 100)\n</code></pre> <p>Dependencias en campos relacionados:</p> <p>Depends con campos relacionados</p> <pre><code>@api.depends('linea_ids.subtotal')\ndef _compute_total_pedido(self):\n    for pedido in self:\n        pedido.total = sum(pedido.linea_ids.mapped('subtotal'))\n\n@api.depends('partner_id.country_id')\ndef _compute_zona_geografica(self):\n    for record in self:\n        if record.partner_id.country_id.code in ['ES', 'PT']:\n            record.zona = 'iberia'\n</code></pre>"},{"location":"7_5_logica_negocio/#apionchange-reaccionar-a-cambios-en-el-formulario","title":"<code>@api.onchange()</code> - Reaccionar a Cambios en el Formulario","text":"<p>Ejecuta c\u00f3digo cuando el usuario cambia un campo en el formulario, antes de guardar.</p> <p>Decorador @api.onchange</p> <pre><code>class Pedido(models.Model):\n    _name = 'mi.pedido'\n\n    partner_id = fields.Many2one('res.partner')\n    direccion_envio = fields.Char()\n    producto_id = fields.Many2one('mi.producto')\n    cantidad = fields.Integer(default=1)\n    precio_unitario = fields.Float()\n\n    @api.onchange('partner_id')\n    def _onchange_partner(self):\n        if self.partner_id:\n            # Rellenar autom\u00e1ticamente la direcci\u00f3n\n            self.direccion_envio = self.partner_id.street\n\n    @api.onchange('producto_id')\n    def _onchange_producto(self):\n        if self.producto_id:\n            # Rellenar precio del producto\n            self.precio_unitario = self.producto_id.precio\n\n            # Mostrar advertencia si no hay stock\n            if self.producto_id.stock &lt; self.cantidad:\n                return {\n                    'warning': {\n                        'title': 'Stock Insuficiente',\n                        'message': f'Solo hay {self.producto_id.stock} unidades disponibles'\n                    }\n                }\n\n    @api.onchange('cantidad', 'precio_unitario')\n    def _onchange_calcular_total(self):\n        # Recalcular cuando cambia cantidad o precio\n        # (Esto se podr\u00eda hacer mejor con un computed)\n        self.total = self.cantidad * self.precio_unitario\n</code></pre> <p>Retornar advertencias:</p> <p>Warnings en onchange</p> <pre><code>@api.onchange('fecha_inicio', 'fecha_fin')\ndef _onchange_fechas(self):\n    if self.fecha_fin and self.fecha_inicio:\n        if self.fecha_fin &lt; self.fecha_inicio:\n            self.fecha_fin = self.fecha_inicio\n            return {\n                'warning': {\n                    'title': 'Fechas Incorrectas',\n                    'message': 'La fecha de fin no puede ser anterior a la de inicio. Se ha ajustado autom\u00e1ticamente.',\n                    'type': 'notification'\n                }\n            }\n</code></pre>"},{"location":"7_5_logica_negocio/#apiconstrains-validaciones","title":"<code>@api.constrains()</code> - Validaciones","text":"<p>Valida que los datos cumplan ciertas reglas antes de guardarse.</p> <p>Decorador @api.constrains</p> <pre><code>from odoo.exceptions import ValidationError\n\nclass Producto(models.Model):\n    _name = 'mi.producto'\n\n    nombre = fields.Char()\n    precio = fields.Float()\n    coste = fields.Float()\n    stock = fields.Integer()\n    stock_minimo = fields.Integer()\n\n    @api.constrains('precio')\n    def _check_precio(self):\n        for record in self:\n            if record.precio &lt; 0:\n                raise ValidationError('El precio no puede ser negativo')\n\n    @api.constrains('precio', 'coste')\n    def _check_margen(self):\n        for record in self:\n            if record.coste and record.precio:\n                if record.precio &lt; record.coste:\n                    raise ValidationError(\n                        f'El precio ({record.precio}) no puede ser menor '\n                        f'que el coste ({record.coste})'\n                    )\n\n    @api.constrains('stock', 'stock_minimo')\n    def _check_stock(self):\n        for record in self:\n            if record.stock_minimo &lt; 0:\n                raise ValidationError('El stock m\u00ednimo no puede ser negativo')\n            if record.stock &lt; 0:\n                raise ValidationError('El stock no puede ser negativo')\n</code></pre>"},{"location":"7_5_logica_negocio/#apimodel-metodos-de-clase","title":"<code>@api.model</code> - M\u00e9todos de Clase","text":"<p>Define m\u00e9todos que operan sobre el modelo en general, no sobre registros espec\u00edficos.</p> <p>Decorador @api.model</p> <pre><code>class Producto(models.Model):\n    _name = 'mi.producto'\n\n    @api.model\n    def obtener_estadisticas(self):\n        \"\"\"Devuelve estad\u00edsticas generales de productos\"\"\"\n        return {\n            'total': self.search_count([]),\n            'activos': self.search_count([('activo', '=', True)]),\n            'sin_stock': self.search_count([('stock', '=', 0)]),\n            'precio_medio': sum(self.search([]).mapped('precio')) / self.search_count([]),\n        }\n\n    @api.model\n    def create(self, vals):\n        # Sobrescribir create para a\u00f1adir l\u00f3gica\n        if 'codigo' not in vals:\n            # Generar c\u00f3digo autom\u00e1tico\n            vals['codigo'] = self._generar_codigo()\n        return super(Producto, self).create(vals)\n\n    @api.model\n    def _generar_codigo(self):\n        \"\"\"Genera un c\u00f3digo secuencial\"\"\"\n        ultimo = self.search([], order='id desc', limit=1)\n        if ultimo and ultimo.codigo:\n            numero = int(ultimo.codigo.split('-')[1]) + 1\n        else:\n            numero = 1\n        return f\"PROD-{numero:05d}\"\n</code></pre>"},{"location":"7_5_logica_negocio/#apimodel_create_multi-crear-multiples-registros","title":"@api.model_create_multi - Crear M\u00faltiples Registros","text":"<p>Optimiza la creaci\u00f3n de m\u00faltiples registros a la vez.</p> <p>Decorador @api.model_create_multi</p> <pre><code>class Producto(models.Model):\n    _name = 'mi.producto'\n\n    @api.model_create_multi\n    def create(self, vals_list):\n        # vals_list es una lista de diccionarios\n        for vals in vals_list:\n            if 'codigo' not in vals:\n                vals['codigo'] = self._generar_codigo()\n\n        return super(Producto, self).create(vals_list)\n</code></pre>"},{"location":"7_5_logica_negocio/#sobrescribir-metodos-del-orm","title":"Sobrescribir M\u00e9todos del ORM","text":"<p>Puedes personalizar el comportamiento de los m\u00e9todos CRUD heredando y sobrescribiendo.</p>"},{"location":"7_5_logica_negocio/#sobrescribir-create","title":"Sobrescribir create()","text":"<p>Sobrescribir create()</p> <pre><code>class Pedido(models.Model):\n    _name = 'mi.pedido'\n\n    @api.model_create_multi\n    def create(self, vals_list):\n        for vals in vals_list:\n            # Generar n\u00famero de pedido\n            if 'numero' not in vals:\n                vals['numero'] = self.env['ir.sequence'].next_by_code('mi.pedido')\n\n            # Establecer estado inicial\n            if 'estado' not in vals:\n                vals['estado'] = 'borrador'\n\n        # Llamar al create() original\n        pedidos = super(Pedido, self).create(vals_list)\n\n        # Acciones post-creaci\u00f3n\n        for pedido in pedidos:\n            pedido._enviar_notificacion_creacion()\n\n        return pedidos\n</code></pre>"},{"location":"7_5_logica_negocio/#sobrescribir-write","title":"Sobrescribir write()","text":"<p>Sobrescribir write()</p> <pre><code>class Pedido(models.Model):\n    _name = 'mi.pedido'\n\n    def write(self, vals):\n        # L\u00f3gica antes de guardar\n        if 'estado' in vals and vals['estado'] == 'confirmado':\n            # Verificar que tiene l\u00edneas\n            if not self.linea_ids:\n                raise ValidationError('No se puede confirmar un pedido sin l\u00edneas')\n\n        # Guardar valores anteriores si necesario\n        estados_anteriores = {pedido.id: pedido.estado for pedido in self}\n\n        # Llamar al write() original\n        resultado = super(Pedido, self).write(vals)\n\n        # L\u00f3gica despu\u00e9s de guardar\n        if 'estado' in vals:\n            for pedido in self:\n                if estados_anteriores[pedido.id] != pedido.estado:\n                    pedido._notificar_cambio_estado(estados_anteriores[pedido.id])\n\n        return resultado\n</code></pre>"},{"location":"7_5_logica_negocio/#sobrescribir-unlink","title":"Sobrescribir unlink()","text":"<p>Sobrescribir unlink()</p> <pre><code>class Pedido(models.Model):\n    _name = 'mi.pedido'\n\n    def unlink(self):\n        # Verificaciones antes de eliminar\n        for pedido in self:\n            if pedido.estado in ['confirmado', 'enviado']:\n                raise ValidationError(\n                    f'No se puede eliminar el pedido {pedido.numero} '\n                    f'porque est\u00e1 en estado {pedido.estado}'\n                )\n\n        # Eliminar registros relacionados manualmente si es necesario\n        self.mapped('linea_ids').unlink()\n\n        # Llamar al unlink() original\n        return super(Pedido, self).unlink()\n</code></pre>"},{"location":"7_5_logica_negocio/#trabajo-con-fechas","title":"Trabajo con Fechas","text":"<p>Odoo proporciona utilidades para trabajar con fechas y horas de forma sencilla.</p>"},{"location":"7_5_logica_negocio/#tipos-de-campos-de-fecha","title":"Tipos de Campos de Fecha","text":"<pre><code>fecha_alta = fields.Date()       # Solo fecha\nfecha_hora = fields.Datetime()   # Fecha y hora\n</code></pre>"},{"location":"7_5_logica_negocio/#obtener-fechahora-actual","title":"Obtener Fecha/Hora Actual","text":"<p>Fechas actuales</p> <pre><code>from odoo import fields\n\n# Fecha actual\nhoy = fields.Date.today()\nprint(hoy)  # '2024-12-03'\n\n# Fecha y hora actual\nahora = fields.Datetime.now()\nprint(ahora)  # '2024-12-03 15:30:45'\n</code></pre>"},{"location":"7_5_logica_negocio/#convertir-entre-string-y-datetime","title":"Convertir entre String y Datetime","text":"<p>Conversi\u00f3n de fechas</p> <pre><code>from odoo import fields\nfrom datetime import datetime, timedelta\n\n# String a Date\nfecha_str = '2024-12-03'\nfecha = fields.Date.from_string(fecha_str)\n# o directamente\nfecha = fields.Date.to_date(fecha_str)\n\n# Date a String\nfecha_str = fields.Date.to_string(fecha)\n\n# String a Datetime\ndatetime_str = '2024-12-03 15:30:45'\ndt = fields.Datetime.from_string(datetime_str)\n# o\ndt = fields.Datetime.to_datetime(datetime_str)\n\n# Datetime a String\ndatetime_str = fields.Datetime.to_string(dt)\n</code></pre>"},{"location":"7_5_logica_negocio/#sumarrestar-tiempo","title":"Sumar/Restar Tiempo","text":"<p>Operaciones con fechas</p> <pre><code>from datetime import datetime, timedelta\nfrom odoo import fields\n\n# Obtener fecha actual\nhoy = fields.Date.today()\n\n# Sumar d\u00edas\nmanana = hoy + timedelta(days=1)\nproxima_semana = hoy + timedelta(weeks=1)\nproximo_mes = hoy + timedelta(days=30)\n\n# Restar d\u00edas\nayer = hoy - timedelta(days=1)\nhace_una_semana = hoy - timedelta(weeks=1)\n\n# Con horas\nahora = fields.Datetime.now()\nen_2_horas = ahora + timedelta(hours=2)\nhace_30_minutos = ahora - timedelta(minutes=30)\n</code></pre>"},{"location":"7_5_logica_negocio/#diferencia-entre-fechas","title":"Diferencia entre Fechas","text":"<p>Calcular diferencias</p> <pre><code>from datetime import datetime\nfrom odoo import fields\n\nfecha_inicio = fields.Date.from_string('2024-01-01')\nfecha_fin = fields.Date.from_string('2024-12-31')\n\n# Diferencia (devuelve timedelta)\ndiferencia = fecha_fin - fecha_inicio\n\n# D\u00edas de diferencia\ndias = diferencia.days  # 365\n\n# Horas de diferencia\nhoras = diferencia.total_seconds() / 3600\n\n# Semanas\nsemanas = diferencia.days / 7\n</code></pre>"},{"location":"7_5_logica_negocio/#usar-relativedelta-para-mesesanos","title":"Usar relativedelta para Meses/A\u00f1os","text":"<p>relativedelta</p> <pre><code>from dateutil.relativedelta import relativedelta\nfrom odoo import fields\n\nhoy = fields.Date.today()\n\n# Sumar meses\nproximo_mes = hoy + relativedelta(months=1)\ndentro_6_meses = hoy + relativedelta(months=6)\n\n# Sumar a\u00f1os\nproximo_ano = hoy + relativedelta(years=1)\n\n# Combinaciones\nfecha_futura = hoy + relativedelta(years=1, months=6, days=15)\n\n# Diferencia exacta\nfecha_inicio = fields.Date.from_string('2020-01-15')\nfecha_fin = fields.Date.from_string('2024-12-03')\n\ndiff = relativedelta(fecha_fin, fecha_inicio)\nprint(f\"{diff.years} a\u00f1os, {diff.months} meses, {diff.days} d\u00edas\")\n</code></pre>"},{"location":"7_5_logica_negocio/#comparar-fechas","title":"Comparar Fechas","text":"<p>Comparaci\u00f3n de fechas</p> <pre><code>from odoo import fields\n\nfecha1 = fields.Date.from_string('2024-01-01')\nfecha2 = fields.Date.from_string('2024-12-31')\n\nif fecha1 &lt; fecha2:\n    print(\"fecha1 es anterior\")\n\nif fecha2 &gt; fecha1:\n    print(\"fecha2 es posterior\")\n\nif fecha1 == fields.Date.today():\n    print(\"Es hoy\")\n\n# Comparar solo fecha (ignorando hora)\ndt1 = fields.Datetime.now()\ndt2 = fields.Datetime.now() + timedelta(hours=5)\n\nif dt1.date() == dt2.date():\n    print(\"Es el mismo d\u00eda\")\n</code></pre>"},{"location":"7_5_logica_negocio/#excepciones-y-mensajes","title":"Excepciones y Mensajes","text":"<p>Odoo proporciona excepciones espec\u00edficas para diferentes situaciones.</p>"},{"location":"7_5_logica_negocio/#tipos-de-excepciones","title":"Tipos de Excepciones","text":"<p>Excepciones de Odoo</p> <pre><code>from odoo.exceptions import (\n    ValidationError,\n    UserError,\n    AccessError,\n    Warning,\n    RedirectWarning\n)\n\n# ValidationError - Para validaciones de negocio\n@api.constrains('edad')\ndef _check_edad(self):\n    for record in self:\n        if record.edad &lt; 18:\n            raise ValidationError('Debe ser mayor de 18 a\u00f1os')\n\n# UserError - Para errores generales\ndef confirmar_pedido(self):\n    if not self.linea_ids:\n        raise UserError('No se puede confirmar un pedido vac\u00edo')\n\n# AccessError - Para problemas de permisos\ndef eliminar_factura(self):\n    if not self.env.user.has_group('account.group_account_manager'):\n        raise AccessError('No tiene permisos para eliminar facturas')\n\n# Warning - Para advertencias\ndef action_archivar(self):\n    if self.tiene_ventas_activas:\n        raise Warning('Este producto tiene ventas activas')\n</code></pre>"},{"location":"7_5_logica_negocio/#redirectwarning-con-accion","title":"RedirectWarning con Acci\u00f3n","text":"<p>RedirectWarning</p> <pre><code>from odoo.exceptions import RedirectWarning\n\ndef confirmar_pedido(self):\nif not self.cliente_id.direccion_envio:\n    # Redirigir al formulario del cliente\n    action = self.env.ref('base.action_partner_form')\n    message = (\n        'El cliente no tiene direcci\u00f3n de env\u00edo configurada. '\n        'Por favor, complete la informaci\u00f3n del cliente.'\n    )\n    raise RedirectWarning(\n        message,\n        action.id,\n        'Ir a Cliente'\n    )\n</code></pre> <p>Mensajes no bloqueantes</p> <pre><code># Usando el sistema de mensajer\u00eda de Odoo\ndef action_procesar(self):\n    # L\u00f3gica de procesamiento\n    self.estado = 'procesado'\n\n    # Enviar mensaje al chatter\n    self.message_post(\n        body='El registro ha sido procesado correctamente',\n        subject='Procesamiento Completado'\n    )\n\n    # Notificaci\u00f3n al usuario\n    return {\n        'type': 'ir.actions.client',\n        'tag': 'display_notification',\n        'params': {\n            'title': '\u00c9xito',\n            'message': 'El proceso se complet\u00f3 correctamente',\n            'type': 'success',  # success, warning, danger, info\n            'sticky': False,  # Si se cierra autom\u00e1ticamente\n        }\n    }\n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>Recordsets</p> <ul> <li>Siempre itera sobre <code>self</code> en m\u00e9todos que operan sobre m\u00faltiples registros</li> <li>Usa <code>ensure_one()</code> cuando el m\u00e9todo solo debe trabajar con un registro</li> <li>Aprovecha operaciones de conjuntos en lugar de loops complejos</li> <li>Usa <code>exists()</code> antes de acceder a registros que podr\u00edan haber sido eliminados</li> </ul> <p>M\u00e9todos CRUD</p> <ul> <li>Usa <code>search_count()</code> cuando solo necesites la cantidad</li> <li>Especifica <code>limit</code> en b\u00fasquedas que puedan devolver muchos registros</li> <li>Usa <code>browse()</code> cuando ya tienes los IDs</li> <li>Prefiere asignaci\u00f3n directa (<code>record.campo = valor</code>) sobre <code>write()</code> cuando sea m\u00e1s claro</li> </ul> <p>Decoradores</p> <ul> <li>Declara todas las dependencias en <code>@api.depends()</code></li> <li>Usa <code>@api.onchange</code> para UX, no para l\u00f3gica cr\u00edtica</li> <li>Prefiere <code>@api.constrains</code> para validaciones sobre sobrescribir <code>write()</code></li> <li>Documenta m\u00e9todos decorados con docstrings</li> </ul> <p>Fechas</p> <ul> <li>Usa siempre las utilidades de Odoo (<code>fields.Date</code>, <code>fields.Datetime</code>)</li> <li>No mezcles fechas timezone-aware con naive</li> <li>Usa <code>relativedelta</code> para operaciones con meses/a\u00f1os</li> <li>Almacena fechas en UTC en la base de datos</li> </ul> <p>Excepciones</p> <ul> <li>Usa el tipo correcto de excepci\u00f3n seg\u00fan el contexto</li> <li>Mensajes de error claros y orientados al usuario</li> <li>Traduce los mensajes con <code>_()</code> cuando sea necesario</li> <li>Captura excepciones espec\u00edficas, no gen\u00e9ricas</li> </ul> <p>Rendimiento</p> <ul> <li>Minimiza operaciones dentro de loops</li> <li>Usa <code>mapped()</code>, <code>filtered()</code>, <code>sorted()</code> en lugar de loops cuando sea posible</li> <li>Batch de operaciones: crea/actualiza m\u00faltiples registros a la vez</li> <li>Usa <code>store=True</code> en campos computados si se usan frecuentemente en b\u00fasquedas</li> </ul>"},{"location":"7_6_herencia_extensibilidad/","title":"Herencia y Extensibilidad","text":""},{"location":"7_6_herencia_extensibilidad/#herencia-y-extensibilidad","title":"Herencia y Extensibilidad","text":"<p>La herencia es uno de los mecanismos m\u00e1s potentes de Odoo. Permite extender y modificar m\u00f3dulos existentes sin alterar su c\u00f3digo original, garantizando que las actualizaciones no rompan las personalizaciones. Este dise\u00f1o modular es fundamental para la filosof\u00eda de Odoo y permite que m\u00faltiples m\u00f3dulos coexistan y se complementen.</p> <p>En este cap\u00edtulo aprender\u00e1s los tres tipos de herencia que Odoo proporciona, c\u00f3mo extender modelos y vistas existentes, y c\u00f3mo sobrescribir m\u00e9todos manteniendo la funcionalidad original. Dominar la herencia es esencial para personalizar Odoo de forma profesional y mantenible.</p>"},{"location":"7_6_herencia_extensibilidad/#tipos-de-herencia-en-odoo","title":"Tipos de Herencia en Odoo","text":"<p>Odoo proporciona tres mecanismos de herencia diferentes, cada uno con prop\u00f3sitos espec\u00edficos:</p>"},{"location":"7_6_herencia_extensibilidad/#tabla-comparativa","title":"Tabla Comparativa","text":"Mecanismo Crea Tabla Modifica Original Uso Principal Herencia de Clase No S\u00ed A\u00f1adir campos/m\u00e9todos a modelo existente Herencia por Prototipo S\u00ed No Crear modelo nuevo basado en otro Herencia por Delegaci\u00f3n S\u00ed No Combinar m\u00faltiples modelos"},{"location":"7_6_herencia_extensibilidad/#herencia-de-clase-_inherit-sin-_name","title":"Herencia de Clase (_inherit sin _name)","text":"<p>Es el tipo m\u00e1s com\u00fan. Extiende un modelo existente a\u00f1adiendo campos o m\u00e9todos. El modelo original se modifica pero las vistas siguen funcionando.</p> <p>Caracter\u00edsticas:</p> <ul> <li>No crea nueva tabla en PostgreSQL</li> <li>Los nuevos campos se a\u00f1aden a la tabla existente</li> <li>Las vistas del modelo original siguen funcionando</li> <li>El modelo mantiene su nombre original</li> </ul> <p>Cu\u00e1ndo usarla: Cuando quieres a\u00f1adir funcionalidad a un modelo existente sin crear uno nuevo.</p> <p>Herencia de clase</p> <pre><code>from odoo import models, fields, api\n\nclass ResPartner(models.Model):\n    _inherit = 'res.partner'  # Modelo a extender\n    # NO se define _name (usa el nombre del modelo heredado)\n\n    # A\u00f1adir campos nuevos\n    codigo_cliente = fields.Char(string='C\u00f3digo de Cliente')\n    limite_credito = fields.Float(string='L\u00edmite de Cr\u00e9dito')\n    es_proveedor_preferente = fields.Boolean(string='Proveedor Preferente')\n\n    # A\u00f1adir m\u00e9todo nuevo\n    def verificar_credito(self):\n        for partner in self:\n            if partner.total_deuda &gt; partner.limite_credito:\n                return False\n        return True\n\n    # Sobrescribir m\u00e9todo existente\n    @api.model\n    def create(self, vals):\n        # A\u00f1adir l\u00f3gica antes de crear\n        if 'codigo_cliente' not in vals:\n            vals['codigo_cliente'] = self._generar_codigo_cliente()\n\n        # Llamar al m\u00e9todo original\n        partner = super(ResPartner, self).create(vals)\n\n        # L\u00f3gica despu\u00e9s de crear\n        partner.enviar_email_bienvenida()\n\n        return partner\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#herencia-por-prototipo-_inherit-con-_name","title":"Herencia por Prototipo (_inherit con _name)","text":"<p>Crea un nuevo modelo usando otro como plantilla. El modelo original NO se modifica y ambos coexisten.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Crea nueva tabla en PostgreSQL</li> <li>El modelo original no se modifica</li> <li>Copia campos y m\u00e9todos del modelo heredado</li> <li>Necesita definir sus propias vistas</li> </ul> <p>Cu\u00e1ndo usarla: Cuando quieres crear un modelo nuevo que reutilice estructura de otro.</p> <p>Herencia por prototipo</p> <pre><code>from odoo import models, fields\n\nclass ResAlarm(models.Model):\n    _name = 'res.alarm'  # Modelo base\n    _description = 'Alarma Base'\n\n    name = fields.Char(string='Nombre', required=True)\n    duration = fields.Integer(string='Duraci\u00f3n (minutos)')\n    interval = fields.Selection([\n        ('minutes', 'Minutos'),\n        ('hours', 'Horas'),\n        ('days', 'D\u00edas')\n    ], string='Intervalo')\n\nclass CalendarAlarm(models.Model):\n    _name = 'calendar.alarm'  # Modelo NUEVO\n    _inherit = 'res.alarm'    # Hereda de res.alarm\n    _description = 'Alarma de Calendario'\n\n    # Tiene todos los campos de res.alarm\n    # M\u00e1s campos propios\n    tipo_notificacion = fields.Selection([\n        ('email', 'Email'),\n        ('popup', 'Popup'),\n        ('sms', 'SMS')\n    ], string='Tipo de Notificaci\u00f3n')\n\n    evento_id = fields.Many2one('calendar.event', string='Evento')\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#herencia-por-delegacion-_inherits","title":"Herencia por Delegaci\u00f3n (_inherits)","text":"<p>Combina m\u00faltiples modelos en uno nuevo mediante delegaci\u00f3n. Permite \"heredar\" de varios modelos a la vez (herencia m\u00faltiple).</p> <p>Caracter\u00edsticas:</p> <ul> <li>Crea nueva tabla en PostgreSQL</li> <li>Cada registro del modelo nuevo tiene registros relacionados en los modelos base</li> <li>Los campos de los modelos base son accesibles directamente</li> <li>Requiere campos Many2one a cada modelo base</li> </ul> <p>Cu\u00e1ndo usarla: Cuando necesitas combinar funcionalidad de varios modelos en uno nuevo.</p> <p>Herencia por delegaci\u00f3n</p> <pre><code>from odoo import models, fields\n\n# Modelo base 1: Usuario\nclass ResUsers(models.Model):\n    _inherit = 'res.users'\n    # Ya existe en Odoo con campos: name, email, login, etc.\n\n# Modelo base 2: Partner\nclass ResPartner(models.Model):\n    _inherit = 'res.partner'\n    # Ya existe con campos: name, street, city, phone, etc.\n\n# Modelo nuevo que combina ambos\nclass Empleado(models.Model):\n    _name = 'hr.empleado'\n    _inherits = {\n        'res.users': 'user_id',      # Delega a res.users\n        'res.partner': 'partner_id',  # Delega a res.partner\n    }\n    _description = 'Empleado'\n\n    # Campos Many2one obligatorios (con ondelete='cascade')\n    user_id = fields.Many2one(\n        'res.users',\n        required=True,\n        ondelete='cascade',\n        string='Usuario Relacionado'\n    )\n    partner_id = fields.Many2one(\n        'res.partner',\n        required=True,\n        ondelete='cascade',\n        string='Partner Relacionado'\n    )\n\n    # Campos propios del empleado\n    numero_empleado = fields.Char(string='N\u00famero de Empleado')\n    departamento_id = fields.Many2one('hr.departamento', string='Departamento')\n    fecha_ingreso = fields.Date(string='Fecha de Ingreso')\n    salario = fields.Float(string='Salario')\n\n    # Ahora puedes acceder directamente a:\n    # empleado.name (de res.users y res.partner)\n    # empleado.email (de res.users)\n    # empleado.phone (de res.partner)\n    # empleado.street (de res.partner)\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#extender-modelos-existentes","title":"Extender Modelos Existentes","text":"<p>La forma m\u00e1s com\u00fan de personalizar Odoo es extendiendo modelos est\u00e1ndar para a\u00f1adir campos y funcionalidad espec\u00edfica de tu negocio.</p>"},{"location":"7_6_herencia_extensibilidad/#anadir-campos-a-modelos-estandar","title":"A\u00f1adir Campos a Modelos Est\u00e1ndar","text":"<p>A\u00f1adir campos a res.partner</p> <pre><code>from odoo import models, fields, api\nfrom odoo.exceptions import ValidationError\n\nclass ResPartnerExtend(models.Model):\n    _inherit = 'res.partner'\n\n    # Campos simples\n    referencia_interna = fields.Char(\n        string='Referencia Interna',\n        help='C\u00f3digo interno para identificar al contacto'\n    )\n\n    tipo_cliente = fields.Selection([\n        ('retail', 'Minorista'),\n        ('wholesale', 'Mayorista'),\n        ('distributor', 'Distribuidor')\n    ], string='Tipo de Cliente', default='retail')\n\n    descuento_general = fields.Float(\n        string='Descuento General (%)',\n        digits=(5, 2)\n    )\n\n    # Campo relacional\n    vendedor_asignado_id = fields.Many2one(\n        'res.users',\n        string='Vendedor Asignado',\n        domain=[('share', '=', False)]\n    )\n\n    # Campo computado\n    total_pedidos = fields.Integer(\n        string='Total Pedidos',\n        compute='_compute_total_pedidos',\n        store=True\n    )\n\n    @api.depends('sale_order_ids')\n    def _compute_total_pedidos(self):\n        for partner in self:\n            partner.total_pedidos = len(partner.sale_order_ids)\n\n    # Restricci\u00f3n\n    @api.constrains('descuento_general')\n    def _check_descuento(self):\n        for partner in self:\n            if partner.descuento_general &lt; 0 or partner.descuento_general &gt; 100:\n                raise ValidationError(\n                    'El descuento debe estar entre 0 y 100%'\n                )\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#anadir-metodos-a-modelos-existentes","title":"A\u00f1adir M\u00e9todos a Modelos Existentes","text":"<p>A\u00f1adir m\u00e9todos a sale.order</p> <pre><code>from odoo import models, api\nfrom odoo.exceptions import UserError\n\nclass SaleOrderExtend(models.Model):\n    _inherit = 'sale.order'\n\n    def action_aplicar_descuento_cliente(self):\n        \"\"\"Aplica el descuento general del cliente a todas las l\u00edneas\"\"\"\n        self.ensure_one()\n\n        if not self.partner_id.descuento_general:\n            raise UserError('El cliente no tiene descuento general configurado')\n\n        descuento = self.partner_id.descuento_general\n\n        for linea in self.order_line:\n            precio_original = linea.product_id.list_price\n            precio_con_descuento = precio_original * (1 - descuento / 100)\n            linea.price_unit = precio_con_descuento\n\n        return {\n            'type': 'ir.actions.client',\n            'tag': 'display_notification',\n            'params': {\n                'message': f'Descuento del {descuento}% aplicado a todas las l\u00edneas',\n                'type': 'success',\n                'sticky': False,\n            }\n        }\n\n    def _validar_disponibilidad_productos(self):\n        \"\"\"Valida que hay stock suficiente para todos los productos\"\"\"\n        productos_sin_stock = []\n\n        for linea in self.order_line:\n            if linea.product_id.type == 'product':\n                disponible = linea.product_id.qty_available\n                if disponible &lt; linea.product_uom_qty:\n                    productos_sin_stock.append(\n                        f\"{linea.product_id.name} (disponible: {disponible})\"\n                    )\n\n        return productos_sin_stock\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#modificar-valores-por-defecto","title":"Modificar Valores por Defecto","text":"<p>Modificar defaults de modelos</p> <pre><code>from odoo import models, fields, api\n\nclass SaleOrderExtend(models.Model):\n    _inherit = 'sale.order'\n\n    # Sobrescribir campo existente con nuevo default\n    validity_date = fields.Date(\n        default=lambda self: fields.Date.today() + timedelta(days=30)\n    )\n\n    @api.model\n    def default_get(self, fields_list):\n        \"\"\"Personalizar m\u00faltiples valores por defecto\"\"\"\n        defaults = super(SaleOrderExtend, self).default_get(fields_list)\n\n        # Establecer vendedor por defecto seg\u00fan el cliente\n        if 'partner_id' in self.env.context:\n            partner = self.env['res.partner'].browse(\n                self.env.context['partner_id']\n            )\n            if partner.vendedor_asignado_id:\n                defaults['user_id'] = partner.vendedor_asignado_id.id\n\n        # Establecer almac\u00e9n por defecto seg\u00fan usuario\n        if self.env.user.almacen_predeterminado_id:\n            defaults['warehouse_id'] = self.env.user.almacen_predeterminado_id.id\n\n        return defaults\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#sobrescribir-metodos-existentes","title":"Sobrescribir M\u00e9todos Existentes","text":"<p>Cuando heredas un modelo, puedes sobrescribir sus m\u00e9todos para modificar su comportamiento. Es crucial usar <code>super()</code> para mantener la funcionalidad original.</p>"},{"location":"7_6_herencia_extensibilidad/#patron-basico-de-sobrescritura","title":"Patr\u00f3n B\u00e1sico de Sobrescritura","text":"<p>Patr\u00f3n de sobrescritura</p> <pre><code>from odoo import models\n\nclass MiModelo(models.Model):\n    _inherit = 'modelo.existente'\n\n    def metodo_a_sobrescribir(self):\n        # 1. L\u00f3gica ANTES de la funcionalidad original\n        print(\"Ejecutando l\u00f3gica personalizada antes...\")\n\n        # 2. Llamar al m\u00e9todo original con super()\n        resultado = super(MiModelo, self).metodo_a_sobrescribir()\n\n        # 3. L\u00f3gica DESPU\u00c9S de la funcionalidad original\n        print(\"Ejecutando l\u00f3gica personalizada despu\u00e9s...\")\n\n        # 4. Devolver resultado (modificado o no)\n        return resultado\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#sobrescribir-create","title":"Sobrescribir create()","text":"<p>Sobrescribir create en product.product</p> <pre><code>from odoo import models, api\n\nclass ProductProductExtend(models.Model):\n    _inherit = 'product.product'\n\n    @api.model_create_multi\n    def create(self, vals_list):\n        # L\u00f3gica ANTES de crear\n        for vals in vals_list:\n            # Generar c\u00f3digo de barras autom\u00e1tico si no existe\n            if 'barcode' not in vals or not vals['barcode']:\n                vals['barcode'] = self._generar_codigo_barras()\n\n            # Establecer categor\u00eda por defecto seg\u00fan tipo\n            if 'categ_id' not in vals:\n                if vals.get('type') == 'service':\n                    categoria = self.env.ref('product.product_category_services')\n                    vals['categ_id'] = categoria.id\n\n        # Crear productos (llamar al original)\n        productos = super(ProductProductExtend, self).create(vals_list)\n\n        # L\u00f3gica DESPU\u00c9S de crear\n        for producto in productos:\n            # Crear ubicaci\u00f3n de almac\u00e9n autom\u00e1tica\n            if producto.type == 'product':\n                self._crear_ubicacion_almacen(producto)\n\n            # Notificar al departamento de compras\n            if producto.seller_ids:\n                producto._notificar_nuevo_producto()\n\n        return productos\n\n    @api.model\n    def _generar_codigo_barras(self):\n        \"\"\"Genera un c\u00f3digo de barras \u00fanico\"\"\"\n        import random\n        codigo = ''.join([str(random.randint(0, 9)) for _ in range(13)])\n        # Verificar que no existe\n        while self.search([('barcode', '=', codigo)]):\n            codigo = ''.join([str(random.randint(0, 9)) for _ in range(13)])\n        return codigo\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#sobrescribir-write","title":"Sobrescribir write()","text":"<p>Sobrescribir write en stock.picking</p> <pre><code>from odoo import models\nfrom odoo.exceptions import UserError\n\nclass StockPickingExtend(models.Model):\n    _inherit = 'stock.picking'\n\n    def write(self, vals):\n        # Guardar estados anteriores si es necesario\n        estados_anteriores = {picking.id: picking.state for picking in self}\n\n        # Validaciones ANTES de escribir\n        if 'state' in vals and vals['state'] == 'done':\n            for picking in self:\n                # Validar que todas las l\u00edneas tienen lote/serie\n                if picking.picking_type_id.use_existing_lots:\n                    sin_lote = picking.move_line_ids.filtered(\n                        lambda ml: ml.product_id.tracking != 'none' \n                        and not ml.lot_id\n                    )\n                    if sin_lote:\n                        raise UserError(\n                            'Debe asignar n\u00famero de lote/serie a todos los productos'\n                        )\n\n        # Escribir (llamar al original)\n        resultado = super(StockPickingExtend, self).write(vals)\n\n        # Acciones DESPU\u00c9S de escribir\n        if 'state' in vals:\n            for picking in self:\n                estado_anterior = estados_anteriores[picking.id]\n\n                # Si cambi\u00f3 a 'done', realizar acciones\n                if estado_anterior != 'done' and picking.state == 'done':\n                    # Actualizar fecha de \u00faltima entrega del proveedor\n                    if picking.picking_type_id.code == 'incoming':\n                        picking.partner_id.write({\n                            'ultima_entrega': fields.Date.today()\n                        })\n\n                    # Enviar notificaci\u00f3n\n                    picking._enviar_notificacion_completado()\n\n        return resultado\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#sobrescribir-unlink","title":"Sobrescribir unlink()","text":"<p>Sobrescribir unlink en account.move</p> <pre><code>from odoo import models\nfrom odoo.exceptions import UserError\n\nclass AccountMoveExtend(models.Model):\n    _inherit = 'account.move'\n\n    def unlink(self):\n        # Validaciones ANTES de eliminar\n        for move in self:\n            # No permitir eliminar facturas pagadas\n            if move.payment_state in ['paid', 'in_payment']:\n                raise UserError(\n                    f'No se puede eliminar la factura {move.name} '\n                    f'porque tiene pagos asociados'\n                )\n\n            # No permitir eliminar si tiene documentos relacionados\n            if move.tipo_documento_relacionado == 'pedido' and move.pedido_id:\n                raise UserError(\n                    f'No se puede eliminar la factura {move.name} '\n                    f'porque est\u00e1 vinculada al pedido {move.pedido_id.name}'\n                )\n\n        # Guardar informaci\u00f3n antes de eliminar (si es necesaria)\n        info_facturas = []\n        for move in self:\n            info_facturas.append({\n                'name': move.name,\n                'partner_id': move.partner_id.id,\n                'amount_total': move.amount_total,\n            })\n\n        # Eliminar registros relacionados manualmente si es necesario\n        # (solo si no se eliminan autom\u00e1ticamente por ondelete)\n        self.mapped('mensaje_ids').unlink()\n\n        # Llamar al unlink original\n        resultado = super(AccountMoveExtend, self).unlink()\n\n        # Registrar eliminaci\u00f3n en log\n        for info in info_facturas:\n            self.env['mi.log.eliminaciones'].create({\n                'modelo': 'account.move',\n                'nombre_registro': info['name'],\n                'fecha_eliminacion': fields.Datetime.now(),\n                'usuario_id': self.env.user.id,\n            })\n\n        return resultado\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#sobrescribir-metodos-de-negocio","title":"Sobrescribir M\u00e9todos de Negocio","text":"<p>Sobrescribir action_confirm en sale.order</p> <pre><code>from odoo import models\nfrom odoo.exceptions import UserError\n\nclass SaleOrderExtend(models.Model):\n    _inherit = 'sale.order'\n\n    def action_confirm(self):\n        \"\"\"A\u00f1adir validaciones antes de confirmar pedido\"\"\"\n\n        # Validaciones personalizadas\n        for order in self:\n            # Verificar l\u00edmite de cr\u00e9dito del cliente\n            if order.partner_id.limite_credito &gt; 0:\n                deuda_actual = order.partner_id.total_deuda\n                if deuda_actual + order.amount_total &gt; order.partner_id.limite_credito:\n                    raise UserError(\n                        f'El cliente {order.partner_id.name} exceder\u00eda su l\u00edmite '\n                        f'de cr\u00e9dito ({order.partner_id.limite_credito}). '\n                        f'Deuda actual: {deuda_actual}'\n                    )\n\n            # Verificar disponibilidad de productos\n            productos_sin_stock = order._validar_disponibilidad_productos()\n            if productos_sin_stock:\n                raise UserError(\n                    'No hay stock suficiente para:\\n' + \n                    '\\n'.join(productos_sin_stock)\n                )\n\n            # Aplicar descuento autom\u00e1tico si supera monto m\u00ednimo\n            if order.amount_total &gt; 1000 and not order.descuento_aplicado:\n                order._aplicar_descuento_volumen()\n\n        # Llamar al m\u00e9todo original para confirmar\n        resultado = super(SaleOrderExtend, self).action_confirm()\n\n        # Acciones post-confirmaci\u00f3n\n        for order in self:\n            # Notificar al departamento de almac\u00e9n\n            order._notificar_nuevo_pedido_almacen()\n\n            # Crear tarea de seguimiento si es cliente nuevo\n            if order.partner_id.sale_order_count == 1:\n                order._crear_tarea_seguimiento_cliente_nuevo()\n\n        return resultado\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#extender-vistas-existentes","title":"Extender Vistas Existentes","text":"<p>Adem\u00e1s de extender modelos, puedes modificar vistas existentes para mostrar tus campos personalizados o cambiar la presentaci\u00f3n.</p>"},{"location":"7_6_herencia_extensibilidad/#herencia-de-vistas","title":"Herencia de Vistas","text":"<p>Para heredar una vista, usa el campo <code>inherit_id</code> referenciando el External ID de la vista padre.</p> <p>Estructura b\u00e1sica de herencia de vista</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;record id=\"view_partner_form_inherit\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;res.partner.form.inherit&lt;/field&gt;\n        &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n            &lt;!-- Modificaciones aqu\u00ed --&gt;\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#posiciones-de-modificacion","title":"Posiciones de Modificaci\u00f3n","text":"<p>Odoo proporciona varios atributos <code>position</code> para controlar d\u00f3nde se insertan los cambios:</p> Position Descripci\u00f3n <code>after</code> A\u00f1ade despu\u00e9s del elemento <code>before</code> A\u00f1ade antes del elemento <code>inside</code> A\u00f1ade dentro del elemento (al final) <code>replace</code> Reemplaza el elemento completamente <code>attributes</code> Modifica solo los atributos del elemento"},{"location":"7_6_herencia_extensibilidad/#anadir-campos-a-formularios","title":"A\u00f1adir Campos a Formularios","text":"<p>A\u00f1adir campos al formulario de contactos</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;record id=\"view_partner_form_inherit_custom\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;res.partner.form.custom&lt;/field&gt;\n        &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n\n            &lt;!-- A\u00f1adir despu\u00e9s del campo 'phone' --&gt;\n            &lt;field name=\"phone\" position=\"after\"&gt;\n                &lt;field name=\"referencia_interna\"/&gt;\n            &lt;/field&gt;\n\n            &lt;!-- A\u00f1adir antes del campo 'email' --&gt;\n            &lt;field name=\"email\" position=\"before\"&gt;\n                &lt;field name=\"tipo_cliente\"/&gt;\n            &lt;/field&gt;\n\n            &lt;!-- A\u00f1adir dentro de un notebook existente --&gt;\n            &lt;xpath expr=\"//notebook\" position=\"inside\"&gt;\n                &lt;page string=\"Informaci\u00f3n Comercial\"&gt;\n                    &lt;group&gt;\n                        &lt;group&gt;\n                            &lt;field name=\"descuento_general\"/&gt;\n                            &lt;field name=\"vendedor_asignado_id\"/&gt;\n                        &lt;/group&gt;\n                        &lt;group&gt;\n                            &lt;field name=\"limite_credito\"/&gt;\n                            &lt;field name=\"total_pedidos\"/&gt;\n                        &lt;/group&gt;\n                    &lt;/group&gt;\n                &lt;/page&gt;\n            &lt;/xpath&gt;\n\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#usar-xpath-para-selecciones-complejas","title":"Usar XPath para Selecciones Complejas","text":"<p>XPath permite seleccionar elementos de forma m\u00e1s precisa cuando hay m\u00faltiples campos con el mismo nombre.</p> <p>Usar XPath en herencia de vistas</p> <pre><code>&lt;odoo&gt;\n    &lt;record id=\"view_sale_order_form_inherit\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;sale.order.form.inherit&lt;/field&gt;\n        &lt;field name=\"model\"&gt;sale.order&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"sale.view_order_form\"/&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n\n            &lt;!-- Buscar campo espec\u00edfico en ubicaci\u00f3n espec\u00edfica --&gt;\n            &lt;xpath expr=\"//field[@name='partner_id']\" position=\"after\"&gt;\n                &lt;field name=\"referencia_cliente\"/&gt;\n            &lt;/xpath&gt;\n\n            &lt;!-- Buscar dentro de un group espec\u00edfico --&gt;\n            &lt;xpath expr=\"//group[@name='sale_info']\" position=\"inside\"&gt;\n                &lt;field name=\"canal_venta\"/&gt;\n            &lt;/xpath&gt;\n\n            &lt;!-- Buscar por clase CSS --&gt;\n            &lt;xpath expr=\"//div[hasclass('oe_button_box')]\" position=\"inside\"&gt;\n                &lt;button type=\"object\" name=\"action_ver_historial\"\n                        class=\"oe_stat_button\" icon=\"fa-history\"&gt;\n                    &lt;field name=\"historial_count\" widget=\"statinfo\" \n                           string=\"Historial\"/&gt;\n                &lt;/button&gt;\n            &lt;/xpath&gt;\n\n            &lt;!-- Buscar el primer page de un notebook --&gt;\n            &lt;xpath expr=\"//notebook/page[1]\" position=\"after\"&gt;\n                &lt;page string=\"Informaci\u00f3n Adicional\"&gt;\n                    &lt;group&gt;\n                        &lt;field name=\"notas_internas\"/&gt;\n                    &lt;/group&gt;\n                &lt;/page&gt;\n            &lt;/xpath&gt;\n\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#reemplazar-elementos","title":"Reemplazar Elementos","text":"<p>Reemplazar campos o elementos</p> <pre><code>&lt;odoo&gt;\n    &lt;record id=\"view_product_form_inherit\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;product.product.form.inherit&lt;/field&gt;\n        &lt;field name=\"model\"&gt;product.product&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"product.product_normal_form_view\"/&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n\n            &lt;!-- Reemplazar un campo por otro --&gt;\n            &lt;field name=\"list_price\" position=\"replace\"&gt;\n                &lt;field name=\"list_price\" widget=\"monetary\" \n                       options=\"{'currency_field': 'currency_id'}\"\n                       attrs=\"{'readonly': [('puede_cambiar_precio', '=', False)]}\"/&gt;\n            &lt;/field&gt;\n\n            &lt;!-- Reemplazar un grupo completo --&gt;\n            &lt;xpath expr=\"//group[@name='group_standard_price']\" position=\"replace\"&gt;\n                &lt;group name=\"group_standard_price\" string=\"Costes\"&gt;\n                    &lt;field name=\"standard_price\"/&gt;\n                    &lt;field name=\"coste_adicional\"/&gt;\n                    &lt;field name=\"coste_total\" readonly=\"1\"/&gt;\n                &lt;/group&gt;\n            &lt;/xpath&gt;\n\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#modificar-atributos","title":"Modificar Atributos","text":"<p>Modificar atributos de elementos existentes</p> <pre><code>&lt;odoo&gt;\n    &lt;record id=\"view_partner_form_modify_attrs\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;res.partner.form.modify.attrs&lt;/field&gt;\n        &lt;field name=\"model\"&gt;res.partner&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"base.view_partner_form\"/&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n\n            &lt;!-- Hacer campo obligatorio --&gt;\n            &lt;field name=\"phone\" position=\"attributes\"&gt;\n                &lt;attribute name=\"required\"&gt;1&lt;/attribute&gt;\n            &lt;/field&gt;\n\n            &lt;!-- A\u00f1adir clase CSS --&gt;\n            &lt;field name=\"name\" position=\"attributes\"&gt;\n                &lt;attribute name=\"class\"&gt;oe_inline font-weight-bold&lt;/attribute&gt;\n            &lt;/field&gt;\n\n            &lt;!-- Modificar string (etiqueta) --&gt;\n            &lt;field name=\"street\" position=\"attributes\"&gt;\n                &lt;attribute name=\"string\"&gt;Direcci\u00f3n Completa&lt;/attribute&gt;\n            &lt;/field&gt;\n\n            &lt;!-- A\u00f1adir placeholder --&gt;\n            &lt;field name=\"email\" position=\"attributes\"&gt;\n                &lt;attribute name=\"placeholder\"&gt;correo@ejemplo.com&lt;/attribute&gt;\n            &lt;/field&gt;\n\n            &lt;!-- Hacer invisible condicionalmente --&gt;\n            &lt;field name=\"vat\" position=\"attributes\"&gt;\n                &lt;attribute name=\"invisible\"&gt;[('is_company', '=', False)]&lt;/attribute&gt;\n            &lt;/field&gt;\n\n            &lt;!-- A\u00f1adir widget --&gt;\n            &lt;field name=\"image_1920\" position=\"attributes\"&gt;\n                &lt;attribute name=\"widget\"&gt;image&lt;/attribute&gt;\n                &lt;attribute name=\"class\"&gt;oe_avatar&lt;/attribute&gt;\n            &lt;/field&gt;\n\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_6_herencia_extensibilidad/#ocultar-elementos","title":"Ocultar Elementos","text":"<p>Ocultar campos o elementos</p> <pre><code>&lt;odoo&gt;\n    &lt;record id=\"view_sale_order_hide_fields\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;sale.order.form.hide.fields&lt;/field&gt;\n        &lt;field name=\"model\"&gt;sale.order&lt;/field&gt;\n        &lt;field name=\"inherit_id\" ref=\"sale.view_order_form\"/&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n\n            &lt;!-- Ocultar campo completamente --&gt;\n            &lt;field name=\"fiscal_position_id\" position=\"attributes\"&gt;\n                &lt;attribute name=\"invisible\"&gt;1&lt;/attribute&gt;\n            &lt;/field&gt;\n\n            &lt;!-- Ocultar grupo --&gt;\n            &lt;xpath expr=\"//group[@name='sale_shipping']\" position=\"attributes\"&gt;\n                &lt;attribute name=\"invisible\"&gt;1&lt;/attribute&gt;\n            &lt;/xpath&gt;\n\n            &lt;!-- Ocultar p\u00e1gina de notebook --&gt;\n            &lt;xpath expr=\"//page[@name='other_information']\" position=\"attributes\"&gt;\n                &lt;attribute name=\"invisible\"&gt;1&lt;/attribute&gt;\n            &lt;/xpath&gt;\n\n            &lt;!-- Ocultar bot\u00f3n --&gt;\n            &lt;xpath expr=\"//button[@name='action_cancel']\" position=\"attributes\"&gt;\n                &lt;attribute name=\"invisible\"&gt;1&lt;/attribute&gt;\n            &lt;/xpath&gt;\n\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>Herencia de modelos</p> <ul> <li>Usa herencia de clase para extender, no crear modelos nuevos innecesarios</li> <li>Documenta qu\u00e9 modelo est\u00e1s heredando y por qu\u00e9</li> <li>Prefiere <code>super()</code> sobre llamadas directas a la clase padre</li> <li>No sobrescribas m\u00e9todos si solo necesitas a\u00f1adir un campo</li> <li>Mant\u00e9n la coherencia con el modelo original</li> </ul> <p>Sobrescritura de m\u00e9todos</p> <ul> <li>Siempre llama a <code>super()</code> a menos que tengas una raz\u00f3n muy espec\u00edfica</li> <li>A\u00f1ade l\u00f3gica antes o despu\u00e9s del <code>super()</code>, no reemplaces completamente</li> <li>Maneja los recordsets correctamente (itera si es necesario)</li> <li>Devuelve el tipo correcto de dato</li> <li>Documenta cambios significativos en el comportamiento</li> </ul> <p>Herencia de vistas</p> <ul> <li>Usa <code>xpath</code> solo cuando sea necesario (campo simple es m\u00e1s claro)</li> <li>No modifiques vistas de otros m\u00f3dulos custom innecesariamente</li> <li>Mant\u00e9n las modificaciones simples y espec\u00edficas</li> <li>Documenta modificaciones complejas con comentarios XML</li> <li>Verifica que tus cambios no rompan otras vistas heredadas</li> </ul> <p>Organizaci\u00f3n</p> <ul> <li>Un archivo de herencia por modelo heredado</li> <li>Nombra descriptivamente: <code>res_partner_extend.py</code>, <code>res_partner_views.xml</code></li> <li>Agrupa herencias relacionadas en el mismo m\u00f3dulo</li> <li>Declara dependencias correctamente en el manifest</li> </ul>"},{"location":"7_7_seguridad/","title":"Seguridad","text":""},{"location":"7_7_seguridad/#seguridad","title":"Seguridad","text":"<p>La seguridad en Odoo es fundamental para proteger los datos y controlar qu\u00e9 usuarios pueden hacer qu\u00e9 acciones. El sistema de seguridad de Odoo es robusto y flexible, permitiendo desde permisos simples hasta reglas complejas basadas en el contenido de los registros.</p> <p>En este cap\u00edtulo aprender\u00e1s a configurar permisos de acceso a modelos, crear grupos de usuarios, definir reglas de registro (record rules) y gestionar la seguridad de campos espec\u00edficos. Un sistema de permisos bien dise\u00f1ado protege los datos sensibles mientras mantiene la usabilidad para los usuarios leg\u00edtimos.</p>"},{"location":"7_7_seguridad/#conceptos-fundamentales","title":"Conceptos Fundamentales","text":"<p>El sistema de seguridad de Odoo trabaja en varios niveles:</p>"},{"location":"7_7_seguridad/#niveles-de-seguridad","title":"Niveles de Seguridad","text":"Nivel Archivo Granularidad Descripci\u00f3n Modelo <code>ir.model.access.csv</code> CRUD por modelo Controla crear, leer, actualizar, eliminar Registro <code>ir.rule</code> (XML) Por registro Filtra qu\u00e9 registros ve cada usuario Campo <code>groups</code> en campo Por campo Oculta campos seg\u00fan grupos Men\u00fa <code>groups</code> en menuitem Por men\u00fa Controla visibilidad de men\u00fas"},{"location":"7_7_seguridad/#grupos-de-usuarios","title":"Grupos de Usuarios","text":"<p>Los grupos organizan usuarios con permisos similares. Odoo incluye grupos predefinidos y puedes crear los tuyos propios.</p> <p>Grupos est\u00e1ndar importantes:</p> <ul> <li><code>base.group_user</code>: Usuario interno (empleado)</li> <li><code>base.group_system</code>: Administrador/Configuraci\u00f3n</li> <li><code>base.group_portal</code>: Usuario portal (externo)</li> <li><code>base.group_public</code>: Usuario p\u00fablico (sin login)</li> </ul>"},{"location":"7_7_seguridad/#permisos-de-acceso-a-modelos-acl","title":"Permisos de Acceso a Modelos (ACL)","text":"<p>Los permisos de acceso controlan las operaciones CRUD (Create, Read, Update, Delete) que cada grupo puede realizar sobre un modelo.</p>"},{"location":"7_7_seguridad/#archivo-irmodelaccesscsv","title":"Archivo ir.model.access.csv","text":"<p>Este archivo CSV define los permisos b\u00e1sicos. Debe estar en la carpeta <code>security/</code> y declararse en el manifest.</p> <p>Estructura del archivo:</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\n</code></pre> <p>ir.model.access.csv b\u00e1sico</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_mi_producto_user,mi.producto.user,model_mi_producto,base.group_user,1,1,1,0\naccess_mi_producto_manager,mi.producto.manager,model_mi_producto,base.group_system,1,1,1,1\naccess_mi_categoria_user,mi.categoria.user,model_mi_categoria,base.group_user,1,0,0,0\naccess_mi_categoria_manager,mi.categoria.manager,model_mi_categoria,base.group_system,1,1,1,1\n</code></pre> <p>Columnas del CSV:</p> Columna Descripci\u00f3n Ejemplo <code>id</code> Identificador \u00fanico <code>access_mi_producto_user</code> <code>name</code> Nombre descriptivo <code>mi.producto.user</code> <code>model_id:id</code> External ID del modelo <code>model_mi_producto</code> <code>group_id:id</code> External ID del grupo <code>base.group_user</code> <code>perm_read</code> Permiso de lectura (1/0) <code>1</code> <code>perm_write</code> Permiso de escritura (1/0) <code>1</code> <code>perm_create</code> Permiso de creaci\u00f3n (1/0) <code>1</code> <code>perm_unlink</code> Permiso de eliminaci\u00f3n (1/0) <code>0</code>"},{"location":"7_7_seguridad/#permisos-sin-grupo-acceso-total","title":"Permisos Sin Grupo (Acceso Total)","text":"<p>Si no especificas <code>group_id</code>, el permiso aplica a todos los usuarios:</p> <p>Acceso p\u00fablico</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_mi_producto_public,mi.producto.public,model_mi_producto,,1,0,0,0\n</code></pre>"},{"location":"7_7_seguridad/#modelo-de-acceso-completo","title":"Modelo de Acceso Completo","text":"<p>Archivo completo de permisos</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\n\n# Modelo: mi.producto\n# Usuario normal: puede leer, crear, modificar (no eliminar)\naccess_producto_user,producto.user,model_mi_producto,base.group_user,1,1,1,0\n# Manager: acceso total\naccess_producto_manager,producto.manager,model_mi_producto,mi_modulo.group_producto_manager,1,1,1,1\n# Portal: solo lectura\naccess_producto_portal,producto.portal,model_mi_producto,base.group_portal,1,0,0,0\n\n# Modelo: mi.categoria\n# Usuario: solo lectura\naccess_categoria_user,categoria.user,model_mi_categoria,base.group_user,1,0,0,0\n# Manager: acceso total\naccess_categoria_manager,categoria.manager,model_mi_categoria,base.group_system,1,1,1,1\n\n# Modelo: mi.configuracion\n# Solo administradores pueden acceder\naccess_config_admin,config.admin,model_mi_configuracion,base.group_system,1,1,1,1\n</code></pre>"},{"location":"7_7_seguridad/#crear-grupos-personalizados","title":"Crear Grupos Personalizados","text":"<p>Puedes crear grupos espec\u00edficos para tu m\u00f3dulo para organizar mejor los permisos.</p>"},{"location":"7_7_seguridad/#definir-grupos-en-xml","title":"Definir Grupos en XML","text":"<p>Crear grupos personalizados</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n\n        &lt;!-- Categor\u00eda de aplicaci\u00f3n --&gt;\n        &lt;record id=\"module_category_inventario\" model=\"ir.module.category\"&gt;\n            &lt;field name=\"name\"&gt;Inventario&lt;/field&gt;\n            &lt;field name=\"description\"&gt;Gesti\u00f3n de inventario y productos&lt;/field&gt;\n            &lt;field name=\"sequence\"&gt;10&lt;/field&gt;\n        &lt;/record&gt;\n\n        &lt;!-- Grupo: Usuario --&gt;\n        &lt;record id=\"group_inventario_user\" model=\"res.groups\"&gt;\n            &lt;field name=\"name\"&gt;Usuario&lt;/field&gt;\n            &lt;field name=\"category_id\" ref=\"module_category_inventario\"/&gt;\n            &lt;field name=\"implied_ids\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n        &lt;/record&gt;\n\n        &lt;!-- Grupo: Manager --&gt;\n        &lt;record id=\"group_inventario_manager\" model=\"res.groups\"&gt;\n            &lt;field name=\"name\"&gt;Manager&lt;/field&gt;\n            &lt;field name=\"category_id\" ref=\"module_category_inventario\"/&gt;\n            &lt;field name=\"implied_ids\" eval=\"[(4, ref('group_inventario_user'))]\"/&gt;\n        &lt;/record&gt;\n\n        &lt;!-- Grupo: Administrador --&gt;\n        &lt;record id=\"group_inventario_admin\" model=\"res.groups\"&gt;\n            &lt;field name=\"name\"&gt;Administrador&lt;/field&gt;\n            &lt;field name=\"category_id\" ref=\"module_category_inventario\"/&gt;\n            &lt;field name=\"implied_ids\" eval=\"[(4, ref('group_inventario_manager'))]\"/&gt;\n        &lt;/record&gt;\n\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Campos importantes:</p> <ul> <li><code>name</code>: Nombre visible del grupo</li> <li><code>category_id</code>: Categor\u00eda de la aplicaci\u00f3n</li> <li><code>implied_ids</code>: Grupos que se heredan autom\u00e1ticamente</li> </ul>"},{"location":"7_7_seguridad/#grupos-implicitos-herencia","title":"Grupos Impl\u00edcitos (Herencia)","text":"<p>Los grupos pueden heredar permisos de otros grupos usando <code>implied_ids</code>:</p> <p>Jerarqu\u00eda de grupos</p> <pre><code>&lt;odoo&gt;\n    &lt;!-- Usuario b\u00e1sico --&gt;\n    &lt;record id=\"group_ventas_user\" model=\"res.groups\"&gt;\n        &lt;field name=\"name\"&gt;Usuario Ventas&lt;/field&gt;\n        &lt;field name=\"implied_ids\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Manager hereda de usuario --&gt;\n    &lt;record id=\"group_ventas_manager\" model=\"res.groups\"&gt;\n        &lt;field name=\"name\"&gt;Manager Ventas&lt;/field&gt;\n        &lt;field name=\"implied_ids\" eval=\"[(4, ref('group_ventas_user'))]\"/&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Director hereda de manager --&gt;\n    &lt;record id=\"group_ventas_director\" model=\"res.groups\"&gt;\n        &lt;field name=\"name\"&gt;Director Ventas&lt;/field&gt;\n        &lt;field name=\"implied_ids\" eval=\"[\n            (4, ref('group_ventas_manager')),\n            (4, ref('account.group_account_user'))\n        ]\"/&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_7_seguridad/#usar-grupos-en-csv","title":"Usar Grupos en CSV","text":"<p>Una vez definidos los grupos, \u00fasalos en el archivo CSV:</p> <p>CSV con grupos personalizados</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_producto_user,producto.user,model_mi_producto,mi_modulo.group_inventario_user,1,1,1,0\naccess_producto_manager,producto.manager,model_mi_producto,mi_modulo.group_inventario_manager,1,1,1,1\naccess_producto_admin,producto.admin,model_mi_producto,mi_modulo.group_inventario_admin,1,1,1,1\n</code></pre>"},{"location":"7_7_seguridad/#reglas-de-registro-record-rules","title":"Reglas de Registro (Record Rules)","text":"<p>Las record rules filtran qu\u00e9 registros espec\u00edficos puede ver o modificar cada usuario. Son mucho m\u00e1s granulares que los permisos de modelo.</p>"},{"location":"7_7_seguridad/#definir-record-rules-en-xml","title":"Definir Record Rules en XML","text":"<p>Record rules b\u00e1sicas</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;odoo&gt;\n    &lt;data&gt;\n\n        &lt;!-- Regla: Usuarios solo ven sus propios productos --&gt;\n        &lt;record id=\"producto_rule_user_own\" model=\"ir.rule\"&gt;\n            &lt;field name=\"name\"&gt;Usuario ve sus productos&lt;/field&gt;\n            &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n            &lt;field name=\"domain_force\"&gt;[('create_uid', '=', user.id)]&lt;/field&gt;\n            &lt;field name=\"groups\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n            &lt;field name=\"perm_read\" eval=\"True\"/&gt;\n            &lt;field name=\"perm_write\" eval=\"True\"/&gt;\n            &lt;field name=\"perm_create\" eval=\"True\"/&gt;\n            &lt;field name=\"perm_unlink\" eval=\"False\"/&gt;\n        &lt;/record&gt;\n\n        &lt;!-- Regla: Managers ven todos los productos --&gt;\n        &lt;record id=\"producto_rule_manager_all\" model=\"ir.rule\"&gt;\n            &lt;field name=\"name\"&gt;Manager ve todos los productos&lt;/field&gt;\n            &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n            &lt;field name=\"domain_force\"&gt;[(1, '=', 1)]&lt;/field&gt;\n            &lt;field name=\"groups\" eval=\"[(4, ref('group_inventario_manager'))]\"/&gt;\n            &lt;field name=\"perm_read\" eval=\"True\"/&gt;\n            &lt;field name=\"perm_write\" eval=\"True\"/&gt;\n            &lt;field name=\"perm_create\" eval=\"True\"/&gt;\n            &lt;field name=\"perm_unlink\" eval=\"True\"/&gt;\n        &lt;/record&gt;\n\n    &lt;/data&gt;\n&lt;/odoo&gt;\n</code></pre> <p>Campos de ir.rule:</p> Campo Descripci\u00f3n <code>name</code> Nombre descriptivo de la regla <code>model_id</code> Modelo al que aplica <code>domain_force</code> Dominio que filtra los registros <code>groups</code> Grupos a los que aplica (vac\u00edo = global) <code>perm_read</code> Aplica a operaciones de lectura <code>perm_write</code> Aplica a operaciones de escritura <code>perm_create</code> Aplica a operaciones de creaci\u00f3n <code>perm_unlink</code> Aplica a operaciones de eliminaci\u00f3n"},{"location":"7_7_seguridad/#dominios-en-record-rules","title":"Dominios en Record Rules","text":"<p>Los dominios en record rules tienen acceso a variables especiales:</p> Variable Descripci\u00f3n Ejemplo <code>user</code> Usuario actual <code>[('user_id', '=', user.id)]</code> <code>company_id</code> Empresa del usuario <code>[('company_id', '=', user.company_id.id)]</code> <code>company_ids</code> Empresas del usuario <code>[('company_id', 'in', user.company_ids.ids)]</code> <code>time</code> M\u00f3dulo time de Python <code>[('fecha', '&gt;=', time.strftime('%Y-01-01'))]</code> <p>Record rules con dominios complejos</p> <pre><code>&lt;odoo&gt;\n    &lt;!-- Solo productos de la empresa del usuario --&gt;\n    &lt;record id=\"producto_rule_multicompany\" model=\"ir.rule\"&gt;\n        &lt;field name=\"name\"&gt;Productos por empresa&lt;/field&gt;\n        &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n        &lt;field name=\"domain_force\"&gt;['|',\n            ('company_id', '=', False),\n            ('company_id', 'in', company_ids)\n        ]&lt;/field&gt;\n        &lt;field name=\"groups\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Solo pedidos del departamento del usuario --&gt;\n    &lt;record id=\"pedido_rule_departamento\" model=\"ir.rule\"&gt;\n        &lt;field name=\"name\"&gt;Pedidos por departamento&lt;/field&gt;\n        &lt;field name=\"model_id\" ref=\"model_mi_pedido\"/&gt;\n        &lt;field name=\"domain_force\"&gt;[\n            ('departamento_id', '=', user.departamento_id.id)\n        ]&lt;/field&gt;\n        &lt;field name=\"groups\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Solo registros activos y del a\u00f1o actual --&gt;\n    &lt;record id=\"documento_rule_activo_actual\" model=\"ir.rule\"&gt;\n        &lt;field name=\"name\"&gt;Documentos activos del a\u00f1o&lt;/field&gt;\n        &lt;field name=\"model_id\" ref=\"model_mi_documento\"/&gt;\n        &lt;field name=\"domain_force\"&gt;[\n            ('activo', '=', True),\n            ('fecha', '&gt;=', time.strftime('%Y-01-01')),\n            ('fecha', '&lt;=', time.strftime('%Y-12-31'))\n        ]&lt;/field&gt;\n        &lt;field name=\"groups\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_7_seguridad/#reglas-globales-vs-por-grupo","title":"Reglas Globales vs por Grupo","text":"<p>Reglas por grupo (con <code>groups</code> definido): - Solo aplican a usuarios de esos grupos - Se combinan con OR entre grupos - Son aditivas (m\u00e1s permisivas)</p> <p>Reglas globales (sin <code>groups</code>): - Aplican a TODOS los usuarios - Son restrictivas por defecto - \u00datiles para restricciones generales</p> <p>Combinaci\u00f3n de reglas</p> <pre><code>&lt;odoo&gt;\n    &lt;!-- Global: Nadie ve registros archivados --&gt;\n    &lt;record id=\"producto_rule_global_no_archivado\" model=\"ir.rule\"&gt;\n        &lt;field name=\"name\"&gt;No ver productos archivados&lt;/field&gt;\n        &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n        &lt;field name=\"domain_force\"&gt;[('activo', '=', True)]&lt;/field&gt;\n        &lt;!-- Sin groups = aplica a todos --&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Por grupo: Usuarios ven solo los suyos --&gt;\n    &lt;record id=\"producto_rule_user_propios\" model=\"ir.rule\"&gt;\n        &lt;field name=\"name\"&gt;Usuarios ven sus productos&lt;/field&gt;\n        &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n        &lt;field name=\"domain_force\"&gt;[('create_uid', '=', user.id)]&lt;/field&gt;\n        &lt;field name=\"groups\" eval=\"[(4, ref('base.group_user'))]\"/&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Por grupo: Managers ven todos --&gt;\n    &lt;record id=\"producto_rule_manager_todos\" model=\"ir.rule\"&gt;\n        &lt;field name=\"name\"&gt;Managers ven todos&lt;/field&gt;\n        &lt;field name=\"model_id\" ref=\"model_mi_producto\"/&gt;\n        &lt;field name=\"domain_force\"&gt;[(1, '=', 1)]&lt;/field&gt;\n        &lt;field name=\"groups\" eval=\"[(4, ref('group_inventario_manager'))]\"/&gt;\n    &lt;/record&gt;\n\n    &lt;!-- Resultado:\n         - Usuarios normales: solo ven sus productos activos\n         - Managers: ven todos los productos activos\n         - Nadie ve productos archivados\n    --&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_7_seguridad/#seguridad-de-campos","title":"Seguridad de Campos","text":"<p>Puedes restringir el acceso a campos espec\u00edficos seg\u00fan grupos de usuarios.</p>"},{"location":"7_7_seguridad/#atributo-groups-en-campos","title":"Atributo groups en Campos","text":"<p>Campos restringidos por grupo</p> <pre><code>from odoo import models, fields\n\nclass Producto(models.Model):\n    _name = 'mi.producto'\n\n    nombre = fields.Char(string='Nombre', required=True)\n\n    # Solo visible para usuarios internos\n    precio_coste = fields.Float(\n        string='Precio de Coste',\n        groups='base.group_user'\n    )\n\n    # Solo visible para managers\n    margen = fields.Float(\n        string='Margen de Beneficio',\n        compute='_compute_margen',\n        groups='mi_modulo.group_inventario_manager'\n    )\n\n    # Solo visible para administradores\n    notas_internas = fields.Text(\n        string='Notas Internas',\n        groups='base.group_system'\n    )\n\n    # Visible para m\u00faltiples grupos (separados por coma)\n    precio_especial = fields.Float(\n        string='Precio Especial',\n        groups='sales_team.group_sale_manager,mi_modulo.group_inventario_manager'\n    )\n</code></pre>"},{"location":"7_7_seguridad/#campo-invisible-para-grupos","title":"Campo Invisible para Grupos","text":"<p>En las vistas, puedes usar <code>groups</code> para controlar visibilidad:</p> <p>Campos condicionados en vistas</p> <pre><code>&lt;odoo&gt;\n    &lt;record id=\"view_producto_form\" model=\"ir.ui.view\"&gt;\n        &lt;field name=\"name\"&gt;mi.producto.form&lt;/field&gt;\n        &lt;field name=\"model\"&gt;mi.producto&lt;/field&gt;\n        &lt;field name=\"arch\" type=\"xml\"&gt;\n            &lt;form&gt;\n                &lt;sheet&gt;\n                    &lt;group&gt;\n                        &lt;field name=\"nombre\"/&gt;\n                        &lt;field name=\"precio\"/&gt;\n\n                        &lt;!-- Solo visible para usuarios internos --&gt;\n                        &lt;field name=\"precio_coste\" \n                               groups=\"base.group_user\"/&gt;\n\n                        &lt;!-- Solo visible para managers --&gt;\n                        &lt;field name=\"margen\" \n                               groups=\"mi_modulo.group_inventario_manager\"/&gt;\n\n                        &lt;!-- Solo visible para admin --&gt;\n                        &lt;field name=\"notas_internas\" \n                               groups=\"base.group_system\"/&gt;\n                    &lt;/group&gt;\n                &lt;/sheet&gt;\n            &lt;/form&gt;\n        &lt;/field&gt;\n    &lt;/record&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_7_seguridad/#seguridad-de-menus","title":"Seguridad de Men\u00fas","text":"<p>Controla qu\u00e9 usuarios pueden ver cada men\u00fa.</p> <p>Men\u00fas restringidos por grupo</p> <pre><code>&lt;odoo&gt;\n    &lt;!-- Men\u00fa visible para todos los usuarios internos --&gt;\n    &lt;menuitem id=\"menu_productos\"\n              name=\"Productos\"\n              parent=\"menu_inventario_root\"\n              action=\"action_producto_list\"\n              groups=\"base.group_user\"\n              sequence=\"10\"/&gt;\n\n    &lt;!-- Men\u00fa solo para managers --&gt;\n    &lt;menuitem id=\"menu_configuracion\"\n              name=\"Configuraci\u00f3n\"\n              parent=\"menu_inventario_root\"\n              action=\"action_configuracion\"\n              groups=\"mi_modulo.group_inventario_manager\"\n              sequence=\"90\"/&gt;\n\n    &lt;!-- Men\u00fa solo para administradores --&gt;\n    &lt;menuitem id=\"menu_configuracion_avanzada\"\n              name=\"Configuraci\u00f3n Avanzada\"\n              parent=\"menu_configuracion\"\n              action=\"action_configuracion_avanzada\"\n              groups=\"base.group_system\"\n              sequence=\"10\"/&gt;\n\n    &lt;!-- Men\u00fa para m\u00faltiples grupos --&gt;\n    &lt;menuitem id=\"menu_reportes\"\n              name=\"Reportes\"\n              parent=\"menu_inventario_root\"\n              action=\"action_reportes\"\n              groups=\"mi_modulo.group_inventario_manager,account.group_account_manager\"\n              sequence=\"50\"/&gt;\n&lt;/odoo&gt;\n</code></pre>"},{"location":"7_7_seguridad/#verificar-permisos-en-codigo-python","title":"Verificar Permisos en C\u00f3digo Python","text":"<p>Puedes verificar permisos program\u00e1ticamente en tus m\u00e9todos.</p>"},{"location":"7_7_seguridad/#verificar-pertenencia-a-grupo","title":"Verificar Pertenencia a Grupo","text":"<p>Verificar grupos en Python</p> <pre><code>from odoo import models, api\nfrom odoo.exceptions import AccessError\n\nclass Producto(models.Model):\n    _name = 'mi.producto'\n\n    def action_publicar(self):\n        \"\"\"Solo managers pueden publicar productos\"\"\"\n        if not self.env.user.has_group('mi_modulo.group_inventario_manager'):\n            raise AccessError('Solo los managers pueden publicar productos')\n\n        self.write({'estado': 'publicado'})\n\n    def verificar_acceso_precio_coste(self):\n        \"\"\"Verificar si el usuario puede ver el precio de coste\"\"\"\n        puede_ver = self.env.user.has_group('base.group_user')\n        return puede_ver\n\n    @api.model\n    def create(self, vals):\n        \"\"\"A\u00f1adir l\u00f3gica seg\u00fan permisos\"\"\"\n        producto = super(Producto, self).create(vals)\n\n        # Si es admin, enviar notificaci\u00f3n especial\n        if self.env.user.has_group('base.group_system'):\n            producto._enviar_notificacion_admin()\n\n        return producto\n</code></pre>"},{"location":"7_7_seguridad/#verificar-permisos-de-modelo","title":"Verificar Permisos de Modelo","text":"<p>Verificar permisos CRUD</p> <pre><code>from odoo import models\nfrom odoo.exceptions import AccessError\n\nclass Pedido(models.Model):\n    _name = 'mi.pedido'\n\n    def verificar_puede_eliminar(self):\n        \"\"\"Verificar si el usuario puede eliminar\"\"\"\n        try:\n            self.check_access_rights('unlink')\n            self.check_access_rule('unlink')\n            return True\n        except AccessError:\n            return False\n\n    def action_eliminar_seguro(self):\n        \"\"\"Eliminar solo si tiene permisos\"\"\"\n        if not self.verificar_puede_eliminar():\n            raise AccessError(\n                'No tiene permisos para eliminar este pedido'\n            )\n\n        self.unlink()\n\n    @api.model\n    def verificar_permisos_escritura(self):\n        \"\"\"Verificar permiso de escritura en el modelo\"\"\"\n        try:\n            self.check_access_rights('write')\n            return True\n        except AccessError:\n            return False\n</code></pre>"},{"location":"7_7_seguridad/#bypass-de-seguridad-sudo","title":"Bypass de Seguridad (sudo)","text":"<p>En ocasiones necesitas realizar operaciones como superusuario:</p> <p>Usar sudo()</p> <pre><code>from odoo import models, api\n\nclass Producto(models.Model):\n    _name = 'mi.producto'\n\n    def actualizar_stock_sistema(self):\n        \"\"\"Actualizar stock como sistema (bypass seguridad)\"\"\"\n        # El usuario actual podr\u00eda no tener permisos de escritura\n        # pero esta operaci\u00f3n la hace el sistema\n        self.sudo().write({\n            'stock': self.stock - 1,\n            'fecha_ultimo_movimiento': fields.Datetime.now()\n        })\n\n    @api.model\n    def tarea_programada_limpieza(self):\n        \"\"\"Tarea cron que necesita acceso completo\"\"\"\n        # Buscar como superusuario (ve todos los registros)\n        productos_obsoletos = self.sudo().search([\n            ('activo', '=', False),\n            ('create_date', '&lt;', fields.Date.today() - timedelta(days=365))\n        ])\n\n        # Eliminar como superusuario\n        productos_obsoletos.unlink()\n</code></pre> <p>Precauci\u00f3n con sudo()</p> <ul> <li>Usa <code>sudo()</code> solo cuando sea absolutamente necesario</li> <li>Documenta claramente por qu\u00e9 lo necesitas</li> <li>No lo uses para bypass reglas de negocio</li> <li>Puede ser un riesgo de seguridad si se usa incorrectamente</li> </ul>"},{"location":"7_7_seguridad/#estructura-de-archivos-de-seguridad","title":"Estructura de Archivos de Seguridad","text":"<p>Organiza los archivos de seguridad de forma clara:</p> <pre><code>mi_modulo/\n\u251c\u2500\u2500 security/\n\u2502   \u251c\u2500\u2500 ir.model.access.csv          # Permisos de modelo\n\u2502   \u251c\u2500\u2500 security_groups.xml          # Definici\u00f3n de grupos\n\u2502   \u2514\u2500\u2500 security_rules.xml           # Record rules\n\u2514\u2500\u2500 __manifest__.py\n</code></pre> <p>En el manifest:</p> <pre><code>'data': [\n    'security/security_groups.xml',      # Primero los grupos\n    'security/ir.model.access.csv',      # Luego permisos de modelo\n    'security/security_rules.xml',       # Despu\u00e9s record rules\n    'views/producto_views.xml',\n    'views/menu.xml',\n],\n</code></pre> <p>Buenas Pr\u00e1cticas</p> <p>Permisos de modelo</p> <ul> <li>Define permisos para todos tus modelos (evita acceso no controlado)</li> <li>Usa el principio de m\u00ednimo privilegio (dar solo los permisos necesarios)</li> <li>Documenta la l\u00f3gica de permisos en comentarios del CSV</li> <li>Prueba los permisos con diferentes usuarios</li> </ul> <p>Grupos</p> <ul> <li>Crea jerarqu\u00edas claras (usuario \u2192 manager \u2192 admin)</li> <li>Usa nombres descriptivos y consistentes</li> <li>Agrupa permisos relacionados en el mismo grupo</li> <li>Documenta qu\u00e9 hace cada grupo</li> </ul> <p>Record rules</p> <ul> <li>Mant\u00e9n las reglas simples y comprensibles</li> <li>Usa reglas globales para restricciones generales</li> <li>Combina reglas por grupo para permisos espec\u00edficos</li> <li>Prueba exhaustivamente las combinaciones de reglas</li> </ul> <p>Seguridad de campos</p> <ul> <li>Restringe campos sensibles (costes, m\u00e1rgenes, datos personales)</li> <li>Usa groups en el modelo, no solo en vistas</li> <li>Documenta por qu\u00e9 ciertos campos est\u00e1n restringidos</li> <li>Verifica que campos computados respetan restricciones</li> </ul> <p>Testing</p> <ul> <li>Prueba con usuarios de diferentes grupos</li> <li>Verifica que las restricciones funcionan</li> <li>Comprueba casos l\u00edmite (usuarios sin grupos, etc.)</li> <li>Usa tests automatizados para seguridad cr\u00edtica</li> </ul>"},{"location":"8_2026_proyecto_odoo/","title":"Proyecto final Odoo. 'Dronify'","text":""},{"location":"8_2026_proyecto_odoo/#1-introduccion-y-contextualizacion-del-proyecto","title":"1. Introducci\u00f3n y Contextualizaci\u00f3n del Proyecto","text":"<p>Dronify es una empresa tecnol\u00f3gica puntera especializada en la log\u00edstica aeroespacial automatizada. Su modelo de negocio se centra en revolucionar el transporte de mercanc\u00edas mediante el uso de una flota de drones inteligentes, permitiendo realizar entregas r\u00e1pidas y seguras en entornos donde el transporte terrestre es ineficiente.</p> <p>La empresa opera como una plataforma integral de gesti\u00f3n que coordina cuatro pilares fundamentales:</p> <ul> <li>Gesti\u00f3n de Flota Avanzada: Controla el estado t\u00e9cnico, la capacidad de carga y los niveles de energ\u00eda de cada dron en tiempo real.</li> <li>Base de Datos de Capital Humano: Administra un registro de clientes (incluyendo servicios preferenciales para clientes VIP) y una red de pilotos profesionales sujetos a certificaciones legales estrictas.</li> <li>Procesamiento de Carga: Gestiona la recepci\u00f3n de paquetes, su pesaje y la trazabilidad de los mismos desde el almac\u00e9n hasta el destino final.</li> <li>Planificaci\u00f3n de Vuelos Inteligente: Coordina la asignaci\u00f3n de misiones de vuelo, realizando validaciones autom\u00e1ticas de seguridad que aseguran que el peso de la carga y la autonom\u00eda de la bater\u00eda sean \u00f3ptimos para cada trayecto.</li> </ul>"},{"location":"8_2026_proyecto_odoo/#2-modelado-de-datos-y-relaciones","title":"2. Modelado de Datos y Relaciones","text":"<p>El sistema se basa en cuatro modelos principales, incluyendo la extensi\u00f3n del modelo de contactos de Odoo para la gesti\u00f3n tanto de pilotos como de clientes.</p> <p>Entrega Obligatoria Previa: Diagrama Entidad-Relaci\u00f3n: Antes de comenzar el desarrollo, debes dise\u00f1ar y entregar un Diagrama Entidad-Relaci\u00f3n (E-R) que incluya:</p> <ul> <li>Los 4 modelos del sistema</li> <li>Todas las relaciones entre ellos, indicando su tipo (Many2one, One2many, Many2many)</li> <li>Los campos principales de cada modelo</li> <li>Las cardinalidades de las relaciones</li> </ul>"},{"location":"8_2026_proyecto_odoo/#contactos-pilotos-y-clientes-respartner","title":"Contactos: Pilotos y Clientes (<code>res.partner</code>)","text":"<p>Extiende el modelo de contactos de Odoo para gestionar tanto pilotos como clientes del servicio de drones. Se debes heredar el modelo <code>res.partner</code> UNA SOLA VEZ, a\u00f1adiendo todos los campos necesarios. Posteriormente se crear\u00e1n vistas separadas para gestionar pilotos y clientes de forma independiente.</p> <p>Campos a\u00f1adidos:</p> Campo Tipo Prop\u00f3sito <code>es_cliente</code> Boolean Identifica si el contacto es cliente <code>es_vip</code> Boolean Marca clientes premium (activa modo ahorro en vuelos) <code>es_piloto</code> Boolean Identifica si el contacto es piloto <code>licencia</code> Char N\u00famero de licencia del piloto (obligatorio solo para pilotos) <code>dron_autorizado_ids</code> Many2many Lista de drones que el piloto est\u00e1 certificado para operar <p>Consideraciones importantes:</p> <ul> <li>Un contacto puede ser piloto, cliente, o ambos simult\u00e1neamente</li> <li>La relaci\u00f3n Many2many con drones debe ser bidireccional</li> <li>El campo <code>licencia</code> debe ser obligatorio \u00fanicamente cuando <code>es_piloto=True</code></li> </ul>"},{"location":"8_2026_proyecto_odoo/#gestion-de-flota-drones-dronifydron","title":"Gesti\u00f3n de Flota: Drones (<code>dronify.dron</code>)","text":"<p>Representar los activos f\u00edsicos de la empresa y su estado operativo.</p> <p>Campos del modelo:</p> Campo Tipo Prop\u00f3sito Caracter\u00edsticas especiales <code>name</code> Char Nombre identificativo del dron <code>capacidad_max</code> Float Carga m\u00e1xima en kilogramos Obligatorio <code>bateria</code> Integer Nivel de carga actual (0-100%) Defecto: 100 <code>estado</code> Selection Estado operativo del dron Valores: <code>disponible</code> (por defecto), <code>vuelo</code>, <code>taller</code> <code>piloto_autorizado_ids</code> Many2many Pilotos certificados para este dron (relaci\u00f3n inversa)"},{"location":"8_2026_proyecto_odoo/#mercancia-paquetes-dronifypaquete","title":"Mercanc\u00eda: Paquetes (<code>dronify.paquete</code>)","text":"<p>Gestiona los paquetes a transportar y su trazabilidad.</p> Campo Tipo Prop\u00f3sito Caracter\u00edsticas especiales <code>codigo</code> Char Identificador \u00fanico Generado autom\u00e1ticamente, formato: <code>YYYYMMDDHHMMSS</code>. Solo lectura <code>name</code> Char Descripci\u00f3n del contenido Obligatorio <code>peso</code> Float Peso en kilogramos Obligatorio <code>cliente_id</code> Many2one Cliente que env\u00eda el paquete Solo contactos con <code>es_cliente=True</code> Obligatorio <code>vuelo_id</code> Many2one Vuelo asignado Se asigna desde el modelo Vuelo. Solo lectura <code>dron_relacionado</code> Char Nombre del dron del vuelo Campo Related, solo lectura Solo lectura"},{"location":"8_2026_proyecto_odoo/#operaciones-registro-de-vuelos-dronifyvuelo","title":"Operaciones: Registro de Vuelos (<code>dronify.vuelo</code>)","text":"<p>Coordina la planificaci\u00f3n y ejecuci\u00f3n de las misiones de entrega.</p> Campo Tipo Prop\u00f3sito Caracter\u00edsticas <code>codigo</code> Char C\u00f3digo \u00fanico del vuelo Generado autom\u00e1ticamente, formato: <code>YYMMDDHHMMSS</code> Solo lectura* <code>name</code> Char Denominaci\u00f3n de la misi\u00f3n Valor por defecto: <code>YYYYMMDD_Vuelo</code> Obligatorio <code>dron_id</code> Many2one Dron asignado Obligatorio <code>piloto_id</code> Many2one Piloto responsable Obligatorio, solo pilotos <code>paquetes_ids</code> One2many Paquetes a transportar - <code>preparado</code> Boolean Indica si el vuelo est\u00e1 listo para ejecutarse - <code>realizado</code> Boolean Indica si el vuelo se ha completado - <code>peso_total</code> Float Suma del peso de todos los paquetes asignados Campo computado <code>consumo_estimado</code> Float Porcentaje de bater\u00eda que consumir\u00e1 el vuelo Campo computado <p>Apuntes:</p> <ul> <li>Deben almacenarse en la base de datos (<code>store=True</code>)</li> <li>Deben recalcularse autom\u00e1ticamente cuando cambien los paquetes o sus datos</li> <li>El <code>consumo_estimado</code> se calcula mediante funci\u00f3n del fichero proporcinado <code>logica_dronify.py</code></li> <li>Los campos computados se pueden calcula con funciones <code>lambda</code></li> </ul>"},{"location":"8_2026_proyecto_odoo/#3-vistas-y-experiencia-de-usuario-ui","title":"3. Vistas y Experiencia de Usuario (UI)","text":"<p>Las vistas que se describen a continuaci\u00f3n deben ser definidas expl\u00edcitamente. Las vistas no mencionadas pueden generarse autom\u00e1ticamente por Odoo.</p>"},{"location":"8_2026_proyecto_odoo/#vistas-de-vuelos-dronifyvuelo","title":"Vistas de Vuelos (<code>dronify.vuelo</code>)","text":"<p>Vista de Listado</p> <ul> <li>Debe mostrar una tabla con la informaci\u00f3n esencial de cada vuelo.</li> <li>Campos: codigo, name, dron_id, piloto_id, peso_total, consumo_estimado, preparado, realizado</li> <li>Requisitos visuales:<ul> <li>El campo <code>consumo_estimado</code> debe mostrar el s\u00edmbolo '%'</li> <li>Los campos <code>preparado</code> y <code>realizado</code> deben usar el widget boolean y estar centrados</li> </ul> </li> </ul> <p>Vista de Formulario</p> <p>Centro de control operativo del vuelo.</p> <ul> <li> <p>Header (zona de botones):</p> <ul> <li>Tres botones que ejecuten las acciones: <code>action_preparar_vuelo</code>, <code>action_desbloquear</code>, <code>action_finalizar_vuelo</code></li> <li>El bot\u00f3n \"Preparar Vuelo\" debe tener estilo destacado</li> <li>Cada bot\u00f3n debe mostrarse u ocultarse seg\u00fan el estado actual del vuelo</li> <li>Utilizar IA para ver c\u00f3mo se define un <code>Button</code> y se asigna una funci\u00f3n </li> </ul> </li> <li> <p>Cuerpo del formulario:</p> <ul> <li>Organizar campos en grupos l\u00f3gicos: \"Planificaci\u00f3n\" y \"Estado y Control\"</li> <li>Los campos de planificaci\u00f3n (name, dron_id, piloto_id) deben bloquearse cuando el vuelo est\u00e9 preparado</li> <li>Los campos <code>preparado</code> y <code>realizado</code> deben ser siempre de solo lectura</li> </ul> </li> <li> <p>Pesta\u00f1a de Paquetes:</p> <ul> <li>Lista de paquetes asignados (bloqueada cuando el vuelo est\u00e9 preparado)</li> <li>Al pie de la lista, mostrar los totales: peso_total y consumo_estimado</li> </ul> </li> </ul>"},{"location":"8_2026_proyecto_odoo/#vistas-de-drones-dronifydron","title":"Vistas de Drones (<code>dronify.dron</code>)","text":"<p>Vista de Listado</p> <ul> <li>Monitoreo del estado de la flota.</li> <li>Campos: name, capacidad_max, bateria, estado</li> <li>Requisitos visuales especiales:<ul> <li>Las filas deben marcarse en rojo si la bater\u00eda est\u00e1 por debajo del 25%</li> <li>El campo <code>bateria</code> debe mostrarse con el widget progressbar</li> <li>El campo <code>estado</code> debe usar el widget badge con colores seg\u00fan el valor</li> </ul> </li> </ul>"},{"location":"8_2026_proyecto_odoo/#vistas-de-paquetes-dronifypaquete","title":"Vistas de Paquetes (<code>dronify.paquete</code>)","text":"<p>Vista de Listado</p> <ul> <li>Trazabilidad simple de la mercanc\u00eda. No se modifica nada y no hay vista de formulario</li> <li>Campos: codigo, name, peso, cliente_id, vuelo_id, dron_relacionado</li> </ul>"},{"location":"8_2026_proyecto_odoo/#vistas-de-pilotos-y-clientes-respartner","title":"Vistas de Pilotos y Clientes (<code>res.partner</code>)","text":"<p>Crear dos vistas independientes de formulario para el mismo modelo, una para clientes y otra para pilotos, diferenciados mediante filtros.</p>"},{"location":"8_2026_proyecto_odoo/#configuracion-para-pilotos","title":"Configuraci\u00f3n para Pilotos:","text":"<ul> <li>Mostrar solo contactos con <code>es_piloto=True</code></li> <li>Al crear nuevo piloto, marcar autom\u00e1ticamente <code>es_piloto=True</code></li> <li>Ocultar: campo \"Puesto de trabajo\", campo \"Website\", pesta\u00f1as \"Contactos\", \"Ventas y Compras\" e \"Internal Notes\"</li> <li>A\u00f1adir secci\u00f3n visible con los campos: es_piloto, es_cliente, licencia, dron_autorizado_ids, es_vip</li> <li>L\u00f3gica de visibilidad:<ul> <li><code>es_piloto</code>: readonly (siempre True)</li> <li><code>licencia</code>: visible siempre, obligatorio solo si es piloto</li> <li><code>dron_autorizado_ids</code>: usar widget many2many_tags</li> <li><code>es_cliente</code>: editable (puede ser piloto y cliente a la vez)</li> <li><code>es_vip</code>: visible solo si es cliente</li> </ul> </li> </ul>"},{"location":"8_2026_proyecto_odoo/#configuracion-para-clientes","title":"Configuraci\u00f3n para Clientes:","text":"<ul> <li>Mostrar solo contactos con <code>es_cliente=True</code></li> <li>Al crear nuevo cliente, marcar autom\u00e1ticamente <code>es_cliente=True</code></li> <li>Ocultar los mismos campos que en Pilotos</li> <li>Misma estructura que pilotos pero con l\u00f3gica inversa:<ul> <li><code>es_cliente</code>: readonly (siempre True)</li> <li><code>es_vip</code>: visible solo si es cliente</li> <li><code>es_piloto</code>: editable (puede ser cliente y piloto a la vez)</li> <li><code>licencia</code>: visible solo si es piloto, obligatorio en ese caso</li> </ul> </li> </ul>"},{"location":"8_2026_proyecto_odoo/#4-logica-de-funcionamiento-y-procesos","title":"4. L\u00f3gica de Funcionamiento y Procesos","text":""},{"location":"8_2026_proyecto_odoo/#modulo-proporcionado-logica_dronifypy","title":"M\u00f3dulo proporcionado <code>logica_dronify.py</code>","text":"<p>Para separar la l\u00f3gica de c\u00e1lculo en un m\u00f3dulo independiente y fomentar buenas pr\u00e1cticas de c\u00f3digo modular, se proporciona este m\u00f3dulo a modo de caja negra que contiene las siguientes funciones</p> <ul> <li> <p><code>calcular_consumo_vuelo(peso_total, es_vip)</code></p> <ul> <li>Calcular el porcentaje de bater\u00eda que consumir\u00e1 un vuelo.</li> <li>Devuelve gloat</li> <li>Se pasa el <code>peso_total</code> (float) y si <code>es_vip</code> (bool) el cliente para su c\u00e1lculo</li> </ul> </li> <li> <p><code>validar_estado_bateria(bateria_actual, consumo_estimado)</code></p> <ul> <li>Verificar si el dron tiene bater\u00eda suficiente para completar el vuelo. Fr</li> <li>Retorno Boolean</li> <li>Par\u00e1metros la <code>bateria_actual</code> y el <code>consumo_estimado</code>.</li> </ul> </li> </ul>"},{"location":"8_2026_proyecto_odoo/#campos-computados-y-automatismos","title":"Campos Computados y Automatismos","text":"<ul> <li> <p><code>peso_total</code></p> <ul> <li>Debe sumar autom\u00e1ticamente el peso de todos los paquetes vinculados</li> <li>Debe recalcularse cuando se a\u00f1adan, eliminen o modifiquen paquetes</li> <li>Debe almacenarse en la base de datos</li> </ul> </li> <li> <p><code>consumo_estimado</code></p> <ul> <li>Debe invocar la funci\u00f3n <code>calcular_consumo_vuelo()</code> del m\u00f3dulo externo</li> <li>Debe recalcularse cuando cambien los paquetes o sus clientes</li> <li>Debe verificar si alguno de los clientes de los paquetes es VIP</li> <li>Debe almacenarse en la base de datos</li> <li>Pista: Usa el m\u00e9todo <code>mapped()</code> para obtener la lista de clientes y verificar el campo <code>es_vip</code>.</li> </ul> </li> </ul>"},{"location":"8_2026_proyecto_odoo/#flujo-de-estados-y-validaciones","title":"Flujo de Estados y Validaciones","text":"<p>El ciclo de vida de un vuelo consta de tres estados:</p> <pre><code>[EDICI\u00d3N] \u2192 [PREPARADO] \u2192 [REALIZADO]\n</code></pre> <ul> <li>Estado 1: EDICI\u00d3N<ul> <li>Estado inicial al crear el vuelo</li> <li>Todos los campos son modificables</li> <li>El dron asociado permanece en estado 'disponible'</li> </ul> </li> <li>Estado 2: PREPARADO<ul> <li>Se activa mediante el bot\u00f3n \"Preparar Vuelo\"</li> <li>Los campos de planificaci\u00f3n quedan bloqueados</li> <li>El dron cambia a estado 'vuelo'</li> <li>Se puede volver a EDICI\u00d3N mediante el bot\u00f3n \"Modificar Datos\" (si no se ha realizado)</li> </ul> </li> <li>Estado 3: REALIZADO<ul> <li>Se activa mediante el bot\u00f3n \"Marcar como Realizado\"</li> <li>Es irreversible</li> <li>Se descuenta el consumo de la bater\u00eda del dron</li> <li>El dron vuelve a estado 'disponible'</li> </ul> </li> </ul> <p>Para conseguir la gesti\u00f3n de estos estados, se utilizar\u00e1n \u013aos <code>Buttons</code> indicados y se deben implementar tres m\u00e9todos que se ejecutar\u00e1n al pulsar los botones del formulario:</p> <ul> <li> <p><code>action_preparar_vuelo</code></p> <ul> <li>Validar que se cumplen todos los requisitos de seguridad (ver lista abajo)</li> <li>Si las validaciones pasan: marcar <code>preparado=True</code></li> <li>Cambiar el estado del dron a 'vuelo'</li> </ul> </li> <li> <p><code>action_desbloquear</code></p> <ul> <li>Verificar que el vuelo NO ha sido realizado (si lo est\u00e1, lanzar error)</li> <li>Marcar <code>preparado=False</code> para permitir edici\u00f3n</li> </ul> </li> <li> <p><code>action_finalizar_vuelo</code></p> <ul> <li>Verificar que el vuelo est\u00e1 preparado (si no, lanzar error)</li> <li>Marcar <code>realizado=True</code></li> <li>Descontar el <code>consumo_estimado</code> de la bater\u00eda actual del dron</li> <li>Devolver el dron a estado 'disponible'</li> </ul> </li> </ul> <p>Para que un vuelo pueda ser preparado, debe cumplir todas estas condiciones:</p> <ol> <li>Asignaciones b\u00e1sicas: Debe tener dron y piloto asignados</li> <li>Existencia de carga: Debe tener al menos un paquete asignado</li> <li>Capacidad de carga: El peso total no puede superar la capacidad m\u00e1xima del dron</li> <li>Disponibilidad del dron: El dron debe estar en estado 'disponible'</li> <li>Bater\u00eda suficiente: La bater\u00eda actual del dron debe ser mayor o igual al consumo estimado</li> <li>Certificaci\u00f3n del piloto: El piloto debe tener el dron asignado en su lista de \"Drones Autorizados\"</li> </ol> <p>Estas validaciones deben implementarse en un m\u00e9todo con el decorador <code>@api.constrains</code> que se ejecute cuando el campo <code>preparado</code> cambie a <code>True</code>.Si alguna validaci\u00f3n falla, debes lanzar una <code>ValidationError</code> con un mensaje descriptivo del problema.</p>"},{"location":"8_2026_proyecto_odoo/#5-entrega-y-evaluacion","title":"5. Entrega y Evaluaci\u00f3n","text":"<p>Aspectos Generales de la Aplicaci\u00f3n</p> <ul> <li>Nombre en <code>__manifest__.py</code>: Debe seguir el formato: \"Dronify - [Tu Nombre]\"</li> <li>Identificaci\u00f3n en pantalla: El nombre de la aplicaci\u00f3n debe coincidir con el del manifest</li> <li>Logotipo: La aplicaci\u00f3n debe tener un icono personalizado</li> <li>Calidad del c\u00f3digo: <ul> <li>C\u00f3digo ordenado y bien estructurado</li> <li>Comentarios que identifiquen las secciones principales</li> <li>Nombres de variables descriptivos</li> </ul> </li> </ul> <p>Control de Versiones (GitHub)</p> <ul> <li>Se deben realizar commits progresivos del desarrollo.</li> <li>M\u00ednimo 1 commit al finalizar cada sesi\u00f3n de clase</li> <li>Cada commit debe tener un mensaje descriptivo de los cambios realizados</li> <li>Se debe completar el fichero <code>README.md</code> a modo de diario con el trabajo realizado cada d\u00eda</li> </ul> <p>Entregas Obligatorias</p> <ul> <li>Primera Sesi\u00f3n:<ul> <li>Diagrama Entidad-Relaci\u00f3n*<ul> <li>Debe mostrar los 4 modelos y sus relaciones</li> <li>Debe incluir los campos principales de cada modelo</li> <li>Debe ser validado antes de continuar con el c\u00f3digo</li> </ul> </li> </ul> </li> <li>Durante el Desarrollo:<ul> <li>Commits diarios en GitHub</li> </ul> </li> </ul> <ul> <li>Entrega final Domingo 15 de Febrero de 2026</li> <li>Presentaci\u00f3n y defensa en clase: Martes 17 de Febrero de 2026</li> </ul>"}]}